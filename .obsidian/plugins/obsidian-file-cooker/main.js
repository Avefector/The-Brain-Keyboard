/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// node_modules/node-fetch/browser.js
var require_browser = __commonJS({
  "node_modules/node-fetch/browser.js"(exports, module2) {
    "use strict";
    var getGlobal = function() {
      if (typeof self !== "undefined") {
        return self;
      }
      if (typeof window !== "undefined") {
        return window;
      }
      if (typeof global2 !== "undefined") {
        return global2;
      }
      throw new Error("unable to locate global object");
    };
    var global2 = getGlobal();
    module2.exports = exports = global2.fetch;
    if (global2.fetch) {
      exports.default = global2.fetch.bind(global2);
    }
    exports.Headers = global2.Headers;
    exports.Request = global2.Request;
    exports.Response = global2.Response;
  }
});

// node_modules/obsidian-dataview/lib/index.js
var require_lib = __commonJS({
  "node_modules/obsidian-dataview/lib/index.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    require("obsidian");
    var commonjsGlobal = typeof globalThis !== "undefined" ? globalThis : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : {};
    var luxon = {};
    Object.defineProperty(luxon, "__esModule", { value: true });
    function _defineProperties(target, props) {
      for (var i = 0; i < props.length; i++) {
        var descriptor = props[i];
        descriptor.enumerable = descriptor.enumerable || false;
        descriptor.configurable = true;
        if ("value" in descriptor)
          descriptor.writable = true;
        Object.defineProperty(target, descriptor.key, descriptor);
      }
    }
    function _createClass(Constructor, protoProps, staticProps) {
      if (protoProps)
        _defineProperties(Constructor.prototype, protoProps);
      if (staticProps)
        _defineProperties(Constructor, staticProps);
      return Constructor;
    }
    function _extends() {
      _extends = Object.assign || function(target) {
        for (var i = 1; i < arguments.length; i++) {
          var source = arguments[i];
          for (var key in source) {
            if (Object.prototype.hasOwnProperty.call(source, key)) {
              target[key] = source[key];
            }
          }
        }
        return target;
      };
      return _extends.apply(this, arguments);
    }
    function _inheritsLoose(subClass, superClass) {
      subClass.prototype = Object.create(superClass.prototype);
      subClass.prototype.constructor = subClass;
      _setPrototypeOf(subClass, superClass);
    }
    function _getPrototypeOf(o) {
      _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf2(o2) {
        return o2.__proto__ || Object.getPrototypeOf(o2);
      };
      return _getPrototypeOf(o);
    }
    function _setPrototypeOf(o, p) {
      _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf2(o2, p2) {
        o2.__proto__ = p2;
        return o2;
      };
      return _setPrototypeOf(o, p);
    }
    function _isNativeReflectConstruct() {
      if (typeof Reflect === "undefined" || !Reflect.construct)
        return false;
      if (Reflect.construct.sham)
        return false;
      if (typeof Proxy === "function")
        return true;
      try {
        Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        }));
        return true;
      } catch (e) {
        return false;
      }
    }
    function _construct(Parent, args, Class) {
      if (_isNativeReflectConstruct()) {
        _construct = Reflect.construct;
      } else {
        _construct = function _construct2(Parent2, args2, Class2) {
          var a = [null];
          a.push.apply(a, args2);
          var Constructor = Function.bind.apply(Parent2, a);
          var instance = new Constructor();
          if (Class2)
            _setPrototypeOf(instance, Class2.prototype);
          return instance;
        };
      }
      return _construct.apply(null, arguments);
    }
    function _isNativeFunction(fn) {
      return Function.toString.call(fn).indexOf("[native code]") !== -1;
    }
    function _wrapNativeSuper(Class) {
      var _cache = typeof Map === "function" ? new Map() : void 0;
      _wrapNativeSuper = function _wrapNativeSuper2(Class2) {
        if (Class2 === null || !_isNativeFunction(Class2))
          return Class2;
        if (typeof Class2 !== "function") {
          throw new TypeError("Super expression must either be null or a function");
        }
        if (typeof _cache !== "undefined") {
          if (_cache.has(Class2))
            return _cache.get(Class2);
          _cache.set(Class2, Wrapper);
        }
        function Wrapper() {
          return _construct(Class2, arguments, _getPrototypeOf(this).constructor);
        }
        Wrapper.prototype = Object.create(Class2.prototype, {
          constructor: {
            value: Wrapper,
            enumerable: false,
            writable: true,
            configurable: true
          }
        });
        return _setPrototypeOf(Wrapper, Class2);
      };
      return _wrapNativeSuper(Class);
    }
    function _objectWithoutPropertiesLoose(source, excluded) {
      if (source == null)
        return {};
      var target = {};
      var sourceKeys = Object.keys(source);
      var key, i;
      for (i = 0; i < sourceKeys.length; i++) {
        key = sourceKeys[i];
        if (excluded.indexOf(key) >= 0)
          continue;
        target[key] = source[key];
      }
      return target;
    }
    function _unsupportedIterableToArray(o, minLen) {
      if (!o)
        return;
      if (typeof o === "string")
        return _arrayLikeToArray(o, minLen);
      var n2 = Object.prototype.toString.call(o).slice(8, -1);
      if (n2 === "Object" && o.constructor)
        n2 = o.constructor.name;
      if (n2 === "Map" || n2 === "Set")
        return Array.from(o);
      if (n2 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
        return _arrayLikeToArray(o, minLen);
    }
    function _arrayLikeToArray(arr, len) {
      if (len == null || len > arr.length)
        len = arr.length;
      for (var i = 0, arr2 = new Array(len); i < len; i++)
        arr2[i] = arr[i];
      return arr2;
    }
    function _createForOfIteratorHelperLoose(o, allowArrayLike) {
      var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
      if (it)
        return (it = it.call(o)).next.bind(it);
      if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
        if (it)
          o = it;
        var i = 0;
        return function() {
          if (i >= o.length)
            return {
              done: true
            };
          return {
            done: false,
            value: o[i++]
          };
        };
      }
      throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }
    var LuxonError = /* @__PURE__ */ function(_Error) {
      _inheritsLoose(LuxonError2, _Error);
      function LuxonError2() {
        return _Error.apply(this, arguments) || this;
      }
      return LuxonError2;
    }(/* @__PURE__ */ _wrapNativeSuper(Error));
    var InvalidDateTimeError = /* @__PURE__ */ function(_LuxonError) {
      _inheritsLoose(InvalidDateTimeError2, _LuxonError);
      function InvalidDateTimeError2(reason) {
        return _LuxonError.call(this, "Invalid DateTime: " + reason.toMessage()) || this;
      }
      return InvalidDateTimeError2;
    }(LuxonError);
    var InvalidIntervalError = /* @__PURE__ */ function(_LuxonError2) {
      _inheritsLoose(InvalidIntervalError2, _LuxonError2);
      function InvalidIntervalError2(reason) {
        return _LuxonError2.call(this, "Invalid Interval: " + reason.toMessage()) || this;
      }
      return InvalidIntervalError2;
    }(LuxonError);
    var InvalidDurationError = /* @__PURE__ */ function(_LuxonError3) {
      _inheritsLoose(InvalidDurationError2, _LuxonError3);
      function InvalidDurationError2(reason) {
        return _LuxonError3.call(this, "Invalid Duration: " + reason.toMessage()) || this;
      }
      return InvalidDurationError2;
    }(LuxonError);
    var ConflictingSpecificationError = /* @__PURE__ */ function(_LuxonError4) {
      _inheritsLoose(ConflictingSpecificationError2, _LuxonError4);
      function ConflictingSpecificationError2() {
        return _LuxonError4.apply(this, arguments) || this;
      }
      return ConflictingSpecificationError2;
    }(LuxonError);
    var InvalidUnitError = /* @__PURE__ */ function(_LuxonError5) {
      _inheritsLoose(InvalidUnitError2, _LuxonError5);
      function InvalidUnitError2(unit) {
        return _LuxonError5.call(this, "Invalid unit " + unit) || this;
      }
      return InvalidUnitError2;
    }(LuxonError);
    var InvalidArgumentError = /* @__PURE__ */ function(_LuxonError6) {
      _inheritsLoose(InvalidArgumentError2, _LuxonError6);
      function InvalidArgumentError2() {
        return _LuxonError6.apply(this, arguments) || this;
      }
      return InvalidArgumentError2;
    }(LuxonError);
    var ZoneIsAbstractError = /* @__PURE__ */ function(_LuxonError7) {
      _inheritsLoose(ZoneIsAbstractError2, _LuxonError7);
      function ZoneIsAbstractError2() {
        return _LuxonError7.call(this, "Zone is an abstract class") || this;
      }
      return ZoneIsAbstractError2;
    }(LuxonError);
    var n = "numeric";
    var s = "short";
    var l = "long";
    var DATE_SHORT = {
      year: n,
      month: n,
      day: n
    };
    var DATE_MED = {
      year: n,
      month: s,
      day: n
    };
    var DATE_MED_WITH_WEEKDAY = {
      year: n,
      month: s,
      day: n,
      weekday: s
    };
    var DATE_FULL = {
      year: n,
      month: l,
      day: n
    };
    var DATE_HUGE = {
      year: n,
      month: l,
      day: n,
      weekday: l
    };
    var TIME_SIMPLE = {
      hour: n,
      minute: n
    };
    var TIME_WITH_SECONDS = {
      hour: n,
      minute: n,
      second: n
    };
    var TIME_WITH_SHORT_OFFSET = {
      hour: n,
      minute: n,
      second: n,
      timeZoneName: s
    };
    var TIME_WITH_LONG_OFFSET = {
      hour: n,
      minute: n,
      second: n,
      timeZoneName: l
    };
    var TIME_24_SIMPLE = {
      hour: n,
      minute: n,
      hourCycle: "h23"
    };
    var TIME_24_WITH_SECONDS = {
      hour: n,
      minute: n,
      second: n,
      hourCycle: "h23"
    };
    var TIME_24_WITH_SHORT_OFFSET = {
      hour: n,
      minute: n,
      second: n,
      hourCycle: "h23",
      timeZoneName: s
    };
    var TIME_24_WITH_LONG_OFFSET = {
      hour: n,
      minute: n,
      second: n,
      hourCycle: "h23",
      timeZoneName: l
    };
    var DATETIME_SHORT = {
      year: n,
      month: n,
      day: n,
      hour: n,
      minute: n
    };
    var DATETIME_SHORT_WITH_SECONDS = {
      year: n,
      month: n,
      day: n,
      hour: n,
      minute: n,
      second: n
    };
    var DATETIME_MED = {
      year: n,
      month: s,
      day: n,
      hour: n,
      minute: n
    };
    var DATETIME_MED_WITH_SECONDS = {
      year: n,
      month: s,
      day: n,
      hour: n,
      minute: n,
      second: n
    };
    var DATETIME_MED_WITH_WEEKDAY = {
      year: n,
      month: s,
      day: n,
      weekday: s,
      hour: n,
      minute: n
    };
    var DATETIME_FULL = {
      year: n,
      month: l,
      day: n,
      hour: n,
      minute: n,
      timeZoneName: s
    };
    var DATETIME_FULL_WITH_SECONDS = {
      year: n,
      month: l,
      day: n,
      hour: n,
      minute: n,
      second: n,
      timeZoneName: s
    };
    var DATETIME_HUGE = {
      year: n,
      month: l,
      day: n,
      weekday: l,
      hour: n,
      minute: n,
      timeZoneName: l
    };
    var DATETIME_HUGE_WITH_SECONDS = {
      year: n,
      month: l,
      day: n,
      weekday: l,
      hour: n,
      minute: n,
      second: n,
      timeZoneName: l
    };
    function isUndefined(o) {
      return typeof o === "undefined";
    }
    function isNumber(o) {
      return typeof o === "number";
    }
    function isInteger(o) {
      return typeof o === "number" && o % 1 === 0;
    }
    function isString(o) {
      return typeof o === "string";
    }
    function isDate(o) {
      return Object.prototype.toString.call(o) === "[object Date]";
    }
    function hasRelative() {
      try {
        return typeof Intl !== "undefined" && !!Intl.RelativeTimeFormat;
      } catch (e) {
        return false;
      }
    }
    function maybeArray(thing) {
      return Array.isArray(thing) ? thing : [thing];
    }
    function bestBy(arr, by, compare) {
      if (arr.length === 0) {
        return void 0;
      }
      return arr.reduce(function(best, next) {
        var pair = [by(next), next];
        if (!best) {
          return pair;
        } else if (compare(best[0], pair[0]) === best[0]) {
          return best;
        } else {
          return pair;
        }
      }, null)[1];
    }
    function pick(obj, keys) {
      return keys.reduce(function(a, k) {
        a[k] = obj[k];
        return a;
      }, {});
    }
    function hasOwnProperty(obj, prop) {
      return Object.prototype.hasOwnProperty.call(obj, prop);
    }
    function integerBetween(thing, bottom, top) {
      return isInteger(thing) && thing >= bottom && thing <= top;
    }
    function floorMod(x, n2) {
      return x - n2 * Math.floor(x / n2);
    }
    function padStart(input, n2) {
      if (n2 === void 0) {
        n2 = 2;
      }
      var isNeg = input < 0;
      var padded;
      if (isNeg) {
        padded = "-" + ("" + -input).padStart(n2, "0");
      } else {
        padded = ("" + input).padStart(n2, "0");
      }
      return padded;
    }
    function parseInteger(string) {
      if (isUndefined(string) || string === null || string === "") {
        return void 0;
      } else {
        return parseInt(string, 10);
      }
    }
    function parseFloating(string) {
      if (isUndefined(string) || string === null || string === "") {
        return void 0;
      } else {
        return parseFloat(string);
      }
    }
    function parseMillis(fraction) {
      if (isUndefined(fraction) || fraction === null || fraction === "") {
        return void 0;
      } else {
        var f = parseFloat("0." + fraction) * 1e3;
        return Math.floor(f);
      }
    }
    function roundTo(number, digits, towardZero) {
      if (towardZero === void 0) {
        towardZero = false;
      }
      var factor = Math.pow(10, digits), rounder = towardZero ? Math.trunc : Math.round;
      return rounder(number * factor) / factor;
    }
    function isLeapYear(year) {
      return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);
    }
    function daysInYear(year) {
      return isLeapYear(year) ? 366 : 365;
    }
    function daysInMonth(year, month) {
      var modMonth = floorMod(month - 1, 12) + 1, modYear = year + (month - modMonth) / 12;
      if (modMonth === 2) {
        return isLeapYear(modYear) ? 29 : 28;
      } else {
        return [31, null, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][modMonth - 1];
      }
    }
    function objToLocalTS(obj) {
      var d = Date.UTC(obj.year, obj.month - 1, obj.day, obj.hour, obj.minute, obj.second, obj.millisecond);
      if (obj.year < 100 && obj.year >= 0) {
        d = new Date(d);
        d.setUTCFullYear(d.getUTCFullYear() - 1900);
      }
      return +d;
    }
    function weeksInWeekYear(weekYear) {
      var p1 = (weekYear + Math.floor(weekYear / 4) - Math.floor(weekYear / 100) + Math.floor(weekYear / 400)) % 7, last = weekYear - 1, p2 = (last + Math.floor(last / 4) - Math.floor(last / 100) + Math.floor(last / 400)) % 7;
      return p1 === 4 || p2 === 3 ? 53 : 52;
    }
    function untruncateYear(year) {
      if (year > 99) {
        return year;
      } else
        return year > 60 ? 1900 + year : 2e3 + year;
    }
    function parseZoneInfo(ts, offsetFormat, locale, timeZone) {
      if (timeZone === void 0) {
        timeZone = null;
      }
      var date = new Date(ts), intlOpts = {
        hourCycle: "h23",
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "2-digit",
        minute: "2-digit"
      };
      if (timeZone) {
        intlOpts.timeZone = timeZone;
      }
      var modified = _extends({
        timeZoneName: offsetFormat
      }, intlOpts);
      var parsed = new Intl.DateTimeFormat(locale, modified).formatToParts(date).find(function(m) {
        return m.type.toLowerCase() === "timezonename";
      });
      return parsed ? parsed.value : null;
    }
    function signedOffset(offHourStr, offMinuteStr) {
      var offHour = parseInt(offHourStr, 10);
      if (Number.isNaN(offHour)) {
        offHour = 0;
      }
      var offMin = parseInt(offMinuteStr, 10) || 0, offMinSigned = offHour < 0 || Object.is(offHour, -0) ? -offMin : offMin;
      return offHour * 60 + offMinSigned;
    }
    function asNumber(value) {
      var numericValue = Number(value);
      if (typeof value === "boolean" || value === "" || Number.isNaN(numericValue))
        throw new InvalidArgumentError("Invalid unit value " + value);
      return numericValue;
    }
    function normalizeObject(obj, normalizer) {
      var normalized = {};
      for (var u in obj) {
        if (hasOwnProperty(obj, u)) {
          var v = obj[u];
          if (v === void 0 || v === null)
            continue;
          normalized[normalizer(u)] = asNumber(v);
        }
      }
      return normalized;
    }
    function formatOffset(offset2, format) {
      var hours = Math.trunc(Math.abs(offset2 / 60)), minutes = Math.trunc(Math.abs(offset2 % 60)), sign = offset2 >= 0 ? "+" : "-";
      switch (format) {
        case "short":
          return "" + sign + padStart(hours, 2) + ":" + padStart(minutes, 2);
        case "narrow":
          return "" + sign + hours + (minutes > 0 ? ":" + minutes : "");
        case "techie":
          return "" + sign + padStart(hours, 2) + padStart(minutes, 2);
        default:
          throw new RangeError("Value format " + format + " is out of range for property format");
      }
    }
    function timeObject(obj) {
      return pick(obj, ["hour", "minute", "second", "millisecond"]);
    }
    var ianaRegex = /[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;
    var monthsLong = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    var monthsShort = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
    var monthsNarrow = ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"];
    function months(length) {
      switch (length) {
        case "narrow":
          return [].concat(monthsNarrow);
        case "short":
          return [].concat(monthsShort);
        case "long":
          return [].concat(monthsLong);
        case "numeric":
          return ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"];
        case "2-digit":
          return ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12"];
        default:
          return null;
      }
    }
    var weekdaysLong = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];
    var weekdaysShort = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];
    var weekdaysNarrow = ["M", "T", "W", "T", "F", "S", "S"];
    function weekdays(length) {
      switch (length) {
        case "narrow":
          return [].concat(weekdaysNarrow);
        case "short":
          return [].concat(weekdaysShort);
        case "long":
          return [].concat(weekdaysLong);
        case "numeric":
          return ["1", "2", "3", "4", "5", "6", "7"];
        default:
          return null;
      }
    }
    var meridiems = ["AM", "PM"];
    var erasLong = ["Before Christ", "Anno Domini"];
    var erasShort = ["BC", "AD"];
    var erasNarrow = ["B", "A"];
    function eras(length) {
      switch (length) {
        case "narrow":
          return [].concat(erasNarrow);
        case "short":
          return [].concat(erasShort);
        case "long":
          return [].concat(erasLong);
        default:
          return null;
      }
    }
    function meridiemForDateTime(dt) {
      return meridiems[dt.hour < 12 ? 0 : 1];
    }
    function weekdayForDateTime(dt, length) {
      return weekdays(length)[dt.weekday - 1];
    }
    function monthForDateTime(dt, length) {
      return months(length)[dt.month - 1];
    }
    function eraForDateTime(dt, length) {
      return eras(length)[dt.year < 0 ? 0 : 1];
    }
    function formatRelativeTime(unit, count, numeric, narrow) {
      if (numeric === void 0) {
        numeric = "always";
      }
      if (narrow === void 0) {
        narrow = false;
      }
      var units = {
        years: ["year", "yr."],
        quarters: ["quarter", "qtr."],
        months: ["month", "mo."],
        weeks: ["week", "wk."],
        days: ["day", "day", "days"],
        hours: ["hour", "hr."],
        minutes: ["minute", "min."],
        seconds: ["second", "sec."]
      };
      var lastable = ["hours", "minutes", "seconds"].indexOf(unit) === -1;
      if (numeric === "auto" && lastable) {
        var isDay = unit === "days";
        switch (count) {
          case 1:
            return isDay ? "tomorrow" : "next " + units[unit][0];
          case -1:
            return isDay ? "yesterday" : "last " + units[unit][0];
          case 0:
            return isDay ? "today" : "this " + units[unit][0];
        }
      }
      var isInPast = Object.is(count, -0) || count < 0, fmtValue = Math.abs(count), singular = fmtValue === 1, lilUnits = units[unit], fmtUnit = narrow ? singular ? lilUnits[1] : lilUnits[2] || lilUnits[1] : singular ? units[unit][0] : unit;
      return isInPast ? fmtValue + " " + fmtUnit + " ago" : "in " + fmtValue + " " + fmtUnit;
    }
    function stringifyTokens(splits, tokenToString) {
      var s2 = "";
      for (var _iterator = _createForOfIteratorHelperLoose(splits), _step; !(_step = _iterator()).done; ) {
        var token = _step.value;
        if (token.literal) {
          s2 += token.val;
        } else {
          s2 += tokenToString(token.val);
        }
      }
      return s2;
    }
    var _macroTokenToFormatOpts = {
      D: DATE_SHORT,
      DD: DATE_MED,
      DDD: DATE_FULL,
      DDDD: DATE_HUGE,
      t: TIME_SIMPLE,
      tt: TIME_WITH_SECONDS,
      ttt: TIME_WITH_SHORT_OFFSET,
      tttt: TIME_WITH_LONG_OFFSET,
      T: TIME_24_SIMPLE,
      TT: TIME_24_WITH_SECONDS,
      TTT: TIME_24_WITH_SHORT_OFFSET,
      TTTT: TIME_24_WITH_LONG_OFFSET,
      f: DATETIME_SHORT,
      ff: DATETIME_MED,
      fff: DATETIME_FULL,
      ffff: DATETIME_HUGE,
      F: DATETIME_SHORT_WITH_SECONDS,
      FF: DATETIME_MED_WITH_SECONDS,
      FFF: DATETIME_FULL_WITH_SECONDS,
      FFFF: DATETIME_HUGE_WITH_SECONDS
    };
    var Formatter = /* @__PURE__ */ function() {
      Formatter2.create = function create(locale, opts) {
        if (opts === void 0) {
          opts = {};
        }
        return new Formatter2(locale, opts);
      };
      Formatter2.parseFormat = function parseFormat(fmt) {
        var current = null, currentFull = "", bracketed = false;
        var splits = [];
        for (var i = 0; i < fmt.length; i++) {
          var c = fmt.charAt(i);
          if (c === "'") {
            if (currentFull.length > 0) {
              splits.push({
                literal: bracketed,
                val: currentFull
              });
            }
            current = null;
            currentFull = "";
            bracketed = !bracketed;
          } else if (bracketed) {
            currentFull += c;
          } else if (c === current) {
            currentFull += c;
          } else {
            if (currentFull.length > 0) {
              splits.push({
                literal: false,
                val: currentFull
              });
            }
            currentFull = c;
            current = c;
          }
        }
        if (currentFull.length > 0) {
          splits.push({
            literal: bracketed,
            val: currentFull
          });
        }
        return splits;
      };
      Formatter2.macroTokenToFormatOpts = function macroTokenToFormatOpts(token) {
        return _macroTokenToFormatOpts[token];
      };
      function Formatter2(locale, formatOpts) {
        this.opts = formatOpts;
        this.loc = locale;
        this.systemLoc = null;
      }
      var _proto = Formatter2.prototype;
      _proto.formatWithSystemDefault = function formatWithSystemDefault(dt, opts) {
        if (this.systemLoc === null) {
          this.systemLoc = this.loc.redefaultToSystem();
        }
        var df = this.systemLoc.dtFormatter(dt, _extends({}, this.opts, opts));
        return df.format();
      };
      _proto.formatDateTime = function formatDateTime(dt, opts) {
        if (opts === void 0) {
          opts = {};
        }
        var df = this.loc.dtFormatter(dt, _extends({}, this.opts, opts));
        return df.format();
      };
      _proto.formatDateTimeParts = function formatDateTimeParts(dt, opts) {
        if (opts === void 0) {
          opts = {};
        }
        var df = this.loc.dtFormatter(dt, _extends({}, this.opts, opts));
        return df.formatToParts();
      };
      _proto.resolvedOptions = function resolvedOptions(dt, opts) {
        if (opts === void 0) {
          opts = {};
        }
        var df = this.loc.dtFormatter(dt, _extends({}, this.opts, opts));
        return df.resolvedOptions();
      };
      _proto.num = function num(n2, p) {
        if (p === void 0) {
          p = 0;
        }
        if (this.opts.forceSimple) {
          return padStart(n2, p);
        }
        var opts = _extends({}, this.opts);
        if (p > 0) {
          opts.padTo = p;
        }
        return this.loc.numberFormatter(opts).format(n2);
      };
      _proto.formatDateTimeFromString = function formatDateTimeFromString(dt, fmt) {
        var _this = this;
        var knownEnglish = this.loc.listingMode() === "en", useDateTimeFormatter = this.loc.outputCalendar && this.loc.outputCalendar !== "gregory", string = function string2(opts, extract) {
          return _this.loc.extract(dt, opts, extract);
        }, formatOffset2 = function formatOffset3(opts) {
          if (dt.isOffsetFixed && dt.offset === 0 && opts.allowZ) {
            return "Z";
          }
          return dt.isValid ? dt.zone.formatOffset(dt.ts, opts.format) : "";
        }, meridiem = function meridiem2() {
          return knownEnglish ? meridiemForDateTime(dt) : string({
            hour: "numeric",
            hourCycle: "h12"
          }, "dayperiod");
        }, month = function month2(length, standalone) {
          return knownEnglish ? monthForDateTime(dt, length) : string(standalone ? {
            month: length
          } : {
            month: length,
            day: "numeric"
          }, "month");
        }, weekday = function weekday2(length, standalone) {
          return knownEnglish ? weekdayForDateTime(dt, length) : string(standalone ? {
            weekday: length
          } : {
            weekday: length,
            month: "long",
            day: "numeric"
          }, "weekday");
        }, maybeMacro = function maybeMacro2(token) {
          var formatOpts = Formatter2.macroTokenToFormatOpts(token);
          if (formatOpts) {
            return _this.formatWithSystemDefault(dt, formatOpts);
          } else {
            return token;
          }
        }, era = function era2(length) {
          return knownEnglish ? eraForDateTime(dt, length) : string({
            era: length
          }, "era");
        }, tokenToString = function tokenToString2(token) {
          switch (token) {
            case "S":
              return _this.num(dt.millisecond);
            case "u":
            case "SSS":
              return _this.num(dt.millisecond, 3);
            case "s":
              return _this.num(dt.second);
            case "ss":
              return _this.num(dt.second, 2);
            case "uu":
              return _this.num(Math.floor(dt.millisecond / 10), 2);
            case "uuu":
              return _this.num(Math.floor(dt.millisecond / 100));
            case "m":
              return _this.num(dt.minute);
            case "mm":
              return _this.num(dt.minute, 2);
            case "h":
              return _this.num(dt.hour % 12 === 0 ? 12 : dt.hour % 12);
            case "hh":
              return _this.num(dt.hour % 12 === 0 ? 12 : dt.hour % 12, 2);
            case "H":
              return _this.num(dt.hour);
            case "HH":
              return _this.num(dt.hour, 2);
            case "Z":
              return formatOffset2({
                format: "narrow",
                allowZ: _this.opts.allowZ
              });
            case "ZZ":
              return formatOffset2({
                format: "short",
                allowZ: _this.opts.allowZ
              });
            case "ZZZ":
              return formatOffset2({
                format: "techie",
                allowZ: _this.opts.allowZ
              });
            case "ZZZZ":
              return dt.zone.offsetName(dt.ts, {
                format: "short",
                locale: _this.loc.locale
              });
            case "ZZZZZ":
              return dt.zone.offsetName(dt.ts, {
                format: "long",
                locale: _this.loc.locale
              });
            case "z":
              return dt.zoneName;
            case "a":
              return meridiem();
            case "d":
              return useDateTimeFormatter ? string({
                day: "numeric"
              }, "day") : _this.num(dt.day);
            case "dd":
              return useDateTimeFormatter ? string({
                day: "2-digit"
              }, "day") : _this.num(dt.day, 2);
            case "c":
              return _this.num(dt.weekday);
            case "ccc":
              return weekday("short", true);
            case "cccc":
              return weekday("long", true);
            case "ccccc":
              return weekday("narrow", true);
            case "E":
              return _this.num(dt.weekday);
            case "EEE":
              return weekday("short", false);
            case "EEEE":
              return weekday("long", false);
            case "EEEEE":
              return weekday("narrow", false);
            case "L":
              return useDateTimeFormatter ? string({
                month: "numeric",
                day: "numeric"
              }, "month") : _this.num(dt.month);
            case "LL":
              return useDateTimeFormatter ? string({
                month: "2-digit",
                day: "numeric"
              }, "month") : _this.num(dt.month, 2);
            case "LLL":
              return month("short", true);
            case "LLLL":
              return month("long", true);
            case "LLLLL":
              return month("narrow", true);
            case "M":
              return useDateTimeFormatter ? string({
                month: "numeric"
              }, "month") : _this.num(dt.month);
            case "MM":
              return useDateTimeFormatter ? string({
                month: "2-digit"
              }, "month") : _this.num(dt.month, 2);
            case "MMM":
              return month("short", false);
            case "MMMM":
              return month("long", false);
            case "MMMMM":
              return month("narrow", false);
            case "y":
              return useDateTimeFormatter ? string({
                year: "numeric"
              }, "year") : _this.num(dt.year);
            case "yy":
              return useDateTimeFormatter ? string({
                year: "2-digit"
              }, "year") : _this.num(dt.year.toString().slice(-2), 2);
            case "yyyy":
              return useDateTimeFormatter ? string({
                year: "numeric"
              }, "year") : _this.num(dt.year, 4);
            case "yyyyyy":
              return useDateTimeFormatter ? string({
                year: "numeric"
              }, "year") : _this.num(dt.year, 6);
            case "G":
              return era("short");
            case "GG":
              return era("long");
            case "GGGGG":
              return era("narrow");
            case "kk":
              return _this.num(dt.weekYear.toString().slice(-2), 2);
            case "kkkk":
              return _this.num(dt.weekYear, 4);
            case "W":
              return _this.num(dt.weekNumber);
            case "WW":
              return _this.num(dt.weekNumber, 2);
            case "o":
              return _this.num(dt.ordinal);
            case "ooo":
              return _this.num(dt.ordinal, 3);
            case "q":
              return _this.num(dt.quarter);
            case "qq":
              return _this.num(dt.quarter, 2);
            case "X":
              return _this.num(Math.floor(dt.ts / 1e3));
            case "x":
              return _this.num(dt.ts);
            default:
              return maybeMacro(token);
          }
        };
        return stringifyTokens(Formatter2.parseFormat(fmt), tokenToString);
      };
      _proto.formatDurationFromString = function formatDurationFromString(dur, fmt) {
        var _this2 = this;
        var tokenToField = function tokenToField2(token) {
          switch (token[0]) {
            case "S":
              return "millisecond";
            case "s":
              return "second";
            case "m":
              return "minute";
            case "h":
              return "hour";
            case "d":
              return "day";
            case "w":
              return "week";
            case "M":
              return "month";
            case "y":
              return "year";
            default:
              return null;
          }
        }, tokenToString = function tokenToString2(lildur) {
          return function(token) {
            var mapped = tokenToField(token);
            if (mapped) {
              return _this2.num(lildur.get(mapped), token.length);
            } else {
              return token;
            }
          };
        }, tokens = Formatter2.parseFormat(fmt), realTokens = tokens.reduce(function(found, _ref) {
          var literal = _ref.literal, val = _ref.val;
          return literal ? found : found.concat(val);
        }, []), collapsed = dur.shiftTo.apply(dur, realTokens.map(tokenToField).filter(function(t) {
          return t;
        }));
        return stringifyTokens(tokens, tokenToString(collapsed));
      };
      return Formatter2;
    }();
    var Invalid = /* @__PURE__ */ function() {
      function Invalid2(reason, explanation) {
        this.reason = reason;
        this.explanation = explanation;
      }
      var _proto = Invalid2.prototype;
      _proto.toMessage = function toMessage() {
        if (this.explanation) {
          return this.reason + ": " + this.explanation;
        } else {
          return this.reason;
        }
      };
      return Invalid2;
    }();
    var Zone = /* @__PURE__ */ function() {
      function Zone2() {
      }
      var _proto = Zone2.prototype;
      _proto.offsetName = function offsetName(ts, opts) {
        throw new ZoneIsAbstractError();
      };
      _proto.formatOffset = function formatOffset2(ts, format) {
        throw new ZoneIsAbstractError();
      };
      _proto.offset = function offset2(ts) {
        throw new ZoneIsAbstractError();
      };
      _proto.equals = function equals(otherZone) {
        throw new ZoneIsAbstractError();
      };
      _createClass(Zone2, [{
        key: "type",
        get: function get() {
          throw new ZoneIsAbstractError();
        }
      }, {
        key: "name",
        get: function get() {
          throw new ZoneIsAbstractError();
        }
      }, {
        key: "ianaName",
        get: function get() {
          return this.name;
        }
      }, {
        key: "isUniversal",
        get: function get() {
          throw new ZoneIsAbstractError();
        }
      }, {
        key: "isValid",
        get: function get() {
          throw new ZoneIsAbstractError();
        }
      }]);
      return Zone2;
    }();
    var singleton$1 = null;
    var SystemZone = /* @__PURE__ */ function(_Zone) {
      _inheritsLoose(SystemZone2, _Zone);
      function SystemZone2() {
        return _Zone.apply(this, arguments) || this;
      }
      var _proto = SystemZone2.prototype;
      _proto.offsetName = function offsetName(ts, _ref) {
        var format = _ref.format, locale = _ref.locale;
        return parseZoneInfo(ts, format, locale);
      };
      _proto.formatOffset = function formatOffset$1(ts, format) {
        return formatOffset(this.offset(ts), format);
      };
      _proto.offset = function offset2(ts) {
        return -new Date(ts).getTimezoneOffset();
      };
      _proto.equals = function equals(otherZone) {
        return otherZone.type === "system";
      };
      _createClass(SystemZone2, [{
        key: "type",
        get: function get() {
          return "system";
        }
      }, {
        key: "name",
        get: function get() {
          return new Intl.DateTimeFormat().resolvedOptions().timeZone;
        }
      }, {
        key: "isUniversal",
        get: function get() {
          return false;
        }
      }, {
        key: "isValid",
        get: function get() {
          return true;
        }
      }], [{
        key: "instance",
        get: function get() {
          if (singleton$1 === null) {
            singleton$1 = new SystemZone2();
          }
          return singleton$1;
        }
      }]);
      return SystemZone2;
    }(Zone);
    var dtfCache = {};
    function makeDTF(zone) {
      if (!dtfCache[zone]) {
        dtfCache[zone] = new Intl.DateTimeFormat("en-US", {
          hour12: false,
          timeZone: zone,
          year: "numeric",
          month: "2-digit",
          day: "2-digit",
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
          era: "short"
        });
      }
      return dtfCache[zone];
    }
    var typeToPos = {
      year: 0,
      month: 1,
      day: 2,
      era: 3,
      hour: 4,
      minute: 5,
      second: 6
    };
    function hackyOffset(dtf, date) {
      var formatted = dtf.format(date).replace(/\u200E/g, ""), parsed = /(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(formatted), fMonth = parsed[1], fDay = parsed[2], fYear = parsed[3], fadOrBc = parsed[4], fHour = parsed[5], fMinute = parsed[6], fSecond = parsed[7];
      return [fYear, fMonth, fDay, fadOrBc, fHour, fMinute, fSecond];
    }
    function partsOffset(dtf, date) {
      var formatted = dtf.formatToParts(date);
      var filled = [];
      for (var i = 0; i < formatted.length; i++) {
        var _formatted$i = formatted[i], type = _formatted$i.type, value = _formatted$i.value;
        var pos = typeToPos[type];
        if (type === "era") {
          filled[pos] = value;
        } else if (!isUndefined(pos)) {
          filled[pos] = parseInt(value, 10);
        }
      }
      return filled;
    }
    var ianaZoneCache = {};
    var IANAZone = /* @__PURE__ */ function(_Zone) {
      _inheritsLoose(IANAZone2, _Zone);
      IANAZone2.create = function create(name) {
        if (!ianaZoneCache[name]) {
          ianaZoneCache[name] = new IANAZone2(name);
        }
        return ianaZoneCache[name];
      };
      IANAZone2.resetCache = function resetCache() {
        ianaZoneCache = {};
        dtfCache = {};
      };
      IANAZone2.isValidSpecifier = function isValidSpecifier(s2) {
        return this.isValidZone(s2);
      };
      IANAZone2.isValidZone = function isValidZone(zone) {
        if (!zone) {
          return false;
        }
        try {
          new Intl.DateTimeFormat("en-US", {
            timeZone: zone
          }).format();
          return true;
        } catch (e) {
          return false;
        }
      };
      function IANAZone2(name) {
        var _this;
        _this = _Zone.call(this) || this;
        _this.zoneName = name;
        _this.valid = IANAZone2.isValidZone(name);
        return _this;
      }
      var _proto = IANAZone2.prototype;
      _proto.offsetName = function offsetName(ts, _ref) {
        var format = _ref.format, locale = _ref.locale;
        return parseZoneInfo(ts, format, locale, this.name);
      };
      _proto.formatOffset = function formatOffset$1(ts, format) {
        return formatOffset(this.offset(ts), format);
      };
      _proto.offset = function offset2(ts) {
        var date = new Date(ts);
        if (isNaN(date))
          return NaN;
        var dtf = makeDTF(this.name);
        var _ref2 = dtf.formatToParts ? partsOffset(dtf, date) : hackyOffset(dtf, date), year = _ref2[0], month = _ref2[1], day = _ref2[2], adOrBc = _ref2[3], hour = _ref2[4], minute = _ref2[5], second = _ref2[6];
        if (adOrBc === "BC") {
          year = -Math.abs(year) + 1;
        }
        var adjustedHour = hour === 24 ? 0 : hour;
        var asUTC = objToLocalTS({
          year,
          month,
          day,
          hour: adjustedHour,
          minute,
          second,
          millisecond: 0
        });
        var asTS = +date;
        var over = asTS % 1e3;
        asTS -= over >= 0 ? over : 1e3 + over;
        return (asUTC - asTS) / (60 * 1e3);
      };
      _proto.equals = function equals(otherZone) {
        return otherZone.type === "iana" && otherZone.name === this.name;
      };
      _createClass(IANAZone2, [{
        key: "type",
        get: function get() {
          return "iana";
        }
      }, {
        key: "name",
        get: function get() {
          return this.zoneName;
        }
      }, {
        key: "isUniversal",
        get: function get() {
          return false;
        }
      }, {
        key: "isValid",
        get: function get() {
          return this.valid;
        }
      }]);
      return IANAZone2;
    }(Zone);
    var singleton = null;
    var FixedOffsetZone = /* @__PURE__ */ function(_Zone) {
      _inheritsLoose(FixedOffsetZone2, _Zone);
      FixedOffsetZone2.instance = function instance(offset2) {
        return offset2 === 0 ? FixedOffsetZone2.utcInstance : new FixedOffsetZone2(offset2);
      };
      FixedOffsetZone2.parseSpecifier = function parseSpecifier(s2) {
        if (s2) {
          var r = s2.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);
          if (r) {
            return new FixedOffsetZone2(signedOffset(r[1], r[2]));
          }
        }
        return null;
      };
      function FixedOffsetZone2(offset2) {
        var _this;
        _this = _Zone.call(this) || this;
        _this.fixed = offset2;
        return _this;
      }
      var _proto = FixedOffsetZone2.prototype;
      _proto.offsetName = function offsetName() {
        return this.name;
      };
      _proto.formatOffset = function formatOffset$1(ts, format) {
        return formatOffset(this.fixed, format);
      };
      _proto.offset = function offset2() {
        return this.fixed;
      };
      _proto.equals = function equals(otherZone) {
        return otherZone.type === "fixed" && otherZone.fixed === this.fixed;
      };
      _createClass(FixedOffsetZone2, [{
        key: "type",
        get: function get() {
          return "fixed";
        }
      }, {
        key: "name",
        get: function get() {
          return this.fixed === 0 ? "UTC" : "UTC" + formatOffset(this.fixed, "narrow");
        }
      }, {
        key: "ianaName",
        get: function get() {
          if (this.fixed === 0) {
            return "Etc/UTC";
          } else {
            return "Etc/GMT" + formatOffset(-this.fixed, "narrow");
          }
        }
      }, {
        key: "isUniversal",
        get: function get() {
          return true;
        }
      }, {
        key: "isValid",
        get: function get() {
          return true;
        }
      }], [{
        key: "utcInstance",
        get: function get() {
          if (singleton === null) {
            singleton = new FixedOffsetZone2(0);
          }
          return singleton;
        }
      }]);
      return FixedOffsetZone2;
    }(Zone);
    var InvalidZone = /* @__PURE__ */ function(_Zone) {
      _inheritsLoose(InvalidZone2, _Zone);
      function InvalidZone2(zoneName) {
        var _this;
        _this = _Zone.call(this) || this;
        _this.zoneName = zoneName;
        return _this;
      }
      var _proto = InvalidZone2.prototype;
      _proto.offsetName = function offsetName() {
        return null;
      };
      _proto.formatOffset = function formatOffset2() {
        return "";
      };
      _proto.offset = function offset2() {
        return NaN;
      };
      _proto.equals = function equals() {
        return false;
      };
      _createClass(InvalidZone2, [{
        key: "type",
        get: function get() {
          return "invalid";
        }
      }, {
        key: "name",
        get: function get() {
          return this.zoneName;
        }
      }, {
        key: "isUniversal",
        get: function get() {
          return false;
        }
      }, {
        key: "isValid",
        get: function get() {
          return false;
        }
      }]);
      return InvalidZone2;
    }(Zone);
    function normalizeZone(input, defaultZone2) {
      if (isUndefined(input) || input === null) {
        return defaultZone2;
      } else if (input instanceof Zone) {
        return input;
      } else if (isString(input)) {
        var lowered = input.toLowerCase();
        if (lowered === "local" || lowered === "system")
          return defaultZone2;
        else if (lowered === "utc" || lowered === "gmt")
          return FixedOffsetZone.utcInstance;
        else
          return FixedOffsetZone.parseSpecifier(lowered) || IANAZone.create(input);
      } else if (isNumber(input)) {
        return FixedOffsetZone.instance(input);
      } else if (typeof input === "object" && input.offset && typeof input.offset === "number") {
        return input;
      } else {
        return new InvalidZone(input);
      }
    }
    var now = function now2() {
      return Date.now();
    };
    var defaultZone = "system";
    var defaultLocale = null;
    var defaultNumberingSystem = null;
    var defaultOutputCalendar = null;
    var throwOnInvalid;
    var Settings = /* @__PURE__ */ function() {
      function Settings2() {
      }
      Settings2.resetCaches = function resetCaches() {
        Locale.resetCache();
        IANAZone.resetCache();
      };
      _createClass(Settings2, null, [{
        key: "now",
        get: function get() {
          return now;
        },
        set: function set(n2) {
          now = n2;
        }
      }, {
        key: "defaultZone",
        get: function get() {
          return normalizeZone(defaultZone, SystemZone.instance);
        },
        set: function set(zone) {
          defaultZone = zone;
        }
      }, {
        key: "defaultLocale",
        get: function get() {
          return defaultLocale;
        },
        set: function set(locale) {
          defaultLocale = locale;
        }
      }, {
        key: "defaultNumberingSystem",
        get: function get() {
          return defaultNumberingSystem;
        },
        set: function set(numberingSystem) {
          defaultNumberingSystem = numberingSystem;
        }
      }, {
        key: "defaultOutputCalendar",
        get: function get() {
          return defaultOutputCalendar;
        },
        set: function set(outputCalendar) {
          defaultOutputCalendar = outputCalendar;
        }
      }, {
        key: "throwOnInvalid",
        get: function get() {
          return throwOnInvalid;
        },
        set: function set(t) {
          throwOnInvalid = t;
        }
      }]);
      return Settings2;
    }();
    var _excluded = ["base"];
    var _excluded2 = ["padTo", "floor"];
    var intlLFCache = {};
    function getCachedLF(locString, opts) {
      if (opts === void 0) {
        opts = {};
      }
      var key = JSON.stringify([locString, opts]);
      var dtf = intlLFCache[key];
      if (!dtf) {
        dtf = new Intl.ListFormat(locString, opts);
        intlLFCache[key] = dtf;
      }
      return dtf;
    }
    var intlDTCache = {};
    function getCachedDTF(locString, opts) {
      if (opts === void 0) {
        opts = {};
      }
      var key = JSON.stringify([locString, opts]);
      var dtf = intlDTCache[key];
      if (!dtf) {
        dtf = new Intl.DateTimeFormat(locString, opts);
        intlDTCache[key] = dtf;
      }
      return dtf;
    }
    var intlNumCache = {};
    function getCachedINF(locString, opts) {
      if (opts === void 0) {
        opts = {};
      }
      var key = JSON.stringify([locString, opts]);
      var inf = intlNumCache[key];
      if (!inf) {
        inf = new Intl.NumberFormat(locString, opts);
        intlNumCache[key] = inf;
      }
      return inf;
    }
    var intlRelCache = {};
    function getCachedRTF(locString, opts) {
      if (opts === void 0) {
        opts = {};
      }
      var _opts = opts;
      _opts.base;
      var cacheKeyOpts = _objectWithoutPropertiesLoose(_opts, _excluded);
      var key = JSON.stringify([locString, cacheKeyOpts]);
      var inf = intlRelCache[key];
      if (!inf) {
        inf = new Intl.RelativeTimeFormat(locString, opts);
        intlRelCache[key] = inf;
      }
      return inf;
    }
    var sysLocaleCache = null;
    function systemLocale() {
      if (sysLocaleCache) {
        return sysLocaleCache;
      } else {
        sysLocaleCache = new Intl.DateTimeFormat().resolvedOptions().locale;
        return sysLocaleCache;
      }
    }
    function parseLocaleString(localeStr) {
      var uIndex = localeStr.indexOf("-u-");
      if (uIndex === -1) {
        return [localeStr];
      } else {
        var options;
        var smaller = localeStr.substring(0, uIndex);
        try {
          options = getCachedDTF(localeStr).resolvedOptions();
        } catch (e) {
          options = getCachedDTF(smaller).resolvedOptions();
        }
        var _options = options, numberingSystem = _options.numberingSystem, calendar = _options.calendar;
        return [smaller, numberingSystem, calendar];
      }
    }
    function intlConfigString(localeStr, numberingSystem, outputCalendar) {
      if (outputCalendar || numberingSystem) {
        localeStr += "-u";
        if (outputCalendar) {
          localeStr += "-ca-" + outputCalendar;
        }
        if (numberingSystem) {
          localeStr += "-nu-" + numberingSystem;
        }
        return localeStr;
      } else {
        return localeStr;
      }
    }
    function mapMonths(f) {
      var ms = [];
      for (var i = 1; i <= 12; i++) {
        var dt = DateTime.utc(2016, i, 1);
        ms.push(f(dt));
      }
      return ms;
    }
    function mapWeekdays(f) {
      var ms = [];
      for (var i = 1; i <= 7; i++) {
        var dt = DateTime.utc(2016, 11, 13 + i);
        ms.push(f(dt));
      }
      return ms;
    }
    function listStuff(loc, length, defaultOK, englishFn, intlFn) {
      var mode = loc.listingMode(defaultOK);
      if (mode === "error") {
        return null;
      } else if (mode === "en") {
        return englishFn(length);
      } else {
        return intlFn(length);
      }
    }
    function supportsFastNumbers(loc) {
      if (loc.numberingSystem && loc.numberingSystem !== "latn") {
        return false;
      } else {
        return loc.numberingSystem === "latn" || !loc.locale || loc.locale.startsWith("en") || new Intl.DateTimeFormat(loc.intl).resolvedOptions().numberingSystem === "latn";
      }
    }
    var PolyNumberFormatter = /* @__PURE__ */ function() {
      function PolyNumberFormatter2(intl, forceSimple, opts) {
        this.padTo = opts.padTo || 0;
        this.floor = opts.floor || false;
        opts.padTo;
        opts.floor;
        var otherOpts = _objectWithoutPropertiesLoose(opts, _excluded2);
        if (!forceSimple || Object.keys(otherOpts).length > 0) {
          var intlOpts = _extends({
            useGrouping: false
          }, opts);
          if (opts.padTo > 0)
            intlOpts.minimumIntegerDigits = opts.padTo;
          this.inf = getCachedINF(intl, intlOpts);
        }
      }
      var _proto = PolyNumberFormatter2.prototype;
      _proto.format = function format(i) {
        if (this.inf) {
          var fixed = this.floor ? Math.floor(i) : i;
          return this.inf.format(fixed);
        } else {
          var _fixed = this.floor ? Math.floor(i) : roundTo(i, 3);
          return padStart(_fixed, this.padTo);
        }
      };
      return PolyNumberFormatter2;
    }();
    var PolyDateFormatter = /* @__PURE__ */ function() {
      function PolyDateFormatter2(dt, intl, opts) {
        this.opts = opts;
        var z;
        if (dt.zone.isUniversal) {
          var gmtOffset = -1 * (dt.offset / 60);
          var offsetZ = gmtOffset >= 0 ? "Etc/GMT+" + gmtOffset : "Etc/GMT" + gmtOffset;
          if (dt.offset !== 0 && IANAZone.create(offsetZ).valid) {
            z = offsetZ;
            this.dt = dt;
          } else {
            z = "UTC";
            if (opts.timeZoneName) {
              this.dt = dt;
            } else {
              this.dt = dt.offset === 0 ? dt : DateTime.fromMillis(dt.ts + dt.offset * 60 * 1e3);
            }
          }
        } else if (dt.zone.type === "system") {
          this.dt = dt;
        } else {
          this.dt = dt;
          z = dt.zone.name;
        }
        var intlOpts = _extends({}, this.opts);
        if (z) {
          intlOpts.timeZone = z;
        }
        this.dtf = getCachedDTF(intl, intlOpts);
      }
      var _proto2 = PolyDateFormatter2.prototype;
      _proto2.format = function format() {
        return this.dtf.format(this.dt.toJSDate());
      };
      _proto2.formatToParts = function formatToParts() {
        return this.dtf.formatToParts(this.dt.toJSDate());
      };
      _proto2.resolvedOptions = function resolvedOptions() {
        return this.dtf.resolvedOptions();
      };
      return PolyDateFormatter2;
    }();
    var PolyRelFormatter = /* @__PURE__ */ function() {
      function PolyRelFormatter2(intl, isEnglish, opts) {
        this.opts = _extends({
          style: "long"
        }, opts);
        if (!isEnglish && hasRelative()) {
          this.rtf = getCachedRTF(intl, opts);
        }
      }
      var _proto3 = PolyRelFormatter2.prototype;
      _proto3.format = function format(count, unit) {
        if (this.rtf) {
          return this.rtf.format(count, unit);
        } else {
          return formatRelativeTime(unit, count, this.opts.numeric, this.opts.style !== "long");
        }
      };
      _proto3.formatToParts = function formatToParts(count, unit) {
        if (this.rtf) {
          return this.rtf.formatToParts(count, unit);
        } else {
          return [];
        }
      };
      return PolyRelFormatter2;
    }();
    var Locale = /* @__PURE__ */ function() {
      Locale2.fromOpts = function fromOpts(opts) {
        return Locale2.create(opts.locale, opts.numberingSystem, opts.outputCalendar, opts.defaultToEN);
      };
      Locale2.create = function create(locale, numberingSystem, outputCalendar, defaultToEN) {
        if (defaultToEN === void 0) {
          defaultToEN = false;
        }
        var specifiedLocale = locale || Settings.defaultLocale;
        var localeR = specifiedLocale || (defaultToEN ? "en-US" : systemLocale());
        var numberingSystemR = numberingSystem || Settings.defaultNumberingSystem;
        var outputCalendarR = outputCalendar || Settings.defaultOutputCalendar;
        return new Locale2(localeR, numberingSystemR, outputCalendarR, specifiedLocale);
      };
      Locale2.resetCache = function resetCache() {
        sysLocaleCache = null;
        intlDTCache = {};
        intlNumCache = {};
        intlRelCache = {};
      };
      Locale2.fromObject = function fromObject(_temp) {
        var _ref = _temp === void 0 ? {} : _temp, locale = _ref.locale, numberingSystem = _ref.numberingSystem, outputCalendar = _ref.outputCalendar;
        return Locale2.create(locale, numberingSystem, outputCalendar);
      };
      function Locale2(locale, numbering, outputCalendar, specifiedLocale) {
        var _parseLocaleString = parseLocaleString(locale), parsedLocale = _parseLocaleString[0], parsedNumberingSystem = _parseLocaleString[1], parsedOutputCalendar = _parseLocaleString[2];
        this.locale = parsedLocale;
        this.numberingSystem = numbering || parsedNumberingSystem || null;
        this.outputCalendar = outputCalendar || parsedOutputCalendar || null;
        this.intl = intlConfigString(this.locale, this.numberingSystem, this.outputCalendar);
        this.weekdaysCache = {
          format: {},
          standalone: {}
        };
        this.monthsCache = {
          format: {},
          standalone: {}
        };
        this.meridiemCache = null;
        this.eraCache = {};
        this.specifiedLocale = specifiedLocale;
        this.fastNumbersCached = null;
      }
      var _proto4 = Locale2.prototype;
      _proto4.listingMode = function listingMode() {
        var isActuallyEn = this.isEnglish();
        var hasNoWeirdness = (this.numberingSystem === null || this.numberingSystem === "latn") && (this.outputCalendar === null || this.outputCalendar === "gregory");
        return isActuallyEn && hasNoWeirdness ? "en" : "intl";
      };
      _proto4.clone = function clone2(alts) {
        if (!alts || Object.getOwnPropertyNames(alts).length === 0) {
          return this;
        } else {
          return Locale2.create(alts.locale || this.specifiedLocale, alts.numberingSystem || this.numberingSystem, alts.outputCalendar || this.outputCalendar, alts.defaultToEN || false);
        }
      };
      _proto4.redefaultToEN = function redefaultToEN(alts) {
        if (alts === void 0) {
          alts = {};
        }
        return this.clone(_extends({}, alts, {
          defaultToEN: true
        }));
      };
      _proto4.redefaultToSystem = function redefaultToSystem(alts) {
        if (alts === void 0) {
          alts = {};
        }
        return this.clone(_extends({}, alts, {
          defaultToEN: false
        }));
      };
      _proto4.months = function months$1(length, format, defaultOK) {
        var _this = this;
        if (format === void 0) {
          format = false;
        }
        if (defaultOK === void 0) {
          defaultOK = true;
        }
        return listStuff(this, length, defaultOK, months, function() {
          var intl = format ? {
            month: length,
            day: "numeric"
          } : {
            month: length
          }, formatStr2 = format ? "format" : "standalone";
          if (!_this.monthsCache[formatStr2][length]) {
            _this.monthsCache[formatStr2][length] = mapMonths(function(dt) {
              return _this.extract(dt, intl, "month");
            });
          }
          return _this.monthsCache[formatStr2][length];
        });
      };
      _proto4.weekdays = function weekdays$1(length, format, defaultOK) {
        var _this2 = this;
        if (format === void 0) {
          format = false;
        }
        if (defaultOK === void 0) {
          defaultOK = true;
        }
        return listStuff(this, length, defaultOK, weekdays, function() {
          var intl = format ? {
            weekday: length,
            year: "numeric",
            month: "long",
            day: "numeric"
          } : {
            weekday: length
          }, formatStr2 = format ? "format" : "standalone";
          if (!_this2.weekdaysCache[formatStr2][length]) {
            _this2.weekdaysCache[formatStr2][length] = mapWeekdays(function(dt) {
              return _this2.extract(dt, intl, "weekday");
            });
          }
          return _this2.weekdaysCache[formatStr2][length];
        });
      };
      _proto4.meridiems = function meridiems$1(defaultOK) {
        var _this3 = this;
        if (defaultOK === void 0) {
          defaultOK = true;
        }
        return listStuff(this, void 0, defaultOK, function() {
          return meridiems;
        }, function() {
          if (!_this3.meridiemCache) {
            var intl = {
              hour: "numeric",
              hourCycle: "h12"
            };
            _this3.meridiemCache = [DateTime.utc(2016, 11, 13, 9), DateTime.utc(2016, 11, 13, 19)].map(function(dt) {
              return _this3.extract(dt, intl, "dayperiod");
            });
          }
          return _this3.meridiemCache;
        });
      };
      _proto4.eras = function eras$1(length, defaultOK) {
        var _this4 = this;
        if (defaultOK === void 0) {
          defaultOK = true;
        }
        return listStuff(this, length, defaultOK, eras, function() {
          var intl = {
            era: length
          };
          if (!_this4.eraCache[length]) {
            _this4.eraCache[length] = [DateTime.utc(-40, 1, 1), DateTime.utc(2017, 1, 1)].map(function(dt) {
              return _this4.extract(dt, intl, "era");
            });
          }
          return _this4.eraCache[length];
        });
      };
      _proto4.extract = function extract(dt, intlOpts, field) {
        var df = this.dtFormatter(dt, intlOpts), results = df.formatToParts(), matching = results.find(function(m) {
          return m.type.toLowerCase() === field;
        });
        return matching ? matching.value : null;
      };
      _proto4.numberFormatter = function numberFormatter(opts) {
        if (opts === void 0) {
          opts = {};
        }
        return new PolyNumberFormatter(this.intl, opts.forceSimple || this.fastNumbers, opts);
      };
      _proto4.dtFormatter = function dtFormatter(dt, intlOpts) {
        if (intlOpts === void 0) {
          intlOpts = {};
        }
        return new PolyDateFormatter(dt, this.intl, intlOpts);
      };
      _proto4.relFormatter = function relFormatter(opts) {
        if (opts === void 0) {
          opts = {};
        }
        return new PolyRelFormatter(this.intl, this.isEnglish(), opts);
      };
      _proto4.listFormatter = function listFormatter(opts) {
        if (opts === void 0) {
          opts = {};
        }
        return getCachedLF(this.intl, opts);
      };
      _proto4.isEnglish = function isEnglish() {
        return this.locale === "en" || this.locale.toLowerCase() === "en-us" || new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us");
      };
      _proto4.equals = function equals(other) {
        return this.locale === other.locale && this.numberingSystem === other.numberingSystem && this.outputCalendar === other.outputCalendar;
      };
      _createClass(Locale2, [{
        key: "fastNumbers",
        get: function get() {
          if (this.fastNumbersCached == null) {
            this.fastNumbersCached = supportsFastNumbers(this);
          }
          return this.fastNumbersCached;
        }
      }]);
      return Locale2;
    }();
    function combineRegexes() {
      for (var _len = arguments.length, regexes = new Array(_len), _key = 0; _key < _len; _key++) {
        regexes[_key] = arguments[_key];
      }
      var full = regexes.reduce(function(f, r) {
        return f + r.source;
      }, "");
      return RegExp("^" + full + "$");
    }
    function combineExtractors() {
      for (var _len2 = arguments.length, extractors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        extractors[_key2] = arguments[_key2];
      }
      return function(m) {
        return extractors.reduce(function(_ref, ex) {
          var mergedVals = _ref[0], mergedZone = _ref[1], cursor = _ref[2];
          var _ex = ex(m, cursor), val = _ex[0], zone = _ex[1], next = _ex[2];
          return [_extends({}, mergedVals, val), zone || mergedZone, next];
        }, [{}, null, 1]).slice(0, 2);
      };
    }
    function parse(s2) {
      if (s2 == null) {
        return [null, null];
      }
      for (var _len3 = arguments.length, patterns = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
        patterns[_key3 - 1] = arguments[_key3];
      }
      for (var _i = 0, _patterns = patterns; _i < _patterns.length; _i++) {
        var _patterns$_i = _patterns[_i], regex = _patterns$_i[0], extractor = _patterns$_i[1];
        var m = regex.exec(s2);
        if (m) {
          return extractor(m);
        }
      }
      return [null, null];
    }
    function simpleParse() {
      for (var _len4 = arguments.length, keys = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
        keys[_key4] = arguments[_key4];
      }
      return function(match2, cursor) {
        var ret = {};
        var i;
        for (i = 0; i < keys.length; i++) {
          ret[keys[i]] = parseInteger(match2[cursor + i]);
        }
        return [ret, null, cursor + i];
      };
    }
    var offsetRegex = /(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/;
    var isoExtendedZone = "(?:" + offsetRegex.source + "?(?:\\[(" + ianaRegex.source + ")\\])?)?";
    var isoTimeBaseRegex = /(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/;
    var isoTimeRegex = RegExp("" + isoTimeBaseRegex.source + isoExtendedZone);
    var isoTimeExtensionRegex = RegExp("(?:T" + isoTimeRegex.source + ")?");
    var isoYmdRegex = /([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/;
    var isoWeekRegex = /(\d{4})-?W(\d\d)(?:-?(\d))?/;
    var isoOrdinalRegex = /(\d{4})-?(\d{3})/;
    var extractISOWeekData = simpleParse("weekYear", "weekNumber", "weekDay");
    var extractISOOrdinalData = simpleParse("year", "ordinal");
    var sqlYmdRegex = /(\d{4})-(\d\d)-(\d\d)/;
    var sqlTimeRegex = RegExp(isoTimeBaseRegex.source + " ?(?:" + offsetRegex.source + "|(" + ianaRegex.source + "))?");
    var sqlTimeExtensionRegex = RegExp("(?: " + sqlTimeRegex.source + ")?");
    function int(match2, pos, fallback) {
      var m = match2[pos];
      return isUndefined(m) ? fallback : parseInteger(m);
    }
    function extractISOYmd(match2, cursor) {
      var item = {
        year: int(match2, cursor),
        month: int(match2, cursor + 1, 1),
        day: int(match2, cursor + 2, 1)
      };
      return [item, null, cursor + 3];
    }
    function extractISOTime(match2, cursor) {
      var item = {
        hours: int(match2, cursor, 0),
        minutes: int(match2, cursor + 1, 0),
        seconds: int(match2, cursor + 2, 0),
        milliseconds: parseMillis(match2[cursor + 3])
      };
      return [item, null, cursor + 4];
    }
    function extractISOOffset(match2, cursor) {
      var local = !match2[cursor] && !match2[cursor + 1], fullOffset = signedOffset(match2[cursor + 1], match2[cursor + 2]), zone = local ? null : FixedOffsetZone.instance(fullOffset);
      return [{}, zone, cursor + 3];
    }
    function extractIANAZone(match2, cursor) {
      var zone = match2[cursor] ? IANAZone.create(match2[cursor]) : null;
      return [{}, zone, cursor + 1];
    }
    var isoTimeOnly = RegExp("^T?" + isoTimeBaseRegex.source + "$");
    var isoDuration = /^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;
    function extractISODuration(match2) {
      var s2 = match2[0], yearStr = match2[1], monthStr = match2[2], weekStr = match2[3], dayStr = match2[4], hourStr = match2[5], minuteStr = match2[6], secondStr = match2[7], millisecondsStr = match2[8];
      var hasNegativePrefix = s2[0] === "-";
      var negativeSeconds = secondStr && secondStr[0] === "-";
      var maybeNegate = function maybeNegate2(num, force) {
        if (force === void 0) {
          force = false;
        }
        return num !== void 0 && (force || num && hasNegativePrefix) ? -num : num;
      };
      return [{
        years: maybeNegate(parseFloating(yearStr)),
        months: maybeNegate(parseFloating(monthStr)),
        weeks: maybeNegate(parseFloating(weekStr)),
        days: maybeNegate(parseFloating(dayStr)),
        hours: maybeNegate(parseFloating(hourStr)),
        minutes: maybeNegate(parseFloating(minuteStr)),
        seconds: maybeNegate(parseFloating(secondStr), secondStr === "-0"),
        milliseconds: maybeNegate(parseMillis(millisecondsStr), negativeSeconds)
      }];
    }
    var obsOffsets = {
      GMT: 0,
      EDT: -4 * 60,
      EST: -5 * 60,
      CDT: -5 * 60,
      CST: -6 * 60,
      MDT: -6 * 60,
      MST: -7 * 60,
      PDT: -7 * 60,
      PST: -8 * 60
    };
    function fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr) {
      var result = {
        year: yearStr.length === 2 ? untruncateYear(parseInteger(yearStr)) : parseInteger(yearStr),
        month: monthsShort.indexOf(monthStr) + 1,
        day: parseInteger(dayStr),
        hour: parseInteger(hourStr),
        minute: parseInteger(minuteStr)
      };
      if (secondStr)
        result.second = parseInteger(secondStr);
      if (weekdayStr) {
        result.weekday = weekdayStr.length > 3 ? weekdaysLong.indexOf(weekdayStr) + 1 : weekdaysShort.indexOf(weekdayStr) + 1;
      }
      return result;
    }
    var rfc2822 = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;
    function extractRFC2822(match2) {
      var weekdayStr = match2[1], dayStr = match2[2], monthStr = match2[3], yearStr = match2[4], hourStr = match2[5], minuteStr = match2[6], secondStr = match2[7], obsOffset = match2[8], milOffset = match2[9], offHourStr = match2[10], offMinuteStr = match2[11], result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);
      var offset2;
      if (obsOffset) {
        offset2 = obsOffsets[obsOffset];
      } else if (milOffset) {
        offset2 = 0;
      } else {
        offset2 = signedOffset(offHourStr, offMinuteStr);
      }
      return [result, new FixedOffsetZone(offset2)];
    }
    function preprocessRFC2822(s2) {
      return s2.replace(/\([^)]*\)|[\n\t]/g, " ").replace(/(\s\s+)/g, " ").trim();
    }
    var rfc1123 = /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/;
    var rfc850 = /^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/;
    var ascii = /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;
    function extractRFC1123Or850(match2) {
      var weekdayStr = match2[1], dayStr = match2[2], monthStr = match2[3], yearStr = match2[4], hourStr = match2[5], minuteStr = match2[6], secondStr = match2[7], result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);
      return [result, FixedOffsetZone.utcInstance];
    }
    function extractASCII(match2) {
      var weekdayStr = match2[1], monthStr = match2[2], dayStr = match2[3], hourStr = match2[4], minuteStr = match2[5], secondStr = match2[6], yearStr = match2[7], result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);
      return [result, FixedOffsetZone.utcInstance];
    }
    var isoYmdWithTimeExtensionRegex = combineRegexes(isoYmdRegex, isoTimeExtensionRegex);
    var isoWeekWithTimeExtensionRegex = combineRegexes(isoWeekRegex, isoTimeExtensionRegex);
    var isoOrdinalWithTimeExtensionRegex = combineRegexes(isoOrdinalRegex, isoTimeExtensionRegex);
    var isoTimeCombinedRegex = combineRegexes(isoTimeRegex);
    var extractISOYmdTimeAndOffset = combineExtractors(extractISOYmd, extractISOTime, extractISOOffset, extractIANAZone);
    var extractISOWeekTimeAndOffset = combineExtractors(extractISOWeekData, extractISOTime, extractISOOffset, extractIANAZone);
    var extractISOOrdinalDateAndTime = combineExtractors(extractISOOrdinalData, extractISOTime, extractISOOffset, extractIANAZone);
    var extractISOTimeAndOffset = combineExtractors(extractISOTime, extractISOOffset, extractIANAZone);
    function parseISODate(s2) {
      return parse(s2, [isoYmdWithTimeExtensionRegex, extractISOYmdTimeAndOffset], [isoWeekWithTimeExtensionRegex, extractISOWeekTimeAndOffset], [isoOrdinalWithTimeExtensionRegex, extractISOOrdinalDateAndTime], [isoTimeCombinedRegex, extractISOTimeAndOffset]);
    }
    function parseRFC2822Date(s2) {
      return parse(preprocessRFC2822(s2), [rfc2822, extractRFC2822]);
    }
    function parseHTTPDate(s2) {
      return parse(s2, [rfc1123, extractRFC1123Or850], [rfc850, extractRFC1123Or850], [ascii, extractASCII]);
    }
    function parseISODuration(s2) {
      return parse(s2, [isoDuration, extractISODuration]);
    }
    var extractISOTimeOnly = combineExtractors(extractISOTime);
    function parseISOTimeOnly(s2) {
      return parse(s2, [isoTimeOnly, extractISOTimeOnly]);
    }
    var sqlYmdWithTimeExtensionRegex = combineRegexes(sqlYmdRegex, sqlTimeExtensionRegex);
    var sqlTimeCombinedRegex = combineRegexes(sqlTimeRegex);
    var extractISOTimeOffsetAndIANAZone = combineExtractors(extractISOTime, extractISOOffset, extractIANAZone);
    function parseSQL(s2) {
      return parse(s2, [sqlYmdWithTimeExtensionRegex, extractISOYmdTimeAndOffset], [sqlTimeCombinedRegex, extractISOTimeOffsetAndIANAZone]);
    }
    var INVALID$2 = "Invalid Duration";
    var lowOrderMatrix = {
      weeks: {
        days: 7,
        hours: 7 * 24,
        minutes: 7 * 24 * 60,
        seconds: 7 * 24 * 60 * 60,
        milliseconds: 7 * 24 * 60 * 60 * 1e3
      },
      days: {
        hours: 24,
        minutes: 24 * 60,
        seconds: 24 * 60 * 60,
        milliseconds: 24 * 60 * 60 * 1e3
      },
      hours: {
        minutes: 60,
        seconds: 60 * 60,
        milliseconds: 60 * 60 * 1e3
      },
      minutes: {
        seconds: 60,
        milliseconds: 60 * 1e3
      },
      seconds: {
        milliseconds: 1e3
      }
    };
    var casualMatrix = _extends({
      years: {
        quarters: 4,
        months: 12,
        weeks: 52,
        days: 365,
        hours: 365 * 24,
        minutes: 365 * 24 * 60,
        seconds: 365 * 24 * 60 * 60,
        milliseconds: 365 * 24 * 60 * 60 * 1e3
      },
      quarters: {
        months: 3,
        weeks: 13,
        days: 91,
        hours: 91 * 24,
        minutes: 91 * 24 * 60,
        seconds: 91 * 24 * 60 * 60,
        milliseconds: 91 * 24 * 60 * 60 * 1e3
      },
      months: {
        weeks: 4,
        days: 30,
        hours: 30 * 24,
        minutes: 30 * 24 * 60,
        seconds: 30 * 24 * 60 * 60,
        milliseconds: 30 * 24 * 60 * 60 * 1e3
      }
    }, lowOrderMatrix);
    var daysInYearAccurate = 146097 / 400;
    var daysInMonthAccurate = 146097 / 4800;
    var accurateMatrix = _extends({
      years: {
        quarters: 4,
        months: 12,
        weeks: daysInYearAccurate / 7,
        days: daysInYearAccurate,
        hours: daysInYearAccurate * 24,
        minutes: daysInYearAccurate * 24 * 60,
        seconds: daysInYearAccurate * 24 * 60 * 60,
        milliseconds: daysInYearAccurate * 24 * 60 * 60 * 1e3
      },
      quarters: {
        months: 3,
        weeks: daysInYearAccurate / 28,
        days: daysInYearAccurate / 4,
        hours: daysInYearAccurate * 24 / 4,
        minutes: daysInYearAccurate * 24 * 60 / 4,
        seconds: daysInYearAccurate * 24 * 60 * 60 / 4,
        milliseconds: daysInYearAccurate * 24 * 60 * 60 * 1e3 / 4
      },
      months: {
        weeks: daysInMonthAccurate / 7,
        days: daysInMonthAccurate,
        hours: daysInMonthAccurate * 24,
        minutes: daysInMonthAccurate * 24 * 60,
        seconds: daysInMonthAccurate * 24 * 60 * 60,
        milliseconds: daysInMonthAccurate * 24 * 60 * 60 * 1e3
      }
    }, lowOrderMatrix);
    var orderedUnits$1 = ["years", "quarters", "months", "weeks", "days", "hours", "minutes", "seconds", "milliseconds"];
    var reverseUnits = orderedUnits$1.slice(0).reverse();
    function clone$1(dur, alts, clear) {
      if (clear === void 0) {
        clear = false;
      }
      var conf = {
        values: clear ? alts.values : _extends({}, dur.values, alts.values || {}),
        loc: dur.loc.clone(alts.loc),
        conversionAccuracy: alts.conversionAccuracy || dur.conversionAccuracy
      };
      return new Duration(conf);
    }
    function antiTrunc(n2) {
      return n2 < 0 ? Math.floor(n2) : Math.ceil(n2);
    }
    function convert(matrix, fromMap, fromUnit, toMap, toUnit) {
      var conv = matrix[toUnit][fromUnit], raw = fromMap[fromUnit] / conv, sameSign = Math.sign(raw) === Math.sign(toMap[toUnit]), added = !sameSign && toMap[toUnit] !== 0 && Math.abs(raw) <= 1 ? antiTrunc(raw) : Math.trunc(raw);
      toMap[toUnit] += added;
      fromMap[fromUnit] -= added * conv;
    }
    function normalizeValues(matrix, vals) {
      reverseUnits.reduce(function(previous, current) {
        if (!isUndefined(vals[current])) {
          if (previous) {
            convert(matrix, vals, previous, vals, current);
          }
          return current;
        } else {
          return previous;
        }
      }, null);
    }
    var Duration = /* @__PURE__ */ function() {
      function Duration2(config) {
        var accurate = config.conversionAccuracy === "longterm" || false;
        this.values = config.values;
        this.loc = config.loc || Locale.create();
        this.conversionAccuracy = accurate ? "longterm" : "casual";
        this.invalid = config.invalid || null;
        this.matrix = accurate ? accurateMatrix : casualMatrix;
        this.isLuxonDuration = true;
      }
      Duration2.fromMillis = function fromMillis(count, opts) {
        return Duration2.fromObject({
          milliseconds: count
        }, opts);
      };
      Duration2.fromObject = function fromObject(obj, opts) {
        if (opts === void 0) {
          opts = {};
        }
        if (obj == null || typeof obj !== "object") {
          throw new InvalidArgumentError("Duration.fromObject: argument expected to be an object, got " + (obj === null ? "null" : typeof obj));
        }
        return new Duration2({
          values: normalizeObject(obj, Duration2.normalizeUnit),
          loc: Locale.fromObject(opts),
          conversionAccuracy: opts.conversionAccuracy
        });
      };
      Duration2.fromDurationLike = function fromDurationLike(durationLike) {
        if (isNumber(durationLike)) {
          return Duration2.fromMillis(durationLike);
        } else if (Duration2.isDuration(durationLike)) {
          return durationLike;
        } else if (typeof durationLike === "object") {
          return Duration2.fromObject(durationLike);
        } else {
          throw new InvalidArgumentError("Unknown duration argument " + durationLike + " of type " + typeof durationLike);
        }
      };
      Duration2.fromISO = function fromISO(text, opts) {
        var _parseISODuration = parseISODuration(text), parsed = _parseISODuration[0];
        if (parsed) {
          return Duration2.fromObject(parsed, opts);
        } else {
          return Duration2.invalid("unparsable", 'the input "' + text + `" can't be parsed as ISO 8601`);
        }
      };
      Duration2.fromISOTime = function fromISOTime(text, opts) {
        var _parseISOTimeOnly = parseISOTimeOnly(text), parsed = _parseISOTimeOnly[0];
        if (parsed) {
          return Duration2.fromObject(parsed, opts);
        } else {
          return Duration2.invalid("unparsable", 'the input "' + text + `" can't be parsed as ISO 8601`);
        }
      };
      Duration2.invalid = function invalid(reason, explanation) {
        if (explanation === void 0) {
          explanation = null;
        }
        if (!reason) {
          throw new InvalidArgumentError("need to specify a reason the Duration is invalid");
        }
        var invalid2 = reason instanceof Invalid ? reason : new Invalid(reason, explanation);
        if (Settings.throwOnInvalid) {
          throw new InvalidDurationError(invalid2);
        } else {
          return new Duration2({
            invalid: invalid2
          });
        }
      };
      Duration2.normalizeUnit = function normalizeUnit2(unit) {
        var normalized = {
          year: "years",
          years: "years",
          quarter: "quarters",
          quarters: "quarters",
          month: "months",
          months: "months",
          week: "weeks",
          weeks: "weeks",
          day: "days",
          days: "days",
          hour: "hours",
          hours: "hours",
          minute: "minutes",
          minutes: "minutes",
          second: "seconds",
          seconds: "seconds",
          millisecond: "milliseconds",
          milliseconds: "milliseconds"
        }[unit ? unit.toLowerCase() : unit];
        if (!normalized)
          throw new InvalidUnitError(unit);
        return normalized;
      };
      Duration2.isDuration = function isDuration(o) {
        return o && o.isLuxonDuration || false;
      };
      var _proto = Duration2.prototype;
      _proto.toFormat = function toFormat(fmt, opts) {
        if (opts === void 0) {
          opts = {};
        }
        var fmtOpts = _extends({}, opts, {
          floor: opts.round !== false && opts.floor !== false
        });
        return this.isValid ? Formatter.create(this.loc, fmtOpts).formatDurationFromString(this, fmt) : INVALID$2;
      };
      _proto.toHuman = function toHuman(opts) {
        var _this = this;
        if (opts === void 0) {
          opts = {};
        }
        var l2 = orderedUnits$1.map(function(unit) {
          var val = _this.values[unit];
          if (isUndefined(val)) {
            return null;
          }
          return _this.loc.numberFormatter(_extends({
            style: "unit",
            unitDisplay: "long"
          }, opts, {
            unit: unit.slice(0, -1)
          })).format(val);
        }).filter(function(n2) {
          return n2;
        });
        return this.loc.listFormatter(_extends({
          type: "conjunction",
          style: opts.listStyle || "narrow"
        }, opts)).format(l2);
      };
      _proto.toObject = function toObject() {
        if (!this.isValid)
          return {};
        return _extends({}, this.values);
      };
      _proto.toISO = function toISO() {
        if (!this.isValid)
          return null;
        var s2 = "P";
        if (this.years !== 0)
          s2 += this.years + "Y";
        if (this.months !== 0 || this.quarters !== 0)
          s2 += this.months + this.quarters * 3 + "M";
        if (this.weeks !== 0)
          s2 += this.weeks + "W";
        if (this.days !== 0)
          s2 += this.days + "D";
        if (this.hours !== 0 || this.minutes !== 0 || this.seconds !== 0 || this.milliseconds !== 0)
          s2 += "T";
        if (this.hours !== 0)
          s2 += this.hours + "H";
        if (this.minutes !== 0)
          s2 += this.minutes + "M";
        if (this.seconds !== 0 || this.milliseconds !== 0)
          s2 += roundTo(this.seconds + this.milliseconds / 1e3, 3) + "S";
        if (s2 === "P")
          s2 += "T0S";
        return s2;
      };
      _proto.toISOTime = function toISOTime(opts) {
        if (opts === void 0) {
          opts = {};
        }
        if (!this.isValid)
          return null;
        var millis = this.toMillis();
        if (millis < 0 || millis >= 864e5)
          return null;
        opts = _extends({
          suppressMilliseconds: false,
          suppressSeconds: false,
          includePrefix: false,
          format: "extended"
        }, opts);
        var value = this.shiftTo("hours", "minutes", "seconds", "milliseconds");
        var fmt = opts.format === "basic" ? "hhmm" : "hh:mm";
        if (!opts.suppressSeconds || value.seconds !== 0 || value.milliseconds !== 0) {
          fmt += opts.format === "basic" ? "ss" : ":ss";
          if (!opts.suppressMilliseconds || value.milliseconds !== 0) {
            fmt += ".SSS";
          }
        }
        var str = value.toFormat(fmt);
        if (opts.includePrefix) {
          str = "T" + str;
        }
        return str;
      };
      _proto.toJSON = function toJSON() {
        return this.toISO();
      };
      _proto.toString = function toString() {
        return this.toISO();
      };
      _proto.toMillis = function toMillis() {
        return this.as("milliseconds");
      };
      _proto.valueOf = function valueOf() {
        return this.toMillis();
      };
      _proto.plus = function plus(duration) {
        if (!this.isValid)
          return this;
        var dur = Duration2.fromDurationLike(duration), result = {};
        for (var _iterator = _createForOfIteratorHelperLoose(orderedUnits$1), _step; !(_step = _iterator()).done; ) {
          var k = _step.value;
          if (hasOwnProperty(dur.values, k) || hasOwnProperty(this.values, k)) {
            result[k] = dur.get(k) + this.get(k);
          }
        }
        return clone$1(this, {
          values: result
        }, true);
      };
      _proto.minus = function minus(duration) {
        if (!this.isValid)
          return this;
        var dur = Duration2.fromDurationLike(duration);
        return this.plus(dur.negate());
      };
      _proto.mapUnits = function mapUnits(fn) {
        if (!this.isValid)
          return this;
        var result = {};
        for (var _i = 0, _Object$keys = Object.keys(this.values); _i < _Object$keys.length; _i++) {
          var k = _Object$keys[_i];
          result[k] = asNumber(fn(this.values[k], k));
        }
        return clone$1(this, {
          values: result
        }, true);
      };
      _proto.get = function get(unit) {
        return this[Duration2.normalizeUnit(unit)];
      };
      _proto.set = function set(values) {
        if (!this.isValid)
          return this;
        var mixed = _extends({}, this.values, normalizeObject(values, Duration2.normalizeUnit));
        return clone$1(this, {
          values: mixed
        });
      };
      _proto.reconfigure = function reconfigure(_temp) {
        var _ref = _temp === void 0 ? {} : _temp, locale = _ref.locale, numberingSystem = _ref.numberingSystem, conversionAccuracy = _ref.conversionAccuracy;
        var loc = this.loc.clone({
          locale,
          numberingSystem
        }), opts = {
          loc
        };
        if (conversionAccuracy) {
          opts.conversionAccuracy = conversionAccuracy;
        }
        return clone$1(this, opts);
      };
      _proto.as = function as(unit) {
        return this.isValid ? this.shiftTo(unit).get(unit) : NaN;
      };
      _proto.normalize = function normalize() {
        if (!this.isValid)
          return this;
        var vals = this.toObject();
        normalizeValues(this.matrix, vals);
        return clone$1(this, {
          values: vals
        }, true);
      };
      _proto.shiftTo = function shiftTo() {
        for (var _len = arguments.length, units = new Array(_len), _key = 0; _key < _len; _key++) {
          units[_key] = arguments[_key];
        }
        if (!this.isValid)
          return this;
        if (units.length === 0) {
          return this;
        }
        units = units.map(function(u) {
          return Duration2.normalizeUnit(u);
        });
        var built = {}, accumulated = {}, vals = this.toObject();
        var lastUnit;
        for (var _iterator2 = _createForOfIteratorHelperLoose(orderedUnits$1), _step2; !(_step2 = _iterator2()).done; ) {
          var k = _step2.value;
          if (units.indexOf(k) >= 0) {
            lastUnit = k;
            var own = 0;
            for (var ak in accumulated) {
              own += this.matrix[ak][k] * accumulated[ak];
              accumulated[ak] = 0;
            }
            if (isNumber(vals[k])) {
              own += vals[k];
            }
            var i = Math.trunc(own);
            built[k] = i;
            accumulated[k] = (own * 1e3 - i * 1e3) / 1e3;
            for (var down in vals) {
              if (orderedUnits$1.indexOf(down) > orderedUnits$1.indexOf(k)) {
                convert(this.matrix, vals, down, built, k);
              }
            }
          } else if (isNumber(vals[k])) {
            accumulated[k] = vals[k];
          }
        }
        for (var key in accumulated) {
          if (accumulated[key] !== 0) {
            built[lastUnit] += key === lastUnit ? accumulated[key] : accumulated[key] / this.matrix[lastUnit][key];
          }
        }
        return clone$1(this, {
          values: built
        }, true).normalize();
      };
      _proto.negate = function negate() {
        if (!this.isValid)
          return this;
        var negated = {};
        for (var _i2 = 0, _Object$keys2 = Object.keys(this.values); _i2 < _Object$keys2.length; _i2++) {
          var k = _Object$keys2[_i2];
          negated[k] = this.values[k] === 0 ? 0 : -this.values[k];
        }
        return clone$1(this, {
          values: negated
        }, true);
      };
      _proto.equals = function equals(other) {
        if (!this.isValid || !other.isValid) {
          return false;
        }
        if (!this.loc.equals(other.loc)) {
          return false;
        }
        function eq(v1, v2) {
          if (v1 === void 0 || v1 === 0)
            return v2 === void 0 || v2 === 0;
          return v1 === v2;
        }
        for (var _iterator3 = _createForOfIteratorHelperLoose(orderedUnits$1), _step3; !(_step3 = _iterator3()).done; ) {
          var u = _step3.value;
          if (!eq(this.values[u], other.values[u])) {
            return false;
          }
        }
        return true;
      };
      _createClass(Duration2, [{
        key: "locale",
        get: function get() {
          return this.isValid ? this.loc.locale : null;
        }
      }, {
        key: "numberingSystem",
        get: function get() {
          return this.isValid ? this.loc.numberingSystem : null;
        }
      }, {
        key: "years",
        get: function get() {
          return this.isValid ? this.values.years || 0 : NaN;
        }
      }, {
        key: "quarters",
        get: function get() {
          return this.isValid ? this.values.quarters || 0 : NaN;
        }
      }, {
        key: "months",
        get: function get() {
          return this.isValid ? this.values.months || 0 : NaN;
        }
      }, {
        key: "weeks",
        get: function get() {
          return this.isValid ? this.values.weeks || 0 : NaN;
        }
      }, {
        key: "days",
        get: function get() {
          return this.isValid ? this.values.days || 0 : NaN;
        }
      }, {
        key: "hours",
        get: function get() {
          return this.isValid ? this.values.hours || 0 : NaN;
        }
      }, {
        key: "minutes",
        get: function get() {
          return this.isValid ? this.values.minutes || 0 : NaN;
        }
      }, {
        key: "seconds",
        get: function get() {
          return this.isValid ? this.values.seconds || 0 : NaN;
        }
      }, {
        key: "milliseconds",
        get: function get() {
          return this.isValid ? this.values.milliseconds || 0 : NaN;
        }
      }, {
        key: "isValid",
        get: function get() {
          return this.invalid === null;
        }
      }, {
        key: "invalidReason",
        get: function get() {
          return this.invalid ? this.invalid.reason : null;
        }
      }, {
        key: "invalidExplanation",
        get: function get() {
          return this.invalid ? this.invalid.explanation : null;
        }
      }]);
      return Duration2;
    }();
    var INVALID$1 = "Invalid Interval";
    function validateStartEnd(start, end) {
      if (!start || !start.isValid) {
        return Interval.invalid("missing or invalid start");
      } else if (!end || !end.isValid) {
        return Interval.invalid("missing or invalid end");
      } else if (end < start) {
        return Interval.invalid("end before start", "The end of an interval must be after its start, but you had start=" + start.toISO() + " and end=" + end.toISO());
      } else {
        return null;
      }
    }
    var Interval = /* @__PURE__ */ function() {
      function Interval2(config) {
        this.s = config.start;
        this.e = config.end;
        this.invalid = config.invalid || null;
        this.isLuxonInterval = true;
      }
      Interval2.invalid = function invalid(reason, explanation) {
        if (explanation === void 0) {
          explanation = null;
        }
        if (!reason) {
          throw new InvalidArgumentError("need to specify a reason the Interval is invalid");
        }
        var invalid2 = reason instanceof Invalid ? reason : new Invalid(reason, explanation);
        if (Settings.throwOnInvalid) {
          throw new InvalidIntervalError(invalid2);
        } else {
          return new Interval2({
            invalid: invalid2
          });
        }
      };
      Interval2.fromDateTimes = function fromDateTimes(start, end) {
        var builtStart = friendlyDateTime(start), builtEnd = friendlyDateTime(end);
        var validateError = validateStartEnd(builtStart, builtEnd);
        if (validateError == null) {
          return new Interval2({
            start: builtStart,
            end: builtEnd
          });
        } else {
          return validateError;
        }
      };
      Interval2.after = function after(start, duration) {
        var dur = Duration.fromDurationLike(duration), dt = friendlyDateTime(start);
        return Interval2.fromDateTimes(dt, dt.plus(dur));
      };
      Interval2.before = function before(end, duration) {
        var dur = Duration.fromDurationLike(duration), dt = friendlyDateTime(end);
        return Interval2.fromDateTimes(dt.minus(dur), dt);
      };
      Interval2.fromISO = function fromISO(text, opts) {
        var _split = (text || "").split("/", 2), s2 = _split[0], e = _split[1];
        if (s2 && e) {
          var start, startIsValid;
          try {
            start = DateTime.fromISO(s2, opts);
            startIsValid = start.isValid;
          } catch (e2) {
            startIsValid = false;
          }
          var end, endIsValid;
          try {
            end = DateTime.fromISO(e, opts);
            endIsValid = end.isValid;
          } catch (e2) {
            endIsValid = false;
          }
          if (startIsValid && endIsValid) {
            return Interval2.fromDateTimes(start, end);
          }
          if (startIsValid) {
            var dur = Duration.fromISO(e, opts);
            if (dur.isValid) {
              return Interval2.after(start, dur);
            }
          } else if (endIsValid) {
            var _dur = Duration.fromISO(s2, opts);
            if (_dur.isValid) {
              return Interval2.before(end, _dur);
            }
          }
        }
        return Interval2.invalid("unparsable", 'the input "' + text + `" can't be parsed as ISO 8601`);
      };
      Interval2.isInterval = function isInterval(o) {
        return o && o.isLuxonInterval || false;
      };
      var _proto = Interval2.prototype;
      _proto.length = function length(unit) {
        if (unit === void 0) {
          unit = "milliseconds";
        }
        return this.isValid ? this.toDuration.apply(this, [unit]).get(unit) : NaN;
      };
      _proto.count = function count(unit) {
        if (unit === void 0) {
          unit = "milliseconds";
        }
        if (!this.isValid)
          return NaN;
        var start = this.start.startOf(unit), end = this.end.startOf(unit);
        return Math.floor(end.diff(start, unit).get(unit)) + 1;
      };
      _proto.hasSame = function hasSame(unit) {
        return this.isValid ? this.isEmpty() || this.e.minus(1).hasSame(this.s, unit) : false;
      };
      _proto.isEmpty = function isEmpty() {
        return this.s.valueOf() === this.e.valueOf();
      };
      _proto.isAfter = function isAfter(dateTime) {
        if (!this.isValid)
          return false;
        return this.s > dateTime;
      };
      _proto.isBefore = function isBefore(dateTime) {
        if (!this.isValid)
          return false;
        return this.e <= dateTime;
      };
      _proto.contains = function contains(dateTime) {
        if (!this.isValid)
          return false;
        return this.s <= dateTime && this.e > dateTime;
      };
      _proto.set = function set(_temp) {
        var _ref = _temp === void 0 ? {} : _temp, start = _ref.start, end = _ref.end;
        if (!this.isValid)
          return this;
        return Interval2.fromDateTimes(start || this.s, end || this.e);
      };
      _proto.splitAt = function splitAt() {
        var _this = this;
        if (!this.isValid)
          return [];
        for (var _len = arguments.length, dateTimes = new Array(_len), _key = 0; _key < _len; _key++) {
          dateTimes[_key] = arguments[_key];
        }
        var sorted = dateTimes.map(friendlyDateTime).filter(function(d) {
          return _this.contains(d);
        }).sort(), results = [];
        var s2 = this.s, i = 0;
        while (s2 < this.e) {
          var added = sorted[i] || this.e, next = +added > +this.e ? this.e : added;
          results.push(Interval2.fromDateTimes(s2, next));
          s2 = next;
          i += 1;
        }
        return results;
      };
      _proto.splitBy = function splitBy(duration) {
        var dur = Duration.fromDurationLike(duration);
        if (!this.isValid || !dur.isValid || dur.as("milliseconds") === 0) {
          return [];
        }
        var s2 = this.s, idx = 1, next;
        var results = [];
        while (s2 < this.e) {
          var added = this.start.plus(dur.mapUnits(function(x) {
            return x * idx;
          }));
          next = +added > +this.e ? this.e : added;
          results.push(Interval2.fromDateTimes(s2, next));
          s2 = next;
          idx += 1;
        }
        return results;
      };
      _proto.divideEqually = function divideEqually(numberOfParts) {
        if (!this.isValid)
          return [];
        return this.splitBy(this.length() / numberOfParts).slice(0, numberOfParts);
      };
      _proto.overlaps = function overlaps(other) {
        return this.e > other.s && this.s < other.e;
      };
      _proto.abutsStart = function abutsStart(other) {
        if (!this.isValid)
          return false;
        return +this.e === +other.s;
      };
      _proto.abutsEnd = function abutsEnd(other) {
        if (!this.isValid)
          return false;
        return +other.e === +this.s;
      };
      _proto.engulfs = function engulfs(other) {
        if (!this.isValid)
          return false;
        return this.s <= other.s && this.e >= other.e;
      };
      _proto.equals = function equals(other) {
        if (!this.isValid || !other.isValid) {
          return false;
        }
        return this.s.equals(other.s) && this.e.equals(other.e);
      };
      _proto.intersection = function intersection(other) {
        if (!this.isValid)
          return this;
        var s2 = this.s > other.s ? this.s : other.s, e = this.e < other.e ? this.e : other.e;
        if (s2 >= e) {
          return null;
        } else {
          return Interval2.fromDateTimes(s2, e);
        }
      };
      _proto.union = function union(other) {
        if (!this.isValid)
          return this;
        var s2 = this.s < other.s ? this.s : other.s, e = this.e > other.e ? this.e : other.e;
        return Interval2.fromDateTimes(s2, e);
      };
      Interval2.merge = function merge(intervals) {
        var _intervals$sort$reduc = intervals.sort(function(a, b) {
          return a.s - b.s;
        }).reduce(function(_ref2, item) {
          var sofar = _ref2[0], current = _ref2[1];
          if (!current) {
            return [sofar, item];
          } else if (current.overlaps(item) || current.abutsStart(item)) {
            return [sofar, current.union(item)];
          } else {
            return [sofar.concat([current]), item];
          }
        }, [[], null]), found = _intervals$sort$reduc[0], final = _intervals$sort$reduc[1];
        if (final) {
          found.push(final);
        }
        return found;
      };
      Interval2.xor = function xor(intervals) {
        var _Array$prototype;
        var start = null, currentCount = 0;
        var results = [], ends = intervals.map(function(i2) {
          return [{
            time: i2.s,
            type: "s"
          }, {
            time: i2.e,
            type: "e"
          }];
        }), flattened = (_Array$prototype = Array.prototype).concat.apply(_Array$prototype, ends), arr = flattened.sort(function(a, b) {
          return a.time - b.time;
        });
        for (var _iterator = _createForOfIteratorHelperLoose(arr), _step; !(_step = _iterator()).done; ) {
          var i = _step.value;
          currentCount += i.type === "s" ? 1 : -1;
          if (currentCount === 1) {
            start = i.time;
          } else {
            if (start && +start !== +i.time) {
              results.push(Interval2.fromDateTimes(start, i.time));
            }
            start = null;
          }
        }
        return Interval2.merge(results);
      };
      _proto.difference = function difference() {
        var _this2 = this;
        for (var _len2 = arguments.length, intervals = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
          intervals[_key2] = arguments[_key2];
        }
        return Interval2.xor([this].concat(intervals)).map(function(i) {
          return _this2.intersection(i);
        }).filter(function(i) {
          return i && !i.isEmpty();
        });
      };
      _proto.toString = function toString() {
        if (!this.isValid)
          return INVALID$1;
        return "[" + this.s.toISO() + " \u2013 " + this.e.toISO() + ")";
      };
      _proto.toISO = function toISO(opts) {
        if (!this.isValid)
          return INVALID$1;
        return this.s.toISO(opts) + "/" + this.e.toISO(opts);
      };
      _proto.toISODate = function toISODate() {
        if (!this.isValid)
          return INVALID$1;
        return this.s.toISODate() + "/" + this.e.toISODate();
      };
      _proto.toISOTime = function toISOTime(opts) {
        if (!this.isValid)
          return INVALID$1;
        return this.s.toISOTime(opts) + "/" + this.e.toISOTime(opts);
      };
      _proto.toFormat = function toFormat(dateFormat, _temp2) {
        var _ref3 = _temp2 === void 0 ? {} : _temp2, _ref3$separator = _ref3.separator, separator = _ref3$separator === void 0 ? " \u2013 " : _ref3$separator;
        if (!this.isValid)
          return INVALID$1;
        return "" + this.s.toFormat(dateFormat) + separator + this.e.toFormat(dateFormat);
      };
      _proto.toDuration = function toDuration(unit, opts) {
        if (!this.isValid) {
          return Duration.invalid(this.invalidReason);
        }
        return this.e.diff(this.s, unit, opts);
      };
      _proto.mapEndpoints = function mapEndpoints(mapFn) {
        return Interval2.fromDateTimes(mapFn(this.s), mapFn(this.e));
      };
      _createClass(Interval2, [{
        key: "start",
        get: function get() {
          return this.isValid ? this.s : null;
        }
      }, {
        key: "end",
        get: function get() {
          return this.isValid ? this.e : null;
        }
      }, {
        key: "isValid",
        get: function get() {
          return this.invalidReason === null;
        }
      }, {
        key: "invalidReason",
        get: function get() {
          return this.invalid ? this.invalid.reason : null;
        }
      }, {
        key: "invalidExplanation",
        get: function get() {
          return this.invalid ? this.invalid.explanation : null;
        }
      }]);
      return Interval2;
    }();
    var Info = /* @__PURE__ */ function() {
      function Info2() {
      }
      Info2.hasDST = function hasDST(zone) {
        if (zone === void 0) {
          zone = Settings.defaultZone;
        }
        var proto = DateTime.now().setZone(zone).set({
          month: 12
        });
        return !zone.isUniversal && proto.offset !== proto.set({
          month: 6
        }).offset;
      };
      Info2.isValidIANAZone = function isValidIANAZone(zone) {
        return IANAZone.isValidZone(zone);
      };
      Info2.normalizeZone = function normalizeZone$1(input) {
        return normalizeZone(input, Settings.defaultZone);
      };
      Info2.months = function months2(length, _temp) {
        if (length === void 0) {
          length = "long";
        }
        var _ref = _temp === void 0 ? {} : _temp, _ref$locale = _ref.locale, locale = _ref$locale === void 0 ? null : _ref$locale, _ref$numberingSystem = _ref.numberingSystem, numberingSystem = _ref$numberingSystem === void 0 ? null : _ref$numberingSystem, _ref$locObj = _ref.locObj, locObj = _ref$locObj === void 0 ? null : _ref$locObj, _ref$outputCalendar = _ref.outputCalendar, outputCalendar = _ref$outputCalendar === void 0 ? "gregory" : _ref$outputCalendar;
        return (locObj || Locale.create(locale, numberingSystem, outputCalendar)).months(length);
      };
      Info2.monthsFormat = function monthsFormat(length, _temp2) {
        if (length === void 0) {
          length = "long";
        }
        var _ref2 = _temp2 === void 0 ? {} : _temp2, _ref2$locale = _ref2.locale, locale = _ref2$locale === void 0 ? null : _ref2$locale, _ref2$numberingSystem = _ref2.numberingSystem, numberingSystem = _ref2$numberingSystem === void 0 ? null : _ref2$numberingSystem, _ref2$locObj = _ref2.locObj, locObj = _ref2$locObj === void 0 ? null : _ref2$locObj, _ref2$outputCalendar = _ref2.outputCalendar, outputCalendar = _ref2$outputCalendar === void 0 ? "gregory" : _ref2$outputCalendar;
        return (locObj || Locale.create(locale, numberingSystem, outputCalendar)).months(length, true);
      };
      Info2.weekdays = function weekdays2(length, _temp3) {
        if (length === void 0) {
          length = "long";
        }
        var _ref3 = _temp3 === void 0 ? {} : _temp3, _ref3$locale = _ref3.locale, locale = _ref3$locale === void 0 ? null : _ref3$locale, _ref3$numberingSystem = _ref3.numberingSystem, numberingSystem = _ref3$numberingSystem === void 0 ? null : _ref3$numberingSystem, _ref3$locObj = _ref3.locObj, locObj = _ref3$locObj === void 0 ? null : _ref3$locObj;
        return (locObj || Locale.create(locale, numberingSystem, null)).weekdays(length);
      };
      Info2.weekdaysFormat = function weekdaysFormat(length, _temp4) {
        if (length === void 0) {
          length = "long";
        }
        var _ref4 = _temp4 === void 0 ? {} : _temp4, _ref4$locale = _ref4.locale, locale = _ref4$locale === void 0 ? null : _ref4$locale, _ref4$numberingSystem = _ref4.numberingSystem, numberingSystem = _ref4$numberingSystem === void 0 ? null : _ref4$numberingSystem, _ref4$locObj = _ref4.locObj, locObj = _ref4$locObj === void 0 ? null : _ref4$locObj;
        return (locObj || Locale.create(locale, numberingSystem, null)).weekdays(length, true);
      };
      Info2.meridiems = function meridiems2(_temp5) {
        var _ref5 = _temp5 === void 0 ? {} : _temp5, _ref5$locale = _ref5.locale, locale = _ref5$locale === void 0 ? null : _ref5$locale;
        return Locale.create(locale).meridiems();
      };
      Info2.eras = function eras2(length, _temp6) {
        if (length === void 0) {
          length = "short";
        }
        var _ref6 = _temp6 === void 0 ? {} : _temp6, _ref6$locale = _ref6.locale, locale = _ref6$locale === void 0 ? null : _ref6$locale;
        return Locale.create(locale, null, "gregory").eras(length);
      };
      Info2.features = function features() {
        return {
          relative: hasRelative()
        };
      };
      return Info2;
    }();
    function dayDiff(earlier, later) {
      var utcDayStart = function utcDayStart2(dt) {
        return dt.toUTC(0, {
          keepLocalTime: true
        }).startOf("day").valueOf();
      }, ms = utcDayStart(later) - utcDayStart(earlier);
      return Math.floor(Duration.fromMillis(ms).as("days"));
    }
    function highOrderDiffs(cursor, later, units) {
      var differs = [["years", function(a, b) {
        return b.year - a.year;
      }], ["quarters", function(a, b) {
        return b.quarter - a.quarter;
      }], ["months", function(a, b) {
        return b.month - a.month + (b.year - a.year) * 12;
      }], ["weeks", function(a, b) {
        var days = dayDiff(a, b);
        return (days - days % 7) / 7;
      }], ["days", dayDiff]];
      var results = {};
      var lowestOrder, highWater;
      for (var _i = 0, _differs = differs; _i < _differs.length; _i++) {
        var _differs$_i = _differs[_i], unit = _differs$_i[0], differ = _differs$_i[1];
        if (units.indexOf(unit) >= 0) {
          var _cursor$plus;
          lowestOrder = unit;
          var delta = differ(cursor, later);
          highWater = cursor.plus((_cursor$plus = {}, _cursor$plus[unit] = delta, _cursor$plus));
          if (highWater > later) {
            var _cursor$plus2;
            cursor = cursor.plus((_cursor$plus2 = {}, _cursor$plus2[unit] = delta - 1, _cursor$plus2));
            delta -= 1;
          } else {
            cursor = highWater;
          }
          results[unit] = delta;
        }
      }
      return [cursor, results, highWater, lowestOrder];
    }
    function _diff(earlier, later, units, opts) {
      var _highOrderDiffs = highOrderDiffs(earlier, later, units), cursor = _highOrderDiffs[0], results = _highOrderDiffs[1], highWater = _highOrderDiffs[2], lowestOrder = _highOrderDiffs[3];
      var remainingMillis = later - cursor;
      var lowerOrderUnits = units.filter(function(u) {
        return ["hours", "minutes", "seconds", "milliseconds"].indexOf(u) >= 0;
      });
      if (lowerOrderUnits.length === 0) {
        if (highWater < later) {
          var _cursor$plus3;
          highWater = cursor.plus((_cursor$plus3 = {}, _cursor$plus3[lowestOrder] = 1, _cursor$plus3));
        }
        if (highWater !== cursor) {
          results[lowestOrder] = (results[lowestOrder] || 0) + remainingMillis / (highWater - cursor);
        }
      }
      var duration = Duration.fromObject(results, opts);
      if (lowerOrderUnits.length > 0) {
        var _Duration$fromMillis;
        return (_Duration$fromMillis = Duration.fromMillis(remainingMillis, opts)).shiftTo.apply(_Duration$fromMillis, lowerOrderUnits).plus(duration);
      } else {
        return duration;
      }
    }
    var numberingSystems = {
      arab: "[\u0660-\u0669]",
      arabext: "[\u06F0-\u06F9]",
      bali: "[\u1B50-\u1B59]",
      beng: "[\u09E6-\u09EF]",
      deva: "[\u0966-\u096F]",
      fullwide: "[\uFF10-\uFF19]",
      gujr: "[\u0AE6-\u0AEF]",
      hanidec: "[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",
      khmr: "[\u17E0-\u17E9]",
      knda: "[\u0CE6-\u0CEF]",
      laoo: "[\u0ED0-\u0ED9]",
      limb: "[\u1946-\u194F]",
      mlym: "[\u0D66-\u0D6F]",
      mong: "[\u1810-\u1819]",
      mymr: "[\u1040-\u1049]",
      orya: "[\u0B66-\u0B6F]",
      tamldec: "[\u0BE6-\u0BEF]",
      telu: "[\u0C66-\u0C6F]",
      thai: "[\u0E50-\u0E59]",
      tibt: "[\u0F20-\u0F29]",
      latn: "\\d"
    };
    var numberingSystemsUTF16 = {
      arab: [1632, 1641],
      arabext: [1776, 1785],
      bali: [6992, 7001],
      beng: [2534, 2543],
      deva: [2406, 2415],
      fullwide: [65296, 65303],
      gujr: [2790, 2799],
      khmr: [6112, 6121],
      knda: [3302, 3311],
      laoo: [3792, 3801],
      limb: [6470, 6479],
      mlym: [3430, 3439],
      mong: [6160, 6169],
      mymr: [4160, 4169],
      orya: [2918, 2927],
      tamldec: [3046, 3055],
      telu: [3174, 3183],
      thai: [3664, 3673],
      tibt: [3872, 3881]
    };
    var hanidecChars = numberingSystems.hanidec.replace(/[\[|\]]/g, "").split("");
    function parseDigits(str) {
      var value = parseInt(str, 10);
      if (isNaN(value)) {
        value = "";
        for (var i = 0; i < str.length; i++) {
          var code = str.charCodeAt(i);
          if (str[i].search(numberingSystems.hanidec) !== -1) {
            value += hanidecChars.indexOf(str[i]);
          } else {
            for (var key in numberingSystemsUTF16) {
              var _numberingSystemsUTF = numberingSystemsUTF16[key], min = _numberingSystemsUTF[0], max = _numberingSystemsUTF[1];
              if (code >= min && code <= max) {
                value += code - min;
              }
            }
          }
        }
        return parseInt(value, 10);
      } else {
        return value;
      }
    }
    function digitRegex(_ref, append) {
      var numberingSystem = _ref.numberingSystem;
      if (append === void 0) {
        append = "";
      }
      return new RegExp("" + numberingSystems[numberingSystem || "latn"] + append);
    }
    var MISSING_FTP = "missing Intl.DateTimeFormat.formatToParts support";
    function intUnit(regex, post) {
      if (post === void 0) {
        post = function post2(i) {
          return i;
        };
      }
      return {
        regex,
        deser: function deser(_ref) {
          var s2 = _ref[0];
          return post(parseDigits(s2));
        }
      };
    }
    var NBSP = String.fromCharCode(160);
    var spaceOrNBSP = "[ " + NBSP + "]";
    var spaceOrNBSPRegExp = new RegExp(spaceOrNBSP, "g");
    function fixListRegex(s2) {
      return s2.replace(/\./g, "\\.?").replace(spaceOrNBSPRegExp, spaceOrNBSP);
    }
    function stripInsensitivities(s2) {
      return s2.replace(/\./g, "").replace(spaceOrNBSPRegExp, " ").toLowerCase();
    }
    function oneOf(strings, startIndex) {
      if (strings === null) {
        return null;
      } else {
        return {
          regex: RegExp(strings.map(fixListRegex).join("|")),
          deser: function deser(_ref2) {
            var s2 = _ref2[0];
            return strings.findIndex(function(i) {
              return stripInsensitivities(s2) === stripInsensitivities(i);
            }) + startIndex;
          }
        };
      }
    }
    function offset(regex, groups) {
      return {
        regex,
        deser: function deser(_ref3) {
          var h = _ref3[1], m = _ref3[2];
          return signedOffset(h, m);
        },
        groups
      };
    }
    function simple(regex) {
      return {
        regex,
        deser: function deser(_ref4) {
          var s2 = _ref4[0];
          return s2;
        }
      };
    }
    function escapeToken(value) {
      return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
    }
    function unitForToken(token, loc) {
      var one = digitRegex(loc), two = digitRegex(loc, "{2}"), three = digitRegex(loc, "{3}"), four = digitRegex(loc, "{4}"), six = digitRegex(loc, "{6}"), oneOrTwo = digitRegex(loc, "{1,2}"), oneToThree = digitRegex(loc, "{1,3}"), oneToSix = digitRegex(loc, "{1,6}"), oneToNine = digitRegex(loc, "{1,9}"), twoToFour = digitRegex(loc, "{2,4}"), fourToSix = digitRegex(loc, "{4,6}"), literal = function literal2(t) {
        return {
          regex: RegExp(escapeToken(t.val)),
          deser: function deser(_ref5) {
            var s2 = _ref5[0];
            return s2;
          },
          literal: true
        };
      }, unitate = function unitate2(t) {
        if (token.literal) {
          return literal(t);
        }
        switch (t.val) {
          case "G":
            return oneOf(loc.eras("short", false), 0);
          case "GG":
            return oneOf(loc.eras("long", false), 0);
          case "y":
            return intUnit(oneToSix);
          case "yy":
            return intUnit(twoToFour, untruncateYear);
          case "yyyy":
            return intUnit(four);
          case "yyyyy":
            return intUnit(fourToSix);
          case "yyyyyy":
            return intUnit(six);
          case "M":
            return intUnit(oneOrTwo);
          case "MM":
            return intUnit(two);
          case "MMM":
            return oneOf(loc.months("short", true, false), 1);
          case "MMMM":
            return oneOf(loc.months("long", true, false), 1);
          case "L":
            return intUnit(oneOrTwo);
          case "LL":
            return intUnit(two);
          case "LLL":
            return oneOf(loc.months("short", false, false), 1);
          case "LLLL":
            return oneOf(loc.months("long", false, false), 1);
          case "d":
            return intUnit(oneOrTwo);
          case "dd":
            return intUnit(two);
          case "o":
            return intUnit(oneToThree);
          case "ooo":
            return intUnit(three);
          case "HH":
            return intUnit(two);
          case "H":
            return intUnit(oneOrTwo);
          case "hh":
            return intUnit(two);
          case "h":
            return intUnit(oneOrTwo);
          case "mm":
            return intUnit(two);
          case "m":
            return intUnit(oneOrTwo);
          case "q":
            return intUnit(oneOrTwo);
          case "qq":
            return intUnit(two);
          case "s":
            return intUnit(oneOrTwo);
          case "ss":
            return intUnit(two);
          case "S":
            return intUnit(oneToThree);
          case "SSS":
            return intUnit(three);
          case "u":
            return simple(oneToNine);
          case "uu":
            return simple(oneOrTwo);
          case "uuu":
            return intUnit(one);
          case "a":
            return oneOf(loc.meridiems(), 0);
          case "kkkk":
            return intUnit(four);
          case "kk":
            return intUnit(twoToFour, untruncateYear);
          case "W":
            return intUnit(oneOrTwo);
          case "WW":
            return intUnit(two);
          case "E":
          case "c":
            return intUnit(one);
          case "EEE":
            return oneOf(loc.weekdays("short", false, false), 1);
          case "EEEE":
            return oneOf(loc.weekdays("long", false, false), 1);
          case "ccc":
            return oneOf(loc.weekdays("short", true, false), 1);
          case "cccc":
            return oneOf(loc.weekdays("long", true, false), 1);
          case "Z":
          case "ZZ":
            return offset(new RegExp("([+-]" + oneOrTwo.source + ")(?::(" + two.source + "))?"), 2);
          case "ZZZ":
            return offset(new RegExp("([+-]" + oneOrTwo.source + ")(" + two.source + ")?"), 2);
          case "z":
            return simple(/[a-z_+-/]{1,256}?/i);
          default:
            return literal(t);
        }
      };
      var unit = unitate(token) || {
        invalidReason: MISSING_FTP
      };
      unit.token = token;
      return unit;
    }
    var partTypeStyleToTokenVal = {
      year: {
        "2-digit": "yy",
        numeric: "yyyyy"
      },
      month: {
        numeric: "M",
        "2-digit": "MM",
        short: "MMM",
        long: "MMMM"
      },
      day: {
        numeric: "d",
        "2-digit": "dd"
      },
      weekday: {
        short: "EEE",
        long: "EEEE"
      },
      dayperiod: "a",
      dayPeriod: "a",
      hour: {
        numeric: "h",
        "2-digit": "hh"
      },
      minute: {
        numeric: "m",
        "2-digit": "mm"
      },
      second: {
        numeric: "s",
        "2-digit": "ss"
      }
    };
    function tokenForPart(part, locale, formatOpts) {
      var type = part.type, value = part.value;
      if (type === "literal") {
        return {
          literal: true,
          val: value
        };
      }
      var style = formatOpts[type];
      var val = partTypeStyleToTokenVal[type];
      if (typeof val === "object") {
        val = val[style];
      }
      if (val) {
        return {
          literal: false,
          val
        };
      }
      return void 0;
    }
    function buildRegex(units) {
      var re = units.map(function(u) {
        return u.regex;
      }).reduce(function(f, r) {
        return f + "(" + r.source + ")";
      }, "");
      return ["^" + re + "$", units];
    }
    function match(input, regex, handlers) {
      var matches = input.match(regex);
      if (matches) {
        var all = {};
        var matchIndex = 1;
        for (var i in handlers) {
          if (hasOwnProperty(handlers, i)) {
            var h = handlers[i], groups = h.groups ? h.groups + 1 : 1;
            if (!h.literal && h.token) {
              all[h.token.val[0]] = h.deser(matches.slice(matchIndex, matchIndex + groups));
            }
            matchIndex += groups;
          }
        }
        return [matches, all];
      } else {
        return [matches, {}];
      }
    }
    function dateTimeFromMatches(matches) {
      var toField = function toField2(token) {
        switch (token) {
          case "S":
            return "millisecond";
          case "s":
            return "second";
          case "m":
            return "minute";
          case "h":
          case "H":
            return "hour";
          case "d":
            return "day";
          case "o":
            return "ordinal";
          case "L":
          case "M":
            return "month";
          case "y":
            return "year";
          case "E":
          case "c":
            return "weekday";
          case "W":
            return "weekNumber";
          case "k":
            return "weekYear";
          case "q":
            return "quarter";
          default:
            return null;
        }
      };
      var zone = null;
      var specificOffset;
      if (!isUndefined(matches.z)) {
        zone = IANAZone.create(matches.z);
      }
      if (!isUndefined(matches.Z)) {
        if (!zone) {
          zone = new FixedOffsetZone(matches.Z);
        }
        specificOffset = matches.Z;
      }
      if (!isUndefined(matches.q)) {
        matches.M = (matches.q - 1) * 3 + 1;
      }
      if (!isUndefined(matches.h)) {
        if (matches.h < 12 && matches.a === 1) {
          matches.h += 12;
        } else if (matches.h === 12 && matches.a === 0) {
          matches.h = 0;
        }
      }
      if (matches.G === 0 && matches.y) {
        matches.y = -matches.y;
      }
      if (!isUndefined(matches.u)) {
        matches.S = parseMillis(matches.u);
      }
      var vals = Object.keys(matches).reduce(function(r, k) {
        var f = toField(k);
        if (f) {
          r[f] = matches[k];
        }
        return r;
      }, {});
      return [vals, zone, specificOffset];
    }
    var dummyDateTimeCache = null;
    function getDummyDateTime() {
      if (!dummyDateTimeCache) {
        dummyDateTimeCache = DateTime.fromMillis(1555555555555);
      }
      return dummyDateTimeCache;
    }
    function maybeExpandMacroToken(token, locale) {
      if (token.literal) {
        return token;
      }
      var formatOpts = Formatter.macroTokenToFormatOpts(token.val);
      if (!formatOpts) {
        return token;
      }
      var formatter = Formatter.create(locale, formatOpts);
      var parts = formatter.formatDateTimeParts(getDummyDateTime());
      var tokens = parts.map(function(p) {
        return tokenForPart(p, locale, formatOpts);
      });
      if (tokens.includes(void 0)) {
        return token;
      }
      return tokens;
    }
    function expandMacroTokens(tokens, locale) {
      var _Array$prototype;
      return (_Array$prototype = Array.prototype).concat.apply(_Array$prototype, tokens.map(function(t) {
        return maybeExpandMacroToken(t, locale);
      }));
    }
    function explainFromTokens(locale, input, format) {
      var tokens = expandMacroTokens(Formatter.parseFormat(format), locale), units = tokens.map(function(t) {
        return unitForToken(t, locale);
      }), disqualifyingUnit = units.find(function(t) {
        return t.invalidReason;
      });
      if (disqualifyingUnit) {
        return {
          input,
          tokens,
          invalidReason: disqualifyingUnit.invalidReason
        };
      } else {
        var _buildRegex = buildRegex(units), regexString = _buildRegex[0], handlers = _buildRegex[1], regex = RegExp(regexString, "i"), _match = match(input, regex, handlers), rawMatches = _match[0], matches = _match[1], _ref6 = matches ? dateTimeFromMatches(matches) : [null, null, void 0], result = _ref6[0], zone = _ref6[1], specificOffset = _ref6[2];
        if (hasOwnProperty(matches, "a") && hasOwnProperty(matches, "H")) {
          throw new ConflictingSpecificationError("Can't include meridiem when specifying 24-hour format");
        }
        return {
          input,
          tokens,
          regex,
          rawMatches,
          matches,
          result,
          zone,
          specificOffset
        };
      }
    }
    function parseFromTokens(locale, input, format) {
      var _explainFromTokens = explainFromTokens(locale, input, format), result = _explainFromTokens.result, zone = _explainFromTokens.zone, specificOffset = _explainFromTokens.specificOffset, invalidReason = _explainFromTokens.invalidReason;
      return [result, zone, specificOffset, invalidReason];
    }
    var nonLeapLadder = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];
    var leapLadder = [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335];
    function unitOutOfRange(unit, value) {
      return new Invalid("unit out of range", "you specified " + value + " (of type " + typeof value + ") as a " + unit + ", which is invalid");
    }
    function dayOfWeek(year, month, day) {
      var d = new Date(Date.UTC(year, month - 1, day));
      if (year < 100 && year >= 0) {
        d.setUTCFullYear(d.getUTCFullYear() - 1900);
      }
      var js = d.getUTCDay();
      return js === 0 ? 7 : js;
    }
    function computeOrdinal(year, month, day) {
      return day + (isLeapYear(year) ? leapLadder : nonLeapLadder)[month - 1];
    }
    function uncomputeOrdinal(year, ordinal) {
      var table = isLeapYear(year) ? leapLadder : nonLeapLadder, month0 = table.findIndex(function(i) {
        return i < ordinal;
      }), day = ordinal - table[month0];
      return {
        month: month0 + 1,
        day
      };
    }
    function gregorianToWeek(gregObj) {
      var year = gregObj.year, month = gregObj.month, day = gregObj.day, ordinal = computeOrdinal(year, month, day), weekday = dayOfWeek(year, month, day);
      var weekNumber = Math.floor((ordinal - weekday + 10) / 7), weekYear;
      if (weekNumber < 1) {
        weekYear = year - 1;
        weekNumber = weeksInWeekYear(weekYear);
      } else if (weekNumber > weeksInWeekYear(year)) {
        weekYear = year + 1;
        weekNumber = 1;
      } else {
        weekYear = year;
      }
      return _extends({
        weekYear,
        weekNumber,
        weekday
      }, timeObject(gregObj));
    }
    function weekToGregorian(weekData) {
      var weekYear = weekData.weekYear, weekNumber = weekData.weekNumber, weekday = weekData.weekday, weekdayOfJan4 = dayOfWeek(weekYear, 1, 4), yearInDays = daysInYear(weekYear);
      var ordinal = weekNumber * 7 + weekday - weekdayOfJan4 - 3, year;
      if (ordinal < 1) {
        year = weekYear - 1;
        ordinal += daysInYear(year);
      } else if (ordinal > yearInDays) {
        year = weekYear + 1;
        ordinal -= daysInYear(weekYear);
      } else {
        year = weekYear;
      }
      var _uncomputeOrdinal = uncomputeOrdinal(year, ordinal), month = _uncomputeOrdinal.month, day = _uncomputeOrdinal.day;
      return _extends({
        year,
        month,
        day
      }, timeObject(weekData));
    }
    function gregorianToOrdinal(gregData) {
      var year = gregData.year, month = gregData.month, day = gregData.day;
      var ordinal = computeOrdinal(year, month, day);
      return _extends({
        year,
        ordinal
      }, timeObject(gregData));
    }
    function ordinalToGregorian(ordinalData) {
      var year = ordinalData.year, ordinal = ordinalData.ordinal;
      var _uncomputeOrdinal2 = uncomputeOrdinal(year, ordinal), month = _uncomputeOrdinal2.month, day = _uncomputeOrdinal2.day;
      return _extends({
        year,
        month,
        day
      }, timeObject(ordinalData));
    }
    function hasInvalidWeekData(obj) {
      var validYear = isInteger(obj.weekYear), validWeek = integerBetween(obj.weekNumber, 1, weeksInWeekYear(obj.weekYear)), validWeekday = integerBetween(obj.weekday, 1, 7);
      if (!validYear) {
        return unitOutOfRange("weekYear", obj.weekYear);
      } else if (!validWeek) {
        return unitOutOfRange("week", obj.week);
      } else if (!validWeekday) {
        return unitOutOfRange("weekday", obj.weekday);
      } else
        return false;
    }
    function hasInvalidOrdinalData(obj) {
      var validYear = isInteger(obj.year), validOrdinal = integerBetween(obj.ordinal, 1, daysInYear(obj.year));
      if (!validYear) {
        return unitOutOfRange("year", obj.year);
      } else if (!validOrdinal) {
        return unitOutOfRange("ordinal", obj.ordinal);
      } else
        return false;
    }
    function hasInvalidGregorianData(obj) {
      var validYear = isInteger(obj.year), validMonth = integerBetween(obj.month, 1, 12), validDay = integerBetween(obj.day, 1, daysInMonth(obj.year, obj.month));
      if (!validYear) {
        return unitOutOfRange("year", obj.year);
      } else if (!validMonth) {
        return unitOutOfRange("month", obj.month);
      } else if (!validDay) {
        return unitOutOfRange("day", obj.day);
      } else
        return false;
    }
    function hasInvalidTimeData(obj) {
      var hour = obj.hour, minute = obj.minute, second = obj.second, millisecond = obj.millisecond;
      var validHour = integerBetween(hour, 0, 23) || hour === 24 && minute === 0 && second === 0 && millisecond === 0, validMinute = integerBetween(minute, 0, 59), validSecond = integerBetween(second, 0, 59), validMillisecond = integerBetween(millisecond, 0, 999);
      if (!validHour) {
        return unitOutOfRange("hour", hour);
      } else if (!validMinute) {
        return unitOutOfRange("minute", minute);
      } else if (!validSecond) {
        return unitOutOfRange("second", second);
      } else if (!validMillisecond) {
        return unitOutOfRange("millisecond", millisecond);
      } else
        return false;
    }
    var INVALID = "Invalid DateTime";
    var MAX_DATE = 864e13;
    function unsupportedZone(zone) {
      return new Invalid("unsupported zone", 'the zone "' + zone.name + '" is not supported');
    }
    function possiblyCachedWeekData(dt) {
      if (dt.weekData === null) {
        dt.weekData = gregorianToWeek(dt.c);
      }
      return dt.weekData;
    }
    function clone(inst, alts) {
      var current = {
        ts: inst.ts,
        zone: inst.zone,
        c: inst.c,
        o: inst.o,
        loc: inst.loc,
        invalid: inst.invalid
      };
      return new DateTime(_extends({}, current, alts, {
        old: current
      }));
    }
    function fixOffset(localTS, o, tz) {
      var utcGuess = localTS - o * 60 * 1e3;
      var o2 = tz.offset(utcGuess);
      if (o === o2) {
        return [utcGuess, o];
      }
      utcGuess -= (o2 - o) * 60 * 1e3;
      var o3 = tz.offset(utcGuess);
      if (o2 === o3) {
        return [utcGuess, o2];
      }
      return [localTS - Math.min(o2, o3) * 60 * 1e3, Math.max(o2, o3)];
    }
    function tsToObj(ts, offset2) {
      ts += offset2 * 60 * 1e3;
      var d = new Date(ts);
      return {
        year: d.getUTCFullYear(),
        month: d.getUTCMonth() + 1,
        day: d.getUTCDate(),
        hour: d.getUTCHours(),
        minute: d.getUTCMinutes(),
        second: d.getUTCSeconds(),
        millisecond: d.getUTCMilliseconds()
      };
    }
    function objToTS(obj, offset2, zone) {
      return fixOffset(objToLocalTS(obj), offset2, zone);
    }
    function adjustTime(inst, dur) {
      var oPre = inst.o, year = inst.c.year + Math.trunc(dur.years), month = inst.c.month + Math.trunc(dur.months) + Math.trunc(dur.quarters) * 3, c = _extends({}, inst.c, {
        year,
        month,
        day: Math.min(inst.c.day, daysInMonth(year, month)) + Math.trunc(dur.days) + Math.trunc(dur.weeks) * 7
      }), millisToAdd = Duration.fromObject({
        years: dur.years - Math.trunc(dur.years),
        quarters: dur.quarters - Math.trunc(dur.quarters),
        months: dur.months - Math.trunc(dur.months),
        weeks: dur.weeks - Math.trunc(dur.weeks),
        days: dur.days - Math.trunc(dur.days),
        hours: dur.hours,
        minutes: dur.minutes,
        seconds: dur.seconds,
        milliseconds: dur.milliseconds
      }).as("milliseconds"), localTS = objToLocalTS(c);
      var _fixOffset = fixOffset(localTS, oPre, inst.zone), ts = _fixOffset[0], o = _fixOffset[1];
      if (millisToAdd !== 0) {
        ts += millisToAdd;
        o = inst.zone.offset(ts);
      }
      return {
        ts,
        o
      };
    }
    function parseDataToDateTime(parsed, parsedZone, opts, format, text, specificOffset) {
      var setZone = opts.setZone, zone = opts.zone;
      if (parsed && Object.keys(parsed).length !== 0) {
        var interpretationZone = parsedZone || zone, inst = DateTime.fromObject(parsed, _extends({}, opts, {
          zone: interpretationZone,
          specificOffset
        }));
        return setZone ? inst : inst.setZone(zone);
      } else {
        return DateTime.invalid(new Invalid("unparsable", 'the input "' + text + `" can't be parsed as ` + format));
      }
    }
    function toTechFormat(dt, format, allowZ) {
      if (allowZ === void 0) {
        allowZ = true;
      }
      return dt.isValid ? Formatter.create(Locale.create("en-US"), {
        allowZ,
        forceSimple: true
      }).formatDateTimeFromString(dt, format) : null;
    }
    function _toISODate(o, extended) {
      var longFormat = o.c.year > 9999 || o.c.year < 0;
      var c = "";
      if (longFormat && o.c.year >= 0)
        c += "+";
      c += padStart(o.c.year, longFormat ? 6 : 4);
      if (extended) {
        c += "-";
        c += padStart(o.c.month);
        c += "-";
        c += padStart(o.c.day);
      } else {
        c += padStart(o.c.month);
        c += padStart(o.c.day);
      }
      return c;
    }
    function _toISOTime(o, extended, suppressSeconds, suppressMilliseconds, includeOffset, extendedZone) {
      var c = padStart(o.c.hour);
      if (extended) {
        c += ":";
        c += padStart(o.c.minute);
        if (o.c.second !== 0 || !suppressSeconds) {
          c += ":";
        }
      } else {
        c += padStart(o.c.minute);
      }
      if (o.c.second !== 0 || !suppressSeconds) {
        c += padStart(o.c.second);
        if (o.c.millisecond !== 0 || !suppressMilliseconds) {
          c += ".";
          c += padStart(o.c.millisecond, 3);
        }
      }
      if (includeOffset) {
        if (o.isOffsetFixed && o.offset === 0 && !extendedZone) {
          c += "Z";
        } else if (o.o < 0) {
          c += "-";
          c += padStart(Math.trunc(-o.o / 60));
          c += ":";
          c += padStart(Math.trunc(-o.o % 60));
        } else {
          c += "+";
          c += padStart(Math.trunc(o.o / 60));
          c += ":";
          c += padStart(Math.trunc(o.o % 60));
        }
      }
      if (extendedZone) {
        c += "[" + o.zone.ianaName + "]";
      }
      return c;
    }
    var defaultUnitValues = {
      month: 1,
      day: 1,
      hour: 0,
      minute: 0,
      second: 0,
      millisecond: 0
    };
    var defaultWeekUnitValues = {
      weekNumber: 1,
      weekday: 1,
      hour: 0,
      minute: 0,
      second: 0,
      millisecond: 0
    };
    var defaultOrdinalUnitValues = {
      ordinal: 1,
      hour: 0,
      minute: 0,
      second: 0,
      millisecond: 0
    };
    var orderedUnits = ["year", "month", "day", "hour", "minute", "second", "millisecond"];
    var orderedWeekUnits = ["weekYear", "weekNumber", "weekday", "hour", "minute", "second", "millisecond"];
    var orderedOrdinalUnits = ["year", "ordinal", "hour", "minute", "second", "millisecond"];
    function normalizeUnit(unit) {
      var normalized = {
        year: "year",
        years: "year",
        month: "month",
        months: "month",
        day: "day",
        days: "day",
        hour: "hour",
        hours: "hour",
        minute: "minute",
        minutes: "minute",
        quarter: "quarter",
        quarters: "quarter",
        second: "second",
        seconds: "second",
        millisecond: "millisecond",
        milliseconds: "millisecond",
        weekday: "weekday",
        weekdays: "weekday",
        weeknumber: "weekNumber",
        weeksnumber: "weekNumber",
        weeknumbers: "weekNumber",
        weekyear: "weekYear",
        weekyears: "weekYear",
        ordinal: "ordinal"
      }[unit.toLowerCase()];
      if (!normalized)
        throw new InvalidUnitError(unit);
      return normalized;
    }
    function quickDT(obj, opts) {
      var zone = normalizeZone(opts.zone, Settings.defaultZone), loc = Locale.fromObject(opts), tsNow = Settings.now();
      var ts, o;
      if (!isUndefined(obj.year)) {
        for (var _iterator = _createForOfIteratorHelperLoose(orderedUnits), _step; !(_step = _iterator()).done; ) {
          var u = _step.value;
          if (isUndefined(obj[u])) {
            obj[u] = defaultUnitValues[u];
          }
        }
        var invalid = hasInvalidGregorianData(obj) || hasInvalidTimeData(obj);
        if (invalid) {
          return DateTime.invalid(invalid);
        }
        var offsetProvis = zone.offset(tsNow);
        var _objToTS = objToTS(obj, offsetProvis, zone);
        ts = _objToTS[0];
        o = _objToTS[1];
      } else {
        ts = tsNow;
      }
      return new DateTime({
        ts,
        zone,
        loc,
        o
      });
    }
    function diffRelative(start, end, opts) {
      var round = isUndefined(opts.round) ? true : opts.round, format = function format2(c, unit2) {
        c = roundTo(c, round || opts.calendary ? 0 : 2, true);
        var formatter = end.loc.clone(opts).relFormatter(opts);
        return formatter.format(c, unit2);
      }, differ = function differ2(unit2) {
        if (opts.calendary) {
          if (!end.hasSame(start, unit2)) {
            return end.startOf(unit2).diff(start.startOf(unit2), unit2).get(unit2);
          } else
            return 0;
        } else {
          return end.diff(start, unit2).get(unit2);
        }
      };
      if (opts.unit) {
        return format(differ(opts.unit), opts.unit);
      }
      for (var _iterator2 = _createForOfIteratorHelperLoose(opts.units), _step2; !(_step2 = _iterator2()).done; ) {
        var unit = _step2.value;
        var count = differ(unit);
        if (Math.abs(count) >= 1) {
          return format(count, unit);
        }
      }
      return format(start > end ? -0 : 0, opts.units[opts.units.length - 1]);
    }
    function lastOpts(argList) {
      var opts = {}, args;
      if (argList.length > 0 && typeof argList[argList.length - 1] === "object") {
        opts = argList[argList.length - 1];
        args = Array.from(argList).slice(0, argList.length - 1);
      } else {
        args = Array.from(argList);
      }
      return [opts, args];
    }
    var DateTime = /* @__PURE__ */ function() {
      function DateTime2(config) {
        var zone = config.zone || Settings.defaultZone;
        var invalid = config.invalid || (Number.isNaN(config.ts) ? new Invalid("invalid input") : null) || (!zone.isValid ? unsupportedZone(zone) : null);
        this.ts = isUndefined(config.ts) ? Settings.now() : config.ts;
        var c = null, o = null;
        if (!invalid) {
          var unchanged = config.old && config.old.ts === this.ts && config.old.zone.equals(zone);
          if (unchanged) {
            var _ref = [config.old.c, config.old.o];
            c = _ref[0];
            o = _ref[1];
          } else {
            var ot = zone.offset(this.ts);
            c = tsToObj(this.ts, ot);
            invalid = Number.isNaN(c.year) ? new Invalid("invalid input") : null;
            c = invalid ? null : c;
            o = invalid ? null : ot;
          }
        }
        this._zone = zone;
        this.loc = config.loc || Locale.create();
        this.invalid = invalid;
        this.weekData = null;
        this.c = c;
        this.o = o;
        this.isLuxonDateTime = true;
      }
      DateTime2.now = function now2() {
        return new DateTime2({});
      };
      DateTime2.local = function local() {
        var _lastOpts = lastOpts(arguments), opts = _lastOpts[0], args = _lastOpts[1], year = args[0], month = args[1], day = args[2], hour = args[3], minute = args[4], second = args[5], millisecond = args[6];
        return quickDT({
          year,
          month,
          day,
          hour,
          minute,
          second,
          millisecond
        }, opts);
      };
      DateTime2.utc = function utc() {
        var _lastOpts2 = lastOpts(arguments), opts = _lastOpts2[0], args = _lastOpts2[1], year = args[0], month = args[1], day = args[2], hour = args[3], minute = args[4], second = args[5], millisecond = args[6];
        opts.zone = FixedOffsetZone.utcInstance;
        return quickDT({
          year,
          month,
          day,
          hour,
          minute,
          second,
          millisecond
        }, opts);
      };
      DateTime2.fromJSDate = function fromJSDate(date, options) {
        if (options === void 0) {
          options = {};
        }
        var ts = isDate(date) ? date.valueOf() : NaN;
        if (Number.isNaN(ts)) {
          return DateTime2.invalid("invalid input");
        }
        var zoneToUse = normalizeZone(options.zone, Settings.defaultZone);
        if (!zoneToUse.isValid) {
          return DateTime2.invalid(unsupportedZone(zoneToUse));
        }
        return new DateTime2({
          ts,
          zone: zoneToUse,
          loc: Locale.fromObject(options)
        });
      };
      DateTime2.fromMillis = function fromMillis(milliseconds, options) {
        if (options === void 0) {
          options = {};
        }
        if (!isNumber(milliseconds)) {
          throw new InvalidArgumentError("fromMillis requires a numerical input, but received a " + typeof milliseconds + " with value " + milliseconds);
        } else if (milliseconds < -MAX_DATE || milliseconds > MAX_DATE) {
          return DateTime2.invalid("Timestamp out of range");
        } else {
          return new DateTime2({
            ts: milliseconds,
            zone: normalizeZone(options.zone, Settings.defaultZone),
            loc: Locale.fromObject(options)
          });
        }
      };
      DateTime2.fromSeconds = function fromSeconds(seconds, options) {
        if (options === void 0) {
          options = {};
        }
        if (!isNumber(seconds)) {
          throw new InvalidArgumentError("fromSeconds requires a numerical input");
        } else {
          return new DateTime2({
            ts: seconds * 1e3,
            zone: normalizeZone(options.zone, Settings.defaultZone),
            loc: Locale.fromObject(options)
          });
        }
      };
      DateTime2.fromObject = function fromObject(obj, opts) {
        if (opts === void 0) {
          opts = {};
        }
        obj = obj || {};
        var zoneToUse = normalizeZone(opts.zone, Settings.defaultZone);
        if (!zoneToUse.isValid) {
          return DateTime2.invalid(unsupportedZone(zoneToUse));
        }
        var tsNow = Settings.now(), offsetProvis = !isUndefined(opts.specificOffset) ? opts.specificOffset : zoneToUse.offset(tsNow), normalized = normalizeObject(obj, normalizeUnit), containsOrdinal = !isUndefined(normalized.ordinal), containsGregorYear = !isUndefined(normalized.year), containsGregorMD = !isUndefined(normalized.month) || !isUndefined(normalized.day), containsGregor = containsGregorYear || containsGregorMD, definiteWeekDef = normalized.weekYear || normalized.weekNumber, loc = Locale.fromObject(opts);
        if ((containsGregor || containsOrdinal) && definiteWeekDef) {
          throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals");
        }
        if (containsGregorMD && containsOrdinal) {
          throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");
        }
        var useWeekData = definiteWeekDef || normalized.weekday && !containsGregor;
        var units, defaultValues, objNow = tsToObj(tsNow, offsetProvis);
        if (useWeekData) {
          units = orderedWeekUnits;
          defaultValues = defaultWeekUnitValues;
          objNow = gregorianToWeek(objNow);
        } else if (containsOrdinal) {
          units = orderedOrdinalUnits;
          defaultValues = defaultOrdinalUnitValues;
          objNow = gregorianToOrdinal(objNow);
        } else {
          units = orderedUnits;
          defaultValues = defaultUnitValues;
        }
        var foundFirst = false;
        for (var _iterator3 = _createForOfIteratorHelperLoose(units), _step3; !(_step3 = _iterator3()).done; ) {
          var u = _step3.value;
          var v = normalized[u];
          if (!isUndefined(v)) {
            foundFirst = true;
          } else if (foundFirst) {
            normalized[u] = defaultValues[u];
          } else {
            normalized[u] = objNow[u];
          }
        }
        var higherOrderInvalid = useWeekData ? hasInvalidWeekData(normalized) : containsOrdinal ? hasInvalidOrdinalData(normalized) : hasInvalidGregorianData(normalized), invalid = higherOrderInvalid || hasInvalidTimeData(normalized);
        if (invalid) {
          return DateTime2.invalid(invalid);
        }
        var gregorian = useWeekData ? weekToGregorian(normalized) : containsOrdinal ? ordinalToGregorian(normalized) : normalized, _objToTS2 = objToTS(gregorian, offsetProvis, zoneToUse), tsFinal = _objToTS2[0], offsetFinal = _objToTS2[1], inst = new DateTime2({
          ts: tsFinal,
          zone: zoneToUse,
          o: offsetFinal,
          loc
        });
        if (normalized.weekday && containsGregor && obj.weekday !== inst.weekday) {
          return DateTime2.invalid("mismatched weekday", "you can't specify both a weekday of " + normalized.weekday + " and a date of " + inst.toISO());
        }
        return inst;
      };
      DateTime2.fromISO = function fromISO(text, opts) {
        if (opts === void 0) {
          opts = {};
        }
        var _parseISODate = parseISODate(text), vals = _parseISODate[0], parsedZone = _parseISODate[1];
        return parseDataToDateTime(vals, parsedZone, opts, "ISO 8601", text);
      };
      DateTime2.fromRFC2822 = function fromRFC2822(text, opts) {
        if (opts === void 0) {
          opts = {};
        }
        var _parseRFC2822Date = parseRFC2822Date(text), vals = _parseRFC2822Date[0], parsedZone = _parseRFC2822Date[1];
        return parseDataToDateTime(vals, parsedZone, opts, "RFC 2822", text);
      };
      DateTime2.fromHTTP = function fromHTTP(text, opts) {
        if (opts === void 0) {
          opts = {};
        }
        var _parseHTTPDate = parseHTTPDate(text), vals = _parseHTTPDate[0], parsedZone = _parseHTTPDate[1];
        return parseDataToDateTime(vals, parsedZone, opts, "HTTP", opts);
      };
      DateTime2.fromFormat = function fromFormat(text, fmt, opts) {
        if (opts === void 0) {
          opts = {};
        }
        if (isUndefined(text) || isUndefined(fmt)) {
          throw new InvalidArgumentError("fromFormat requires an input string and a format");
        }
        var _opts = opts, _opts$locale = _opts.locale, locale = _opts$locale === void 0 ? null : _opts$locale, _opts$numberingSystem = _opts.numberingSystem, numberingSystem = _opts$numberingSystem === void 0 ? null : _opts$numberingSystem, localeToUse = Locale.fromOpts({
          locale,
          numberingSystem,
          defaultToEN: true
        }), _parseFromTokens = parseFromTokens(localeToUse, text, fmt), vals = _parseFromTokens[0], parsedZone = _parseFromTokens[1], specificOffset = _parseFromTokens[2], invalid = _parseFromTokens[3];
        if (invalid) {
          return DateTime2.invalid(invalid);
        } else {
          return parseDataToDateTime(vals, parsedZone, opts, "format " + fmt, text, specificOffset);
        }
      };
      DateTime2.fromString = function fromString(text, fmt, opts) {
        if (opts === void 0) {
          opts = {};
        }
        return DateTime2.fromFormat(text, fmt, opts);
      };
      DateTime2.fromSQL = function fromSQL(text, opts) {
        if (opts === void 0) {
          opts = {};
        }
        var _parseSQL = parseSQL(text), vals = _parseSQL[0], parsedZone = _parseSQL[1];
        return parseDataToDateTime(vals, parsedZone, opts, "SQL", text);
      };
      DateTime2.invalid = function invalid(reason, explanation) {
        if (explanation === void 0) {
          explanation = null;
        }
        if (!reason) {
          throw new InvalidArgumentError("need to specify a reason the DateTime is invalid");
        }
        var invalid2 = reason instanceof Invalid ? reason : new Invalid(reason, explanation);
        if (Settings.throwOnInvalid) {
          throw new InvalidDateTimeError(invalid2);
        } else {
          return new DateTime2({
            invalid: invalid2
          });
        }
      };
      DateTime2.isDateTime = function isDateTime(o) {
        return o && o.isLuxonDateTime || false;
      };
      var _proto = DateTime2.prototype;
      _proto.get = function get(unit) {
        return this[unit];
      };
      _proto.resolvedLocaleOptions = function resolvedLocaleOptions(opts) {
        if (opts === void 0) {
          opts = {};
        }
        var _Formatter$create$res = Formatter.create(this.loc.clone(opts), opts).resolvedOptions(this), locale = _Formatter$create$res.locale, numberingSystem = _Formatter$create$res.numberingSystem, calendar = _Formatter$create$res.calendar;
        return {
          locale,
          numberingSystem,
          outputCalendar: calendar
        };
      };
      _proto.toUTC = function toUTC(offset2, opts) {
        if (offset2 === void 0) {
          offset2 = 0;
        }
        if (opts === void 0) {
          opts = {};
        }
        return this.setZone(FixedOffsetZone.instance(offset2), opts);
      };
      _proto.toLocal = function toLocal() {
        return this.setZone(Settings.defaultZone);
      };
      _proto.setZone = function setZone(zone, _temp) {
        var _ref2 = _temp === void 0 ? {} : _temp, _ref2$keepLocalTime = _ref2.keepLocalTime, keepLocalTime = _ref2$keepLocalTime === void 0 ? false : _ref2$keepLocalTime, _ref2$keepCalendarTim = _ref2.keepCalendarTime, keepCalendarTime = _ref2$keepCalendarTim === void 0 ? false : _ref2$keepCalendarTim;
        zone = normalizeZone(zone, Settings.defaultZone);
        if (zone.equals(this.zone)) {
          return this;
        } else if (!zone.isValid) {
          return DateTime2.invalid(unsupportedZone(zone));
        } else {
          var newTS = this.ts;
          if (keepLocalTime || keepCalendarTime) {
            var offsetGuess = zone.offset(this.ts);
            var asObj = this.toObject();
            var _objToTS3 = objToTS(asObj, offsetGuess, zone);
            newTS = _objToTS3[0];
          }
          return clone(this, {
            ts: newTS,
            zone
          });
        }
      };
      _proto.reconfigure = function reconfigure(_temp2) {
        var _ref3 = _temp2 === void 0 ? {} : _temp2, locale = _ref3.locale, numberingSystem = _ref3.numberingSystem, outputCalendar = _ref3.outputCalendar;
        var loc = this.loc.clone({
          locale,
          numberingSystem,
          outputCalendar
        });
        return clone(this, {
          loc
        });
      };
      _proto.setLocale = function setLocale(locale) {
        return this.reconfigure({
          locale
        });
      };
      _proto.set = function set(values) {
        if (!this.isValid)
          return this;
        var normalized = normalizeObject(values, normalizeUnit), settingWeekStuff = !isUndefined(normalized.weekYear) || !isUndefined(normalized.weekNumber) || !isUndefined(normalized.weekday), containsOrdinal = !isUndefined(normalized.ordinal), containsGregorYear = !isUndefined(normalized.year), containsGregorMD = !isUndefined(normalized.month) || !isUndefined(normalized.day), containsGregor = containsGregorYear || containsGregorMD, definiteWeekDef = normalized.weekYear || normalized.weekNumber;
        if ((containsGregor || containsOrdinal) && definiteWeekDef) {
          throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals");
        }
        if (containsGregorMD && containsOrdinal) {
          throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");
        }
        var mixed;
        if (settingWeekStuff) {
          mixed = weekToGregorian(_extends({}, gregorianToWeek(this.c), normalized));
        } else if (!isUndefined(normalized.ordinal)) {
          mixed = ordinalToGregorian(_extends({}, gregorianToOrdinal(this.c), normalized));
        } else {
          mixed = _extends({}, this.toObject(), normalized);
          if (isUndefined(normalized.day)) {
            mixed.day = Math.min(daysInMonth(mixed.year, mixed.month), mixed.day);
          }
        }
        var _objToTS4 = objToTS(mixed, this.o, this.zone), ts = _objToTS4[0], o = _objToTS4[1];
        return clone(this, {
          ts,
          o
        });
      };
      _proto.plus = function plus(duration) {
        if (!this.isValid)
          return this;
        var dur = Duration.fromDurationLike(duration);
        return clone(this, adjustTime(this, dur));
      };
      _proto.minus = function minus(duration) {
        if (!this.isValid)
          return this;
        var dur = Duration.fromDurationLike(duration).negate();
        return clone(this, adjustTime(this, dur));
      };
      _proto.startOf = function startOf(unit) {
        if (!this.isValid)
          return this;
        var o = {}, normalizedUnit = Duration.normalizeUnit(unit);
        switch (normalizedUnit) {
          case "years":
            o.month = 1;
          case "quarters":
          case "months":
            o.day = 1;
          case "weeks":
          case "days":
            o.hour = 0;
          case "hours":
            o.minute = 0;
          case "minutes":
            o.second = 0;
          case "seconds":
            o.millisecond = 0;
            break;
        }
        if (normalizedUnit === "weeks") {
          o.weekday = 1;
        }
        if (normalizedUnit === "quarters") {
          var q = Math.ceil(this.month / 3);
          o.month = (q - 1) * 3 + 1;
        }
        return this.set(o);
      };
      _proto.endOf = function endOf(unit) {
        var _this$plus;
        return this.isValid ? this.plus((_this$plus = {}, _this$plus[unit] = 1, _this$plus)).startOf(unit).minus(1) : this;
      };
      _proto.toFormat = function toFormat(fmt, opts) {
        if (opts === void 0) {
          opts = {};
        }
        return this.isValid ? Formatter.create(this.loc.redefaultToEN(opts)).formatDateTimeFromString(this, fmt) : INVALID;
      };
      _proto.toLocaleString = function toLocaleString(formatOpts, opts) {
        if (formatOpts === void 0) {
          formatOpts = DATE_SHORT;
        }
        if (opts === void 0) {
          opts = {};
        }
        return this.isValid ? Formatter.create(this.loc.clone(opts), formatOpts).formatDateTime(this) : INVALID;
      };
      _proto.toLocaleParts = function toLocaleParts(opts) {
        if (opts === void 0) {
          opts = {};
        }
        return this.isValid ? Formatter.create(this.loc.clone(opts), opts).formatDateTimeParts(this) : [];
      };
      _proto.toISO = function toISO(_temp3) {
        var _ref4 = _temp3 === void 0 ? {} : _temp3, _ref4$format = _ref4.format, format = _ref4$format === void 0 ? "extended" : _ref4$format, _ref4$suppressSeconds = _ref4.suppressSeconds, suppressSeconds = _ref4$suppressSeconds === void 0 ? false : _ref4$suppressSeconds, _ref4$suppressMillise = _ref4.suppressMilliseconds, suppressMilliseconds = _ref4$suppressMillise === void 0 ? false : _ref4$suppressMillise, _ref4$includeOffset = _ref4.includeOffset, includeOffset = _ref4$includeOffset === void 0 ? true : _ref4$includeOffset, _ref4$extendedZone = _ref4.extendedZone, extendedZone = _ref4$extendedZone === void 0 ? false : _ref4$extendedZone;
        if (!this.isValid) {
          return null;
        }
        var ext = format === "extended";
        var c = _toISODate(this, ext);
        c += "T";
        c += _toISOTime(this, ext, suppressSeconds, suppressMilliseconds, includeOffset, extendedZone);
        return c;
      };
      _proto.toISODate = function toISODate(_temp4) {
        var _ref5 = _temp4 === void 0 ? {} : _temp4, _ref5$format = _ref5.format, format = _ref5$format === void 0 ? "extended" : _ref5$format;
        if (!this.isValid) {
          return null;
        }
        return _toISODate(this, format === "extended");
      };
      _proto.toISOWeekDate = function toISOWeekDate() {
        return toTechFormat(this, "kkkk-'W'WW-c");
      };
      _proto.toISOTime = function toISOTime(_temp5) {
        var _ref6 = _temp5 === void 0 ? {} : _temp5, _ref6$suppressMillise = _ref6.suppressMilliseconds, suppressMilliseconds = _ref6$suppressMillise === void 0 ? false : _ref6$suppressMillise, _ref6$suppressSeconds = _ref6.suppressSeconds, suppressSeconds = _ref6$suppressSeconds === void 0 ? false : _ref6$suppressSeconds, _ref6$includeOffset = _ref6.includeOffset, includeOffset = _ref6$includeOffset === void 0 ? true : _ref6$includeOffset, _ref6$includePrefix = _ref6.includePrefix, includePrefix = _ref6$includePrefix === void 0 ? false : _ref6$includePrefix, _ref6$extendedZone = _ref6.extendedZone, extendedZone = _ref6$extendedZone === void 0 ? false : _ref6$extendedZone, _ref6$format = _ref6.format, format = _ref6$format === void 0 ? "extended" : _ref6$format;
        if (!this.isValid) {
          return null;
        }
        var c = includePrefix ? "T" : "";
        return c + _toISOTime(this, format === "extended", suppressSeconds, suppressMilliseconds, includeOffset, extendedZone);
      };
      _proto.toRFC2822 = function toRFC2822() {
        return toTechFormat(this, "EEE, dd LLL yyyy HH:mm:ss ZZZ", false);
      };
      _proto.toHTTP = function toHTTP() {
        return toTechFormat(this.toUTC(), "EEE, dd LLL yyyy HH:mm:ss 'GMT'");
      };
      _proto.toSQLDate = function toSQLDate() {
        if (!this.isValid) {
          return null;
        }
        return _toISODate(this, true);
      };
      _proto.toSQLTime = function toSQLTime(_temp6) {
        var _ref7 = _temp6 === void 0 ? {} : _temp6, _ref7$includeOffset = _ref7.includeOffset, includeOffset = _ref7$includeOffset === void 0 ? true : _ref7$includeOffset, _ref7$includeZone = _ref7.includeZone, includeZone = _ref7$includeZone === void 0 ? false : _ref7$includeZone, _ref7$includeOffsetSp = _ref7.includeOffsetSpace, includeOffsetSpace = _ref7$includeOffsetSp === void 0 ? true : _ref7$includeOffsetSp;
        var fmt = "HH:mm:ss.SSS";
        if (includeZone || includeOffset) {
          if (includeOffsetSpace) {
            fmt += " ";
          }
          if (includeZone) {
            fmt += "z";
          } else if (includeOffset) {
            fmt += "ZZ";
          }
        }
        return toTechFormat(this, fmt, true);
      };
      _proto.toSQL = function toSQL(opts) {
        if (opts === void 0) {
          opts = {};
        }
        if (!this.isValid) {
          return null;
        }
        return this.toSQLDate() + " " + this.toSQLTime(opts);
      };
      _proto.toString = function toString() {
        return this.isValid ? this.toISO() : INVALID;
      };
      _proto.valueOf = function valueOf() {
        return this.toMillis();
      };
      _proto.toMillis = function toMillis() {
        return this.isValid ? this.ts : NaN;
      };
      _proto.toSeconds = function toSeconds() {
        return this.isValid ? this.ts / 1e3 : NaN;
      };
      _proto.toUnixInteger = function toUnixInteger() {
        return this.isValid ? Math.floor(this.ts / 1e3) : NaN;
      };
      _proto.toJSON = function toJSON() {
        return this.toISO();
      };
      _proto.toBSON = function toBSON() {
        return this.toJSDate();
      };
      _proto.toObject = function toObject(opts) {
        if (opts === void 0) {
          opts = {};
        }
        if (!this.isValid)
          return {};
        var base = _extends({}, this.c);
        if (opts.includeConfig) {
          base.outputCalendar = this.outputCalendar;
          base.numberingSystem = this.loc.numberingSystem;
          base.locale = this.loc.locale;
        }
        return base;
      };
      _proto.toJSDate = function toJSDate() {
        return new Date(this.isValid ? this.ts : NaN);
      };
      _proto.diff = function diff(otherDateTime, unit, opts) {
        if (unit === void 0) {
          unit = "milliseconds";
        }
        if (opts === void 0) {
          opts = {};
        }
        if (!this.isValid || !otherDateTime.isValid) {
          return Duration.invalid("created by diffing an invalid DateTime");
        }
        var durOpts = _extends({
          locale: this.locale,
          numberingSystem: this.numberingSystem
        }, opts);
        var units = maybeArray(unit).map(Duration.normalizeUnit), otherIsLater = otherDateTime.valueOf() > this.valueOf(), earlier = otherIsLater ? this : otherDateTime, later = otherIsLater ? otherDateTime : this, diffed = _diff(earlier, later, units, durOpts);
        return otherIsLater ? diffed.negate() : diffed;
      };
      _proto.diffNow = function diffNow(unit, opts) {
        if (unit === void 0) {
          unit = "milliseconds";
        }
        if (opts === void 0) {
          opts = {};
        }
        return this.diff(DateTime2.now(), unit, opts);
      };
      _proto.until = function until(otherDateTime) {
        return this.isValid ? Interval.fromDateTimes(this, otherDateTime) : this;
      };
      _proto.hasSame = function hasSame(otherDateTime, unit) {
        if (!this.isValid)
          return false;
        var inputMs = otherDateTime.valueOf();
        var adjustedToZone = this.setZone(otherDateTime.zone, {
          keepLocalTime: true
        });
        return adjustedToZone.startOf(unit) <= inputMs && inputMs <= adjustedToZone.endOf(unit);
      };
      _proto.equals = function equals(other) {
        return this.isValid && other.isValid && this.valueOf() === other.valueOf() && this.zone.equals(other.zone) && this.loc.equals(other.loc);
      };
      _proto.toRelative = function toRelative(options) {
        if (options === void 0) {
          options = {};
        }
        if (!this.isValid)
          return null;
        var base = options.base || DateTime2.fromObject({}, {
          zone: this.zone
        }), padding = options.padding ? this < base ? -options.padding : options.padding : 0;
        var units = ["years", "months", "days", "hours", "minutes", "seconds"];
        var unit = options.unit;
        if (Array.isArray(options.unit)) {
          units = options.unit;
          unit = void 0;
        }
        return diffRelative(base, this.plus(padding), _extends({}, options, {
          numeric: "always",
          units,
          unit
        }));
      };
      _proto.toRelativeCalendar = function toRelativeCalendar(options) {
        if (options === void 0) {
          options = {};
        }
        if (!this.isValid)
          return null;
        return diffRelative(options.base || DateTime2.fromObject({}, {
          zone: this.zone
        }), this, _extends({}, options, {
          numeric: "auto",
          units: ["years", "months", "days"],
          calendary: true
        }));
      };
      DateTime2.min = function min() {
        for (var _len = arguments.length, dateTimes = new Array(_len), _key = 0; _key < _len; _key++) {
          dateTimes[_key] = arguments[_key];
        }
        if (!dateTimes.every(DateTime2.isDateTime)) {
          throw new InvalidArgumentError("min requires all arguments be DateTimes");
        }
        return bestBy(dateTimes, function(i) {
          return i.valueOf();
        }, Math.min);
      };
      DateTime2.max = function max() {
        for (var _len2 = arguments.length, dateTimes = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
          dateTimes[_key2] = arguments[_key2];
        }
        if (!dateTimes.every(DateTime2.isDateTime)) {
          throw new InvalidArgumentError("max requires all arguments be DateTimes");
        }
        return bestBy(dateTimes, function(i) {
          return i.valueOf();
        }, Math.max);
      };
      DateTime2.fromFormatExplain = function fromFormatExplain(text, fmt, options) {
        if (options === void 0) {
          options = {};
        }
        var _options = options, _options$locale = _options.locale, locale = _options$locale === void 0 ? null : _options$locale, _options$numberingSys = _options.numberingSystem, numberingSystem = _options$numberingSys === void 0 ? null : _options$numberingSys, localeToUse = Locale.fromOpts({
          locale,
          numberingSystem,
          defaultToEN: true
        });
        return explainFromTokens(localeToUse, text, fmt);
      };
      DateTime2.fromStringExplain = function fromStringExplain(text, fmt, options) {
        if (options === void 0) {
          options = {};
        }
        return DateTime2.fromFormatExplain(text, fmt, options);
      };
      _createClass(DateTime2, [{
        key: "isValid",
        get: function get() {
          return this.invalid === null;
        }
      }, {
        key: "invalidReason",
        get: function get() {
          return this.invalid ? this.invalid.reason : null;
        }
      }, {
        key: "invalidExplanation",
        get: function get() {
          return this.invalid ? this.invalid.explanation : null;
        }
      }, {
        key: "locale",
        get: function get() {
          return this.isValid ? this.loc.locale : null;
        }
      }, {
        key: "numberingSystem",
        get: function get() {
          return this.isValid ? this.loc.numberingSystem : null;
        }
      }, {
        key: "outputCalendar",
        get: function get() {
          return this.isValid ? this.loc.outputCalendar : null;
        }
      }, {
        key: "zone",
        get: function get() {
          return this._zone;
        }
      }, {
        key: "zoneName",
        get: function get() {
          return this.isValid ? this.zone.name : null;
        }
      }, {
        key: "year",
        get: function get() {
          return this.isValid ? this.c.year : NaN;
        }
      }, {
        key: "quarter",
        get: function get() {
          return this.isValid ? Math.ceil(this.c.month / 3) : NaN;
        }
      }, {
        key: "month",
        get: function get() {
          return this.isValid ? this.c.month : NaN;
        }
      }, {
        key: "day",
        get: function get() {
          return this.isValid ? this.c.day : NaN;
        }
      }, {
        key: "hour",
        get: function get() {
          return this.isValid ? this.c.hour : NaN;
        }
      }, {
        key: "minute",
        get: function get() {
          return this.isValid ? this.c.minute : NaN;
        }
      }, {
        key: "second",
        get: function get() {
          return this.isValid ? this.c.second : NaN;
        }
      }, {
        key: "millisecond",
        get: function get() {
          return this.isValid ? this.c.millisecond : NaN;
        }
      }, {
        key: "weekYear",
        get: function get() {
          return this.isValid ? possiblyCachedWeekData(this).weekYear : NaN;
        }
      }, {
        key: "weekNumber",
        get: function get() {
          return this.isValid ? possiblyCachedWeekData(this).weekNumber : NaN;
        }
      }, {
        key: "weekday",
        get: function get() {
          return this.isValid ? possiblyCachedWeekData(this).weekday : NaN;
        }
      }, {
        key: "ordinal",
        get: function get() {
          return this.isValid ? gregorianToOrdinal(this.c).ordinal : NaN;
        }
      }, {
        key: "monthShort",
        get: function get() {
          return this.isValid ? Info.months("short", {
            locObj: this.loc
          })[this.month - 1] : null;
        }
      }, {
        key: "monthLong",
        get: function get() {
          return this.isValid ? Info.months("long", {
            locObj: this.loc
          })[this.month - 1] : null;
        }
      }, {
        key: "weekdayShort",
        get: function get() {
          return this.isValid ? Info.weekdays("short", {
            locObj: this.loc
          })[this.weekday - 1] : null;
        }
      }, {
        key: "weekdayLong",
        get: function get() {
          return this.isValid ? Info.weekdays("long", {
            locObj: this.loc
          })[this.weekday - 1] : null;
        }
      }, {
        key: "offset",
        get: function get() {
          return this.isValid ? +this.o : NaN;
        }
      }, {
        key: "offsetNameShort",
        get: function get() {
          if (this.isValid) {
            return this.zone.offsetName(this.ts, {
              format: "short",
              locale: this.locale
            });
          } else {
            return null;
          }
        }
      }, {
        key: "offsetNameLong",
        get: function get() {
          if (this.isValid) {
            return this.zone.offsetName(this.ts, {
              format: "long",
              locale: this.locale
            });
          } else {
            return null;
          }
        }
      }, {
        key: "isOffsetFixed",
        get: function get() {
          return this.isValid ? this.zone.isUniversal : null;
        }
      }, {
        key: "isInDST",
        get: function get() {
          if (this.isOffsetFixed) {
            return false;
          } else {
            return this.offset > this.set({
              month: 1,
              day: 1
            }).offset || this.offset > this.set({
              month: 5
            }).offset;
          }
        }
      }, {
        key: "isInLeapYear",
        get: function get() {
          return isLeapYear(this.year);
        }
      }, {
        key: "daysInMonth",
        get: function get() {
          return daysInMonth(this.year, this.month);
        }
      }, {
        key: "daysInYear",
        get: function get() {
          return this.isValid ? daysInYear(this.year) : NaN;
        }
      }, {
        key: "weeksInWeekYear",
        get: function get() {
          return this.isValid ? weeksInWeekYear(this.weekYear) : NaN;
        }
      }], [{
        key: "DATE_SHORT",
        get: function get() {
          return DATE_SHORT;
        }
      }, {
        key: "DATE_MED",
        get: function get() {
          return DATE_MED;
        }
      }, {
        key: "DATE_MED_WITH_WEEKDAY",
        get: function get() {
          return DATE_MED_WITH_WEEKDAY;
        }
      }, {
        key: "DATE_FULL",
        get: function get() {
          return DATE_FULL;
        }
      }, {
        key: "DATE_HUGE",
        get: function get() {
          return DATE_HUGE;
        }
      }, {
        key: "TIME_SIMPLE",
        get: function get() {
          return TIME_SIMPLE;
        }
      }, {
        key: "TIME_WITH_SECONDS",
        get: function get() {
          return TIME_WITH_SECONDS;
        }
      }, {
        key: "TIME_WITH_SHORT_OFFSET",
        get: function get() {
          return TIME_WITH_SHORT_OFFSET;
        }
      }, {
        key: "TIME_WITH_LONG_OFFSET",
        get: function get() {
          return TIME_WITH_LONG_OFFSET;
        }
      }, {
        key: "TIME_24_SIMPLE",
        get: function get() {
          return TIME_24_SIMPLE;
        }
      }, {
        key: "TIME_24_WITH_SECONDS",
        get: function get() {
          return TIME_24_WITH_SECONDS;
        }
      }, {
        key: "TIME_24_WITH_SHORT_OFFSET",
        get: function get() {
          return TIME_24_WITH_SHORT_OFFSET;
        }
      }, {
        key: "TIME_24_WITH_LONG_OFFSET",
        get: function get() {
          return TIME_24_WITH_LONG_OFFSET;
        }
      }, {
        key: "DATETIME_SHORT",
        get: function get() {
          return DATETIME_SHORT;
        }
      }, {
        key: "DATETIME_SHORT_WITH_SECONDS",
        get: function get() {
          return DATETIME_SHORT_WITH_SECONDS;
        }
      }, {
        key: "DATETIME_MED",
        get: function get() {
          return DATETIME_MED;
        }
      }, {
        key: "DATETIME_MED_WITH_SECONDS",
        get: function get() {
          return DATETIME_MED_WITH_SECONDS;
        }
      }, {
        key: "DATETIME_MED_WITH_WEEKDAY",
        get: function get() {
          return DATETIME_MED_WITH_WEEKDAY;
        }
      }, {
        key: "DATETIME_FULL",
        get: function get() {
          return DATETIME_FULL;
        }
      }, {
        key: "DATETIME_FULL_WITH_SECONDS",
        get: function get() {
          return DATETIME_FULL_WITH_SECONDS;
        }
      }, {
        key: "DATETIME_HUGE",
        get: function get() {
          return DATETIME_HUGE;
        }
      }, {
        key: "DATETIME_HUGE_WITH_SECONDS",
        get: function get() {
          return DATETIME_HUGE_WITH_SECONDS;
        }
      }]);
      return DateTime2;
    }();
    function friendlyDateTime(dateTimeish) {
      if (DateTime.isDateTime(dateTimeish)) {
        return dateTimeish;
      } else if (dateTimeish && dateTimeish.valueOf && isNumber(dateTimeish.valueOf())) {
        return DateTime.fromJSDate(dateTimeish);
      } else if (dateTimeish && typeof dateTimeish === "object") {
        return DateTime.fromObject(dateTimeish);
      } else {
        throw new InvalidArgumentError("Unknown datetime argument: " + dateTimeish + ", of type " + typeof dateTimeish);
      }
    }
    var VERSION = "2.4.0";
    var DateTime_1 = luxon.DateTime = DateTime;
    var Duration_1 = luxon.Duration = Duration;
    luxon.FixedOffsetZone = FixedOffsetZone;
    luxon.IANAZone = IANAZone;
    luxon.Info = Info;
    luxon.Interval = Interval;
    luxon.InvalidZone = InvalidZone;
    luxon.Settings = Settings;
    luxon.SystemZone = SystemZone;
    luxon.VERSION = VERSION;
    luxon.Zone = Zone;
    var DEFAULT_QUERY_SETTINGS = {
      renderNullAs: "\\-",
      taskCompletionTracking: false,
      taskCompletionUseEmojiShorthand: false,
      taskCompletionText: "completion",
      taskCompletionDateFormat: "yyyy-MM-dd",
      recursiveSubTaskCompletion: false,
      warnOnEmptyResult: true,
      refreshEnabled: true,
      refreshInterval: 2500,
      defaultDateFormat: "MMMM dd, yyyy",
      defaultDateTimeFormat: "h:mm a - MMMM dd, yyyy",
      maxRecursiveRenderDepth: 4,
      tableIdColumnName: "File",
      tableGroupColumnName: "Group"
    };
    var DEFAULT_EXPORT_SETTINGS = {
      allowHtml: true
    };
    __spreadValues(__spreadValues(__spreadValues({}, DEFAULT_QUERY_SETTINGS), DEFAULT_EXPORT_SETTINGS), {
      inlineQueryPrefix: "=",
      inlineJsQueryPrefix: "$=",
      inlineQueriesInCodeblocks: true,
      enableInlineDataview: true,
      enableDataviewJs: false,
      enableInlineDataviewJs: false,
      prettyRenderInlineFields: true
    });
    var Success = class {
      constructor(value) {
        this.value = value;
        this.successful = true;
      }
      map(f) {
        return new Success(f(this.value));
      }
      flatMap(f) {
        return f(this.value);
      }
      mapErr(f) {
        return this;
      }
      bimap(succ, _fail) {
        return this.map(succ);
      }
      orElse(_value) {
        return this.value;
      }
      cast() {
        return this;
      }
      orElseThrow(_message) {
        return this.value;
      }
    };
    var Failure = class {
      constructor(error) {
        this.error = error;
        this.successful = false;
      }
      map(_f) {
        return this;
      }
      flatMap(_f) {
        return this;
      }
      mapErr(f) {
        return new Failure(f(this.error));
      }
      bimap(_succ, fail) {
        return this.mapErr(fail);
      }
      orElse(value) {
        return value;
      }
      cast() {
        return this;
      }
      orElseThrow(message) {
        if (message)
          throw new Error(message(this.error));
        else
          throw new Error("" + this.error);
      }
    };
    var Result;
    (function(Result2) {
      function success(value) {
        return new Success(value);
      }
      Result2.success = success;
      function failure(error) {
        return new Failure(error);
      }
      Result2.failure = failure;
      function flatMap2(first, second, f) {
        if (first.successful) {
          if (second.successful)
            return f(first.value, second.value);
          else
            return failure(second.error);
        } else {
          return failure(first.error);
        }
      }
      Result2.flatMap2 = flatMap2;
      function map2(first, second, f) {
        return flatMap2(first, second, (a, b) => success(f(a, b)));
      }
      Result2.map2 = map2;
    })(Result || (Result = {}));
    var parsimmon_umd_min = { exports: {} };
    (function(module3, exports2) {
      !function(n2, t) {
        module3.exports = t();
      }(typeof self != "undefined" ? self : commonjsGlobal, function() {
        return function(n2) {
          var t = {};
          function r(e) {
            if (t[e])
              return t[e].exports;
            var u = t[e] = { i: e, l: false, exports: {} };
            return n2[e].call(u.exports, u, u.exports, r), u.l = true, u.exports;
          }
          return r.m = n2, r.c = t, r.d = function(n3, t2, e) {
            r.o(n3, t2) || Object.defineProperty(n3, t2, { configurable: false, enumerable: true, get: e });
          }, r.r = function(n3) {
            Object.defineProperty(n3, "__esModule", { value: true });
          }, r.n = function(n3) {
            var t2 = n3 && n3.__esModule ? function() {
              return n3.default;
            } : function() {
              return n3;
            };
            return r.d(t2, "a", t2), t2;
          }, r.o = function(n3, t2) {
            return Object.prototype.hasOwnProperty.call(n3, t2);
          }, r.p = "", r(r.s = 0);
        }([function(n2, t, r) {
          function e(n3) {
            if (!(this instanceof e))
              return new e(n3);
            this._ = n3;
          }
          var u = e.prototype;
          function o(n3, t2) {
            for (var r2 = 0; r2 < n3; r2++)
              t2(r2);
          }
          function i(n3, t2, r2) {
            return function(n4, t3) {
              o(t3.length, function(r3) {
                n4(t3[r3], r3, t3);
              });
            }(function(r3, e2, u2) {
              t2 = n3(t2, r3, e2, u2);
            }, r2), t2;
          }
          function a(n3, t2) {
            return i(function(t3, r2, e2, u2) {
              return t3.concat([n3(r2, e2, u2)]);
            }, [], t2);
          }
          function f(n3, t2) {
            var r2 = { v: 0, buf: t2 };
            return o(n3, function() {
              var n4;
              r2 = { v: r2.v << 1 | (n4 = r2.buf, n4[0] >> 7), buf: function(n5) {
                var t3 = i(function(n6, t4, r3, e2) {
                  return n6.concat(r3 === e2.length - 1 ? Buffer.from([t4, 0]).readUInt16BE(0) : e2.readUInt16BE(r3));
                }, [], n5);
                return Buffer.from(a(function(n6) {
                  return (n6 << 1 & 65535) >> 8;
                }, t3));
              }(r2.buf) };
            }), r2;
          }
          function c() {
            return typeof Buffer != "undefined";
          }
          function s2() {
            if (!c())
              throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.");
          }
          function l2(n3) {
            s2();
            var t2 = i(function(n4, t3) {
              return n4 + t3;
            }, 0, n3);
            if (t2 % 8 != 0)
              throw new Error("The bits [" + n3.join(", ") + "] add up to " + t2 + " which is not an even number of bytes; the total should be divisible by 8");
            var r2, u2 = t2 / 8, o2 = (r2 = function(n4) {
              return n4 > 48;
            }, i(function(n4, t3) {
              return n4 || (r2(t3) ? t3 : n4);
            }, null, n3));
            if (o2)
              throw new Error(o2 + " bit range requested exceeds 48 bit (6 byte) Number max.");
            return new e(function(t3, r3) {
              var e2 = u2 + r3;
              return e2 > t3.length ? x(r3, u2.toString() + " bytes") : b(e2, i(function(n4, t4) {
                var r4 = f(t4, n4.buf);
                return { coll: n4.coll.concat(r4.v), buf: r4.buf };
              }, { coll: [], buf: t3.slice(r3, e2) }, n3).coll);
            });
          }
          function h(n3, t2) {
            return new e(function(r2, e2) {
              return s2(), e2 + t2 > r2.length ? x(e2, t2 + " bytes for " + n3) : b(e2 + t2, r2.slice(e2, e2 + t2));
            });
          }
          function p(n3, t2) {
            if (typeof (r2 = t2) != "number" || Math.floor(r2) !== r2 || t2 < 0 || t2 > 6)
              throw new Error(n3 + " requires integer length in range [0, 6].");
            var r2;
          }
          function d(n3) {
            return p("uintBE", n3), h("uintBE(" + n3 + ")", n3).map(function(t2) {
              return t2.readUIntBE(0, n3);
            });
          }
          function v(n3) {
            return p("uintLE", n3), h("uintLE(" + n3 + ")", n3).map(function(t2) {
              return t2.readUIntLE(0, n3);
            });
          }
          function g(n3) {
            return p("intBE", n3), h("intBE(" + n3 + ")", n3).map(function(t2) {
              return t2.readIntBE(0, n3);
            });
          }
          function m(n3) {
            return p("intLE", n3), h("intLE(" + n3 + ")", n3).map(function(t2) {
              return t2.readIntLE(0, n3);
            });
          }
          function y(n3) {
            return n3 instanceof e;
          }
          function E(n3) {
            return {}.toString.call(n3) === "[object Array]";
          }
          function w(n3) {
            return c() && Buffer.isBuffer(n3);
          }
          function b(n3, t2) {
            return { status: true, index: n3, value: t2, furthest: -1, expected: [] };
          }
          function x(n3, t2) {
            return E(t2) || (t2 = [t2]), { status: false, index: -1, value: null, furthest: n3, expected: t2 };
          }
          function B(n3, t2) {
            if (!t2)
              return n3;
            if (n3.furthest > t2.furthest)
              return n3;
            var r2 = n3.furthest === t2.furthest ? function(n4, t3) {
              if (function() {
                if (e._supportsSet !== void 0)
                  return e._supportsSet;
                var n5 = typeof Set != "undefined";
                return e._supportsSet = n5, n5;
              }() && Array.from) {
                for (var r3 = new Set(n4), u2 = 0; u2 < t3.length; u2++)
                  r3.add(t3[u2]);
                var o2 = Array.from(r3);
                return o2.sort(), o2;
              }
              for (var i2 = {}, a2 = 0; a2 < n4.length; a2++)
                i2[n4[a2]] = true;
              for (var f2 = 0; f2 < t3.length; f2++)
                i2[t3[f2]] = true;
              var c2 = [];
              for (var s3 in i2)
                ({}).hasOwnProperty.call(i2, s3) && c2.push(s3);
              return c2.sort(), c2;
            }(n3.expected, t2.expected) : t2.expected;
            return { status: n3.status, index: n3.index, value: n3.value, furthest: t2.furthest, expected: r2 };
          }
          var j = {};
          function S(n3, t2) {
            if (w(n3))
              return { offset: t2, line: -1, column: -1 };
            n3 in j || (j[n3] = {});
            for (var r2 = j[n3], e2 = 0, u2 = 0, o2 = 0, i2 = t2; i2 >= 0; ) {
              if (i2 in r2) {
                e2 = r2[i2].line, o2 === 0 && (o2 = r2[i2].lineStart);
                break;
              }
              (n3.charAt(i2) === "\n" || n3.charAt(i2) === "\r" && n3.charAt(i2 + 1) !== "\n") && (u2++, o2 === 0 && (o2 = i2 + 1)), i2--;
            }
            var a2 = e2 + u2, f2 = t2 - o2;
            return r2[t2] = { line: a2, lineStart: o2 }, { offset: t2, line: a2 + 1, column: f2 + 1 };
          }
          function _(n3) {
            if (!y(n3))
              throw new Error("not a parser: " + n3);
          }
          function L(n3, t2) {
            return typeof n3 == "string" ? n3.charAt(t2) : n3[t2];
          }
          function O(n3) {
            if (typeof n3 != "number")
              throw new Error("not a number: " + n3);
          }
          function k(n3) {
            if (typeof n3 != "function")
              throw new Error("not a function: " + n3);
          }
          function P(n3) {
            if (typeof n3 != "string")
              throw new Error("not a string: " + n3);
          }
          var q = 2, A = 3, I = 8, F = 5 * I, M = 4 * I, z = "  ";
          function R(n3, t2) {
            return new Array(t2 + 1).join(n3);
          }
          function U(n3, t2, r2) {
            var e2 = t2 - n3.length;
            return e2 <= 0 ? n3 : R(r2, e2) + n3;
          }
          function W(n3, t2, r2, e2) {
            return { from: n3 - t2 > 0 ? n3 - t2 : 0, to: n3 + r2 > e2 ? e2 : n3 + r2 };
          }
          function D(n3, t2) {
            var r2, e2, u2, o2, f2, c2 = t2.index, s3 = c2.offset, l3 = 1;
            if (s3 === n3.length)
              return "Got the end of the input";
            if (w(n3)) {
              var h2 = s3 - s3 % I, p2 = s3 - h2, d2 = W(h2, F, M + I, n3.length), v2 = a(function(n4) {
                return a(function(n5) {
                  return U(n5.toString(16), 2, "0");
                }, n4);
              }, function(n4, t3) {
                var r3 = n4.length, e3 = [], u3 = 0;
                if (r3 <= t3)
                  return [n4.slice()];
                for (var o3 = 0; o3 < r3; o3++)
                  e3[u3] || e3.push([]), e3[u3].push(n4[o3]), (o3 + 1) % t3 == 0 && u3++;
                return e3;
              }(n3.slice(d2.from, d2.to).toJSON().data, I));
              o2 = function(n4) {
                return n4.from === 0 && n4.to === 1 ? { from: n4.from, to: n4.to } : { from: n4.from / I, to: Math.floor(n4.to / I) };
              }(d2), e2 = h2 / I, r2 = 3 * p2, p2 >= 4 && (r2 += 1), l3 = 2, u2 = a(function(n4) {
                return n4.length <= 4 ? n4.join(" ") : n4.slice(0, 4).join(" ") + "  " + n4.slice(4).join(" ");
              }, v2), (f2 = (8 * (o2.to > 0 ? o2.to - 1 : o2.to)).toString(16).length) < 2 && (f2 = 2);
            } else {
              var g2 = n3.split(/\r\n|[\n\r\u2028\u2029]/);
              r2 = c2.column - 1, e2 = c2.line - 1, o2 = W(e2, q, A, g2.length), u2 = g2.slice(o2.from, o2.to), f2 = o2.to.toString().length;
            }
            var m2 = e2 - o2.from;
            return w(n3) && (f2 = (8 * (o2.to > 0 ? o2.to - 1 : o2.to)).toString(16).length) < 2 && (f2 = 2), i(function(t3, e3, u3) {
              var i2, a2 = u3 === m2, c3 = a2 ? "> " : z;
              return i2 = w(n3) ? U((8 * (o2.from + u3)).toString(16), f2, "0") : U((o2.from + u3 + 1).toString(), f2, " "), [].concat(t3, [c3 + i2 + " | " + e3], a2 ? [z + R(" ", f2) + " | " + U("", r2, " ") + R("^", l3)] : []);
            }, [], u2).join("\n");
          }
          function N(n3, t2) {
            return ["\n", "-- PARSING FAILED " + R("-", 50), "\n\n", D(n3, t2), "\n\n", (r2 = t2.expected, r2.length === 1 ? "Expected:\n\n" + r2[0] : "Expected one of the following: \n\n" + r2.join(", ")), "\n"].join("");
            var r2;
          }
          function G(n3) {
            return n3.flags !== void 0 ? n3.flags : [n3.global ? "g" : "", n3.ignoreCase ? "i" : "", n3.multiline ? "m" : "", n3.unicode ? "u" : "", n3.sticky ? "y" : ""].join("");
          }
          function C() {
            for (var n3 = [].slice.call(arguments), t2 = n3.length, r2 = 0; r2 < t2; r2 += 1)
              _(n3[r2]);
            return e(function(r3, e2) {
              for (var u2, o2 = new Array(t2), i2 = 0; i2 < t2; i2 += 1) {
                if (!(u2 = B(n3[i2]._(r3, e2), u2)).status)
                  return u2;
                o2[i2] = u2.value, e2 = u2.index;
              }
              return B(b(e2, o2), u2);
            });
          }
          function J() {
            var n3 = [].slice.call(arguments);
            if (n3.length === 0)
              throw new Error("seqMap needs at least one argument");
            var t2 = n3.pop();
            return k(t2), C.apply(null, n3).map(function(n4) {
              return t2.apply(null, n4);
            });
          }
          function T() {
            var n3 = [].slice.call(arguments), t2 = n3.length;
            if (t2 === 0)
              return Y("zero alternates");
            for (var r2 = 0; r2 < t2; r2 += 1)
              _(n3[r2]);
            return e(function(t3, r3) {
              for (var e2, u2 = 0; u2 < n3.length; u2 += 1)
                if ((e2 = B(n3[u2]._(t3, r3), e2)).status)
                  return e2;
              return e2;
            });
          }
          function V(n3, t2) {
            return H(n3, t2).or(X([]));
          }
          function H(n3, t2) {
            return _(n3), _(t2), J(n3, t2.then(n3).many(), function(n4, t3) {
              return [n4].concat(t3);
            });
          }
          function K(n3) {
            P(n3);
            var t2 = "'" + n3 + "'";
            return e(function(r2, e2) {
              var u2 = e2 + n3.length, o2 = r2.slice(e2, u2);
              return o2 === n3 ? b(u2, o2) : x(e2, t2);
            });
          }
          function Q(n3, t2) {
            !function(n4) {
              if (!(n4 instanceof RegExp))
                throw new Error("not a regexp: " + n4);
              for (var t3 = G(n4), r3 = 0; r3 < t3.length; r3++) {
                var e2 = t3.charAt(r3);
                if (e2 !== "i" && e2 !== "m" && e2 !== "u" && e2 !== "s")
                  throw new Error('unsupported regexp flag "' + e2 + '": ' + n4);
              }
            }(n3), arguments.length >= 2 ? O(t2) : t2 = 0;
            var r2 = function(n4) {
              return RegExp("^(?:" + n4.source + ")", G(n4));
            }(n3), u2 = "" + n3;
            return e(function(n4, e2) {
              var o2 = r2.exec(n4.slice(e2));
              if (o2) {
                if (0 <= t2 && t2 <= o2.length) {
                  var i2 = o2[0], a2 = o2[t2];
                  return b(e2 + i2.length, a2);
                }
                return x(e2, "valid match group (0 to " + o2.length + ") in " + u2);
              }
              return x(e2, u2);
            });
          }
          function X(n3) {
            return e(function(t2, r2) {
              return b(r2, n3);
            });
          }
          function Y(n3) {
            return e(function(t2, r2) {
              return x(r2, n3);
            });
          }
          function Z(n3) {
            if (y(n3))
              return e(function(t2, r2) {
                var e2 = n3._(t2, r2);
                return e2.index = r2, e2.value = "", e2;
              });
            if (typeof n3 == "string")
              return Z(K(n3));
            if (n3 instanceof RegExp)
              return Z(Q(n3));
            throw new Error("not a string, regexp, or parser: " + n3);
          }
          function $(n3) {
            return _(n3), e(function(t2, r2) {
              var e2 = n3._(t2, r2), u2 = t2.slice(r2, e2.index);
              return e2.status ? x(r2, 'not "' + u2 + '"') : b(r2, null);
            });
          }
          function nn(n3) {
            return k(n3), e(function(t2, r2) {
              var e2 = L(t2, r2);
              return r2 < t2.length && n3(e2) ? b(r2 + 1, e2) : x(r2, "a character/byte matching " + n3);
            });
          }
          function tn(n3, t2) {
            arguments.length < 2 && (t2 = n3, n3 = void 0);
            var r2 = e(function(n4, e2) {
              return r2._ = t2()._, r2._(n4, e2);
            });
            return n3 ? r2.desc(n3) : r2;
          }
          function rn() {
            return Y("fantasy-land/empty");
          }
          u.parse = function(n3) {
            if (typeof n3 != "string" && !w(n3))
              throw new Error(".parse must be called with a string or Buffer as its argument");
            var t2, r2 = this.skip(an)._(n3, 0);
            return t2 = r2.status ? { status: true, value: r2.value } : { status: false, index: S(n3, r2.furthest), expected: r2.expected }, delete j[n3], t2;
          }, u.tryParse = function(n3) {
            var t2 = this.parse(n3);
            if (t2.status)
              return t2.value;
            var r2 = N(n3, t2), e2 = new Error(r2);
            throw e2.type = "ParsimmonError", e2.result = t2, e2;
          }, u.assert = function(n3, t2) {
            return this.chain(function(r2) {
              return n3(r2) ? X(r2) : Y(t2);
            });
          }, u.or = function(n3) {
            return T(this, n3);
          }, u.trim = function(n3) {
            return this.wrap(n3, n3);
          }, u.wrap = function(n3, t2) {
            return J(n3, this, t2, function(n4, t3) {
              return t3;
            });
          }, u.thru = function(n3) {
            return n3(this);
          }, u.then = function(n3) {
            return _(n3), C(this, n3).map(function(n4) {
              return n4[1];
            });
          }, u.many = function() {
            var n3 = this;
            return e(function(t2, r2) {
              for (var e2 = [], u2 = void 0; ; ) {
                if (!(u2 = B(n3._(t2, r2), u2)).status)
                  return B(b(r2, e2), u2);
                if (r2 === u2.index)
                  throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");
                r2 = u2.index, e2.push(u2.value);
              }
            });
          }, u.tieWith = function(n3) {
            return P(n3), this.map(function(t2) {
              if (function(n4) {
                if (!E(n4))
                  throw new Error("not an array: " + n4);
              }(t2), t2.length) {
                P(t2[0]);
                for (var r2 = t2[0], e2 = 1; e2 < t2.length; e2++)
                  P(t2[e2]), r2 += n3 + t2[e2];
                return r2;
              }
              return "";
            });
          }, u.tie = function() {
            return this.tieWith("");
          }, u.times = function(n3, t2) {
            var r2 = this;
            return arguments.length < 2 && (t2 = n3), O(n3), O(t2), e(function(e2, u2) {
              for (var o2 = [], i2 = void 0, a2 = void 0, f2 = 0; f2 < n3; f2 += 1) {
                if (a2 = B(i2 = r2._(e2, u2), a2), !i2.status)
                  return a2;
                u2 = i2.index, o2.push(i2.value);
              }
              for (; f2 < t2 && (a2 = B(i2 = r2._(e2, u2), a2), i2.status); f2 += 1)
                u2 = i2.index, o2.push(i2.value);
              return B(b(u2, o2), a2);
            });
          }, u.result = function(n3) {
            return this.map(function() {
              return n3;
            });
          }, u.atMost = function(n3) {
            return this.times(0, n3);
          }, u.atLeast = function(n3) {
            return J(this.times(n3), this.many(), function(n4, t2) {
              return n4.concat(t2);
            });
          }, u.map = function(n3) {
            k(n3);
            var t2 = this;
            return e(function(r2, e2) {
              var u2 = t2._(r2, e2);
              return u2.status ? B(b(u2.index, n3(u2.value)), u2) : u2;
            });
          }, u.contramap = function(n3) {
            k(n3);
            var t2 = this;
            return e(function(r2, e2) {
              var u2 = t2.parse(n3(r2.slice(e2)));
              return u2.status ? b(e2 + r2.length, u2.value) : u2;
            });
          }, u.promap = function(n3, t2) {
            return k(n3), k(t2), this.contramap(n3).map(t2);
          }, u.skip = function(n3) {
            return C(this, n3).map(function(n4) {
              return n4[0];
            });
          }, u.mark = function() {
            return J(en, this, en, function(n3, t2, r2) {
              return { start: n3, value: t2, end: r2 };
            });
          }, u.node = function(n3) {
            return J(en, this, en, function(t2, r2, e2) {
              return { name: n3, value: r2, start: t2, end: e2 };
            });
          }, u.sepBy = function(n3) {
            return V(this, n3);
          }, u.sepBy1 = function(n3) {
            return H(this, n3);
          }, u.lookahead = function(n3) {
            return this.skip(Z(n3));
          }, u.notFollowedBy = function(n3) {
            return this.skip($(n3));
          }, u.desc = function(n3) {
            E(n3) || (n3 = [n3]);
            var t2 = this;
            return e(function(r2, e2) {
              var u2 = t2._(r2, e2);
              return u2.status || (u2.expected = n3), u2;
            });
          }, u.fallback = function(n3) {
            return this.or(X(n3));
          }, u.ap = function(n3) {
            return J(n3, this, function(n4, t2) {
              return n4(t2);
            });
          }, u.chain = function(n3) {
            var t2 = this;
            return e(function(r2, e2) {
              var u2 = t2._(r2, e2);
              return u2.status ? B(n3(u2.value)._(r2, u2.index), u2) : u2;
            });
          }, u.concat = u.or, u.empty = rn, u.of = X, u["fantasy-land/ap"] = u.ap, u["fantasy-land/chain"] = u.chain, u["fantasy-land/concat"] = u.concat, u["fantasy-land/empty"] = u.empty, u["fantasy-land/of"] = u.of, u["fantasy-land/map"] = u.map;
          var en = e(function(n3, t2) {
            return b(t2, S(n3, t2));
          }), un = e(function(n3, t2) {
            return t2 >= n3.length ? x(t2, "any character/byte") : b(t2 + 1, L(n3, t2));
          }), on = e(function(n3, t2) {
            return b(n3.length, n3.slice(t2));
          }), an = e(function(n3, t2) {
            return t2 < n3.length ? x(t2, "EOF") : b(t2, null);
          }), fn = Q(/[0-9]/).desc("a digit"), cn = Q(/[0-9]*/).desc("optional digits"), sn = Q(/[a-z]/i).desc("a letter"), ln = Q(/[a-z]*/i).desc("optional letters"), hn = Q(/\s*/).desc("optional whitespace"), pn = Q(/\s+/).desc("whitespace"), dn = K("\r"), vn = K("\n"), gn = K("\r\n"), mn = T(gn, vn, dn).desc("newline"), yn = T(mn, an);
          e.all = on, e.alt = T, e.any = un, e.cr = dn, e.createLanguage = function(n3) {
            var t2 = {};
            for (var r2 in n3)
              ({}).hasOwnProperty.call(n3, r2) && function(r3) {
                t2[r3] = tn(function() {
                  return n3[r3](t2);
                });
              }(r2);
            return t2;
          }, e.crlf = gn, e.custom = function(n3) {
            return e(n3(b, x));
          }, e.digit = fn, e.digits = cn, e.empty = rn, e.end = yn, e.eof = an, e.fail = Y, e.formatError = N, e.index = en, e.isParser = y, e.lazy = tn, e.letter = sn, e.letters = ln, e.lf = vn, e.lookahead = Z, e.makeFailure = x, e.makeSuccess = b, e.newline = mn, e.noneOf = function(n3) {
            return nn(function(t2) {
              return n3.indexOf(t2) < 0;
            }).desc("none of '" + n3 + "'");
          }, e.notFollowedBy = $, e.of = X, e.oneOf = function(n3) {
            for (var t2 = n3.split(""), r2 = 0; r2 < t2.length; r2++)
              t2[r2] = "'" + t2[r2] + "'";
            return nn(function(t3) {
              return n3.indexOf(t3) >= 0;
            }).desc(t2);
          }, e.optWhitespace = hn, e.Parser = e, e.range = function(n3, t2) {
            return nn(function(r2) {
              return n3 <= r2 && r2 <= t2;
            }).desc(n3 + "-" + t2);
          }, e.regex = Q, e.regexp = Q, e.sepBy = V, e.sepBy1 = H, e.seq = C, e.seqMap = J, e.seqObj = function() {
            for (var n3, t2 = {}, r2 = 0, u2 = (n3 = arguments, Array.prototype.slice.call(n3)), o2 = u2.length, i2 = 0; i2 < o2; i2 += 1) {
              var a2 = u2[i2];
              if (!y(a2)) {
                if (E(a2) && a2.length === 2 && typeof a2[0] == "string" && y(a2[1])) {
                  var f2 = a2[0];
                  if (Object.prototype.hasOwnProperty.call(t2, f2))
                    throw new Error("seqObj: duplicate key " + f2);
                  t2[f2] = true, r2++;
                  continue;
                }
                throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.");
              }
            }
            if (r2 === 0)
              throw new Error("seqObj expects at least one named parser, found zero");
            return e(function(n4, t3) {
              for (var r3, e2 = {}, i3 = 0; i3 < o2; i3 += 1) {
                var a3, f3;
                if (E(u2[i3]) ? (a3 = u2[i3][0], f3 = u2[i3][1]) : (a3 = null, f3 = u2[i3]), !(r3 = B(f3._(n4, t3), r3)).status)
                  return r3;
                a3 && (e2[a3] = r3.value), t3 = r3.index;
              }
              return B(b(t3, e2), r3);
            });
          }, e.string = K, e.succeed = X, e.takeWhile = function(n3) {
            return k(n3), e(function(t2, r2) {
              for (var e2 = r2; e2 < t2.length && n3(L(t2, e2)); )
                e2++;
              return b(e2, t2.slice(r2, e2));
            });
          }, e.test = nn, e.whitespace = pn, e["fantasy-land/empty"] = rn, e["fantasy-land/of"] = X, e.Binary = { bitSeq: l2, bitSeqObj: function(n3) {
            s2();
            var t2 = {}, r2 = 0, e2 = a(function(n4) {
              if (E(n4)) {
                var e3 = n4;
                if (e3.length !== 2)
                  throw new Error("[" + e3.join(", ") + "] should be length 2, got length " + e3.length);
                if (P(e3[0]), O(e3[1]), Object.prototype.hasOwnProperty.call(t2, e3[0]))
                  throw new Error("duplicate key in bitSeqObj: " + e3[0]);
                return t2[e3[0]] = true, r2++, e3;
              }
              return O(n4), [null, n4];
            }, n3);
            if (r2 < 1)
              throw new Error("bitSeqObj expects at least one named pair, got [" + n3.join(", ") + "]");
            var u2 = a(function(n4) {
              return n4[0];
            }, e2);
            return l2(a(function(n4) {
              return n4[1];
            }, e2)).map(function(n4) {
              return i(function(n5, t3) {
                return t3[0] !== null && (n5[t3[0]] = t3[1]), n5;
              }, {}, a(function(t3, r3) {
                return [t3, n4[r3]];
              }, u2));
            });
          }, byte: function(n3) {
            if (s2(), O(n3), n3 > 255)
              throw new Error("Value specified to byte constructor (" + n3 + "=0x" + n3.toString(16) + ") is larger in value than a single byte.");
            var t2 = (n3 > 15 ? "0x" : "0x0") + n3.toString(16);
            return e(function(r2, e2) {
              var u2 = L(r2, e2);
              return u2 === n3 ? b(e2 + 1, u2) : x(e2, t2);
            });
          }, buffer: function(n3) {
            return h("buffer", n3).map(function(n4) {
              return Buffer.from(n4);
            });
          }, encodedString: function(n3, t2) {
            return h("string", t2).map(function(t3) {
              return t3.toString(n3);
            });
          }, uintBE: d, uint8BE: d(1), uint16BE: d(2), uint32BE: d(4), uintLE: v, uint8LE: v(1), uint16LE: v(2), uint32LE: v(4), intBE: g, int8BE: g(1), int16BE: g(2), int32BE: g(4), intLE: m, int8LE: m(1), int16LE: m(2), int32LE: m(4), floatBE: h("floatBE", 4).map(function(n3) {
            return n3.readFloatBE(0);
          }), floatLE: h("floatLE", 4).map(function(n3) {
            return n3.readFloatLE(0);
          }), doubleBE: h("doubleBE", 8).map(function(n3) {
            return n3.readDoubleBE(0);
          }), doubleLE: h("doubleLE", 8).map(function(n3) {
            return n3.readDoubleLE(0);
          }) }, n2.exports = e;
        }]);
      });
    })(parsimmon_umd_min);
    var emojiRegex = () => {
      return /(?:[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDD-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF6](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC2\uDED0-\uDED9\uDEE0-\uDEE7]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?))/g;
    };
    function normalizeDuration(dur) {
      if (dur === void 0 || dur === null)
        return dur;
      return dur.shiftTo("years", "months", "weeks", "days", "hours", "minutes", "seconds", "milliseconds").normalize();
    }
    function getFileTitle(path) {
      if (path.includes("/"))
        path = path.substring(path.lastIndexOf("/") + 1);
      if (path.endsWith(".md"))
        path = path.substring(0, path.length - 3);
      return path;
    }
    parsimmon_umd_min.exports.alt(parsimmon_umd_min.exports.regex(new RegExp(emojiRegex(), "")), parsimmon_umd_min.exports.regex(/[0-9\p{Letter}_-]+/u).map((str) => str.toLocaleLowerCase()), parsimmon_umd_min.exports.whitespace.map((_) => "-"), parsimmon_umd_min.exports.any.map((_) => "")).many().map((result) => result.join(""));
    var HEADER_CANONICALIZER = parsimmon_umd_min.exports.alt(parsimmon_umd_min.exports.regex(new RegExp(emojiRegex(), "")), parsimmon_umd_min.exports.regex(/[0-9\p{Letter}_-]+/u), parsimmon_umd_min.exports.whitespace.map((_) => " "), parsimmon_umd_min.exports.any.map((_) => " ")).many().map((result) => {
      return result.join("").split(/\s+/).join(" ").trim();
    });
    function normalizeHeaderForLink(header) {
      return HEADER_CANONICALIZER.tryParse(header);
    }
    function renderMinimalDuration(dur) {
      dur = normalizeDuration(dur);
      let result = "";
      if (dur.years)
        result += `${dur.years} years, `;
      if (dur.months)
        result += `${dur.months} months, `;
      if (dur.weeks)
        result += `${dur.weeks} weeks, `;
      if (dur.days)
        result += `${dur.days} days, `;
      if (dur.hours)
        result += `${dur.hours} hours, `;
      if (dur.minutes)
        result += `${dur.minutes} minutes, `;
      if (dur.seconds)
        result += `${Math.round(dur.seconds)} seconds, `;
      if (dur.milliseconds)
        result += `${Math.round(dur.milliseconds)} ms, `;
      if (result.endsWith(", "))
        result = result.substring(0, result.length - 2);
      return result;
    }
    var Values;
    (function(Values2) {
      function toString(field, setting = DEFAULT_QUERY_SETTINGS, recursive = false) {
        let wrapped = wrapValue(field);
        if (!wrapped)
          return setting.renderNullAs;
        switch (wrapped.type) {
          case "null":
            return setting.renderNullAs;
          case "string":
            return wrapped.value;
          case "number":
          case "boolean":
            return "" + wrapped.value;
          case "html":
            return wrapped.value.outerHTML;
          case "widget":
            return wrapped.value.markdown();
          case "link":
            return wrapped.value.markdown();
          case "function":
            return "<function>";
          case "array":
            let result = "";
            if (recursive)
              result += "[";
            result += wrapped.value.map((f) => toString(f, setting, true)).join(", ");
            if (recursive)
              result += "]";
            return result;
          case "object":
            return "{ " + Object.entries(wrapped.value).map((e) => e[0] + ": " + toString(e[1], setting, true)).join(", ") + " }";
          case "date":
            if (wrapped.value.second == 0 && wrapped.value.hour == 0 && wrapped.value.minute == 0) {
              return wrapped.value.toFormat(setting.defaultDateFormat);
            }
            return wrapped.value.toFormat(setting.defaultDateTimeFormat);
          case "duration":
            return renderMinimalDuration(wrapped.value);
        }
      }
      Values2.toString = toString;
      function wrapValue(val) {
        if (isNull(val))
          return { type: "null", value: val };
        else if (isNumber2(val))
          return { type: "number", value: val };
        else if (isString2(val))
          return { type: "string", value: val };
        else if (isBoolean(val))
          return { type: "boolean", value: val };
        else if (isDuration(val))
          return { type: "duration", value: val };
        else if (isDate2(val))
          return { type: "date", value: val };
        else if (isWidget(val))
          return { type: "widget", value: val };
        else if (isArray(val))
          return { type: "array", value: val };
        else if (isLink(val))
          return { type: "link", value: val };
        else if (isFunction(val))
          return { type: "function", value: val };
        else if (isHtml(val))
          return { type: "html", value: val };
        else if (isObject(val))
          return { type: "object", value: val };
        else
          return void 0;
      }
      Values2.wrapValue = wrapValue;
      function mapLeaves(val, func) {
        if (isObject(val)) {
          let result = {};
          for (let [key, value] of Object.entries(val))
            result[key] = mapLeaves(value, func);
          return result;
        } else if (isArray(val)) {
          let result = [];
          for (let value of val)
            result.push(mapLeaves(value, func));
          return result;
        } else {
          return func(val);
        }
      }
      Values2.mapLeaves = mapLeaves;
      function compareValue(val1, val2, linkNormalizer) {
        var _a, _b;
        if (val1 === void 0)
          val1 = null;
        if (val2 === void 0)
          val2 = null;
        if (val1 === null && val2 === null)
          return 0;
        else if (val1 === null)
          return -1;
        else if (val2 === null)
          return 1;
        let wrap1 = wrapValue(val1);
        let wrap2 = wrapValue(val2);
        if (wrap1 === void 0 && wrap2 === void 0)
          return 0;
        else if (wrap1 === void 0)
          return -1;
        else if (wrap2 === void 0)
          return 1;
        if (wrap1.type != wrap2.type)
          return wrap1.type.localeCompare(wrap2.type);
        if (wrap1.value === wrap2.value)
          return 0;
        switch (wrap1.type) {
          case "string":
            return wrap1.value.localeCompare(wrap2.value);
          case "number":
            if (wrap1.value < wrap2.value)
              return -1;
            else if (wrap1.value == wrap2.value)
              return 0;
            return 1;
          case "null":
            return 0;
          case "boolean":
            if (wrap1.value == wrap2.value)
              return 0;
            else
              return wrap1.value ? 1 : -1;
          case "link":
            let link1 = wrap1.value;
            let link2 = wrap2.value;
            let normalize = linkNormalizer !== null && linkNormalizer !== void 0 ? linkNormalizer : (x) => x;
            let pathCompare = normalize(link1.path).localeCompare(normalize(link2.path));
            if (pathCompare != 0)
              return pathCompare;
            let typeCompare = link1.type.localeCompare(link2.type);
            if (typeCompare != 0)
              return typeCompare;
            if (link1.subpath && !link2.subpath)
              return 1;
            if (!link1.subpath && link2.subpath)
              return -1;
            if (!link1.subpath && !link2.subpath)
              return 0;
            return ((_a = link1.subpath) !== null && _a !== void 0 ? _a : "").localeCompare((_b = link2.subpath) !== null && _b !== void 0 ? _b : "");
          case "date":
            return wrap1.value < wrap2.value ? -1 : wrap1.value.equals(wrap2.value) ? 0 : 1;
          case "duration":
            return wrap1.value < wrap2.value ? -1 : wrap1.value.equals(wrap2.value) ? 0 : 1;
          case "array":
            let f1 = wrap1.value;
            let f2 = wrap2.value;
            for (let index = 0; index < Math.min(f1.length, f2.length); index++) {
              let comp = compareValue(f1[index], f2[index]);
              if (comp != 0)
                return comp;
            }
            return f1.length - f2.length;
          case "object":
            let o1 = wrap1.value;
            let o2 = wrap2.value;
            let k1 = Array.from(Object.keys(o1));
            let k2 = Array.from(Object.keys(o2));
            k1.sort();
            k2.sort();
            let keyCompare = compareValue(k1, k2);
            if (keyCompare != 0)
              return keyCompare;
            for (let key of k1) {
              let comp = compareValue(o1[key], o2[key]);
              if (comp != 0)
                return comp;
            }
            return 0;
          case "widget":
          case "html":
          case "function":
            return 0;
        }
      }
      Values2.compareValue = compareValue;
      function typeOf(val) {
        var _a;
        return (_a = wrapValue(val)) === null || _a === void 0 ? void 0 : _a.type;
      }
      Values2.typeOf = typeOf;
      function isTruthy(field) {
        let wrapped = wrapValue(field);
        if (!wrapped)
          return false;
        switch (wrapped.type) {
          case "number":
            return wrapped.value != 0;
          case "string":
            return wrapped.value.length > 0;
          case "boolean":
            return wrapped.value;
          case "link":
            return !!wrapped.value.path;
          case "date":
            return wrapped.value.toMillis() != 0;
          case "duration":
            return wrapped.value.as("seconds") != 0;
          case "object":
            return Object.keys(wrapped.value).length > 0;
          case "array":
            return wrapped.value.length > 0;
          case "null":
            return false;
          case "html":
          case "widget":
          case "function":
            return true;
        }
      }
      Values2.isTruthy = isTruthy;
      function deepCopy(field) {
        if (field === null || field === void 0)
          return field;
        if (Values2.isArray(field)) {
          return [].concat(field.map((v) => deepCopy(v)));
        } else if (Values2.isObject(field)) {
          let result = {};
          for (let [key, value] of Object.entries(field))
            result[key] = deepCopy(value);
          return result;
        } else {
          return field;
        }
      }
      Values2.deepCopy = deepCopy;
      function isString2(val) {
        return typeof val == "string";
      }
      Values2.isString = isString2;
      function isNumber2(val) {
        return typeof val == "number";
      }
      Values2.isNumber = isNumber2;
      function isDate2(val) {
        return val instanceof DateTime_1;
      }
      Values2.isDate = isDate2;
      function isDuration(val) {
        return val instanceof Duration_1;
      }
      Values2.isDuration = isDuration;
      function isNull(val) {
        return val === null || val === void 0;
      }
      Values2.isNull = isNull;
      function isArray(val) {
        return Array.isArray(val);
      }
      Values2.isArray = isArray;
      function isBoolean(val) {
        return typeof val === "boolean";
      }
      Values2.isBoolean = isBoolean;
      function isLink(val) {
        return val instanceof Link;
      }
      Values2.isLink = isLink;
      function isWidget(val) {
        return val instanceof Widget;
      }
      Values2.isWidget = isWidget;
      function isHtml(val) {
        if (typeof HTMLElement !== "undefined") {
          return val instanceof HTMLElement;
        } else {
          return false;
        }
      }
      Values2.isHtml = isHtml;
      function isObject(val) {
        return typeof val == "object" && !isHtml(val) && !isWidget(val) && !isArray(val) && !isDuration(val) && !isDate2(val) && !isLink(val) && val !== void 0 && !isNull(val);
      }
      Values2.isObject = isObject;
      function isFunction(val) {
        return typeof val == "function";
      }
      Values2.isFunction = isFunction;
    })(Values || (Values = {}));
    var Groupings;
    (function(Groupings2) {
      function isElementGroup(entry) {
        return Values.isObject(entry) && Object.keys(entry).length == 2 && "key" in entry && "rows" in entry;
      }
      Groupings2.isElementGroup = isElementGroup;
      function isGrouping(entry) {
        for (let element of entry)
          if (!isElementGroup(element))
            return false;
        return true;
      }
      Groupings2.isGrouping = isGrouping;
      function count(elements) {
        if (isGrouping(elements)) {
          let result = 0;
          for (let subgroup of elements)
            result += count(subgroup.rows);
          return result;
        } else {
          return elements.length;
        }
      }
      Groupings2.count = count;
    })(Groupings || (Groupings = {}));
    var Link = class {
      constructor(fields) {
        Object.assign(this, fields);
      }
      static file(path, embed = false, display) {
        return new Link({
          path,
          embed,
          display,
          subpath: void 0,
          type: "file"
        });
      }
      static infer(linkpath, embed = false, display) {
        if (linkpath.includes("#^")) {
          let split = linkpath.split("#^");
          return Link.block(split[0], split[1], embed, display);
        } else if (linkpath.includes("#")) {
          let split = linkpath.split("#");
          return Link.header(split[0], split[1], embed, display);
        } else
          return Link.file(linkpath, embed, display);
      }
      static header(path, header, embed, display) {
        return new Link({
          path,
          embed,
          display,
          subpath: normalizeHeaderForLink(header),
          type: "header"
        });
      }
      static block(path, blockId, embed, display) {
        return new Link({
          path,
          embed,
          display,
          subpath: blockId,
          type: "block"
        });
      }
      static fromObject(object) {
        return new Link(object);
      }
      equals(other) {
        if (other == void 0 || other == null)
          return false;
        return this.path == other.path && this.type == other.type && this.subpath == other.subpath;
      }
      toString() {
        return this.markdown();
      }
      toObject() {
        return { path: this.path, type: this.type, subpath: this.subpath, display: this.display, embed: this.embed };
      }
      withPath(path) {
        return new Link(Object.assign({}, this, { path }));
      }
      withDisplay(display) {
        return new Link(Object.assign({}, this, { display }));
      }
      withHeader(header) {
        return Link.header(this.path, header, this.embed, this.display);
      }
      toFile() {
        return Link.file(this.path, this.embed, this.display);
      }
      toEmbed() {
        if (this.embed) {
          return this;
        } else {
          let link = new Link(this);
          link.embed = true;
          return link;
        }
      }
      fromEmbed() {
        if (!this.embed) {
          return this;
        } else {
          let link = new Link(this);
          link.embed = false;
          return link;
        }
      }
      markdown() {
        let result = (this.embed ? "!" : "") + "[[" + this.obsidianLink();
        if (this.display) {
          result += "|" + this.display;
        } else {
          result += "|" + getFileTitle(this.path);
          if (this.type == "header" || this.type == "block")
            result += " > " + this.subpath;
        }
        result += "]]";
        return result;
      }
      obsidianLink() {
        var _a, _b;
        const escaped = this.path.replace("|", "\\|");
        if (this.type == "header")
          return escaped + "#" + ((_a = this.subpath) === null || _a === void 0 ? void 0 : _a.replace("|", "\\|"));
        if (this.type == "block")
          return escaped + "#^" + ((_b = this.subpath) === null || _b === void 0 ? void 0 : _b.replace("|", "\\|"));
        else
          return escaped;
      }
      fileName() {
        return getFileTitle(this.path).replace(".md", "");
      }
    };
    var Widget = class {
      constructor($widget) {
        this.$widget = $widget;
      }
    };
    var ListPairWidget = class extends Widget {
      constructor(key, value) {
        super("dataview:list-pair");
        this.key = key;
        this.value = value;
      }
      markdown() {
        return `${Values.toString(this.key)}: ${Values.toString(this.value)}`;
      }
    };
    var ExternalLinkWidget = class extends Widget {
      constructor(url, display) {
        super("dataview:external-link");
        this.url = url;
        this.display = display;
      }
      markdown() {
        var _a;
        return `[${(_a = this.display) !== null && _a !== void 0 ? _a : this.url}](${this.url})`;
      }
    };
    var Widgets;
    (function(Widgets2) {
      function listPair(key, value) {
        return new ListPairWidget(key, value);
      }
      Widgets2.listPair = listPair;
      function externalLink(url, display) {
        return new ExternalLinkWidget(url, display);
      }
      Widgets2.externalLink = externalLink;
      function isListPair(widget) {
        return widget.$widget === "dataview:list-pair";
      }
      Widgets2.isListPair = isListPair;
      function isExternalLink(widget) {
        return widget.$widget === "dataview:external-link";
      }
      Widgets2.isExternalLink = isExternalLink;
      function isBuiltin(widget) {
        return isListPair(widget) || isExternalLink(widget);
      }
      Widgets2.isBuiltin = isBuiltin;
    })(Widgets || (Widgets = {}));
    var Fields;
    (function(Fields2) {
      function variable(name) {
        return { type: "variable", name };
      }
      Fields2.variable = variable;
      function literal(value) {
        return { type: "literal", value };
      }
      Fields2.literal = literal;
      function binaryOp(left, op, right) {
        return { type: "binaryop", left, op, right };
      }
      Fields2.binaryOp = binaryOp;
      function index(obj, index2) {
        return { type: "index", object: obj, index: index2 };
      }
      Fields2.index = index;
      function indexVariable(name) {
        let parts = name.split(".");
        let result = Fields2.variable(parts[0]);
        for (let index2 = 1; index2 < parts.length; index2++) {
          result = Fields2.index(result, Fields2.literal(parts[index2]));
        }
        return result;
      }
      Fields2.indexVariable = indexVariable;
      function lambda(args, value) {
        return { type: "lambda", arguments: args, value };
      }
      Fields2.lambda = lambda;
      function func(func2, args) {
        return { type: "function", func: func2, arguments: args };
      }
      Fields2.func = func;
      function list(values) {
        return { type: "list", values };
      }
      Fields2.list = list;
      function object(values) {
        return { type: "object", values };
      }
      Fields2.object = object;
      function negate(child) {
        return { type: "negated", child };
      }
      Fields2.negate = negate;
      function isCompareOp(op) {
        return op == "<=" || op == "<" || op == ">" || op == ">=" || op == "!=" || op == "=";
      }
      Fields2.isCompareOp = isCompareOp;
      Fields2.NULL = Fields2.literal(null);
    })(Fields || (Fields = {}));
    var Sources;
    (function(Sources2) {
      function tag(tag2) {
        return { type: "tag", tag: tag2 };
      }
      Sources2.tag = tag;
      function csv(path) {
        return { type: "csv", path };
      }
      Sources2.csv = csv;
      function folder(prefix) {
        return { type: "folder", folder: prefix };
      }
      Sources2.folder = folder;
      function link(file, incoming) {
        return { type: "link", file, direction: incoming ? "incoming" : "outgoing" };
      }
      Sources2.link = link;
      function binaryOp(left, op, right) {
        return { type: "binaryop", left, op, right };
      }
      Sources2.binaryOp = binaryOp;
      function and(left, right) {
        return { type: "binaryop", left, op: "&", right };
      }
      Sources2.and = and;
      function or(left, right) {
        return { type: "binaryop", left, op: "|", right };
      }
      Sources2.or = or;
      function negate(child) {
        return { type: "negate", child };
      }
      Sources2.negate = negate;
      function empty() {
        return { type: "empty" };
      }
      Sources2.empty = empty;
    })(Sources || (Sources = {}));
    var EMOJI_REGEX = new RegExp(emojiRegex(), "");
    var DURATION_TYPES = {
      year: Duration_1.fromObject({ years: 1 }),
      years: Duration_1.fromObject({ years: 1 }),
      yr: Duration_1.fromObject({ years: 1 }),
      yrs: Duration_1.fromObject({ years: 1 }),
      month: Duration_1.fromObject({ months: 1 }),
      months: Duration_1.fromObject({ months: 1 }),
      mo: Duration_1.fromObject({ months: 1 }),
      mos: Duration_1.fromObject({ months: 1 }),
      week: Duration_1.fromObject({ weeks: 1 }),
      weeks: Duration_1.fromObject({ weeks: 1 }),
      wk: Duration_1.fromObject({ weeks: 1 }),
      wks: Duration_1.fromObject({ weeks: 1 }),
      w: Duration_1.fromObject({ weeks: 1 }),
      day: Duration_1.fromObject({ days: 1 }),
      days: Duration_1.fromObject({ days: 1 }),
      d: Duration_1.fromObject({ days: 1 }),
      hour: Duration_1.fromObject({ hours: 1 }),
      hours: Duration_1.fromObject({ hours: 1 }),
      hr: Duration_1.fromObject({ hours: 1 }),
      hrs: Duration_1.fromObject({ hours: 1 }),
      h: Duration_1.fromObject({ hours: 1 }),
      minute: Duration_1.fromObject({ minutes: 1 }),
      minutes: Duration_1.fromObject({ minutes: 1 }),
      min: Duration_1.fromObject({ minutes: 1 }),
      mins: Duration_1.fromObject({ minutes: 1 }),
      m: Duration_1.fromObject({ minutes: 1 }),
      second: Duration_1.fromObject({ seconds: 1 }),
      seconds: Duration_1.fromObject({ seconds: 1 }),
      sec: Duration_1.fromObject({ seconds: 1 }),
      secs: Duration_1.fromObject({ seconds: 1 }),
      s: Duration_1.fromObject({ seconds: 1 })
    };
    var DATE_SHORTHANDS = {
      now: () => DateTime_1.local(),
      today: () => DateTime_1.local().startOf("day"),
      yesterday: () => DateTime_1.local().startOf("day").minus(Duration_1.fromObject({ days: 1 })),
      tomorrow: () => DateTime_1.local().startOf("day").plus(Duration_1.fromObject({ days: 1 })),
      sow: () => DateTime_1.local().startOf("week"),
      "start-of-week": () => DateTime_1.local().startOf("week"),
      eow: () => DateTime_1.local().endOf("week"),
      "end-of-week": () => DateTime_1.local().endOf("week"),
      soy: () => DateTime_1.local().startOf("year"),
      "start-of-year": () => DateTime_1.local().startOf("year"),
      eoy: () => DateTime_1.local().endOf("year"),
      "end-of-year": () => DateTime_1.local().endOf("year"),
      som: () => DateTime_1.local().startOf("month"),
      "start-of-month": () => DateTime_1.local().startOf("month"),
      eom: () => DateTime_1.local().endOf("month"),
      "end-of-month": () => DateTime_1.local().endOf("month")
    };
    var KEYWORDS = ["FROM", "WHERE", "LIMIT", "GROUP", "FLATTEN"];
    function splitOnUnescapedPipe(link) {
      let pipe = -1;
      while ((pipe = link.indexOf("|", pipe + 1)) >= 0) {
        if (pipe > 0 && link[pipe - 1] == "\\")
          continue;
        return [link.substring(0, pipe).replace(/\\\|/g, "|"), link.substring(pipe + 1)];
      }
      return [link.replace(/\\\|/g, "|"), void 0];
    }
    function parseInnerLink(rawlink) {
      let [link, display] = splitOnUnescapedPipe(rawlink);
      return Link.infer(link, false, display);
    }
    function createBinaryParser(child, sep, combine) {
      return parsimmon_umd_min.exports.seqMap(child, parsimmon_umd_min.exports.seq(parsimmon_umd_min.exports.optWhitespace, sep, parsimmon_umd_min.exports.optWhitespace, child).many(), (first, rest) => {
        if (rest.length == 0)
          return first;
        let node = combine(first, rest[0][1], rest[0][3]);
        for (let index = 1; index < rest.length; index++) {
          node = combine(node, rest[index][1], rest[index][3]);
        }
        return node;
      });
    }
    function chainOpt(base, ...funcs) {
      return parsimmon_umd_min.exports.custom((success, failure) => {
        return (input, i) => {
          let result = base._(input, i);
          if (!result.status)
            return result;
          for (let func of funcs) {
            let next = func(result.value)._(input, result.index);
            if (!next.status)
              return result;
            result = next;
          }
          return result;
        };
      });
    }
    var EXPRESSION = parsimmon_umd_min.exports.createLanguage({
      number: (q) => parsimmon_umd_min.exports.regexp(/-?[0-9]+(\.[0-9]+)?/).map((str) => Number.parseFloat(str)).desc("number"),
      string: (q) => parsimmon_umd_min.exports.string('"').then(parsimmon_umd_min.exports.alt(q.escapeCharacter, parsimmon_umd_min.exports.noneOf('"\\')).atLeast(0).map((chars) => chars.join(""))).skip(parsimmon_umd_min.exports.string('"')).desc("string"),
      escapeCharacter: (_) => parsimmon_umd_min.exports.string("\\").then(parsimmon_umd_min.exports.any).map((escaped) => {
        if (escaped === '"')
          return '"';
        if (escaped === "\\")
          return "\\";
        else
          return "\\" + escaped;
      }),
      bool: (_) => parsimmon_umd_min.exports.regexp(/true|false|True|False/).map((str) => str.toLowerCase() == "true").desc("boolean ('true' or 'false')"),
      tag: (_) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string("#"), parsimmon_umd_min.exports.alt(parsimmon_umd_min.exports.regexp(/[\p{Letter}0-9_/-]/u).desc("text"), parsimmon_umd_min.exports.regexp(EMOJI_REGEX).desc("text")).many(), (start, rest) => start + rest.join("")).desc("tag ('#hello/stuff')"),
      identifier: (_) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.alt(parsimmon_umd_min.exports.regexp(/\p{Letter}/u), parsimmon_umd_min.exports.regexp(EMOJI_REGEX).desc("text")), parsimmon_umd_min.exports.alt(parsimmon_umd_min.exports.regexp(/[0-9\p{Letter}_-]/u), parsimmon_umd_min.exports.regexp(EMOJI_REGEX).desc("text")).many(), (first, rest) => first + rest.join("")).desc("variable identifier"),
      link: (_) => parsimmon_umd_min.exports.regexp(/\[\[([^\[\]]*?)\]\]/u, 1).map((linkInner) => parseInnerLink(linkInner)).desc("file link"),
      embedLink: (q) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string("!").atMost(1), q.link, (p, l2) => {
        if (p.length > 0)
          l2.embed = true;
        return l2;
      }).desc("file link"),
      binaryPlusMinus: (_) => parsimmon_umd_min.exports.regexp(/\+|-/).map((str) => str).desc("'+' or '-'"),
      binaryMulDiv: (_) => parsimmon_umd_min.exports.regexp(/\*|\/|%/).map((str) => str).desc("'*' or '/' or '%'"),
      binaryCompareOp: (_) => parsimmon_umd_min.exports.regexp(/>=|<=|!=|>|<|=/).map((str) => str).desc("'>=' or '<=' or '!=' or '=' or '>' or '<'"),
      binaryBooleanOp: (_) => parsimmon_umd_min.exports.regexp(/and|or|&|\|/i).map((str) => {
        if (str.toLowerCase() == "and")
          return "&";
        else if (str.toLowerCase() == "or")
          return "|";
        else
          return str;
      }).desc("'and' or 'or'"),
      rootDate: (_) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.regexp(/\d{4}/), parsimmon_umd_min.exports.string("-"), parsimmon_umd_min.exports.regexp(/\d{2}/), (year, _2, month) => {
        return DateTime_1.fromObject({ year: Number.parseInt(year), month: Number.parseInt(month) });
      }).desc("date in format YYYY-MM[-DDTHH-MM-SS.MS]"),
      dateShorthand: (_) => parsimmon_umd_min.exports.alt(...Object.keys(DATE_SHORTHANDS).sort((a, b) => b.length - a.length).map(parsimmon_umd_min.exports.string)),
      date: (q) => chainOpt(q.rootDate, (ym) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string("-"), parsimmon_umd_min.exports.regexp(/\d{2}/), (_, day) => ym.set({ day: Number.parseInt(day) })), (ymd) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string("T"), parsimmon_umd_min.exports.regexp(/\d{2}/), (_, hour) => ymd.set({ hour: Number.parseInt(hour) })), (ymdh) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string(":"), parsimmon_umd_min.exports.regexp(/\d{2}/), (_, minute) => ymdh.set({ minute: Number.parseInt(minute) })), (ymdhm) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string(":"), parsimmon_umd_min.exports.regexp(/\d{2}/), (_, second) => ymdhm.set({ second: Number.parseInt(second) })), (ymdhms) => parsimmon_umd_min.exports.alt(parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string("."), parsimmon_umd_min.exports.regexp(/\d{3}/), (_, millisecond) => ymdhms.set({ millisecond: Number.parseInt(millisecond) })), parsimmon_umd_min.exports.succeed(ymdhms)), (dt) => parsimmon_umd_min.exports.alt(parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string("+").or(parsimmon_umd_min.exports.string("-")), parsimmon_umd_min.exports.regexp(/\d{1,2}(:\d{2})?/), (pm, hr) => dt.setZone("UTC" + pm + hr, { keepLocalTime: true })), parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string("Z"), () => dt.setZone("utc", { keepLocalTime: true })), parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string("["), parsimmon_umd_min.exports.regexp(/[0-9A-Za-z+-\/]+/u), parsimmon_umd_min.exports.string("]"), (_a, zone, _b) => dt.setZone(zone, { keepLocalTime: true })))).assert((dt) => dt.isValid, "valid date").desc("date in format YYYY-MM[-DDTHH-MM-SS.MS]"),
      datePlus: (q) => parsimmon_umd_min.exports.alt(q.dateShorthand.map((d) => DATE_SHORTHANDS[d]()), q.date).desc("date in format YYYY-MM[-DDTHH-MM-SS.MS] or in shorthand"),
      durationType: (_) => parsimmon_umd_min.exports.alt(...Object.keys(DURATION_TYPES).sort((a, b) => b.length - a.length).map(parsimmon_umd_min.exports.string)),
      duration: (q) => parsimmon_umd_min.exports.seqMap(q.number, parsimmon_umd_min.exports.optWhitespace, q.durationType, (count, _, t) => DURATION_TYPES[t].mapUnits((x) => x * count)).sepBy1(parsimmon_umd_min.exports.string(",").trim(parsimmon_umd_min.exports.optWhitespace).or(parsimmon_umd_min.exports.optWhitespace)).map((durations) => durations.reduce((p, c) => p.plus(c))).desc("duration like 4hr2min"),
      rawNull: (_) => parsimmon_umd_min.exports.string("null"),
      tagSource: (q) => q.tag.map((tag) => Sources.tag(tag)),
      csvSource: (q) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string("csv(").skip(parsimmon_umd_min.exports.optWhitespace), q.string, parsimmon_umd_min.exports.string(")"), (_1, path, _2) => Sources.csv(path)),
      linkIncomingSource: (q) => q.link.map((link) => Sources.link(link.path, true)),
      linkOutgoingSource: (q) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string("outgoing(").skip(parsimmon_umd_min.exports.optWhitespace), q.link, parsimmon_umd_min.exports.string(")"), (_1, link, _2) => Sources.link(link.path, false)),
      folderSource: (q) => q.string.map((str) => Sources.folder(str)),
      parensSource: (q) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string("("), parsimmon_umd_min.exports.optWhitespace, q.source, parsimmon_umd_min.exports.optWhitespace, parsimmon_umd_min.exports.string(")"), (_1, _2, field, _3, _4) => field),
      negateSource: (q) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.alt(parsimmon_umd_min.exports.string("-"), parsimmon_umd_min.exports.string("!")), q.atomSource, (_, source) => Sources.negate(source)),
      atomSource: (q) => parsimmon_umd_min.exports.alt(q.parensSource, q.negateSource, q.linkOutgoingSource, q.linkIncomingSource, q.folderSource, q.tagSource, q.csvSource),
      binaryOpSource: (q) => createBinaryParser(q.atomSource, q.binaryBooleanOp.map((s2) => s2), Sources.binaryOp),
      source: (q) => q.binaryOpSource,
      variableField: (q) => q.identifier.chain((r) => {
        if (KEYWORDS.includes(r.toUpperCase())) {
          return parsimmon_umd_min.exports.fail("Variable fields cannot be a keyword (" + KEYWORDS.join(" or ") + ")");
        } else {
          return parsimmon_umd_min.exports.succeed(Fields.variable(r));
        }
      }).desc("variable"),
      numberField: (q) => q.number.map((val) => Fields.literal(val)).desc("number"),
      stringField: (q) => q.string.map((val) => Fields.literal(val)).desc("string"),
      boolField: (q) => q.bool.map((val) => Fields.literal(val)).desc("boolean"),
      dateField: (q) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string("date("), parsimmon_umd_min.exports.optWhitespace, q.datePlus, parsimmon_umd_min.exports.optWhitespace, parsimmon_umd_min.exports.string(")"), (prefix, _1, date, _2, postfix) => Fields.literal(date)).desc("date"),
      durationField: (q) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string("dur("), parsimmon_umd_min.exports.optWhitespace, q.duration, parsimmon_umd_min.exports.optWhitespace, parsimmon_umd_min.exports.string(")"), (prefix, _1, dur, _2, postfix) => Fields.literal(dur)).desc("duration"),
      nullField: (q) => q.rawNull.map((_) => Fields.NULL),
      linkField: (q) => q.link.map((f) => Fields.literal(f)),
      listField: (q) => q.field.sepBy(parsimmon_umd_min.exports.string(",").trim(parsimmon_umd_min.exports.optWhitespace)).wrap(parsimmon_umd_min.exports.string("[").skip(parsimmon_umd_min.exports.optWhitespace), parsimmon_umd_min.exports.optWhitespace.then(parsimmon_umd_min.exports.string("]"))).map((l2) => Fields.list(l2)).desc("list ('[1, 2, 3]')"),
      objectField: (q) => parsimmon_umd_min.exports.seqMap(q.identifier.or(q.string), parsimmon_umd_min.exports.string(":").trim(parsimmon_umd_min.exports.optWhitespace), q.field, (name, _sep, value) => {
        return { name, value };
      }).sepBy(parsimmon_umd_min.exports.string(",").trim(parsimmon_umd_min.exports.optWhitespace)).wrap(parsimmon_umd_min.exports.string("{").skip(parsimmon_umd_min.exports.optWhitespace), parsimmon_umd_min.exports.optWhitespace.then(parsimmon_umd_min.exports.string("}"))).map((vals) => {
        let res = {};
        for (let entry of vals)
          res[entry.name] = entry.value;
        return Fields.object(res);
      }).desc("object ('{ a: 1, b: 2 }')"),
      atomInlineField: (q) => parsimmon_umd_min.exports.alt(q.date, q.duration.map((d) => normalizeDuration(d)), q.string, q.tag, q.embedLink, q.bool, q.number, q.rawNull),
      inlineFieldList: (q) => q.atomInlineField.sepBy(parsimmon_umd_min.exports.string(",").trim(parsimmon_umd_min.exports.optWhitespace).lookahead(q.atomInlineField)),
      inlineField: (q) => parsimmon_umd_min.exports.alt(parsimmon_umd_min.exports.seqMap(q.atomInlineField, parsimmon_umd_min.exports.string(",").trim(parsimmon_umd_min.exports.optWhitespace), q.inlineFieldList, (f, _s, l2) => [f].concat(l2)), q.atomInlineField),
      atomField: (q) => parsimmon_umd_min.exports.alt(q.embedLink.map((l2) => Fields.literal(l2)), q.negatedField, q.linkField, q.listField, q.objectField, q.lambdaField, q.parensField, q.boolField, q.numberField, q.stringField, q.dateField, q.durationField, q.nullField, q.variableField),
      indexField: (q) => parsimmon_umd_min.exports.seqMap(q.atomField, parsimmon_umd_min.exports.alt(q.dotPostfix, q.indexPostfix, q.functionPostfix).many(), (obj, postfixes) => {
        let result = obj;
        for (let post of postfixes) {
          switch (post.type) {
            case "dot":
              result = Fields.index(result, Fields.literal(post.field));
              break;
            case "index":
              result = Fields.index(result, post.field);
              break;
            case "function":
              result = Fields.func(result, post.fields);
              break;
          }
        }
        return result;
      }),
      negatedField: (q) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string("!"), q.indexField, (_, field) => Fields.negate(field)).desc("negated field"),
      parensField: (q) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string("("), parsimmon_umd_min.exports.optWhitespace, q.field, parsimmon_umd_min.exports.optWhitespace, parsimmon_umd_min.exports.string(")"), (_1, _2, field, _3, _4) => field),
      lambdaField: (q) => parsimmon_umd_min.exports.seqMap(q.identifier.sepBy(parsimmon_umd_min.exports.string(",").trim(parsimmon_umd_min.exports.optWhitespace)).wrap(parsimmon_umd_min.exports.string("(").trim(parsimmon_umd_min.exports.optWhitespace), parsimmon_umd_min.exports.string(")").trim(parsimmon_umd_min.exports.optWhitespace)), parsimmon_umd_min.exports.string("=>").trim(parsimmon_umd_min.exports.optWhitespace), q.field, (ident, _ignore, value) => {
        return { type: "lambda", arguments: ident, value };
      }),
      dotPostfix: (q) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string("."), q.identifier, (_, field) => {
        return { type: "dot", field };
      }),
      indexPostfix: (q) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string("["), parsimmon_umd_min.exports.optWhitespace, q.field, parsimmon_umd_min.exports.optWhitespace, parsimmon_umd_min.exports.string("]"), (_, _2, field, _3, _4) => {
        return { type: "index", field };
      }),
      functionPostfix: (q) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.string("("), parsimmon_umd_min.exports.optWhitespace, q.field.sepBy(parsimmon_umd_min.exports.string(",").trim(parsimmon_umd_min.exports.optWhitespace)), parsimmon_umd_min.exports.optWhitespace, parsimmon_umd_min.exports.string(")"), (_, _1, fields, _2, _3) => {
        return { type: "function", fields };
      }),
      binaryMulDivField: (q) => createBinaryParser(q.indexField, q.binaryMulDiv, Fields.binaryOp),
      binaryPlusMinusField: (q) => createBinaryParser(q.binaryMulDivField, q.binaryPlusMinus, Fields.binaryOp),
      binaryCompareField: (q) => createBinaryParser(q.binaryPlusMinusField, q.binaryCompareOp, Fields.binaryOp),
      binaryBooleanField: (q) => createBinaryParser(q.binaryCompareField, q.binaryBooleanOp, Fields.binaryOp),
      binaryOpField: (q) => q.binaryBooleanField,
      field: (q) => q.binaryOpField
    });
    function parseField(text) {
      try {
        return Result.success(EXPRESSION.field.tryParse(text));
      } catch (error) {
        return Result.failure("" + error);
      }
    }
    var QueryFields;
    (function(QueryFields2) {
      function named(name, field) {
        return { name, field };
      }
      QueryFields2.named = named;
      function sortBy(field, dir) {
        return { field, direction: dir };
      }
      QueryFields2.sortBy = sortBy;
    })(QueryFields || (QueryFields = {}));
    function captureRaw(base) {
      return parsimmon_umd_min.exports.custom((success, failure) => {
        return (input, i) => {
          let result = base._(input, i);
          if (!result.status)
            return result;
          return Object.assign({}, result, { value: [result.value, input.substring(i, result.index)] });
        };
      });
    }
    function stripNewlines(text) {
      return text.split(/[\r\n]+/).map((t) => t.trim()).join("");
    }
    var QUERY_LANGUAGE = parsimmon_umd_min.exports.createLanguage({
      queryType: (q) => parsimmon_umd_min.exports.alt(parsimmon_umd_min.exports.regexp(/TABLE|LIST|TASK|CALENDAR/i)).map((str) => str.toLowerCase()).desc("query type ('TABLE', 'LIST', 'TASK', or 'CALENDAR')"),
      explicitNamedField: (q) => parsimmon_umd_min.exports.seqMap(EXPRESSION.field.skip(parsimmon_umd_min.exports.whitespace), parsimmon_umd_min.exports.regexp(/AS/i).skip(parsimmon_umd_min.exports.whitespace), EXPRESSION.identifier.or(EXPRESSION.string), (field, _as, ident) => QueryFields.named(ident, field)),
      namedField: (q) => parsimmon_umd_min.exports.alt(q.explicitNamedField, captureRaw(EXPRESSION.field).map(([value, text]) => QueryFields.named(stripNewlines(text), value))),
      sortField: (q) => parsimmon_umd_min.exports.seqMap(EXPRESSION.field.skip(parsimmon_umd_min.exports.optWhitespace), parsimmon_umd_min.exports.regexp(/ASCENDING|DESCENDING|ASC|DESC/i).atMost(1), (field, dir) => {
        let direction = dir.length == 0 ? "ascending" : dir[0].toLowerCase();
        if (direction == "desc")
          direction = "descending";
        if (direction == "asc")
          direction = "ascending";
        return {
          field,
          direction
        };
      }),
      headerClause: (q) => q.queryType.skip(parsimmon_umd_min.exports.whitespace).chain((qtype) => {
        switch (qtype) {
          case "table":
            return parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.regexp(/WITHOUT\s+ID/i).skip(parsimmon_umd_min.exports.optWhitespace).atMost(1), parsimmon_umd_min.exports.sepBy(q.namedField, parsimmon_umd_min.exports.string(",").trim(parsimmon_umd_min.exports.optWhitespace)), (withoutId, fields) => {
              return { type: "table", fields, showId: withoutId.length == 0 };
            });
          case "list":
            return parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.regexp(/WITHOUT\s+ID/i).skip(parsimmon_umd_min.exports.optWhitespace).atMost(1), EXPRESSION.field.atMost(1), (withoutId, format) => {
              return {
                type: "list",
                format: format.length == 1 ? format[0] : void 0,
                showId: withoutId.length == 0
              };
            });
          case "task":
            return parsimmon_umd_min.exports.succeed({ type: "task" });
          case "calendar":
            return parsimmon_umd_min.exports.seqMap(q.namedField, (field) => {
              return {
                type: "calendar",
                showId: true,
                field
              };
            });
          default:
            return parsimmon_umd_min.exports.fail(`Unrecognized query type '${qtype}'`);
        }
      }).desc("TABLE or LIST or TASK or CALENDAR"),
      fromClause: (q) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.regexp(/FROM/i), parsimmon_umd_min.exports.whitespace, EXPRESSION.source, (_1, _2, source) => source),
      whereClause: (q) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.regexp(/WHERE/i), parsimmon_umd_min.exports.whitespace, EXPRESSION.field, (where, _, field) => {
        return { type: "where", clause: field };
      }).desc("WHERE <expression>"),
      sortByClause: (q) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.regexp(/SORT/i), parsimmon_umd_min.exports.whitespace, q.sortField.sepBy1(parsimmon_umd_min.exports.string(",").trim(parsimmon_umd_min.exports.optWhitespace)), (sort, _1, fields) => {
        return { type: "sort", fields };
      }).desc("SORT field [ASC/DESC]"),
      limitClause: (q) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.regexp(/LIMIT/i), parsimmon_umd_min.exports.whitespace, EXPRESSION.field, (limit, _1, field) => {
        return { type: "limit", amount: field };
      }).desc("LIMIT <value>"),
      flattenClause: (q) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.regexp(/FLATTEN/i).skip(parsimmon_umd_min.exports.whitespace), q.namedField, (_, field) => {
        return { type: "flatten", field };
      }).desc("FLATTEN <value> [AS <name>]"),
      groupByClause: (q) => parsimmon_umd_min.exports.seqMap(parsimmon_umd_min.exports.regexp(/GROUP BY/i).skip(parsimmon_umd_min.exports.whitespace), q.namedField, (_, field) => {
        return { type: "group", field };
      }).desc("GROUP BY <value> [AS <name>]"),
      clause: (q) => parsimmon_umd_min.exports.alt(q.fromClause, q.whereClause, q.sortByClause, q.limitClause, q.groupByClause, q.flattenClause),
      query: (q) => parsimmon_umd_min.exports.seqMap(q.headerClause.trim(parsimmon_umd_min.exports.optWhitespace), q.fromClause.trim(parsimmon_umd_min.exports.optWhitespace).atMost(1), q.clause.trim(parsimmon_umd_min.exports.optWhitespace).many(), (header, from, clauses) => {
        return {
          header,
          source: from.length == 0 ? Sources.folder("") : from[0],
          operations: clauses,
          settings: DEFAULT_QUERY_SETTINGS
        };
      })
    });
    var getAPI3 = (app2) => {
      var _a;
      if (app2)
        return (_a = app2.plugins.plugins.dataview) === null || _a === void 0 ? void 0 : _a.api;
      else
        return window.DataviewAPI;
    };
    var isPluginEnabled = (app2) => app2.plugins.enabledPlugins.has("dataview");
    exports.DATE_SHORTHANDS = DATE_SHORTHANDS;
    exports.DURATION_TYPES = DURATION_TYPES;
    exports.EXPRESSION = EXPRESSION;
    exports.KEYWORDS = KEYWORDS;
    exports.QUERY_LANGUAGE = QUERY_LANGUAGE;
    exports.getAPI = getAPI3;
    exports.isPluginEnabled = isPluginEnabled;
    exports.parseField = parseField;
  }
});

// main.ts
__export(exports, {
  default: () => FileCookerPlugin
});
var import_obsidian28 = __toModule(require("obsidian"));

// src/action/delete-action.ts
var import_obsidian2 = __toModule(require("obsidian"));

// src/modal/delete-confirm-modal.ts
var import_obsidian = __toModule(require("obsidian"));
var DeleteConfirmModal = class extends import_obsidian.Modal {
  constructor(app2, resultArr) {
    super(app2);
    this.resultArr = resultArr;
  }
  onOpen() {
    return __async(this, null, function* () {
      const { contentEl } = this;
      contentEl.createEl("h1", { text: "Confirm Delete?" });
      if (this.resultArr.length == 0) {
        contentEl.createEl("div", { text: "No files found!" });
        new import_obsidian.Setting(contentEl).addButton((btn) => btn.setButtonText("Close").setCta().onClick(() => {
          this.close();
        }));
      } else {
        this.resultArr.forEach((info) => {
          contentEl.createEl("div", { text: info.path });
        });
        new import_obsidian.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => {
          this.close();
          this.resultArr.forEach((info) => {
            this.app.vault.trash(info, true);
          });
          new import_obsidian.Notice("Delete Success!");
        })).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
          this.close();
          new import_obsidian.Notice("Delete Canceled!");
        }));
      }
    });
  }
};

// src/action/delete-action.ts
var DeleteAction = class {
  constructor(app2) {
    this.app = app2;
  }
  act(actionModels) {
    if (actionModels.length > 0) {
      let files = actionModels.map((model) => model.file);
      new DeleteConfirmModal(this.app, files).open();
    } else {
      new import_obsidian2.Notice("No Files Found!");
    }
  }
};

// src/action/edit-properties-action.ts
var import_obsidian4 = __toModule(require("obsidian"));

// src/modal/edit-properties-modal.ts
var import_obsidian3 = __toModule(require("obsidian"));
var EditPropertiesModal = class extends import_obsidian3.Modal {
  constructor(app2, resultArr) {
    super(app2);
    this.resultArr = resultArr;
    let tmpFlag = localStorage.getItem("overrideFlag");
    if (tmpFlag && tmpFlag == "true") {
      this.overrideFlag = true;
    }
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Edit Properties" });
    if (this.resultArr.length == 0) {
      contentEl.createEl("div", { text: "No files found!" });
      new import_obsidian3.Setting(contentEl).addButton((btn) => btn.setButtonText("Close").setCta().onClick(() => {
        this.close();
      }));
    } else {
      this.resultArr.forEach((info) => {
        contentEl.createEl("div", { text: info.path });
      });
      new import_obsidian3.Setting(contentEl).addText((txt) => txt.setPlaceholder("Properties Key").onChange((val) => {
        this.key = val;
      })).addText((txt) => txt.setPlaceholder("Properties Value").onChange((val) => {
        this.val = val;
      })).addToggle((toggle) => {
        toggle.setValue(this.overrideFlag);
        toggle.setTooltip("Override if exists!");
        toggle.onChange((val) => {
          localStorage.setItem("overrideFlag", val + "");
          this.overrideFlag = val;
        });
      });
      new import_obsidian3.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
        if (this.key == null || this.key.trim() == "") {
          new import_obsidian3.Notice("Key could not be empty!");
          return;
        }
        if (this.val == null || this.val.trim() == "") {
          new import_obsidian3.Notice("Value could not be empty!");
          return;
        }
        this.close();
        for (let i = 0; i < this.resultArr.length; i++) {
          let info = this.resultArr[i];
          let _this = this;
          this.app.fileManager.processFrontMatter(info, (props) => {
            let _k = _this.key.trim();
            let _v = _this.val.trim();
            if (_k === "tags" || _k === "alias" || _k === "cssclasses") {
              let _vals = _v.split(",");
              if (!props[_k]) {
                props[_k] = [];
              } else if (!(props[_k] instanceof Array)) {
                props[_k] = props[_k].split(",");
              }
              _vals.forEach((_t) => {
                let it = _t.trim();
                if (it.indexOf("-") === 0) {
                  let _tv = it.substring(1, it.length);
                  let idx = -1;
                  for (let i2 = 0; i2 < props[_k].length; i2++) {
                    if (props[_k][i2] === _tv) {
                      idx = i2;
                      break;
                    }
                  }
                  delete props[_k][idx];
                } else {
                  props[_k].push(it);
                }
              });
            } else {
              if (_v === "-") {
                delete props[_k];
              } else if (_this.overrideFlag || !props[_k]) {
                props[_k] = _v;
              }
            }
          });
        }
        new import_obsidian3.Notice("Modify Property Success!");
      }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
        this.close();
        new import_obsidian3.Notice("Modify Property Canceled!");
      }));
    }
  }
};

// src/action/edit-properties-action.ts
var EditPropertiesAction = class {
  constructor(app2) {
    this.app = app2;
  }
  act(actionModels) {
    if (actionModels.length > 0) {
      let files = actionModels.map((model) => model.file);
      new EditPropertiesModal(this.app, files).open();
    } else {
      new import_obsidian4.Notice("No Files Found!");
    }
  }
};

// src/action/move-action.ts
var import_obsidian6 = __toModule(require("obsidian"));

// src/modal/move-confirm-modal.ts
var import_obsidian5 = __toModule(require("obsidian"));
var MoveConfirmModal = class extends import_obsidian5.Modal {
  constructor(app2, moveInfos) {
    super(app2);
    this.moveInfos = moveInfos;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Confirm Move/Copy?" });
    this.moveInfos.forEach((info) => {
      contentEl.createEl("div", { text: info.sourceFile.path + " -> " + info.targetDir + "/" + info.sourceFile.name });
    });
    new import_obsidian5.Setting(contentEl).addToggle((toggle) => {
      toggle.setTooltip("Copy instead!");
      toggle.onChange((val) => {
        this.copyFlag = val;
      });
    });
    new import_obsidian5.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      this.close();
      if (this.copyFlag) {
        for (const key in this.moveInfos) {
          let info = this.moveInfos[key];
          yield this.app.vault.copy(info.sourceFile, info.targetDir + "/" + info.sourceFile.name);
        }
        new import_obsidian5.Notice("Copy Success!");
      } else {
        for (const key in this.moveInfos) {
          let info = this.moveInfos[key];
          yield this.app.fileManager.renameFile(info.sourceFile, info.targetDir + "/" + info.sourceFile.name);
        }
        new import_obsidian5.Notice("Move Success!");
      }
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian5.Notice("Move Canceled!");
    }));
  }
};

// src/action/move-action.ts
var MoveAction = class {
  constructor(app2, targetPath) {
    this.app = app2;
    this.targetPath = targetPath;
  }
  act(actionModels) {
    const moveInfos = [];
    if (actionModels.length > 0) {
      actionModels.forEach((model) => {
        let ff = model.file;
        moveInfos.push({
          sourceFile: ff,
          targetDir: this.targetPath
        });
      });
      new MoveConfirmModal(this.app, moveInfos).open();
    } else {
      new import_obsidian6.Notice("No Files Found!");
    }
  }
};

// src/action/rename-action.ts
var import_obsidian9 = __toModule(require("obsidian"));

// src/modal/rename-modal.ts
var import_obsidian8 = __toModule(require("obsidian"));

// src/modal/rename-confirm-modal.ts
var import_obsidian7 = __toModule(require("obsidian"));

// src/utils/file-type-util.ts
function hasMarkdownSuffix(str) {
  return str.endsWith(".md") || str.endsWith(".MD") || str.endsWith(".Md") || str.endsWith(".mD");
}
function hasCanvasSuffix(str) {
  return str.endsWith(".canvas");
}

// src/modal/rename-confirm-modal.ts
var RenameConfirmModal = class extends import_obsidian7.Modal {
  constructor(app2, resultArr, prefix, suffix) {
    super(app2);
    this.resultArr = resultArr;
    this.prefix = prefix;
    this.suffix = suffix;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Rename Files" });
    this.resultArr.forEach((info) => {
      let name = this.newName(info.name);
      contentEl.createEl("div", { text: info.name + "->" + name });
    });
    new import_obsidian7.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      if ((this.prefix == null || this.prefix.trim() == "") && (this.suffix == null || this.suffix.trim() == "")) {
        new import_obsidian7.Notice("Prefix and Suffix could not be all empty!");
        return;
      }
      this.close();
      for (let i = 0; i < this.resultArr.length; i++) {
        let info = this.resultArr[i];
        let name = this.newName(info.name);
        yield this.app.fileManager.renameFile(info, info.parent.path + "/" + name);
      }
      new import_obsidian7.Notice("Rename Success!");
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian7.Notice("Rename Canceled!");
    }));
  }
  newName(name) {
    let tName = name + "";
    let suf = "";
    if (hasMarkdownSuffix(tName)) {
      tName = tName.replace(".md", "");
      suf = ".md";
    }
    if (this.prefix && this.prefix.trim() != "") {
      if (this.prefix.startsWith("-")) {
        let t = this.prefix.substring(1, this.prefix.length);
        if (tName.startsWith(t)) {
          tName = tName.substring(t.length, tName.length);
        }
      } else {
        tName = this.prefix + tName;
      }
    }
    if (this.suffix && this.suffix.trim() != "") {
      if (this.suffix.startsWith("-")) {
        let t = this.suffix.substring(1, this.suffix.length);
        if (tName.endsWith(t)) {
          tName = tName.substring(0, tName.length - t.length);
        }
      } else {
        tName = tName + this.suffix;
      }
    }
    return tName + suf;
  }
};

// src/modal/rename-modal.ts
var RenameModal = class extends import_obsidian8.Modal {
  constructor(app2, resultArr) {
    super(app2);
    this.resultArr = resultArr;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Rename Files" });
    if (this.resultArr.length == 0) {
      contentEl.createEl("div", { text: "No files found!" });
      new import_obsidian8.Setting(contentEl).addButton((btn) => btn.setButtonText("Close").setCta().onClick(() => {
        this.close();
      }));
    } else {
      this.resultArr.forEach((info) => {
        contentEl.createEl("div", { text: info.path });
      });
      new import_obsidian8.Setting(contentEl).addText((txt) => txt.setPlaceholder("Prefix").onChange((val) => {
        this.prefix = val;
      })).addText((txt) => txt.setPlaceholder("Suffix").onChange((val) => {
        this.suffix = val;
      }));
      new import_obsidian8.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
        if ((this.prefix == null || this.prefix.trim() == "") && (this.suffix == null || this.suffix.trim() == "")) {
          new import_obsidian8.Notice("Prefix and Suffix could not be all empty!");
          return;
        }
        this.close();
        new RenameConfirmModal(this.app, this.resultArr, this.prefix, this.suffix).open();
      }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
        this.close();
        new import_obsidian8.Notice("Rename Canceled!");
      }));
    }
  }
};

// src/action/rename-action.ts
var RenameAction = class {
  constructor(app2) {
    this.app = app2;
  }
  act(actionModels) {
    if (actionModels.length > 0) {
      let files = actionModels.map((model) => model.file);
      new RenameModal(this.app, files).open();
    } else {
      new import_obsidian9.Notice("No Files Found!");
    }
  }
};

// src/action/sync-flomo-action.ts
var import_obsidian11 = __toModule(require("obsidian"));

// src/modal/sync-flomo-confirm-modal.ts
var import_obsidian10 = __toModule(require("obsidian"));
var import_node_fetch = __toModule(require_browser());
var SyncFlomoConfirmModal = class extends import_obsidian10.Modal {
  constructor(plugin, actionModels) {
    super(plugin.app);
    this.plugin = plugin;
    this.actionModels = actionModels;
  }
  onOpen() {
    return __async(this, null, function* () {
      const { contentEl } = this;
      contentEl.createEl("h1", { text: "Confirm Sync to flomo?" });
      if (this.actionModels.length == 0) {
        contentEl.createEl("div", { text: "No files found!" });
        new import_obsidian10.Setting(contentEl).addButton((btn) => btn.setButtonText("Close").setCta().onClick(() => {
          this.close();
        }));
      } else {
        this.actionModels.forEach((info) => {
          if (info.file != null) {
            contentEl.createEl("div", { text: info.file.path });
          } else {
            contentEl.createEl("div", { text: "Sync Selection" });
          }
        });
        new import_obsidian10.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
          this.close();
          for (let i = 0; i < this.actionModels.length; i++) {
            let info = this.actionModels[i];
            let cont;
            if (info.file != null) {
              cont = yield this.app.vault.read(info.file);
            } else {
              cont = info.content;
            }
            const response = yield (0, import_node_fetch.default)(this.plugin.settings.flomoAPI, {
              method: "POST",
              body: JSON.stringify({
                content: cont
              }),
              headers: {
                "Content-Type": "application/json",
                Accept: "application/json"
              }
            });
            if (!response.ok) {
              new import_obsidian10.Notice(`Sync to flomo Error!${response.text}[${response.status}]`);
              return;
            }
          }
          new import_obsidian10.Notice("Sync to flomo Success!");
        }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
          this.close();
          new import_obsidian10.Notice("Sync to flomo Canceled!");
        }));
      }
    });
  }
};

// src/action/sync-flomo-action.ts
var SyncFlomoAction = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  act(actionModels) {
    let flomoAPI = this.plugin.settings.flomoAPI;
    if (!flomoAPI || flomoAPI.trim() == "") {
      new import_obsidian11.Notice("Please config flomoAPI first!");
      return;
    }
    if (actionModels.length > 0) {
      new SyncFlomoConfirmModal(this.plugin, actionModels).open();
    } else {
      new import_obsidian11.Notice("No Files Found!");
    }
  }
};

// src/modal/choose-canvas-modal.ts
var import_obsidian14 = __toModule(require("obsidian"));

// src/action/add-to-canvas-action.ts
var import_obsidian13 = __toModule(require("obsidian"));

// src/modal/add-to-canvas-confirm-modal.ts
var import_obsidian12 = __toModule(require("obsidian"));
var width = 400;
var height = 400;
var between = 40;
var AddToCanvasConfirmModal = class extends import_obsidian12.Modal {
  constructor(app2, actionModels, targetFilePath) {
    super(app2);
    this.targetFilePath = targetFilePath;
    if (actionModels.length == 1 && actionModels[0].content) {
      this.cont = actionModels[0].content;
    } else {
      let resultArr = actionModels.map((model) => model.file);
      this.resultArr = resultArr;
    }
  }
  onOpen() {
    if (this.cont) {
      this.addContent();
    } else {
      this.addFile();
    }
  }
  addContent() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Confirm Add to Canvas?" });
    contentEl.createEl("div", { text: "Add cont below to Canvas -> " + this.targetFilePath + " !" });
    let lines = this.cont.split(/\r?\n/);
    for (const key in lines) {
      let line = lines[key];
      contentEl.createEl("div", { text: line });
    }
    new import_obsidian12.Setting(contentEl).addToggle((toggle) => {
      toggle.setTooltip("Split by line!");
      toggle.onChange((val) => {
        this.splitByLineFlag = val;
      });
    });
    new import_obsidian12.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      this.close();
      const canvasView = yield this.getCanvas();
      if ((canvasView == null ? void 0 : canvasView.getViewType()) === "canvas") {
        const canvas = canvasView == null ? void 0 : canvasView.canvas;
        if (this.splitByLineFlag) {
          let lines2 = this.cont.split(/\r?\n/);
          let idx = 0;
          for (const key in lines2) {
            let line = lines2[key];
            this.createTextNode(canvas, line, idx);
            idx++;
          }
        } else {
          this.createTextNode(canvas, this.cont, 0);
        }
        canvas.requestSave();
        new import_obsidian12.Notice("Add to Canvas Success!");
      } else {
        new import_obsidian12.Notice(this.targetFilePath + " is not a Canvas!");
      }
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian12.Notice("Add to Canvas Canceled!");
    }));
  }
  getCanvas() {
    return __async(this, null, function* () {
      let activeFile = this.app.workspace.getActiveFile();
      if (activeFile == null || this.targetFilePath != activeFile.path) {
        let targetFile = this.app.vault.getAbstractFileByPath(this.targetFilePath);
        if (targetFile == null) {
          console.log("can not find " + this.targetFilePath);
          targetFile = yield this.app.vault.create(this.targetFilePath, "");
        }
        yield this.app.workspace.getLeaf(activeFile != null).openFile(targetFile);
      }
      const canvasView = app.workspace.getActiveViewOfType(import_obsidian12.ItemView);
      return canvasView;
    });
  }
  addFile() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Confirm Add to Canvas?" });
    contentEl.createEl("div", { text: "Add all files below to Canvas -> " + this.targetFilePath + " !" });
    this.resultArr.forEach((info) => {
      contentEl.createEl("div", { text: info.path });
    });
    new import_obsidian12.Setting(contentEl).addToggle((toggle) => {
      toggle.setTooltip("Include resolved links!");
      toggle.onChange((val) => {
        this.includeReslovedLinksFlag = val;
      });
    });
    new import_obsidian12.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      this.close();
      let pathNodeMap = new Map();
      const canvasView = yield this.getCanvas();
      if ((canvasView == null ? void 0 : canvasView.getViewType()) === "canvas") {
        const canvas = canvasView == null ? void 0 : canvasView.canvas;
        let idx = 0;
        for (const key in this.resultArr) {
          let file = this.resultArr[key];
          let tempChildNode = this.createFileNode(canvas, file, idx);
          idx++;
          if (this.includeReslovedLinksFlag) {
            pathNodeMap.set(file.path, tempChildNode);
            let linkObj = this.app.metadataCache.resolvedLinks[file.path];
            for (let innerFilePath in linkObj) {
              let existFileNode = pathNodeMap.get(innerFilePath);
              if (existFileNode) {
                this.createEdge(tempChildNode, existFileNode, canvas);
              } else {
                console.log(innerFilePath);
                let resolvedFile = this.app.vault.getAbstractFileByPath(innerFilePath);
                console.log(resolvedFile);
                let innerChildNode = this.createFileNode(canvas, resolvedFile, idx);
                idx++;
                pathNodeMap.set(innerFilePath, innerChildNode);
                this.createEdge(tempChildNode, innerChildNode, canvas);
              }
            }
          }
        }
        canvas.requestSave();
        new import_obsidian12.Notice("Add to Canvas Success!");
      } else {
        new import_obsidian12.Notice(this.targetFilePath + " is not a Canvas!");
      }
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian12.Notice("Add to Canvas Canceled!");
    }));
  }
  createTextNode(canvas, cont, idx) {
    let tempChildNode;
    tempChildNode = canvas.createTextNode({
      text: cont,
      pos: {
        x: between + (width + between) * idx,
        y: between,
        width,
        height
      },
      size: {
        x: between,
        y: between,
        width,
        height
      },
      save: true,
      focus: false
    });
    canvas.deselectAll();
    canvas.addNode(tempChildNode);
    return tempChildNode;
  }
  createFileNode(canvas, file, idx) {
    let tempChildNode;
    if (!(0, import_obsidian12.requireApiVersion)("1.1.10")) {
      tempChildNode = canvas.createFileNode(file, "", { x: between + (width + between) * idx, y: between, height, width }, true);
    } else {
      tempChildNode = canvas.createFileNode({
        file,
        pos: {
          x: between + (width + between) * idx,
          y: between,
          width,
          height
        },
        size: {
          x: between,
          y: between,
          width,
          height
        },
        save: true,
        focus: false
      });
    }
    canvas.deselectAll();
    canvas.addNode(tempChildNode);
    return tempChildNode;
  }
  random(e) {
    let t = [];
    for (let n = 0; n < e; n++) {
      t.push((16 * Math.random() | 0).toString(16));
    }
    return t.join("");
  }
  createEdge(node1, node2, canvas) {
    var _a;
    const edge = canvas.edges.get((_a = canvas.getData().edges.first()) == null ? void 0 : _a.id);
    if (edge) {
      const tempEdge = new edge.constructor(canvas, this.random(16), { side: "right", node: node1 }, { side: "left", node: node2 });
      canvas.addEdge(tempEdge);
      tempEdge.attach();
      tempEdge.render();
    } else {
      console.log("You should have at least one edge in the canvas to use this feature!");
    }
  }
};

// src/action/add-to-canvas-action.ts
var AddToCanvasAction = class {
  constructor(app2, targetFilePath) {
    this.app = app2;
    this.targetFilePath = targetFilePath;
  }
  act(actionModels) {
    return __async(this, null, function* () {
      if (actionModels.length > 0) {
        new AddToCanvasConfirmModal(this.app, actionModels, this.targetFilePath).open();
      } else {
        new import_obsidian13.Notice("No Files Found!");
      }
    });
  }
};

// src/modal/choose-canvas-modal.ts
var ChooseCanvasModal = class extends import_obsidian14.SuggestModal {
  constructor(app2, readable) {
    super(app2);
    this.readable = readable;
  }
  getSuggestions(query) {
    const abstractFiles = this.app.vault.getAllLoadedFiles();
    const files = [];
    const lowerCaseInputStr = query.toLowerCase();
    abstractFiles.forEach((file) => {
      if (file instanceof import_obsidian14.TFile && file.path.toLowerCase().contains(lowerCaseInputStr) && file.path.toLowerCase().endsWith(".canvas")) {
        files.push(file.path);
      }
    });
    if (files.length == 0) {
      if (query.endsWith(".canvas")) {
        files.push(query);
      } else {
        files.push(query + ".canvas");
      }
    }
    return files;
  }
  renderSuggestion(filePath, el) {
    el.createEl("div", { text: filePath });
  }
  onChooseSuggestion(file, evt) {
    let action = new AddToCanvasAction(this.app, file);
    this.readable.read(action);
  }
};

// src/modal/choose-file-modal.ts
var import_obsidian17 = __toModule(require("obsidian"));

// src/action/merge-action.ts
var import_obsidian16 = __toModule(require("obsidian"));

// src/modal/merge-confirm-modal.ts
var import_obsidian15 = __toModule(require("obsidian"));

// src/utils/line-break-util.ts
function getLinebreak() {
  let oss = ["Windows", "Mac", "Linux"];
  let lineBreaks = ["\r\n", "\n", "\n"];
  for (let i = 0; i < oss.length; i++) {
    let os = oss[i];
    if (navigator.userAgent.indexOf(os) != -1) {
      return lineBreaks[i];
    }
  }
  return "\n";
}

// src/modal/merge-confirm-modal.ts
var MergeConfirmModal = class extends import_obsidian15.Modal {
  constructor(app2, resultArr, targetFilePath) {
    super(app2);
    this.targetFilePath = targetFilePath;
    this.resultArr = resultArr;
    this.lineBreak = getLinebreak();
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Confirm Merge?" });
    contentEl.createEl("div", { text: "Merge all files below -> " + this.targetFilePath + " !" });
    this.resultArr.forEach((info) => {
      contentEl.createEl("div", { text: info.path });
    });
    new import_obsidian15.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      this.close();
      let targetFile = this.app.vault.getAbstractFileByPath(this.targetFilePath);
      if (targetFile == null) {
        targetFile = yield this.app.vault.create(this.targetFilePath, "");
      }
      for (const key in this.resultArr) {
        let info = this.resultArr[key];
        if (hasMarkdownSuffix(info.name)) {
          let cont = yield this.app.vault.read(info);
          cont = this.clearYaml(cont);
          cont = this.demoteHeader(cont);
          cont = "# " + info.name.substring(0, info.name.length - 3) + this.lineBreak + cont + this.lineBreak + this.lineBreak;
          yield this.app.vault.append(targetFile, cont);
        } else {
          let cont = `![[${info.name}]]${this.lineBreak}${this.lineBreak}`;
          yield this.app.vault.append(targetFile, cont);
        }
      }
      new import_obsidian15.Notice("Merge Success!");
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian15.Notice("Merge Canceled!");
    }));
  }
  clearYaml(cont) {
    if (cont.startsWith("---")) {
      let lines = cont.split(this.lineBreak);
      let results = "";
      let appendFlag = true;
      for (let idx in lines) {
        if (lines[idx] == "---") {
          appendFlag = !appendFlag;
          continue;
        }
        if (appendFlag) {
          results = results + lines[idx] + this.lineBreak;
        }
      }
      return results;
    } else {
      return cont;
    }
  }
  demoteHeader(cont) {
    let reg = /# /g;
    return cont.replace(reg, "## ");
  }
};

// src/action/merge-action.ts
var MergeAction = class {
  constructor(app2, targetFilePath) {
    this.app = app2;
    this.targetFilePath = targetFilePath;
  }
  act(actionModels) {
    return __async(this, null, function* () {
      if (actionModels.length > 0) {
        let files = actionModels.map((model) => model.file);
        new MergeConfirmModal(this.app, files, this.targetFilePath).open();
      } else {
        new import_obsidian16.Notice("No Files Found!");
      }
    });
  }
};

// src/modal/choose-file-modal.ts
var ChooseFileModal = class extends import_obsidian17.SuggestModal {
  constructor(app2, readable) {
    super(app2);
    this.readable = readable;
  }
  getSuggestions(query) {
    const abstractFiles = this.app.vault.getAllLoadedFiles();
    const files = [];
    const lowerCaseInputStr = query.toLowerCase();
    abstractFiles.forEach((file) => {
      if (file instanceof import_obsidian17.TFile && file.path.toLowerCase().contains(lowerCaseInputStr)) {
        files.push(file.path);
      }
    });
    if (files.length == 0) {
      if (hasMarkdownSuffix(query)) {
        files.push(query);
      } else {
        files.push(query + ".md");
      }
    }
    return files;
  }
  renderSuggestion(filePath, el) {
    el.createEl("div", { text: filePath });
  }
  onChooseSuggestion(file, evt) {
    let action = new MergeAction(this.app, file);
    this.readable.read(action);
  }
};

// src/modal/choose-folder-modal.ts
var import_obsidian18 = __toModule(require("obsidian"));
var ChooseFolderModal = class extends import_obsidian18.SuggestModal {
  constructor(app2, readable, actionFunc) {
    super(app2);
    this.readable = readable;
    this.actionFunc = actionFunc;
  }
  getSuggestions(query) {
    const abstractFiles = this.app.vault.getAllLoadedFiles();
    const folders = [];
    const lowerCaseInputStr = query.toLowerCase();
    abstractFiles.forEach((folder) => {
      if (folder instanceof import_obsidian18.TFolder && folder.path.toLowerCase().contains(lowerCaseInputStr)) {
        folders.push(folder);
      }
    });
    return folders;
  }
  renderSuggestion(folder, el) {
    el.createEl("div", { text: folder.path });
  }
  onChooseSuggestion(folder, evt) {
    let action = this.actionFunc(folder.path);
    this.readable.read(action);
  }
};

// src/reader/clipboard-reader.ts
var import_obsidian19 = __toModule(require("obsidian"));

// src/action/action.ts
var ActionModel = class {
  constructor(file, content) {
    this.file = file;
    this.content = content;
  }
};

// src/reader/read-info.ts
var ReadInfo = class {
  constructor(limit) {
    try {
      this.limit = limit;
    } catch (e) {
      throw new Error("limit [" + this.limit + "] must be a number!");
    }
    this.actionModels = [];
  }
  addFile(file) {
    if (this.actionModels.length >= this.limit) {
      throw new Error("Load more than " + this.limit + " files!");
    }
    let model = new ActionModel(file);
    this.actionModels.push(model);
  }
  addContent(cont) {
    if (this.actionModels.length >= this.limit) {
      throw new Error("Load more than " + this.limit + " files!");
    }
    let model = new ActionModel(null, cont);
    this.actionModels.push(model);
  }
  getModels() {
    return this.actionModels;
  }
};

// src/reader/clipboard-reader.ts
var ClipboardReader = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
  }
  read(action) {
    let readInfo = new ReadInfo(this.plugin.settings.limit);
    let promiseStr = navigator.clipboard.readText();
    promiseStr.then((str) => {
      let lines = str.split(/\r?\n/);
      try {
        lines.forEach((line) => {
          let f = line;
          if (f.startsWith("[[")) {
            f = f.substring(2, f.length);
          }
          if (f.endsWith("]]")) {
            f = f.substring(0, f.length - 2);
          }
          if (!hasMarkdownSuffix(f) && !hasCanvasSuffix(f)) {
            f = f + ".md";
          }
          let ff = this.app.vault.getAbstractFileByPath(f);
          if (ff != null) {
            readInfo.addFile(ff);
          } else {
            console.log("can not find file :" + f);
          }
        });
        action.act(readInfo.getModels());
      } catch (e) {
        new import_obsidian19.Notice(e.message);
      }
    }).catch((e) => {
      new import_obsidian19.Notice("Clipboard File Content Error!" + e);
    });
  }
};

// src/reader/clipboard-content-reader.ts
var import_obsidian20 = __toModule(require("obsidian"));
var ClipboardContentReader = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
  }
  read(action) {
    let promiseStr = navigator.clipboard.readText();
    promiseStr.then((str) => {
      try {
        let actionModels = [];
        let model = new ActionModel(null, str);
        actionModels.push(model);
        action.act(actionModels);
      } catch (e) {
        new import_obsidian20.Notice(e.message);
      }
    }).catch((e) => {
      new import_obsidian20.Notice("Clipboard Content Error!" + e);
    });
  }
};

// src/command/clipboard-command.ts
var ClipboardCommand = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  regist() {
    this.registMoveFile();
    this.registSyncFlomo();
    this.registMergeFile();
    this.registDeleteFile();
    this.registEditProp();
    this.registRenameFile();
    this.registAddFile2Canvas();
    this.registAddContToCanvas();
  }
  registRenameFile() {
    this.plugin.addCommand({
      id: "rename-files-in-clipboard",
      name: "Rename files in clipboard ...",
      callback: () => {
        new ClipboardReader(this.plugin).read(new RenameAction(this.plugin.app));
      }
    });
  }
  registEditProp() {
    this.plugin.addCommand({
      id: "edit-front-matter-in-clipboard-files",
      name: "Edit Properties in clipboard files ...",
      callback: () => {
        new ClipboardReader(this.plugin).read(new EditPropertiesAction(this.plugin.app));
      }
    });
  }
  registDeleteFile() {
    this.plugin.addCommand({
      id: "delete-files-in-clipboard",
      name: "Delete files in clipboard!",
      callback: () => {
        new ClipboardReader(this.plugin).read(new DeleteAction(this.plugin.app));
      }
    });
  }
  registMergeFile() {
    this.plugin.addCommand({
      id: "merge-files-in-clipboard-to",
      name: "Merge files in clipboard to ...",
      callback: () => {
        new ChooseFileModal(this.plugin.app, new ClipboardReader(this.plugin)).open();
      }
    });
  }
  registSyncFlomo() {
    this.plugin.addCommand({
      id: "sync-files-in-clipboard-to-flomo",
      name: "Sync files in clipboard to flomo ...",
      callback: () => {
        new ClipboardReader(this.plugin).read(new SyncFlomoAction(this.plugin));
      }
    });
  }
  registMoveFile() {
    this.plugin.addCommand({
      id: "move-files-in-clipboard-to",
      name: "Move files in clipboard to ...",
      callback: () => {
        let actionFunc = (path) => {
          return new MoveAction(this.plugin.app, path);
        };
        new ChooseFolderModal(this.plugin.app, new ClipboardReader(this.plugin), actionFunc).open();
      }
    });
  }
  registAddContToCanvas() {
    this.plugin.addCommand({
      id: "Add-content-to",
      name: "Add content in clipboard to canvas ...",
      callback: () => {
        new ChooseCanvasModal(this.plugin.app, new ClipboardContentReader(this.plugin)).open();
      }
    });
  }
  registAddFile2Canvas() {
    this.plugin.addCommand({
      id: "add-files-in-clipboard-to-canvas",
      name: "Add files in clipboard to target canvas ...",
      callback: () => {
        new ChooseCanvasModal(this.plugin.app, new ClipboardReader(this.plugin)).open();
      }
    });
  }
};

// src/action/create-action.ts
var import_obsidian22 = __toModule(require("obsidian"));

// src/modal/create-confirm-modal.ts
var import_obsidian21 = __toModule(require("obsidian"));
var CreateConfirmModal = class extends import_obsidian21.Modal {
  constructor(app2, moveInfos) {
    super(app2);
    this.moveInfos = moveInfos;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Confirm Create?" });
    this.moveInfos.forEach((info) => {
      contentEl.createEl("div", { text: info.targetDir + "/" + info.sourceFile.name });
    });
    new import_obsidian21.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      this.close();
      for (const key in this.moveInfos) {
        let info = this.moveInfos[key];
        yield this.app.vault.create(info.targetDir + "/" + info.sourceFile.name, "");
      }
      new import_obsidian21.Notice("Create Success!");
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian21.Notice("Create Canceled!");
    }));
  }
};

// src/action/create-action.ts
var CreateAction = class {
  constructor(app2, targetPath) {
    this.app = app2;
    this.targetPath = targetPath;
  }
  act(actionModels) {
    const moveInfos = [];
    if (actionModels.length > 0) {
      actionModels.forEach((model) => {
        let ff = model.file;
        moveInfos.push({
          sourceFile: ff,
          targetDir: this.targetPath
        });
      });
      new CreateConfirmModal(this.app, moveInfos).open();
    } else {
      new import_obsidian22.Notice("No Files Found!");
    }
  }
};

// src/reader/current-file-reader.ts
var import_obsidian23 = __toModule(require("obsidian"));
var ReadType;
(function(ReadType2) {
  ReadType2[ReadType2["LINKS"] = 0] = "LINKS";
  ReadType2[ReadType2["UN_RESOLVED_LINKS"] = 1] = "UN_RESOLVED_LINKS";
  ReadType2[ReadType2["CONTENT"] = 2] = "CONTENT";
  ReadType2[ReadType2["SELECTION"] = 3] = "SELECTION";
})(ReadType || (ReadType = {}));
var CurrentFileReader = class {
  constructor(plugin, readType, selection) {
    this.readType = 0;
    this.plugin = plugin;
    this.app = plugin.app;
    this.readType = readType;
    this.selection = selection;
  }
  read(action) {
    let readInfo = new ReadInfo(this.plugin.settings.limit);
    let currentFile = this.app.workspace.getActiveFile();
    if (currentFile == null) {
      new import_obsidian23.Notice("No active file!");
      return;
    }
    let currentFilePath = currentFile.path;
    let paths = [];
    if (this.readType == 2) {
      paths.push(currentFilePath);
    } else if (this.readType == 1) {
      let linkObj = this.app.metadataCache.unresolvedLinks[currentFilePath];
      for (let key in linkObj) {
        paths.push(key);
      }
    } else {
      let linkObj = this.app.metadataCache.resolvedLinks[currentFilePath];
      for (let key in linkObj) {
        paths.push(key);
      }
    }
    try {
      if (this.readType == 1) {
        paths.forEach((path) => {
          let ff = new VirtualFile(path);
          readInfo.addFile(ff);
        });
      } else if (this.readType == 3) {
        readInfo.addContent(this.selection);
      } else {
        paths.forEach((path) => {
          let ff = this.app.vault.getAbstractFileByPath(path);
          if (ff != null) {
            readInfo.addFile(ff);
          }
        });
      }
      action.act(readInfo.getModels());
    } catch (e) {
      new import_obsidian23.Notice(e.message);
    }
  }
};
var VirtualFile = class {
  constructor(path) {
    let idx = path.lastIndexOf("/");
    if (!hasMarkdownSuffix(path)) {
      path = path + ".md";
    }
    this.path = path;
    if (idx >= 0) {
      this.name = path.substring(idx, path.length);
    } else {
      this.name = path;
    }
  }
};

// src/command/current-file-command.ts
var CurrentFileCommand = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  regist() {
    this.registMoveFile();
    this.registSyncContentToFlomo();
    this.registSyncSelectionToFlomo();
    this.registSyncFileToFlomo();
    this.registCreateFile();
    this.registMergeFile();
    this.registDeleteFile();
    this.registEditProp();
    this.registRenameFile();
    this.registAddFile2Canvas();
    this.registAddSelectionToCanvas();
  }
  registRenameFile() {
    this.plugin.addCommand({
      id: "rename-in-current-file-links",
      name: "Rename in current file links ...",
      callback: () => {
        new CurrentFileReader(this.plugin).read(new RenameAction(this.plugin.app));
      }
    });
  }
  registEditProp() {
    this.plugin.addCommand({
      id: "edit-front-matter-in-current-file-links",
      name: "Edit Properties in current file links ...",
      callback: () => {
        new CurrentFileReader(this.plugin).read(new EditPropertiesAction(this.plugin.app));
      }
    });
  }
  registDeleteFile() {
    this.plugin.addCommand({
      id: "delete-links-in-current-file",
      name: "Delete link-files in current file!",
      callback: () => {
        new CurrentFileReader(this.plugin).read(new DeleteAction(this.plugin.app));
      }
    });
  }
  registMergeFile() {
    this.plugin.addCommand({
      id: "merge-links-to",
      name: "Merge links in current file to ...",
      callback: () => {
        new ChooseFileModal(this.plugin.app, new CurrentFileReader(this.plugin)).open();
      }
    });
  }
  registCreateFile() {
    this.plugin.addCommand({
      id: "create-links",
      name: "Create links in current file ...",
      callback: () => {
        let actionFunc = (path) => {
          return new CreateAction(this.plugin.app, path);
        };
        new ChooseFolderModal(this.plugin.app, new CurrentFileReader(this.plugin, ReadType.UN_RESOLVED_LINKS), actionFunc).open();
      }
    });
  }
  registSyncFileToFlomo() {
    this.plugin.addCommand({
      id: "sync-links-to",
      name: "Sync links in current file to flomo ...",
      callback: () => {
        new CurrentFileReader(this.plugin).read(new SyncFlomoAction(this.plugin));
      }
    });
  }
  registSyncContentToFlomo() {
    this.plugin.addCommand({
      id: "sync-content-to",
      name: "Sync content in current file to flomo ...",
      callback: () => {
        new CurrentFileReader(this.plugin, ReadType.CONTENT).read(new SyncFlomoAction(this.plugin));
      }
    });
  }
  registSyncSelectionToFlomo() {
    this.plugin.addCommand({
      id: "sync-selection-to",
      name: "Sync selection in current file to flomo ...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new CurrentFileReader(this.plugin, ReadType.SELECTION, editor.getSelection()).read(new SyncFlomoAction(this.plugin));
        }
        return editor.getSelection() != "";
      }
    });
  }
  registAddSelectionToCanvas() {
    this.plugin.addCommand({
      id: "Add-selection-to",
      name: "Add selection in current file to canvas ...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new ChooseCanvasModal(this.plugin.app, new CurrentFileReader(this.plugin, ReadType.SELECTION, editor.getSelection())).open();
        }
        return editor.getSelection() != "";
      }
    });
  }
  registMoveFile() {
    this.plugin.addCommand({
      id: "move-links-to",
      name: "Move links in current file to ...",
      callback: () => {
        let actionFunc = (path) => {
          return new MoveAction(this.plugin.app, path);
        };
        new ChooseFolderModal(this.plugin.app, new CurrentFileReader(this.plugin), actionFunc).open();
      }
    });
  }
  registAddFile2Canvas() {
    this.plugin.addCommand({
      id: "add-links-to-canvas",
      name: "Add links in current file to target canvas ...",
      callback: () => {
        new ChooseCanvasModal(this.plugin.app, new CurrentFileReader(this.plugin)).open();
      }
    });
  }
};

// src/command/dataview-command.ts
var import_obsidian_dataview2 = __toModule(require_lib());

// src/action/copy-action.ts
var import_obsidian25 = __toModule(require("obsidian"));

// src/modal/copy-to-clipboard-confirm-modal.ts
var import_obsidian24 = __toModule(require("obsidian"));
var CopyToClipboardConfirmModal = class extends import_obsidian24.Modal {
  constructor(app2, resultArr) {
    super(app2);
    this.resultArr = resultArr;
    this.lineBreak = getLinebreak();
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Confirm copy to clipboard?" });
    let htmlStr = this.prepareHTMLStr();
    let el = contentEl.createEl("div");
    el.innerHTML = htmlStr;
    new import_obsidian24.Setting(contentEl).addToggle((toggle) => {
      toggle.setTooltip("Copy name only!");
      toggle.onChange((val) => {
        this.nameOnlyFlag = val;
        htmlStr = this.prepareHTMLStr();
        el.innerHTML = htmlStr;
      });
    });
    new import_obsidian24.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      this.close();
      let str = this.prepareStr();
      navigator.clipboard.writeText(str);
      new import_obsidian24.Notice("Copy links success!");
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian24.Notice("Copy to Clipboard Canceled!");
    }));
  }
  prepareStr() {
    let str = "";
    if (this.nameOnlyFlag) {
      this.resultArr.forEach((ff) => {
        let name = ff.name;
        if (hasMarkdownSuffix(name)) {
          name = name.substring(0, name.lastIndexOf("."));
        }
        str += "[[" + name + "]]" + this.lineBreak;
      });
    } else {
      this.resultArr.forEach((ff) => {
        let name = ff.name;
        if (hasMarkdownSuffix(name)) {
          name = name.substring(0, name.lastIndexOf("."));
        }
        str += "[[" + ff.path + "|" + name + "]]" + this.lineBreak;
      });
    }
    return str;
  }
  prepareHTMLStr() {
    let str = "";
    if (this.nameOnlyFlag) {
      this.resultArr.forEach((ff) => {
        let name = ff.name;
        if (hasMarkdownSuffix(name)) {
          name = name.substring(0, name.lastIndexOf("."));
        }
        str += "[[" + name + "]]<br>";
      });
    } else {
      this.resultArr.forEach((ff) => {
        let name = ff.name;
        if (hasMarkdownSuffix(name)) {
          name = name.substring(0, name.lastIndexOf("."));
        }
        str += "[[" + ff.path + "|" + name + "]]<br>";
      });
    }
    return str;
  }
};

// src/action/copy-action.ts
var CopyAction = class {
  constructor(app2) {
    this.app = app2;
  }
  act(actionModels) {
    if (actionModels.length > 0) {
      let files = actionModels.map((model) => model.file);
      new CopyToClipboardConfirmModal(this.app, files).open();
    } else {
      new import_obsidian25.Notice("No Files Found!");
    }
  }
};

// src/reader/dataview-reader.ts
var import_obsidian26 = __toModule(require("obsidian"));
var import_obsidian_dataview = __toModule(require_lib());
var DataviewReader = class {
  constructor(plugin, queryStr, taskFlag) {
    this.plugin = plugin;
    this.app = plugin.app;
    this.queryStr = queryStr;
    this.taskFlag = taskFlag;
  }
  read(action) {
    let readInfo = new ReadInfo(this.plugin.settings.limit);
    let api = (0, import_obsidian_dataview.getAPI)();
    let qStr = formatStr(this.queryStr);
    let idx = this.queryStr.indexOf(".pages(");
    if (idx > 0) {
      let tmpStr = this.queryStr.substring(idx + 7);
      let tmpIdx = tmpStr.indexOf(")");
      tmpStr = tmpStr.substring(0, tmpIdx);
      if (tmpStr.indexOf("'") >= 0 || tmpStr.indexOf('"') >= 0) {
        tmpStr = tmpStr.substring(1, tmpStr.length - 1);
      } else {
        let nTmpStr = this.queryStr.substring(0, idx);
        idx = nTmpStr.indexOf(tmpStr);
        tmpStr = nTmpStr.substring(idx + tmpStr.length);
        idx = tmpStr.indexOf("'");
        tmpStr = tmpStr.substring(idx + 1);
        idx = tmpStr.indexOf("'");
        tmpStr = tmpStr.substring(0, idx);
      }
      try {
        let resArr = api.pages(tmpStr);
        resArr.values.forEach((it) => {
          let ff = this.app.vault.getAbstractFileByPath(it.file.path);
          if (ff != null) {
            readInfo.addFile(ff);
          }
        });
        action.act(readInfo.getModels());
      } catch (e) {
        new import_obsidian26.Notice(e.message);
      }
    } else {
      api.query(qStr).then((res) => {
        if (res.successful) {
          let filePaths = [];
          if (res.value.type == "list") {
            res.value.values.forEach((it) => {
              filePaths.push(it.path);
            });
          } else if (res.value.type == "table") {
            filePaths = res.value.values;
            res.value.values.forEach((it) => {
              it.forEach((innerIt) => {
                if (innerIt && innerIt.path) {
                  filePaths.push(innerIt.path);
                  return;
                }
              });
            });
          } else {
            res.value.values.forEach((it) => {
              filePaths.push(it.link.path);
            });
          }
          try {
            if (this.taskFlag) {
              let strArr = [];
              res.value.values.forEach((it) => {
                strArr.push("- [ ] [[" + it.link.path + "|" + it.text + "]]");
              });
              let actionModels = [];
              let model = new ActionModel(null, strArr.join(getLinebreak()));
              actionModels.push(model);
              action.act(actionModels);
            } else {
              filePaths.forEach((filePath) => {
                let ff = this.app.vault.getAbstractFileByPath(filePath.toString());
                if (ff != null) {
                  readInfo.addFile(ff);
                }
              });
              action.act(readInfo.getModels());
            }
          } catch (e) {
            new import_obsidian26.Notice(e.message);
          }
        } else {
          new import_obsidian26.Notice("Query string error![" + this.queryStr + "]");
        }
      });
    }
  }
};
function formatStr(queryStr) {
  let str = queryStr.trimStart();
  let commandStr = str.substring(0, 4);
  if (commandStr.toUpperCase() == "LIST") {
    return "LIST" + str.substring(4, str.length);
  }
  if (commandStr.toUpperCase() == "TABL") {
    return "TABLE" + str.substring(5, str.length);
  }
  if (commandStr.toUpperCase() == "TASK") {
    return "TASK" + str.substring(4, str.length);
  }
  return queryStr;
}

// src/command/dataview-command.ts
var DataviewCommand = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  regist() {
    let dataviewApi = (0, import_obsidian_dataview2.getAPI)();
    this.registMoveFile(dataviewApi);
    this.registSyncFlomo(dataviewApi);
    this.registMergeFile(dataviewApi);
    this.registDeleteFile(dataviewApi);
    this.registCopyLinks(dataviewApi);
    this.registEditProp(dataviewApi);
    this.registRenameFile(dataviewApi);
    this.registAddFile2Canvas(dataviewApi);
    this.registAddTask2Canvas(dataviewApi);
  }
  registRenameFile(dataviewApi) {
    this.plugin.addCommand({
      id: "rename-in-dataview-results",
      name: "Rename in dataview results ...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new DataviewReader(this.plugin, editor.getSelection()).read(new RenameAction(this.plugin.app));
        }
        return dataviewApi != null;
      }
    });
  }
  registEditProp(dataviewApi) {
    this.plugin.addCommand({
      id: "edit-front-matter-in-dataview-results",
      name: "Edit Properties in dataview results ...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new DataviewReader(this.plugin, editor.getSelection()).read(new EditPropertiesAction(this.plugin.app));
        }
        return dataviewApi != null;
      }
    });
  }
  registCopyLinks(dataviewApi) {
    this.plugin.addCommand({
      id: "copy-dataview-result-links",
      name: "Copy dataview result links!",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new DataviewReader(this.plugin, editor.getSelection()).read(new CopyAction(this.plugin.app));
        }
        return dataviewApi != null;
      }
    });
  }
  registDeleteFile(dataviewApi) {
    this.plugin.addCommand({
      id: "delete-dataview-results",
      name: "Delete dataview query results!",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new DataviewReader(this.plugin, editor.getSelection()).read(new DeleteAction(this.plugin.app));
        }
        return dataviewApi != null;
      }
    });
  }
  registMergeFile(dataviewApi) {
    this.plugin.addCommand({
      id: "merge-dataview-results-to",
      name: "Merge dataview query results to ...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new ChooseFileModal(this.plugin.app, new DataviewReader(this.plugin, editor.getSelection())).open();
        }
        return dataviewApi != null;
      }
    });
  }
  registSyncFlomo(dataviewApi) {
    this.plugin.addCommand({
      id: "sync-dataview-results-to",
      name: "Sync dataview query results to flomo ...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new DataviewReader(this.plugin, editor.getSelection()).read(new SyncFlomoAction(this.plugin));
        }
        return dataviewApi != null;
      }
    });
  }
  registMoveFile(dataviewApi) {
    this.plugin.addCommand({
      id: "move-dataview-results-to",
      name: "Move dataview query results to ...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          let actionFunc = (path) => {
            return new MoveAction(this.plugin.app, path);
          };
          new ChooseFolderModal(this.plugin.app, new DataviewReader(this.plugin, editor.getSelection()), actionFunc).open();
        }
        return dataviewApi != null;
      }
    });
  }
  registAddFile2Canvas(dataviewApi) {
    this.plugin.addCommand({
      id: "add-dataview-results-to-canvas",
      name: "Add dataview query results to canvas...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new ChooseCanvasModal(this.plugin.app, new DataviewReader(this.plugin, editor.getSelection())).open();
        }
        return dataviewApi != null;
      }
    });
  }
  registAddTask2Canvas(dataviewApi) {
    this.plugin.addCommand({
      id: "add-dataview-task-to-canvas",
      name: "Add dataview task to canvas...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new ChooseCanvasModal(this.plugin.app, new DataviewReader(this.plugin, editor.getSelection(), true)).open();
        }
        return dataviewApi != null;
      }
    });
  }
};

// src/command/presentation-command.ts
var PresentationCommand = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  regist() {
    this.registStartPresentation();
    this.registStopPresentation();
  }
  registStartPresentation() {
    this.plugin.addCommand({
      id: "start-presentation",
      name: "Start Presentation",
      callback: () => {
        let fontTextSize = document.body.style.getPropertyValue("--font-text-size");
        let fileLineWidth = document.body.style.getPropertyValue("--file-line-width");
        if (fontTextSize) {
          localStorage.setItem("--font-text-size", fontTextSize);
        }
        if (fileLineWidth) {
          localStorage.setItem("--file-line-width", fileLineWidth);
        }
        document.body.style.setProperty("--font-text-size", "26px");
        document.body.style.setProperty("--file-line-width", "1000px");
      }
    });
  }
  registStopPresentation() {
    this.plugin.addCommand({
      id: "stop-presentation",
      name: "Stop Presentation",
      callback: () => {
        let fontTextSize = localStorage.getItem("--font-text-size");
        let fileLineWidth = localStorage.getItem("--file-line-width");
        if (fontTextSize) {
          document.body.style.setProperty("--font-text-size", fontTextSize);
        } else {
          document.body.style.setProperty("--font-text-size", "16px");
        }
        if (fileLineWidth) {
          document.body.style.setProperty("--file-line-width", fileLineWidth);
        } else {
          document.body.style.setProperty("--file-line-width", "700px");
        }
      }
    });
  }
};

// src/reader/search-results-reader.ts
var import_obsidian27 = __toModule(require("obsidian"));
var SearchResultsReader = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
  }
  read(action) {
    let readInfo = new ReadInfo(this.plugin.settings.limit);
    let results = this.app.workspace.getLeavesOfType("search")[0].view.dom.resultDomLookup;
    if (results.size == 0) {
      new import_obsidian27.Notice("Has no search results!Please search first!");
    } else {
      let arr = [...results.keys()];
      arr.forEach((k) => {
        let ff = this.app.vault.getAbstractFileByPath(k.path);
        if (ff != null) {
          readInfo.addFile(ff);
        } else {
          console.log("can not find file :" + k.path);
        }
      });
      action.act(readInfo.getModels());
    }
  }
};

// src/command/search-command.ts
var SearchCommand = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  regist() {
    this.registMoveFile();
    this.registSyncFlomo();
    this.registMergeFile();
    this.registDeleteFile();
    this.registEditProp();
    this.registRenameFile();
    this.registAddFile2Canvas();
  }
  registRenameFile() {
    this.plugin.addCommand({
      id: "rename-files-in-searchresults",
      name: "Rename files in searchresults ...",
      callback: () => {
        new SearchResultsReader(this.plugin).read(new RenameAction(this.plugin.app));
      }
    });
  }
  registEditProp() {
    this.plugin.addCommand({
      id: "edit-front-matter-in-searchresults-files",
      name: "Edit Properties in searchresults files ...",
      callback: () => {
        new SearchResultsReader(this.plugin).read(new EditPropertiesAction(this.plugin.app));
      }
    });
  }
  registDeleteFile() {
    this.plugin.addCommand({
      id: "delete-files-in-searchresults",
      name: "Delete files in searchresults!",
      callback: () => {
        new SearchResultsReader(this.plugin).read(new DeleteAction(this.plugin.app));
      }
    });
  }
  registMergeFile() {
    this.plugin.addCommand({
      id: "merge-files-in-searchresults-to",
      name: "Merge files in searchresults to ...",
      callback: () => {
        new ChooseFileModal(this.plugin.app, new SearchResultsReader(this.plugin)).open();
      }
    });
  }
  registSyncFlomo() {
    this.plugin.addCommand({
      id: "sync-files-in-searchresults-to-flomo",
      name: "Sync files in searchresults to flomo ...",
      callback: () => {
        new SearchResultsReader(this.plugin).read(new SyncFlomoAction(this.plugin));
      }
    });
  }
  registMoveFile() {
    this.plugin.addCommand({
      id: "move-files-in-searchresults-to",
      name: "Move files in searchresults to ...",
      callback: () => {
        let actionFunc = (path) => {
          return new MoveAction(this.plugin.app, path);
        };
        new ChooseFolderModal(this.plugin.app, new SearchResultsReader(this.plugin), actionFunc).open();
      }
    });
  }
  registAddFile2Canvas() {
    this.plugin.addCommand({
      id: "add-files-in-searchresults-to-canvas",
      name: "Add files in searchresults to target canvas ...",
      callback: () => {
        new ChooseCanvasModal(this.plugin.app, new SearchResultsReader(this.plugin)).open();
      }
    });
  }
};

// main.ts
var FileCookerPlugin = class extends import_obsidian28.Plugin {
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      new CurrentFileCommand(this).regist();
      new ClipboardCommand(this).regist();
      new DataviewCommand(this).regist();
      new SearchCommand(this).regist();
      new PresentationCommand(this).regist();
      this.addSettingTab(new FileCookerSettingTab(this.app, this));
    });
  }
  onunload() {
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
};
var DEFAULT_SETTINGS = {
  flomoAPI: "",
  limit: "300"
};
var FileCookerSettingTab = class extends import_obsidian28.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Settings for File Cooker!" });
    new import_obsidian28.Setting(containerEl).setName("Limit").setDesc("config batch file limit").addText((text) => text.setPlaceholder("Enter batch file limit").setValue(this.plugin.settings.limit).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.limit = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian28.Setting(containerEl).setName("flomoAPI").setDesc("config flomo API to sync notes").addText((text) => text.setPlaceholder("Enter flomo API").setValue(this.plugin.settings.flomoAPI).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.flomoAPI = value;
      yield this.plugin.saveSettings();
    })));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL25vZGUtZmV0Y2gvYnJvd3Nlci5qcyIsICJub2RlX21vZHVsZXMvb2JzaWRpYW4tZGF0YXZpZXcvbm9kZV9tb2R1bGVzL2x1eG9uL2J1aWxkL2Nqcy1icm93c2VyL2x1eG9uLmpzIiwgIm5vZGVfbW9kdWxlcy9vYnNpZGlhbi1kYXRhdmlldy9zcmMvc2V0dGluZ3MudHMiLCAibm9kZV9tb2R1bGVzL29ic2lkaWFuLWRhdGF2aWV3L3NyYy9hcGkvcmVzdWx0LnRzIiwgIm5vZGVfbW9kdWxlcy9vYnNpZGlhbi1kYXRhdmlldy9ub2RlX21vZHVsZXMvcGFyc2ltbW9uL2J1aWxkL3BhcnNpbW1vbi51bWQubWluLmpzIiwgIm5vZGVfbW9kdWxlcy9vYnNpZGlhbi1kYXRhdmlldy9ub2RlX21vZHVsZXMvZW1vamktcmVnZXgvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL29ic2lkaWFuLWRhdGF2aWV3L3NyYy91dGlsL25vcm1hbGl6ZS50cyIsICJub2RlX21vZHVsZXMvb2JzaWRpYW4tZGF0YXZpZXcvc3JjL2RhdGEtbW9kZWwvdmFsdWUudHMiLCAibm9kZV9tb2R1bGVzL29ic2lkaWFuLWRhdGF2aWV3L3NyYy9leHByZXNzaW9uL2ZpZWxkLnRzIiwgIm5vZGVfbW9kdWxlcy9vYnNpZGlhbi1kYXRhdmlldy9zcmMvZGF0YS1pbmRleC9zb3VyY2UudHMiLCAibm9kZV9tb2R1bGVzL29ic2lkaWFuLWRhdGF2aWV3L3NyYy9leHByZXNzaW9uL3BhcnNlLnRzIiwgIm5vZGVfbW9kdWxlcy9vYnNpZGlhbi1kYXRhdmlldy9zcmMvcXVlcnkvcXVlcnkudHMiLCAibm9kZV9tb2R1bGVzL29ic2lkaWFuLWRhdGF2aWV3L3NyYy9xdWVyeS9wYXJzZS50cyIsICJub2RlX21vZHVsZXMvb2JzaWRpYW4tZGF0YXZpZXcvc3JjL2luZGV4LnRzIiwgIm1haW4udHMiLCAic3JjL2FjdGlvbi9kZWxldGUtYWN0aW9uLnRzIiwgInNyYy9tb2RhbC9kZWxldGUtY29uZmlybS1tb2RhbC50cyIsICJzcmMvYWN0aW9uL2VkaXQtcHJvcGVydGllcy1hY3Rpb24udHMiLCAic3JjL21vZGFsL2VkaXQtcHJvcGVydGllcy1tb2RhbC50cyIsICJzcmMvYWN0aW9uL21vdmUtYWN0aW9uLnRzIiwgInNyYy9tb2RhbC9tb3ZlLWNvbmZpcm0tbW9kYWwudHMiLCAic3JjL2FjdGlvbi9yZW5hbWUtYWN0aW9uLnRzIiwgInNyYy9tb2RhbC9yZW5hbWUtbW9kYWwudHMiLCAic3JjL21vZGFsL3JlbmFtZS1jb25maXJtLW1vZGFsLnRzIiwgInNyYy91dGlscy9maWxlLXR5cGUtdXRpbC50cyIsICJzcmMvYWN0aW9uL3N5bmMtZmxvbW8tYWN0aW9uLnRzIiwgInNyYy9tb2RhbC9zeW5jLWZsb21vLWNvbmZpcm0tbW9kYWwudHMiLCAic3JjL21vZGFsL2Nob29zZS1jYW52YXMtbW9kYWwudHMiLCAic3JjL2FjdGlvbi9hZGQtdG8tY2FudmFzLWFjdGlvbi50cyIsICJzcmMvbW9kYWwvYWRkLXRvLWNhbnZhcy1jb25maXJtLW1vZGFsLnRzIiwgInNyYy9tb2RhbC9jaG9vc2UtZmlsZS1tb2RhbC50cyIsICJzcmMvYWN0aW9uL21lcmdlLWFjdGlvbi50cyIsICJzcmMvbW9kYWwvbWVyZ2UtY29uZmlybS1tb2RhbC50cyIsICJzcmMvdXRpbHMvbGluZS1icmVhay11dGlsLnRzIiwgInNyYy9tb2RhbC9jaG9vc2UtZm9sZGVyLW1vZGFsLnRzIiwgInNyYy9yZWFkZXIvY2xpcGJvYXJkLXJlYWRlci50cyIsICJzcmMvYWN0aW9uL2FjdGlvbi50cyIsICJzcmMvcmVhZGVyL3JlYWQtaW5mby50cyIsICJzcmMvcmVhZGVyL2NsaXBib2FyZC1jb250ZW50LXJlYWRlci50cyIsICJzcmMvY29tbWFuZC9jbGlwYm9hcmQtY29tbWFuZC50cyIsICJzcmMvYWN0aW9uL2NyZWF0ZS1hY3Rpb24udHMiLCAic3JjL21vZGFsL2NyZWF0ZS1jb25maXJtLW1vZGFsLnRzIiwgInNyYy9yZWFkZXIvY3VycmVudC1maWxlLXJlYWRlci50cyIsICJzcmMvY29tbWFuZC9jdXJyZW50LWZpbGUtY29tbWFuZC50cyIsICJzcmMvY29tbWFuZC9kYXRhdmlldy1jb21tYW5kLnRzIiwgInNyYy9hY3Rpb24vY29weS1hY3Rpb24udHMiLCAic3JjL21vZGFsL2NvcHktdG8tY2xpcGJvYXJkLWNvbmZpcm0tbW9kYWwudHMiLCAic3JjL3JlYWRlci9kYXRhdmlldy1yZWFkZXIudHMiLCAic3JjL2NvbW1hbmQvcHJlc2VudGF0aW9uLWNvbW1hbmQudHMiLCAic3JjL3JlYWRlci9zZWFyY2gtcmVzdWx0cy1yZWFkZXIudHMiLCAic3JjL2NvbW1hbmQvc2VhcmNoLWNvbW1hbmQudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIlwidXNlIHN0cmljdFwiO1xuXG4vLyByZWY6IGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLWdsb2JhbFxudmFyIGdldEdsb2JhbCA9IGZ1bmN0aW9uICgpIHtcblx0Ly8gdGhlIG9ubHkgcmVsaWFibGUgbWVhbnMgdG8gZ2V0IHRoZSBnbG9iYWwgb2JqZWN0IGlzXG5cdC8vIGBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpYFxuXHQvLyBIb3dldmVyLCB0aGlzIGNhdXNlcyBDU1AgdmlvbGF0aW9ucyBpbiBDaHJvbWUgYXBwcy5cblx0aWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykgeyByZXR1cm4gc2VsZjsgfVxuXHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHsgcmV0dXJuIHdpbmRvdzsgfVxuXHRpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHsgcmV0dXJuIGdsb2JhbDsgfVxuXHR0aHJvdyBuZXcgRXJyb3IoJ3VuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdCcpO1xufVxuXG52YXIgZ2xvYmFsID0gZ2V0R2xvYmFsKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IGdsb2JhbC5mZXRjaDtcblxuLy8gTmVlZGVkIGZvciBUeXBlU2NyaXB0IGFuZCBXZWJwYWNrLlxuaWYgKGdsb2JhbC5mZXRjaCkge1xuXHRleHBvcnRzLmRlZmF1bHQgPSBnbG9iYWwuZmV0Y2guYmluZChnbG9iYWwpO1xufVxuXG5leHBvcnRzLkhlYWRlcnMgPSBnbG9iYWwuSGVhZGVycztcbmV4cG9ydHMuUmVxdWVzdCA9IGdsb2JhbC5SZXF1ZXN0O1xuZXhwb3J0cy5SZXNwb25zZSA9IGdsb2JhbC5SZXNwb25zZTsiLCAiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICByZXR1cm4gQ29uc3RydWN0b3I7XG59XG5cbmZ1bmN0aW9uIF9leHRlbmRzKCkge1xuICBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH07XG5cbiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpO1xuICBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzcztcblxuICBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpO1xufVxuXG5mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2Yobykge1xuICBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2Yobykge1xuICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7XG4gIH07XG4gIHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7XG59XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICAgIG8uX19wcm90b19fID0gcDtcbiAgICByZXR1cm4gbztcbiAgfTtcblxuICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApO1xufVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkge1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7XG4gIGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7XG4gIGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7XG5cbiAgdHJ5IHtcbiAgICBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2NvbnN0cnVjdChQYXJlbnQsIGFyZ3MsIENsYXNzKSB7XG4gIGlmIChfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkpIHtcbiAgICBfY29uc3RydWN0ID0gUmVmbGVjdC5jb25zdHJ1Y3Q7XG4gIH0gZWxzZSB7XG4gICAgX2NvbnN0cnVjdCA9IGZ1bmN0aW9uIF9jb25zdHJ1Y3QoUGFyZW50LCBhcmdzLCBDbGFzcykge1xuICAgICAgdmFyIGEgPSBbbnVsbF07XG4gICAgICBhLnB1c2guYXBwbHkoYSwgYXJncyk7XG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSBGdW5jdGlvbi5iaW5kLmFwcGx5KFBhcmVudCwgYSk7XG4gICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgQ29uc3RydWN0b3IoKTtcbiAgICAgIGlmIChDbGFzcykgX3NldFByb3RvdHlwZU9mKGluc3RhbmNlLCBDbGFzcy5wcm90b3R5cGUpO1xuICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gX2NvbnN0cnVjdC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xufVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVGdW5jdGlvbihmbikge1xuICByZXR1cm4gRnVuY3Rpb24udG9TdHJpbmcuY2FsbChmbikuaW5kZXhPZihcIltuYXRpdmUgY29kZV1cIikgIT09IC0xO1xufVxuXG5mdW5jdGlvbiBfd3JhcE5hdGl2ZVN1cGVyKENsYXNzKSB7XG4gIHZhciBfY2FjaGUgPSB0eXBlb2YgTWFwID09PSBcImZ1bmN0aW9uXCIgPyBuZXcgTWFwKCkgOiB1bmRlZmluZWQ7XG5cbiAgX3dyYXBOYXRpdmVTdXBlciA9IGZ1bmN0aW9uIF93cmFwTmF0aXZlU3VwZXIoQ2xhc3MpIHtcbiAgICBpZiAoQ2xhc3MgPT09IG51bGwgfHwgIV9pc05hdGl2ZUZ1bmN0aW9uKENsYXNzKSkgcmV0dXJuIENsYXNzO1xuXG4gICAgaWYgKHR5cGVvZiBDbGFzcyAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBfY2FjaGUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGlmIChfY2FjaGUuaGFzKENsYXNzKSkgcmV0dXJuIF9jYWNoZS5nZXQoQ2xhc3MpO1xuXG4gICAgICBfY2FjaGUuc2V0KENsYXNzLCBXcmFwcGVyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBXcmFwcGVyKCkge1xuICAgICAgcmV0dXJuIF9jb25zdHJ1Y3QoQ2xhc3MsIGFyZ3VtZW50cywgX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yKTtcbiAgICB9XG5cbiAgICBXcmFwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ2xhc3MucHJvdG90eXBlLCB7XG4gICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogV3JhcHBlcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gX3NldFByb3RvdHlwZU9mKFdyYXBwZXIsIENsYXNzKTtcbiAgfTtcblxuICByZXR1cm4gX3dyYXBOYXRpdmVTdXBlcihDbGFzcyk7XG59XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSB7fTtcbiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICB2YXIga2V5LCBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAga2V5ID0gc291cmNlS2V5c1tpXTtcbiAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlO1xuICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7XG4gIGlmICghbykgcmV0dXJuO1xuICBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xuICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7XG4gIGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7XG4gIGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pO1xuICBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG59XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7XG4gIGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTtcblxuICByZXR1cm4gYXJyMjtcbn1cblxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkge1xuICB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvW1wiQEBpdGVyYXRvclwiXTtcbiAgaWYgKGl0KSByZXR1cm4gKGl0ID0gaXQuY2FsbChvKSkubmV4dC5iaW5kKGl0KTtcblxuICBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7XG4gICAgaWYgKGl0KSBvID0gaXQ7XG4gICAgdmFyIGkgPSAwO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHtcbiAgICAgICAgZG9uZTogdHJ1ZVxuICAgICAgfTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogb1tpKytdXG4gICAgICB9O1xuICAgIH07XG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG59XG5cbi8vIHRoZXNlIGFyZW4ndCByZWFsbHkgcHJpdmF0ZSwgYnV0IG5vciBhcmUgdGhleSByZWFsbHkgdXNlZnVsIHRvIGRvY3VtZW50XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xudmFyIEx1eG9uRXJyb3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9FcnJvcikge1xuICBfaW5oZXJpdHNMb29zZShMdXhvbkVycm9yLCBfRXJyb3IpO1xuXG4gIGZ1bmN0aW9uIEx1eG9uRXJyb3IoKSB7XG4gICAgcmV0dXJuIF9FcnJvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gIH1cblxuICByZXR1cm4gTHV4b25FcnJvcjtcbn0oIC8qI19fUFVSRV9fKi9fd3JhcE5hdGl2ZVN1cGVyKEVycm9yKSk7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxuXG52YXIgSW52YWxpZERhdGVUaW1lRXJyb3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9MdXhvbkVycm9yKSB7XG4gIF9pbmhlcml0c0xvb3NlKEludmFsaWREYXRlVGltZUVycm9yLCBfTHV4b25FcnJvcik7XG5cbiAgZnVuY3Rpb24gSW52YWxpZERhdGVUaW1lRXJyb3IocmVhc29uKSB7XG4gICAgcmV0dXJuIF9MdXhvbkVycm9yLmNhbGwodGhpcywgXCJJbnZhbGlkIERhdGVUaW1lOiBcIiArIHJlYXNvbi50b01lc3NhZ2UoKSkgfHwgdGhpcztcbiAgfVxuXG4gIHJldHVybiBJbnZhbGlkRGF0ZVRpbWVFcnJvcjtcbn0oTHV4b25FcnJvcik7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxudmFyIEludmFsaWRJbnRlcnZhbEVycm9yID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfTHV4b25FcnJvcjIpIHtcbiAgX2luaGVyaXRzTG9vc2UoSW52YWxpZEludGVydmFsRXJyb3IsIF9MdXhvbkVycm9yMik7XG5cbiAgZnVuY3Rpb24gSW52YWxpZEludGVydmFsRXJyb3IocmVhc29uKSB7XG4gICAgcmV0dXJuIF9MdXhvbkVycm9yMi5jYWxsKHRoaXMsIFwiSW52YWxpZCBJbnRlcnZhbDogXCIgKyByZWFzb24udG9NZXNzYWdlKCkpIHx8IHRoaXM7XG4gIH1cblxuICByZXR1cm4gSW52YWxpZEludGVydmFsRXJyb3I7XG59KEx1eG9uRXJyb3IpO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbnZhciBJbnZhbGlkRHVyYXRpb25FcnJvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0x1eG9uRXJyb3IzKSB7XG4gIF9pbmhlcml0c0xvb3NlKEludmFsaWREdXJhdGlvbkVycm9yLCBfTHV4b25FcnJvcjMpO1xuXG4gIGZ1bmN0aW9uIEludmFsaWREdXJhdGlvbkVycm9yKHJlYXNvbikge1xuICAgIHJldHVybiBfTHV4b25FcnJvcjMuY2FsbCh0aGlzLCBcIkludmFsaWQgRHVyYXRpb246IFwiICsgcmVhc29uLnRvTWVzc2FnZSgpKSB8fCB0aGlzO1xuICB9XG5cbiAgcmV0dXJuIEludmFsaWREdXJhdGlvbkVycm9yO1xufShMdXhvbkVycm9yKTtcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG52YXIgQ29uZmxpY3RpbmdTcGVjaWZpY2F0aW9uRXJyb3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9MdXhvbkVycm9yNCkge1xuICBfaW5oZXJpdHNMb29zZShDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvciwgX0x1eG9uRXJyb3I0KTtcblxuICBmdW5jdGlvbiBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcigpIHtcbiAgICByZXR1cm4gX0x1eG9uRXJyb3I0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgfVxuXG4gIHJldHVybiBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcjtcbn0oTHV4b25FcnJvcik7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxudmFyIEludmFsaWRVbml0RXJyb3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9MdXhvbkVycm9yNSkge1xuICBfaW5oZXJpdHNMb29zZShJbnZhbGlkVW5pdEVycm9yLCBfTHV4b25FcnJvcjUpO1xuXG4gIGZ1bmN0aW9uIEludmFsaWRVbml0RXJyb3IodW5pdCkge1xuICAgIHJldHVybiBfTHV4b25FcnJvcjUuY2FsbCh0aGlzLCBcIkludmFsaWQgdW5pdCBcIiArIHVuaXQpIHx8IHRoaXM7XG4gIH1cblxuICByZXR1cm4gSW52YWxpZFVuaXRFcnJvcjtcbn0oTHV4b25FcnJvcik7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxudmFyIEludmFsaWRBcmd1bWVudEVycm9yID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfTHV4b25FcnJvcjYpIHtcbiAgX2luaGVyaXRzTG9vc2UoSW52YWxpZEFyZ3VtZW50RXJyb3IsIF9MdXhvbkVycm9yNik7XG5cbiAgZnVuY3Rpb24gSW52YWxpZEFyZ3VtZW50RXJyb3IoKSB7XG4gICAgcmV0dXJuIF9MdXhvbkVycm9yNi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gIH1cblxuICByZXR1cm4gSW52YWxpZEFyZ3VtZW50RXJyb3I7XG59KEx1eG9uRXJyb3IpO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbnZhciBab25lSXNBYnN0cmFjdEVycm9yID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfTHV4b25FcnJvcjcpIHtcbiAgX2luaGVyaXRzTG9vc2UoWm9uZUlzQWJzdHJhY3RFcnJvciwgX0x1eG9uRXJyb3I3KTtcblxuICBmdW5jdGlvbiBab25lSXNBYnN0cmFjdEVycm9yKCkge1xuICAgIHJldHVybiBfTHV4b25FcnJvcjcuY2FsbCh0aGlzLCBcIlpvbmUgaXMgYW4gYWJzdHJhY3QgY2xhc3NcIikgfHwgdGhpcztcbiAgfVxuXG4gIHJldHVybiBab25lSXNBYnN0cmFjdEVycm9yO1xufShMdXhvbkVycm9yKTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG52YXIgbiA9IFwibnVtZXJpY1wiLFxuICAgIHMgPSBcInNob3J0XCIsXG4gICAgbCA9IFwibG9uZ1wiO1xudmFyIERBVEVfU0hPUlQgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBuLFxuICBkYXk6IG5cbn07XG52YXIgREFURV9NRUQgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBzLFxuICBkYXk6IG5cbn07XG52YXIgREFURV9NRURfV0lUSF9XRUVLREFZID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogcyxcbiAgZGF5OiBuLFxuICB3ZWVrZGF5OiBzXG59O1xudmFyIERBVEVfRlVMTCA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IGwsXG4gIGRheTogblxufTtcbnZhciBEQVRFX0hVR0UgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBsLFxuICBkYXk6IG4sXG4gIHdlZWtkYXk6IGxcbn07XG52YXIgVElNRV9TSU1QTEUgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogblxufTtcbnZhciBUSU1FX1dJVEhfU0VDT05EUyA9IHtcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG5cbn07XG52YXIgVElNRV9XSVRIX1NIT1JUX09GRlNFVCA9IHtcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG4sXG4gIHRpbWVab25lTmFtZTogc1xufTtcbnZhciBUSU1FX1dJVEhfTE9OR19PRkZTRVQgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxuICB0aW1lWm9uZU5hbWU6IGxcbn07XG52YXIgVElNRV8yNF9TSU1QTEUgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgaG91ckN5Y2xlOiBcImgyM1wiXG59O1xudmFyIFRJTUVfMjRfV0lUSF9TRUNPTkRTID0ge1xuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbiAgaG91ckN5Y2xlOiBcImgyM1wiXG59O1xudmFyIFRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxuICBob3VyQ3ljbGU6IFwiaDIzXCIsXG4gIHRpbWVab25lTmFtZTogc1xufTtcbnZhciBUSU1FXzI0X1dJVEhfTE9OR19PRkZTRVQgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxuICBob3VyQ3ljbGU6IFwiaDIzXCIsXG4gIHRpbWVab25lTmFtZTogbFxufTtcbnZhciBEQVRFVElNRV9TSE9SVCA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IG4sXG4gIGRheTogbixcbiAgaG91cjogbixcbiAgbWludXRlOiBuXG59O1xudmFyIERBVEVUSU1FX1NIT1JUX1dJVEhfU0VDT05EUyA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IG4sXG4gIGRheTogbixcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG5cbn07XG52YXIgREFURVRJTUVfTUVEID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogcyxcbiAgZGF5OiBuLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG5cbn07XG52YXIgREFURVRJTUVfTUVEX1dJVEhfU0VDT05EUyA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IHMsXG4gIGRheTogbixcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG5cbn07XG52YXIgREFURVRJTUVfTUVEX1dJVEhfV0VFS0RBWSA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IHMsXG4gIGRheTogbixcbiAgd2Vla2RheTogcyxcbiAgaG91cjogbixcbiAgbWludXRlOiBuXG59O1xudmFyIERBVEVUSU1FX0ZVTEwgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBsLFxuICBkYXk6IG4sXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgdGltZVpvbmVOYW1lOiBzXG59O1xudmFyIERBVEVUSU1FX0ZVTExfV0lUSF9TRUNPTkRTID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbCxcbiAgZGF5OiBuLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbiAgdGltZVpvbmVOYW1lOiBzXG59O1xudmFyIERBVEVUSU1FX0hVR0UgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBsLFxuICBkYXk6IG4sXG4gIHdlZWtkYXk6IGwsXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgdGltZVpvbmVOYW1lOiBsXG59O1xudmFyIERBVEVUSU1FX0hVR0VfV0lUSF9TRUNPTkRTID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbCxcbiAgZGF5OiBuLFxuICB3ZWVrZGF5OiBsLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbiAgdGltZVpvbmVOYW1lOiBsXG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbi8vIFRZUEVTXG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKG8pIHtcbiAgcmV0dXJuIHR5cGVvZiBvID09PSBcInVuZGVmaW5lZFwiO1xufVxuZnVuY3Rpb24gaXNOdW1iZXIobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09IFwibnVtYmVyXCI7XG59XG5mdW5jdGlvbiBpc0ludGVnZXIobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09IFwibnVtYmVyXCIgJiYgbyAlIDEgPT09IDA7XG59XG5mdW5jdGlvbiBpc1N0cmluZyhvKSB7XG4gIHJldHVybiB0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIjtcbn1cbmZ1bmN0aW9uIGlzRGF0ZShvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykgPT09IFwiW29iamVjdCBEYXRlXVwiO1xufSAvLyBDQVBBQklMSVRJRVNcblxuZnVuY3Rpb24gaGFzUmVsYXRpdmUoKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHR5cGVvZiBJbnRsICE9PSBcInVuZGVmaW5lZFwiICYmICEhSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQ7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn0gLy8gT0JKRUNUUyBBTkQgQVJSQVlTXG5cbmZ1bmN0aW9uIG1heWJlQXJyYXkodGhpbmcpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkodGhpbmcpID8gdGhpbmcgOiBbdGhpbmddO1xufVxuZnVuY3Rpb24gYmVzdEJ5KGFyciwgYnksIGNvbXBhcmUpIHtcbiAgaWYgKGFyci5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgcmV0dXJuIGFyci5yZWR1Y2UoZnVuY3Rpb24gKGJlc3QsIG5leHQpIHtcbiAgICB2YXIgcGFpciA9IFtieShuZXh0KSwgbmV4dF07XG5cbiAgICBpZiAoIWJlc3QpIHtcbiAgICAgIHJldHVybiBwYWlyO1xuICAgIH0gZWxzZSBpZiAoY29tcGFyZShiZXN0WzBdLCBwYWlyWzBdKSA9PT0gYmVzdFswXSkge1xuICAgICAgcmV0dXJuIGJlc3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwYWlyO1xuICAgIH1cbiAgfSwgbnVsbClbMV07XG59XG5mdW5jdGlvbiBwaWNrKG9iaiwga2V5cykge1xuICByZXR1cm4ga2V5cy5yZWR1Y2UoZnVuY3Rpb24gKGEsIGspIHtcbiAgICBhW2tdID0gb2JqW2tdO1xuICAgIHJldHVybiBhO1xuICB9LCB7fSk7XG59XG5mdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIHByb3ApIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApO1xufSAvLyBOVU1CRVJTIEFORCBTVFJJTkdTXG5cbmZ1bmN0aW9uIGludGVnZXJCZXR3ZWVuKHRoaW5nLCBib3R0b20sIHRvcCkge1xuICByZXR1cm4gaXNJbnRlZ2VyKHRoaW5nKSAmJiB0aGluZyA+PSBib3R0b20gJiYgdGhpbmcgPD0gdG9wO1xufSAvLyB4ICUgbiBidXQgdGFrZXMgdGhlIHNpZ24gb2YgbiBpbnN0ZWFkIG9mIHhcblxuZnVuY3Rpb24gZmxvb3JNb2QoeCwgbikge1xuICByZXR1cm4geCAtIG4gKiBNYXRoLmZsb29yKHggLyBuKTtcbn1cbmZ1bmN0aW9uIHBhZFN0YXJ0KGlucHV0LCBuKSB7XG4gIGlmIChuID09PSB2b2lkIDApIHtcbiAgICBuID0gMjtcbiAgfVxuXG4gIHZhciBpc05lZyA9IGlucHV0IDwgMDtcbiAgdmFyIHBhZGRlZDtcblxuICBpZiAoaXNOZWcpIHtcbiAgICBwYWRkZWQgPSBcIi1cIiArIChcIlwiICsgLWlucHV0KS5wYWRTdGFydChuLCBcIjBcIik7XG4gIH0gZWxzZSB7XG4gICAgcGFkZGVkID0gKFwiXCIgKyBpbnB1dCkucGFkU3RhcnQobiwgXCIwXCIpO1xuICB9XG5cbiAgcmV0dXJuIHBhZGRlZDtcbn1cbmZ1bmN0aW9uIHBhcnNlSW50ZWdlcihzdHJpbmcpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKHN0cmluZykgfHwgc3RyaW5nID09PSBudWxsIHx8IHN0cmluZyA9PT0gXCJcIikge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHN0cmluZywgMTApO1xuICB9XG59XG5mdW5jdGlvbiBwYXJzZUZsb2F0aW5nKHN0cmluZykge1xuICBpZiAoaXNVbmRlZmluZWQoc3RyaW5nKSB8fCBzdHJpbmcgPT09IG51bGwgfHwgc3RyaW5nID09PSBcIlwiKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcGFyc2VGbG9hdChzdHJpbmcpO1xuICB9XG59XG5mdW5jdGlvbiBwYXJzZU1pbGxpcyhmcmFjdGlvbikge1xuICAvLyBSZXR1cm4gdW5kZWZpbmVkIChpbnN0ZWFkIG9mIDApIGluIHRoZXNlIGNhc2VzLCB3aGVyZSBmcmFjdGlvbiBpcyBub3Qgc2V0XG4gIGlmIChpc1VuZGVmaW5lZChmcmFjdGlvbikgfHwgZnJhY3Rpb24gPT09IG51bGwgfHwgZnJhY3Rpb24gPT09IFwiXCIpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9IGVsc2Uge1xuICAgIHZhciBmID0gcGFyc2VGbG9hdChcIjAuXCIgKyBmcmFjdGlvbikgKiAxMDAwO1xuICAgIHJldHVybiBNYXRoLmZsb29yKGYpO1xuICB9XG59XG5mdW5jdGlvbiByb3VuZFRvKG51bWJlciwgZGlnaXRzLCB0b3dhcmRaZXJvKSB7XG4gIGlmICh0b3dhcmRaZXJvID09PSB2b2lkIDApIHtcbiAgICB0b3dhcmRaZXJvID0gZmFsc2U7XG4gIH1cblxuICB2YXIgZmFjdG9yID0gTWF0aC5wb3coMTAsIGRpZ2l0cyksXG4gICAgICByb3VuZGVyID0gdG93YXJkWmVybyA/IE1hdGgudHJ1bmMgOiBNYXRoLnJvdW5kO1xuICByZXR1cm4gcm91bmRlcihudW1iZXIgKiBmYWN0b3IpIC8gZmFjdG9yO1xufSAvLyBEQVRFIEJBU0lDU1xuXG5mdW5jdGlvbiBpc0xlYXBZZWFyKHllYXIpIHtcbiAgcmV0dXJuIHllYXIgJSA0ID09PSAwICYmICh5ZWFyICUgMTAwICE9PSAwIHx8IHllYXIgJSA0MDAgPT09IDApO1xufVxuZnVuY3Rpb24gZGF5c0luWWVhcih5ZWFyKSB7XG4gIHJldHVybiBpc0xlYXBZZWFyKHllYXIpID8gMzY2IDogMzY1O1xufVxuZnVuY3Rpb24gZGF5c0luTW9udGgoeWVhciwgbW9udGgpIHtcbiAgdmFyIG1vZE1vbnRoID0gZmxvb3JNb2QobW9udGggLSAxLCAxMikgKyAxLFxuICAgICAgbW9kWWVhciA9IHllYXIgKyAobW9udGggLSBtb2RNb250aCkgLyAxMjtcblxuICBpZiAobW9kTW9udGggPT09IDIpIHtcbiAgICByZXR1cm4gaXNMZWFwWWVhcihtb2RZZWFyKSA/IDI5IDogMjg7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFszMSwgbnVsbCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdW21vZE1vbnRoIC0gMV07XG4gIH1cbn0gLy8gY292ZXJ0IGEgY2FsZW5kYXIgb2JqZWN0IHRvIGEgbG9jYWwgdGltZXN0YW1wIChlcG9jaCwgYnV0IHdpdGggdGhlIG9mZnNldCBiYWtlZCBpbilcblxuZnVuY3Rpb24gb2JqVG9Mb2NhbFRTKG9iaikge1xuICB2YXIgZCA9IERhdGUuVVRDKG9iai55ZWFyLCBvYmoubW9udGggLSAxLCBvYmouZGF5LCBvYmouaG91ciwgb2JqLm1pbnV0ZSwgb2JqLnNlY29uZCwgb2JqLm1pbGxpc2Vjb25kKTsgLy8gZm9yIGxlZ2FjeSByZWFzb25zLCB5ZWFycyBiZXR3ZWVuIDAgYW5kIDk5IGFyZSBpbnRlcnByZXRlZCBhcyAxOVhYOyByZXZlcnQgdGhhdFxuXG4gIGlmIChvYmoueWVhciA8IDEwMCAmJiBvYmoueWVhciA+PSAwKSB7XG4gICAgZCA9IG5ldyBEYXRlKGQpO1xuICAgIGQuc2V0VVRDRnVsbFllYXIoZC5nZXRVVENGdWxsWWVhcigpIC0gMTkwMCk7XG4gIH1cblxuICByZXR1cm4gK2Q7XG59XG5mdW5jdGlvbiB3ZWVrc0luV2Vla1llYXIod2Vla1llYXIpIHtcbiAgdmFyIHAxID0gKHdlZWtZZWFyICsgTWF0aC5mbG9vcih3ZWVrWWVhciAvIDQpIC0gTWF0aC5mbG9vcih3ZWVrWWVhciAvIDEwMCkgKyBNYXRoLmZsb29yKHdlZWtZZWFyIC8gNDAwKSkgJSA3LFxuICAgICAgbGFzdCA9IHdlZWtZZWFyIC0gMSxcbiAgICAgIHAyID0gKGxhc3QgKyBNYXRoLmZsb29yKGxhc3QgLyA0KSAtIE1hdGguZmxvb3IobGFzdCAvIDEwMCkgKyBNYXRoLmZsb29yKGxhc3QgLyA0MDApKSAlIDc7XG4gIHJldHVybiBwMSA9PT0gNCB8fCBwMiA9PT0gMyA/IDUzIDogNTI7XG59XG5mdW5jdGlvbiB1bnRydW5jYXRlWWVhcih5ZWFyKSB7XG4gIGlmICh5ZWFyID4gOTkpIHtcbiAgICByZXR1cm4geWVhcjtcbiAgfSBlbHNlIHJldHVybiB5ZWFyID4gNjAgPyAxOTAwICsgeWVhciA6IDIwMDAgKyB5ZWFyO1xufSAvLyBQQVJTSU5HXG5cbmZ1bmN0aW9uIHBhcnNlWm9uZUluZm8odHMsIG9mZnNldEZvcm1hdCwgbG9jYWxlLCB0aW1lWm9uZSkge1xuICBpZiAodGltZVpvbmUgPT09IHZvaWQgMCkge1xuICAgIHRpbWVab25lID0gbnVsbDtcbiAgfVxuXG4gIHZhciBkYXRlID0gbmV3IERhdGUodHMpLFxuICAgICAgaW50bE9wdHMgPSB7XG4gICAgaG91ckN5Y2xlOiBcImgyM1wiLFxuICAgIHllYXI6IFwibnVtZXJpY1wiLFxuICAgIG1vbnRoOiBcIjItZGlnaXRcIixcbiAgICBkYXk6IFwiMi1kaWdpdFwiLFxuICAgIGhvdXI6IFwiMi1kaWdpdFwiLFxuICAgIG1pbnV0ZTogXCIyLWRpZ2l0XCJcbiAgfTtcblxuICBpZiAodGltZVpvbmUpIHtcbiAgICBpbnRsT3B0cy50aW1lWm9uZSA9IHRpbWVab25lO1xuICB9XG5cbiAgdmFyIG1vZGlmaWVkID0gX2V4dGVuZHMoe1xuICAgIHRpbWVab25lTmFtZTogb2Zmc2V0Rm9ybWF0XG4gIH0sIGludGxPcHRzKTtcblxuICB2YXIgcGFyc2VkID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQobG9jYWxlLCBtb2RpZmllZCkuZm9ybWF0VG9QYXJ0cyhkYXRlKS5maW5kKGZ1bmN0aW9uIChtKSB7XG4gICAgcmV0dXJuIG0udHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInRpbWV6b25lbmFtZVwiO1xuICB9KTtcbiAgcmV0dXJuIHBhcnNlZCA/IHBhcnNlZC52YWx1ZSA6IG51bGw7XG59IC8vIHNpZ25lZE9mZnNldCgnLTUnLCAnMzAnKSAtPiAtMzMwXG5cbmZ1bmN0aW9uIHNpZ25lZE9mZnNldChvZmZIb3VyU3RyLCBvZmZNaW51dGVTdHIpIHtcbiAgdmFyIG9mZkhvdXIgPSBwYXJzZUludChvZmZIb3VyU3RyLCAxMCk7IC8vIGRvbid0IHx8IHRoaXMgYmVjYXVzZSB3ZSB3YW50IHRvIHByZXNlcnZlIC0wXG5cbiAgaWYgKE51bWJlci5pc05hTihvZmZIb3VyKSkge1xuICAgIG9mZkhvdXIgPSAwO1xuICB9XG5cbiAgdmFyIG9mZk1pbiA9IHBhcnNlSW50KG9mZk1pbnV0ZVN0ciwgMTApIHx8IDAsXG4gICAgICBvZmZNaW5TaWduZWQgPSBvZmZIb3VyIDwgMCB8fCBPYmplY3QuaXMob2ZmSG91ciwgLTApID8gLW9mZk1pbiA6IG9mZk1pbjtcbiAgcmV0dXJuIG9mZkhvdXIgKiA2MCArIG9mZk1pblNpZ25lZDtcbn0gLy8gQ09FUkNJT05cblxuZnVuY3Rpb24gYXNOdW1iZXIodmFsdWUpIHtcbiAgdmFyIG51bWVyaWNWYWx1ZSA9IE51bWJlcih2YWx1ZSk7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiIHx8IHZhbHVlID09PSBcIlwiIHx8IE51bWJlci5pc05hTihudW1lcmljVmFsdWUpKSB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJJbnZhbGlkIHVuaXQgdmFsdWUgXCIgKyB2YWx1ZSk7XG4gIHJldHVybiBudW1lcmljVmFsdWU7XG59XG5mdW5jdGlvbiBub3JtYWxpemVPYmplY3Qob2JqLCBub3JtYWxpemVyKSB7XG4gIHZhciBub3JtYWxpemVkID0ge307XG5cbiAgZm9yICh2YXIgdSBpbiBvYmopIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkob2JqLCB1KSkge1xuICAgICAgdmFyIHYgPSBvYmpbdV07XG4gICAgICBpZiAodiA9PT0gdW5kZWZpbmVkIHx8IHYgPT09IG51bGwpIGNvbnRpbnVlO1xuICAgICAgbm9ybWFsaXplZFtub3JtYWxpemVyKHUpXSA9IGFzTnVtYmVyKHYpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBub3JtYWxpemVkO1xufVxuZnVuY3Rpb24gZm9ybWF0T2Zmc2V0KG9mZnNldCwgZm9ybWF0KSB7XG4gIHZhciBob3VycyA9IE1hdGgudHJ1bmMoTWF0aC5hYnMob2Zmc2V0IC8gNjApKSxcbiAgICAgIG1pbnV0ZXMgPSBNYXRoLnRydW5jKE1hdGguYWJzKG9mZnNldCAlIDYwKSksXG4gICAgICBzaWduID0gb2Zmc2V0ID49IDAgPyBcIitcIiA6IFwiLVwiO1xuXG4gIHN3aXRjaCAoZm9ybWF0KSB7XG4gICAgY2FzZSBcInNob3J0XCI6XG4gICAgICByZXR1cm4gXCJcIiArIHNpZ24gKyBwYWRTdGFydChob3VycywgMikgKyBcIjpcIiArIHBhZFN0YXJ0KG1pbnV0ZXMsIDIpO1xuXG4gICAgY2FzZSBcIm5hcnJvd1wiOlxuICAgICAgcmV0dXJuIFwiXCIgKyBzaWduICsgaG91cnMgKyAobWludXRlcyA+IDAgPyBcIjpcIiArIG1pbnV0ZXMgOiBcIlwiKTtcblxuICAgIGNhc2UgXCJ0ZWNoaWVcIjpcbiAgICAgIHJldHVybiBcIlwiICsgc2lnbiArIHBhZFN0YXJ0KGhvdXJzLCAyKSArIHBhZFN0YXJ0KG1pbnV0ZXMsIDIpO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVmFsdWUgZm9ybWF0IFwiICsgZm9ybWF0ICsgXCIgaXMgb3V0IG9mIHJhbmdlIGZvciBwcm9wZXJ0eSBmb3JtYXRcIik7XG4gIH1cbn1cbmZ1bmN0aW9uIHRpbWVPYmplY3Qob2JqKSB7XG4gIHJldHVybiBwaWNrKG9iaiwgW1wiaG91clwiLCBcIm1pbnV0ZVwiLCBcInNlY29uZFwiLCBcIm1pbGxpc2Vjb25kXCJdKTtcbn1cbnZhciBpYW5hUmVnZXggPSAvW0EtWmEtel8rLV17MSwyNTZ9KD86Oj9cXC9bQS1aYS16MC05XystXXsxLDI1Nn0oPzpcXC9bQS1aYS16MC05XystXXsxLDI1Nn0pPyk/LztcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cblxudmFyIG1vbnRoc0xvbmcgPSBbXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIiwgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXTtcbnZhciBtb250aHNTaG9ydCA9IFtcIkphblwiLCBcIkZlYlwiLCBcIk1hclwiLCBcIkFwclwiLCBcIk1heVwiLCBcIkp1blwiLCBcIkp1bFwiLCBcIkF1Z1wiLCBcIlNlcFwiLCBcIk9jdFwiLCBcIk5vdlwiLCBcIkRlY1wiXTtcbnZhciBtb250aHNOYXJyb3cgPSBbXCJKXCIsIFwiRlwiLCBcIk1cIiwgXCJBXCIsIFwiTVwiLCBcIkpcIiwgXCJKXCIsIFwiQVwiLCBcIlNcIiwgXCJPXCIsIFwiTlwiLCBcIkRcIl07XG5mdW5jdGlvbiBtb250aHMobGVuZ3RoKSB7XG4gIHN3aXRjaCAobGVuZ3RoKSB7XG4gICAgY2FzZSBcIm5hcnJvd1wiOlxuICAgICAgcmV0dXJuIFtdLmNvbmNhdChtb250aHNOYXJyb3cpO1xuXG4gICAgY2FzZSBcInNob3J0XCI6XG4gICAgICByZXR1cm4gW10uY29uY2F0KG1vbnRoc1Nob3J0KTtcblxuICAgIGNhc2UgXCJsb25nXCI6XG4gICAgICByZXR1cm4gW10uY29uY2F0KG1vbnRoc0xvbmcpO1xuXG4gICAgY2FzZSBcIm51bWVyaWNcIjpcbiAgICAgIHJldHVybiBbXCIxXCIsIFwiMlwiLCBcIjNcIiwgXCI0XCIsIFwiNVwiLCBcIjZcIiwgXCI3XCIsIFwiOFwiLCBcIjlcIiwgXCIxMFwiLCBcIjExXCIsIFwiMTJcIl07XG5cbiAgICBjYXNlIFwiMi1kaWdpdFwiOlxuICAgICAgcmV0dXJuIFtcIjAxXCIsIFwiMDJcIiwgXCIwM1wiLCBcIjA0XCIsIFwiMDVcIiwgXCIwNlwiLCBcIjA3XCIsIFwiMDhcIiwgXCIwOVwiLCBcIjEwXCIsIFwiMTFcIiwgXCIxMlwiXTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxudmFyIHdlZWtkYXlzTG9uZyA9IFtcIk1vbmRheVwiLCBcIlR1ZXNkYXlcIiwgXCJXZWRuZXNkYXlcIiwgXCJUaHVyc2RheVwiLCBcIkZyaWRheVwiLCBcIlNhdHVyZGF5XCIsIFwiU3VuZGF5XCJdO1xudmFyIHdlZWtkYXlzU2hvcnQgPSBbXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIiwgXCJTdW5cIl07XG52YXIgd2Vla2RheXNOYXJyb3cgPSBbXCJNXCIsIFwiVFwiLCBcIldcIiwgXCJUXCIsIFwiRlwiLCBcIlNcIiwgXCJTXCJdO1xuZnVuY3Rpb24gd2Vla2RheXMobGVuZ3RoKSB7XG4gIHN3aXRjaCAobGVuZ3RoKSB7XG4gICAgY2FzZSBcIm5hcnJvd1wiOlxuICAgICAgcmV0dXJuIFtdLmNvbmNhdCh3ZWVrZGF5c05hcnJvdyk7XG5cbiAgICBjYXNlIFwic2hvcnRcIjpcbiAgICAgIHJldHVybiBbXS5jb25jYXQod2Vla2RheXNTaG9ydCk7XG5cbiAgICBjYXNlIFwibG9uZ1wiOlxuICAgICAgcmV0dXJuIFtdLmNvbmNhdCh3ZWVrZGF5c0xvbmcpO1xuXG4gICAgY2FzZSBcIm51bWVyaWNcIjpcbiAgICAgIHJldHVybiBbXCIxXCIsIFwiMlwiLCBcIjNcIiwgXCI0XCIsIFwiNVwiLCBcIjZcIiwgXCI3XCJdO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG52YXIgbWVyaWRpZW1zID0gW1wiQU1cIiwgXCJQTVwiXTtcbnZhciBlcmFzTG9uZyA9IFtcIkJlZm9yZSBDaHJpc3RcIiwgXCJBbm5vIERvbWluaVwiXTtcbnZhciBlcmFzU2hvcnQgPSBbXCJCQ1wiLCBcIkFEXCJdO1xudmFyIGVyYXNOYXJyb3cgPSBbXCJCXCIsIFwiQVwiXTtcbmZ1bmN0aW9uIGVyYXMobGVuZ3RoKSB7XG4gIHN3aXRjaCAobGVuZ3RoKSB7XG4gICAgY2FzZSBcIm5hcnJvd1wiOlxuICAgICAgcmV0dXJuIFtdLmNvbmNhdChlcmFzTmFycm93KTtcblxuICAgIGNhc2UgXCJzaG9ydFwiOlxuICAgICAgcmV0dXJuIFtdLmNvbmNhdChlcmFzU2hvcnQpO1xuXG4gICAgY2FzZSBcImxvbmdcIjpcbiAgICAgIHJldHVybiBbXS5jb25jYXQoZXJhc0xvbmcpO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5mdW5jdGlvbiBtZXJpZGllbUZvckRhdGVUaW1lKGR0KSB7XG4gIHJldHVybiBtZXJpZGllbXNbZHQuaG91ciA8IDEyID8gMCA6IDFdO1xufVxuZnVuY3Rpb24gd2Vla2RheUZvckRhdGVUaW1lKGR0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIHdlZWtkYXlzKGxlbmd0aClbZHQud2Vla2RheSAtIDFdO1xufVxuZnVuY3Rpb24gbW9udGhGb3JEYXRlVGltZShkdCwgbGVuZ3RoKSB7XG4gIHJldHVybiBtb250aHMobGVuZ3RoKVtkdC5tb250aCAtIDFdO1xufVxuZnVuY3Rpb24gZXJhRm9yRGF0ZVRpbWUoZHQsIGxlbmd0aCkge1xuICByZXR1cm4gZXJhcyhsZW5ndGgpW2R0LnllYXIgPCAwID8gMCA6IDFdO1xufVxuZnVuY3Rpb24gZm9ybWF0UmVsYXRpdmVUaW1lKHVuaXQsIGNvdW50LCBudW1lcmljLCBuYXJyb3cpIHtcbiAgaWYgKG51bWVyaWMgPT09IHZvaWQgMCkge1xuICAgIG51bWVyaWMgPSBcImFsd2F5c1wiO1xuICB9XG5cbiAgaWYgKG5hcnJvdyA9PT0gdm9pZCAwKSB7XG4gICAgbmFycm93ID0gZmFsc2U7XG4gIH1cblxuICB2YXIgdW5pdHMgPSB7XG4gICAgeWVhcnM6IFtcInllYXJcIiwgXCJ5ci5cIl0sXG4gICAgcXVhcnRlcnM6IFtcInF1YXJ0ZXJcIiwgXCJxdHIuXCJdLFxuICAgIG1vbnRoczogW1wibW9udGhcIiwgXCJtby5cIl0sXG4gICAgd2Vla3M6IFtcIndlZWtcIiwgXCJ3ay5cIl0sXG4gICAgZGF5czogW1wiZGF5XCIsIFwiZGF5XCIsIFwiZGF5c1wiXSxcbiAgICBob3VyczogW1wiaG91clwiLCBcImhyLlwiXSxcbiAgICBtaW51dGVzOiBbXCJtaW51dGVcIiwgXCJtaW4uXCJdLFxuICAgIHNlY29uZHM6IFtcInNlY29uZFwiLCBcInNlYy5cIl1cbiAgfTtcbiAgdmFyIGxhc3RhYmxlID0gW1wiaG91cnNcIiwgXCJtaW51dGVzXCIsIFwic2Vjb25kc1wiXS5pbmRleE9mKHVuaXQpID09PSAtMTtcblxuICBpZiAobnVtZXJpYyA9PT0gXCJhdXRvXCIgJiYgbGFzdGFibGUpIHtcbiAgICB2YXIgaXNEYXkgPSB1bml0ID09PSBcImRheXNcIjtcblxuICAgIHN3aXRjaCAoY291bnQpIHtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIGlzRGF5ID8gXCJ0b21vcnJvd1wiIDogXCJuZXh0IFwiICsgdW5pdHNbdW5pdF1bMF07XG5cbiAgICAgIGNhc2UgLTE6XG4gICAgICAgIHJldHVybiBpc0RheSA/IFwieWVzdGVyZGF5XCIgOiBcImxhc3QgXCIgKyB1bml0c1t1bml0XVswXTtcblxuICAgICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gaXNEYXkgPyBcInRvZGF5XCIgOiBcInRoaXMgXCIgKyB1bml0c1t1bml0XVswXTtcblxuICAgIH1cbiAgfVxuXG4gIHZhciBpc0luUGFzdCA9IE9iamVjdC5pcyhjb3VudCwgLTApIHx8IGNvdW50IDwgMCxcbiAgICAgIGZtdFZhbHVlID0gTWF0aC5hYnMoY291bnQpLFxuICAgICAgc2luZ3VsYXIgPSBmbXRWYWx1ZSA9PT0gMSxcbiAgICAgIGxpbFVuaXRzID0gdW5pdHNbdW5pdF0sXG4gICAgICBmbXRVbml0ID0gbmFycm93ID8gc2luZ3VsYXIgPyBsaWxVbml0c1sxXSA6IGxpbFVuaXRzWzJdIHx8IGxpbFVuaXRzWzFdIDogc2luZ3VsYXIgPyB1bml0c1t1bml0XVswXSA6IHVuaXQ7XG4gIHJldHVybiBpc0luUGFzdCA/IGZtdFZhbHVlICsgXCIgXCIgKyBmbXRVbml0ICsgXCIgYWdvXCIgOiBcImluIFwiICsgZm10VmFsdWUgKyBcIiBcIiArIGZtdFVuaXQ7XG59XG5cbmZ1bmN0aW9uIHN0cmluZ2lmeVRva2VucyhzcGxpdHMsIHRva2VuVG9TdHJpbmcpIHtcbiAgdmFyIHMgPSBcIlwiO1xuXG4gIGZvciAodmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2Uoc3BsaXRzKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICB2YXIgdG9rZW4gPSBfc3RlcC52YWx1ZTtcblxuICAgIGlmICh0b2tlbi5saXRlcmFsKSB7XG4gICAgICBzICs9IHRva2VuLnZhbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcyArPSB0b2tlblRvU3RyaW5nKHRva2VuLnZhbCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHM7XG59XG5cbnZhciBfbWFjcm9Ub2tlblRvRm9ybWF0T3B0cyA9IHtcbiAgRDogREFURV9TSE9SVCxcbiAgREQ6IERBVEVfTUVELFxuICBEREQ6IERBVEVfRlVMTCxcbiAgRERERDogREFURV9IVUdFLFxuICB0OiBUSU1FX1NJTVBMRSxcbiAgdHQ6IFRJTUVfV0lUSF9TRUNPTkRTLFxuICB0dHQ6IFRJTUVfV0lUSF9TSE9SVF9PRkZTRVQsXG4gIHR0dHQ6IFRJTUVfV0lUSF9MT05HX09GRlNFVCxcbiAgVDogVElNRV8yNF9TSU1QTEUsXG4gIFRUOiBUSU1FXzI0X1dJVEhfU0VDT05EUyxcbiAgVFRUOiBUSU1FXzI0X1dJVEhfU0hPUlRfT0ZGU0VULFxuICBUVFRUOiBUSU1FXzI0X1dJVEhfTE9OR19PRkZTRVQsXG4gIGY6IERBVEVUSU1FX1NIT1JULFxuICBmZjogREFURVRJTUVfTUVELFxuICBmZmY6IERBVEVUSU1FX0ZVTEwsXG4gIGZmZmY6IERBVEVUSU1FX0hVR0UsXG4gIEY6IERBVEVUSU1FX1NIT1JUX1dJVEhfU0VDT05EUyxcbiAgRkY6IERBVEVUSU1FX01FRF9XSVRIX1NFQ09ORFMsXG4gIEZGRjogREFURVRJTUVfRlVMTF9XSVRIX1NFQ09ORFMsXG4gIEZGRkY6IERBVEVUSU1FX0hVR0VfV0lUSF9TRUNPTkRTXG59O1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbnZhciBGb3JtYXR0ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBGb3JtYXR0ZXIuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGxvY2FsZSwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IEZvcm1hdHRlcihsb2NhbGUsIG9wdHMpO1xuICB9O1xuXG4gIEZvcm1hdHRlci5wYXJzZUZvcm1hdCA9IGZ1bmN0aW9uIHBhcnNlRm9ybWF0KGZtdCkge1xuICAgIHZhciBjdXJyZW50ID0gbnVsbCxcbiAgICAgICAgY3VycmVudEZ1bGwgPSBcIlwiLFxuICAgICAgICBicmFja2V0ZWQgPSBmYWxzZTtcbiAgICB2YXIgc3BsaXRzID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZtdC5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGMgPSBmbXQuY2hhckF0KGkpO1xuXG4gICAgICBpZiAoYyA9PT0gXCInXCIpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRGdWxsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzcGxpdHMucHVzaCh7XG4gICAgICAgICAgICBsaXRlcmFsOiBicmFja2V0ZWQsXG4gICAgICAgICAgICB2YWw6IGN1cnJlbnRGdWxsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJyZW50ID0gbnVsbDtcbiAgICAgICAgY3VycmVudEZ1bGwgPSBcIlwiO1xuICAgICAgICBicmFja2V0ZWQgPSAhYnJhY2tldGVkO1xuICAgICAgfSBlbHNlIGlmIChicmFja2V0ZWQpIHtcbiAgICAgICAgY3VycmVudEZ1bGwgKz0gYztcbiAgICAgIH0gZWxzZSBpZiAoYyA9PT0gY3VycmVudCkge1xuICAgICAgICBjdXJyZW50RnVsbCArPSBjO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGN1cnJlbnRGdWxsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzcGxpdHMucHVzaCh7XG4gICAgICAgICAgICBsaXRlcmFsOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbDogY3VycmVudEZ1bGxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGN1cnJlbnRGdWxsID0gYztcbiAgICAgICAgY3VycmVudCA9IGM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRGdWxsLmxlbmd0aCA+IDApIHtcbiAgICAgIHNwbGl0cy5wdXNoKHtcbiAgICAgICAgbGl0ZXJhbDogYnJhY2tldGVkLFxuICAgICAgICB2YWw6IGN1cnJlbnRGdWxsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3BsaXRzO1xuICB9O1xuXG4gIEZvcm1hdHRlci5tYWNyb1Rva2VuVG9Gb3JtYXRPcHRzID0gZnVuY3Rpb24gbWFjcm9Ub2tlblRvRm9ybWF0T3B0cyh0b2tlbikge1xuICAgIHJldHVybiBfbWFjcm9Ub2tlblRvRm9ybWF0T3B0c1t0b2tlbl07XG4gIH07XG5cbiAgZnVuY3Rpb24gRm9ybWF0dGVyKGxvY2FsZSwgZm9ybWF0T3B0cykge1xuICAgIHRoaXMub3B0cyA9IGZvcm1hdE9wdHM7XG4gICAgdGhpcy5sb2MgPSBsb2NhbGU7XG4gICAgdGhpcy5zeXN0ZW1Mb2MgPSBudWxsO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IEZvcm1hdHRlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmZvcm1hdFdpdGhTeXN0ZW1EZWZhdWx0ID0gZnVuY3Rpb24gZm9ybWF0V2l0aFN5c3RlbURlZmF1bHQoZHQsIG9wdHMpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW1Mb2MgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuc3lzdGVtTG9jID0gdGhpcy5sb2MucmVkZWZhdWx0VG9TeXN0ZW0oKTtcbiAgICB9XG5cbiAgICB2YXIgZGYgPSB0aGlzLnN5c3RlbUxvYy5kdEZvcm1hdHRlcihkdCwgX2V4dGVuZHMoe30sIHRoaXMub3B0cywgb3B0cykpO1xuICAgIHJldHVybiBkZi5mb3JtYXQoKTtcbiAgfTtcblxuICBfcHJvdG8uZm9ybWF0RGF0ZVRpbWUgPSBmdW5jdGlvbiBmb3JtYXREYXRlVGltZShkdCwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgZGYgPSB0aGlzLmxvYy5kdEZvcm1hdHRlcihkdCwgX2V4dGVuZHMoe30sIHRoaXMub3B0cywgb3B0cykpO1xuICAgIHJldHVybiBkZi5mb3JtYXQoKTtcbiAgfTtcblxuICBfcHJvdG8uZm9ybWF0RGF0ZVRpbWVQYXJ0cyA9IGZ1bmN0aW9uIGZvcm1hdERhdGVUaW1lUGFydHMoZHQsIG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgdmFyIGRmID0gdGhpcy5sb2MuZHRGb3JtYXR0ZXIoZHQsIF9leHRlbmRzKHt9LCB0aGlzLm9wdHMsIG9wdHMpKTtcbiAgICByZXR1cm4gZGYuZm9ybWF0VG9QYXJ0cygpO1xuICB9O1xuXG4gIF9wcm90by5yZXNvbHZlZE9wdGlvbnMgPSBmdW5jdGlvbiByZXNvbHZlZE9wdGlvbnMoZHQsIG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgdmFyIGRmID0gdGhpcy5sb2MuZHRGb3JtYXR0ZXIoZHQsIF9leHRlbmRzKHt9LCB0aGlzLm9wdHMsIG9wdHMpKTtcbiAgICByZXR1cm4gZGYucmVzb2x2ZWRPcHRpb25zKCk7XG4gIH07XG5cbiAgX3Byb3RvLm51bSA9IGZ1bmN0aW9uIG51bShuLCBwKSB7XG4gICAgaWYgKHAgPT09IHZvaWQgMCkge1xuICAgICAgcCA9IDA7XG4gICAgfVxuXG4gICAgLy8gd2UgZ2V0IHNvbWUgcGVyZiBvdXQgb2YgZG9pbmcgdGhpcyBoZXJlLCBhbm5veWluZ2x5XG4gICAgaWYgKHRoaXMub3B0cy5mb3JjZVNpbXBsZSkge1xuICAgICAgcmV0dXJuIHBhZFN0YXJ0KG4sIHApO1xuICAgIH1cblxuICAgIHZhciBvcHRzID0gX2V4dGVuZHMoe30sIHRoaXMub3B0cyk7XG5cbiAgICBpZiAocCA+IDApIHtcbiAgICAgIG9wdHMucGFkVG8gPSBwO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmxvYy5udW1iZXJGb3JtYXR0ZXIob3B0cykuZm9ybWF0KG4pO1xuICB9O1xuXG4gIF9wcm90by5mb3JtYXREYXRlVGltZUZyb21TdHJpbmcgPSBmdW5jdGlvbiBmb3JtYXREYXRlVGltZUZyb21TdHJpbmcoZHQsIGZtdCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIga25vd25FbmdsaXNoID0gdGhpcy5sb2MubGlzdGluZ01vZGUoKSA9PT0gXCJlblwiLFxuICAgICAgICB1c2VEYXRlVGltZUZvcm1hdHRlciA9IHRoaXMubG9jLm91dHB1dENhbGVuZGFyICYmIHRoaXMubG9jLm91dHB1dENhbGVuZGFyICE9PSBcImdyZWdvcnlcIixcbiAgICAgICAgc3RyaW5nID0gZnVuY3Rpb24gc3RyaW5nKG9wdHMsIGV4dHJhY3QpIHtcbiAgICAgIHJldHVybiBfdGhpcy5sb2MuZXh0cmFjdChkdCwgb3B0cywgZXh0cmFjdCk7XG4gICAgfSxcbiAgICAgICAgZm9ybWF0T2Zmc2V0ID0gZnVuY3Rpb24gZm9ybWF0T2Zmc2V0KG9wdHMpIHtcbiAgICAgIGlmIChkdC5pc09mZnNldEZpeGVkICYmIGR0Lm9mZnNldCA9PT0gMCAmJiBvcHRzLmFsbG93Wikge1xuICAgICAgICByZXR1cm4gXCJaXCI7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkdC5pc1ZhbGlkID8gZHQuem9uZS5mb3JtYXRPZmZzZXQoZHQudHMsIG9wdHMuZm9ybWF0KSA6IFwiXCI7XG4gICAgfSxcbiAgICAgICAgbWVyaWRpZW0gPSBmdW5jdGlvbiBtZXJpZGllbSgpIHtcbiAgICAgIHJldHVybiBrbm93bkVuZ2xpc2ggPyBtZXJpZGllbUZvckRhdGVUaW1lKGR0KSA6IHN0cmluZyh7XG4gICAgICAgIGhvdXI6IFwibnVtZXJpY1wiLFxuICAgICAgICBob3VyQ3ljbGU6IFwiaDEyXCJcbiAgICAgIH0sIFwiZGF5cGVyaW9kXCIpO1xuICAgIH0sXG4gICAgICAgIG1vbnRoID0gZnVuY3Rpb24gbW9udGgobGVuZ3RoLCBzdGFuZGFsb25lKSB7XG4gICAgICByZXR1cm4ga25vd25FbmdsaXNoID8gbW9udGhGb3JEYXRlVGltZShkdCwgbGVuZ3RoKSA6IHN0cmluZyhzdGFuZGFsb25lID8ge1xuICAgICAgICBtb250aDogbGVuZ3RoXG4gICAgICB9IDoge1xuICAgICAgICBtb250aDogbGVuZ3RoLFxuICAgICAgICBkYXk6IFwibnVtZXJpY1wiXG4gICAgICB9LCBcIm1vbnRoXCIpO1xuICAgIH0sXG4gICAgICAgIHdlZWtkYXkgPSBmdW5jdGlvbiB3ZWVrZGF5KGxlbmd0aCwgc3RhbmRhbG9uZSkge1xuICAgICAgcmV0dXJuIGtub3duRW5nbGlzaCA/IHdlZWtkYXlGb3JEYXRlVGltZShkdCwgbGVuZ3RoKSA6IHN0cmluZyhzdGFuZGFsb25lID8ge1xuICAgICAgICB3ZWVrZGF5OiBsZW5ndGhcbiAgICAgIH0gOiB7XG4gICAgICAgIHdlZWtkYXk6IGxlbmd0aCxcbiAgICAgICAgbW9udGg6IFwibG9uZ1wiLFxuICAgICAgICBkYXk6IFwibnVtZXJpY1wiXG4gICAgICB9LCBcIndlZWtkYXlcIik7XG4gICAgfSxcbiAgICAgICAgbWF5YmVNYWNybyA9IGZ1bmN0aW9uIG1heWJlTWFjcm8odG9rZW4pIHtcbiAgICAgIHZhciBmb3JtYXRPcHRzID0gRm9ybWF0dGVyLm1hY3JvVG9rZW5Ub0Zvcm1hdE9wdHModG9rZW4pO1xuXG4gICAgICBpZiAoZm9ybWF0T3B0cykge1xuICAgICAgICByZXR1cm4gX3RoaXMuZm9ybWF0V2l0aFN5c3RlbURlZmF1bHQoZHQsIGZvcm1hdE9wdHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgICAgfVxuICAgIH0sXG4gICAgICAgIGVyYSA9IGZ1bmN0aW9uIGVyYShsZW5ndGgpIHtcbiAgICAgIHJldHVybiBrbm93bkVuZ2xpc2ggPyBlcmFGb3JEYXRlVGltZShkdCwgbGVuZ3RoKSA6IHN0cmluZyh7XG4gICAgICAgIGVyYTogbGVuZ3RoXG4gICAgICB9LCBcImVyYVwiKTtcbiAgICB9LFxuICAgICAgICB0b2tlblRvU3RyaW5nID0gZnVuY3Rpb24gdG9rZW5Ub1N0cmluZyh0b2tlbikge1xuICAgICAgLy8gV2hlcmUgcG9zc2libGU6IGh0dHA6Ly9jbGRyLnVuaWNvZGUub3JnL3RyYW5zbGF0aW9uL2RhdGUtdGltZS0xL2RhdGUtdGltZSNUT0MtU3RhbmRhbG9uZS12cy4tRm9ybWF0LVN0eWxlc1xuICAgICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgICAvLyBtc1xuICAgICAgICBjYXNlIFwiU1wiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQubWlsbGlzZWNvbmQpO1xuXG4gICAgICAgIGNhc2UgXCJ1XCI6IC8vIGZhbGxzIHRocm91Z2hcblxuICAgICAgICBjYXNlIFwiU1NTXCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC5taWxsaXNlY29uZCwgMyk7XG4gICAgICAgIC8vIHNlY29uZHNcblxuICAgICAgICBjYXNlIFwic1wiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQuc2Vjb25kKTtcblxuICAgICAgICBjYXNlIFwic3NcIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0LnNlY29uZCwgMik7XG4gICAgICAgIC8vIGZyYWN0aW9uYWwgc2Vjb25kc1xuXG4gICAgICAgIGNhc2UgXCJ1dVwiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oTWF0aC5mbG9vcihkdC5taWxsaXNlY29uZCAvIDEwKSwgMik7XG5cbiAgICAgICAgY2FzZSBcInV1dVwiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oTWF0aC5mbG9vcihkdC5taWxsaXNlY29uZCAvIDEwMCkpO1xuICAgICAgICAvLyBtaW51dGVzXG5cbiAgICAgICAgY2FzZSBcIm1cIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0Lm1pbnV0ZSk7XG5cbiAgICAgICAgY2FzZSBcIm1tXCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC5taW51dGUsIDIpO1xuICAgICAgICAvLyBob3Vyc1xuXG4gICAgICAgIGNhc2UgXCJoXCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC5ob3VyICUgMTIgPT09IDAgPyAxMiA6IGR0LmhvdXIgJSAxMik7XG5cbiAgICAgICAgY2FzZSBcImhoXCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC5ob3VyICUgMTIgPT09IDAgPyAxMiA6IGR0LmhvdXIgJSAxMiwgMik7XG5cbiAgICAgICAgY2FzZSBcIkhcIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0LmhvdXIpO1xuXG4gICAgICAgIGNhc2UgXCJISFwiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQuaG91ciwgMik7XG4gICAgICAgIC8vIG9mZnNldFxuXG4gICAgICAgIGNhc2UgXCJaXCI6XG4gICAgICAgICAgLy8gbGlrZSArNlxuICAgICAgICAgIHJldHVybiBmb3JtYXRPZmZzZXQoe1xuICAgICAgICAgICAgZm9ybWF0OiBcIm5hcnJvd1wiLFxuICAgICAgICAgICAgYWxsb3daOiBfdGhpcy5vcHRzLmFsbG93WlxuICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNhc2UgXCJaWlwiOlxuICAgICAgICAgIC8vIGxpa2UgKzA2OjAwXG4gICAgICAgICAgcmV0dXJuIGZvcm1hdE9mZnNldCh7XG4gICAgICAgICAgICBmb3JtYXQ6IFwic2hvcnRcIixcbiAgICAgICAgICAgIGFsbG93WjogX3RoaXMub3B0cy5hbGxvd1pcbiAgICAgICAgICB9KTtcblxuICAgICAgICBjYXNlIFwiWlpaXCI6XG4gICAgICAgICAgLy8gbGlrZSArMDYwMFxuICAgICAgICAgIHJldHVybiBmb3JtYXRPZmZzZXQoe1xuICAgICAgICAgICAgZm9ybWF0OiBcInRlY2hpZVwiLFxuICAgICAgICAgICAgYWxsb3daOiBfdGhpcy5vcHRzLmFsbG93WlxuICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNhc2UgXCJaWlpaXCI6XG4gICAgICAgICAgLy8gbGlrZSBFU1RcbiAgICAgICAgICByZXR1cm4gZHQuem9uZS5vZmZzZXROYW1lKGR0LnRzLCB7XG4gICAgICAgICAgICBmb3JtYXQ6IFwic2hvcnRcIixcbiAgICAgICAgICAgIGxvY2FsZTogX3RoaXMubG9jLmxvY2FsZVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNhc2UgXCJaWlpaWlwiOlxuICAgICAgICAgIC8vIGxpa2UgRWFzdGVybiBTdGFuZGFyZCBUaW1lXG4gICAgICAgICAgcmV0dXJuIGR0LnpvbmUub2Zmc2V0TmFtZShkdC50cywge1xuICAgICAgICAgICAgZm9ybWF0OiBcImxvbmdcIixcbiAgICAgICAgICAgIGxvY2FsZTogX3RoaXMubG9jLmxvY2FsZVxuICAgICAgICAgIH0pO1xuICAgICAgICAvLyB6b25lXG5cbiAgICAgICAgY2FzZSBcInpcIjpcbiAgICAgICAgICAvLyBsaWtlIEFtZXJpY2EvTmV3X1lvcmtcbiAgICAgICAgICByZXR1cm4gZHQuem9uZU5hbWU7XG4gICAgICAgIC8vIG1lcmlkaWVtc1xuXG4gICAgICAgIGNhc2UgXCJhXCI6XG4gICAgICAgICAgcmV0dXJuIG1lcmlkaWVtKCk7XG4gICAgICAgIC8vIGRhdGVzXG5cbiAgICAgICAgY2FzZSBcImRcIjpcbiAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIgPyBzdHJpbmcoe1xuICAgICAgICAgICAgZGF5OiBcIm51bWVyaWNcIlxuICAgICAgICAgIH0sIFwiZGF5XCIpIDogX3RoaXMubnVtKGR0LmRheSk7XG5cbiAgICAgICAgY2FzZSBcImRkXCI6XG4gICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyID8gc3RyaW5nKHtcbiAgICAgICAgICAgIGRheTogXCIyLWRpZ2l0XCJcbiAgICAgICAgICB9LCBcImRheVwiKSA6IF90aGlzLm51bShkdC5kYXksIDIpO1xuICAgICAgICAvLyB3ZWVrZGF5cyAtIHN0YW5kYWxvbmVcblxuICAgICAgICBjYXNlIFwiY1wiOlxuICAgICAgICAgIC8vIGxpa2UgMVxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQud2Vla2RheSk7XG5cbiAgICAgICAgY2FzZSBcImNjY1wiOlxuICAgICAgICAgIC8vIGxpa2UgJ1R1ZXMnXG4gICAgICAgICAgcmV0dXJuIHdlZWtkYXkoXCJzaG9ydFwiLCB0cnVlKTtcblxuICAgICAgICBjYXNlIFwiY2NjY1wiOlxuICAgICAgICAgIC8vIGxpa2UgJ1R1ZXNkYXknXG4gICAgICAgICAgcmV0dXJuIHdlZWtkYXkoXCJsb25nXCIsIHRydWUpO1xuXG4gICAgICAgIGNhc2UgXCJjY2NjY1wiOlxuICAgICAgICAgIC8vIGxpa2UgJ1QnXG4gICAgICAgICAgcmV0dXJuIHdlZWtkYXkoXCJuYXJyb3dcIiwgdHJ1ZSk7XG4gICAgICAgIC8vIHdlZWtkYXlzIC0gZm9ybWF0XG5cbiAgICAgICAgY2FzZSBcIkVcIjpcbiAgICAgICAgICAvLyBsaWtlIDFcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0LndlZWtkYXkpO1xuXG4gICAgICAgIGNhc2UgXCJFRUVcIjpcbiAgICAgICAgICAvLyBsaWtlICdUdWVzJ1xuICAgICAgICAgIHJldHVybiB3ZWVrZGF5KFwic2hvcnRcIiwgZmFsc2UpO1xuXG4gICAgICAgIGNhc2UgXCJFRUVFXCI6XG4gICAgICAgICAgLy8gbGlrZSAnVHVlc2RheSdcbiAgICAgICAgICByZXR1cm4gd2Vla2RheShcImxvbmdcIiwgZmFsc2UpO1xuXG4gICAgICAgIGNhc2UgXCJFRUVFRVwiOlxuICAgICAgICAgIC8vIGxpa2UgJ1QnXG4gICAgICAgICAgcmV0dXJuIHdlZWtkYXkoXCJuYXJyb3dcIiwgZmFsc2UpO1xuICAgICAgICAvLyBtb250aHMgLSBzdGFuZGFsb25lXG5cbiAgICAgICAgY2FzZSBcIkxcIjpcbiAgICAgICAgICAvLyBsaWtlIDFcbiAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIgPyBzdHJpbmcoe1xuICAgICAgICAgICAgbW9udGg6IFwibnVtZXJpY1wiLFxuICAgICAgICAgICAgZGF5OiBcIm51bWVyaWNcIlxuICAgICAgICAgIH0sIFwibW9udGhcIikgOiBfdGhpcy5udW0oZHQubW9udGgpO1xuXG4gICAgICAgIGNhc2UgXCJMTFwiOlxuICAgICAgICAgIC8vIGxpa2UgMDEsIGRvZXNuJ3Qgc2VlbSB0byB3b3JrXG4gICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyID8gc3RyaW5nKHtcbiAgICAgICAgICAgIG1vbnRoOiBcIjItZGlnaXRcIixcbiAgICAgICAgICAgIGRheTogXCJudW1lcmljXCJcbiAgICAgICAgICB9LCBcIm1vbnRoXCIpIDogX3RoaXMubnVtKGR0Lm1vbnRoLCAyKTtcblxuICAgICAgICBjYXNlIFwiTExMXCI6XG4gICAgICAgICAgLy8gbGlrZSBKYW5cbiAgICAgICAgICByZXR1cm4gbW9udGgoXCJzaG9ydFwiLCB0cnVlKTtcblxuICAgICAgICBjYXNlIFwiTExMTFwiOlxuICAgICAgICAgIC8vIGxpa2UgSmFudWFyeVxuICAgICAgICAgIHJldHVybiBtb250aChcImxvbmdcIiwgdHJ1ZSk7XG5cbiAgICAgICAgY2FzZSBcIkxMTExMXCI6XG4gICAgICAgICAgLy8gbGlrZSBKXG4gICAgICAgICAgcmV0dXJuIG1vbnRoKFwibmFycm93XCIsIHRydWUpO1xuICAgICAgICAvLyBtb250aHMgLSBmb3JtYXRcblxuICAgICAgICBjYXNlIFwiTVwiOlxuICAgICAgICAgIC8vIGxpa2UgMVxuICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlciA/IHN0cmluZyh7XG4gICAgICAgICAgICBtb250aDogXCJudW1lcmljXCJcbiAgICAgICAgICB9LCBcIm1vbnRoXCIpIDogX3RoaXMubnVtKGR0Lm1vbnRoKTtcblxuICAgICAgICBjYXNlIFwiTU1cIjpcbiAgICAgICAgICAvLyBsaWtlIDAxXG4gICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyID8gc3RyaW5nKHtcbiAgICAgICAgICAgIG1vbnRoOiBcIjItZGlnaXRcIlxuICAgICAgICAgIH0sIFwibW9udGhcIikgOiBfdGhpcy5udW0oZHQubW9udGgsIDIpO1xuXG4gICAgICAgIGNhc2UgXCJNTU1cIjpcbiAgICAgICAgICAvLyBsaWtlIEphblxuICAgICAgICAgIHJldHVybiBtb250aChcInNob3J0XCIsIGZhbHNlKTtcblxuICAgICAgICBjYXNlIFwiTU1NTVwiOlxuICAgICAgICAgIC8vIGxpa2UgSmFudWFyeVxuICAgICAgICAgIHJldHVybiBtb250aChcImxvbmdcIiwgZmFsc2UpO1xuXG4gICAgICAgIGNhc2UgXCJNTU1NTVwiOlxuICAgICAgICAgIC8vIGxpa2UgSlxuICAgICAgICAgIHJldHVybiBtb250aChcIm5hcnJvd1wiLCBmYWxzZSk7XG4gICAgICAgIC8vIHllYXJzXG5cbiAgICAgICAgY2FzZSBcInlcIjpcbiAgICAgICAgICAvLyBsaWtlIDIwMTRcbiAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIgPyBzdHJpbmcoe1xuICAgICAgICAgICAgeWVhcjogXCJudW1lcmljXCJcbiAgICAgICAgICB9LCBcInllYXJcIikgOiBfdGhpcy5udW0oZHQueWVhcik7XG5cbiAgICAgICAgY2FzZSBcInl5XCI6XG4gICAgICAgICAgLy8gbGlrZSAxNFxuICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlciA/IHN0cmluZyh7XG4gICAgICAgICAgICB5ZWFyOiBcIjItZGlnaXRcIlxuICAgICAgICAgIH0sIFwieWVhclwiKSA6IF90aGlzLm51bShkdC55ZWFyLnRvU3RyaW5nKCkuc2xpY2UoLTIpLCAyKTtcblxuICAgICAgICBjYXNlIFwieXl5eVwiOlxuICAgICAgICAgIC8vIGxpa2UgMDAxMlxuICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlciA/IHN0cmluZyh7XG4gICAgICAgICAgICB5ZWFyOiBcIm51bWVyaWNcIlxuICAgICAgICAgIH0sIFwieWVhclwiKSA6IF90aGlzLm51bShkdC55ZWFyLCA0KTtcblxuICAgICAgICBjYXNlIFwieXl5eXl5XCI6XG4gICAgICAgICAgLy8gbGlrZSAwMDAwMTJcbiAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIgPyBzdHJpbmcoe1xuICAgICAgICAgICAgeWVhcjogXCJudW1lcmljXCJcbiAgICAgICAgICB9LCBcInllYXJcIikgOiBfdGhpcy5udW0oZHQueWVhciwgNik7XG4gICAgICAgIC8vIGVyYXNcblxuICAgICAgICBjYXNlIFwiR1wiOlxuICAgICAgICAgIC8vIGxpa2UgQURcbiAgICAgICAgICByZXR1cm4gZXJhKFwic2hvcnRcIik7XG5cbiAgICAgICAgY2FzZSBcIkdHXCI6XG4gICAgICAgICAgLy8gbGlrZSBBbm5vIERvbWluaVxuICAgICAgICAgIHJldHVybiBlcmEoXCJsb25nXCIpO1xuXG4gICAgICAgIGNhc2UgXCJHR0dHR1wiOlxuICAgICAgICAgIHJldHVybiBlcmEoXCJuYXJyb3dcIik7XG5cbiAgICAgICAgY2FzZSBcImtrXCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC53ZWVrWWVhci50b1N0cmluZygpLnNsaWNlKC0yKSwgMik7XG5cbiAgICAgICAgY2FzZSBcImtra2tcIjpcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0LndlZWtZZWFyLCA0KTtcblxuICAgICAgICBjYXNlIFwiV1wiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQud2Vla051bWJlcik7XG5cbiAgICAgICAgY2FzZSBcIldXXCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC53ZWVrTnVtYmVyLCAyKTtcblxuICAgICAgICBjYXNlIFwib1wiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQub3JkaW5hbCk7XG5cbiAgICAgICAgY2FzZSBcIm9vb1wiOlxuICAgICAgICAgIHJldHVybiBfdGhpcy5udW0oZHQub3JkaW5hbCwgMyk7XG5cbiAgICAgICAgY2FzZSBcInFcIjpcbiAgICAgICAgICAvLyBsaWtlIDFcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0LnF1YXJ0ZXIpO1xuXG4gICAgICAgIGNhc2UgXCJxcVwiOlxuICAgICAgICAgIC8vIGxpa2UgMDFcbiAgICAgICAgICByZXR1cm4gX3RoaXMubnVtKGR0LnF1YXJ0ZXIsIDIpO1xuXG4gICAgICAgIGNhc2UgXCJYXCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShNYXRoLmZsb29yKGR0LnRzIC8gMTAwMCkpO1xuXG4gICAgICAgIGNhc2UgXCJ4XCI6XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm51bShkdC50cyk7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gbWF5YmVNYWNybyh0b2tlbik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBzdHJpbmdpZnlUb2tlbnMoRm9ybWF0dGVyLnBhcnNlRm9ybWF0KGZtdCksIHRva2VuVG9TdHJpbmcpO1xuICB9O1xuXG4gIF9wcm90by5mb3JtYXREdXJhdGlvbkZyb21TdHJpbmcgPSBmdW5jdGlvbiBmb3JtYXREdXJhdGlvbkZyb21TdHJpbmcoZHVyLCBmbXQpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHZhciB0b2tlblRvRmllbGQgPSBmdW5jdGlvbiB0b2tlblRvRmllbGQodG9rZW4pIHtcbiAgICAgIHN3aXRjaCAodG9rZW5bMF0pIHtcbiAgICAgICAgY2FzZSBcIlNcIjpcbiAgICAgICAgICByZXR1cm4gXCJtaWxsaXNlY29uZFwiO1xuXG4gICAgICAgIGNhc2UgXCJzXCI6XG4gICAgICAgICAgcmV0dXJuIFwic2Vjb25kXCI7XG5cbiAgICAgICAgY2FzZSBcIm1cIjpcbiAgICAgICAgICByZXR1cm4gXCJtaW51dGVcIjtcblxuICAgICAgICBjYXNlIFwiaFwiOlxuICAgICAgICAgIHJldHVybiBcImhvdXJcIjtcblxuICAgICAgICBjYXNlIFwiZFwiOlxuICAgICAgICAgIHJldHVybiBcImRheVwiO1xuXG4gICAgICAgIGNhc2UgXCJ3XCI6XG4gICAgICAgICAgcmV0dXJuIFwid2Vla1wiO1xuXG4gICAgICAgIGNhc2UgXCJNXCI6XG4gICAgICAgICAgcmV0dXJuIFwibW9udGhcIjtcblxuICAgICAgICBjYXNlIFwieVwiOlxuICAgICAgICAgIHJldHVybiBcInllYXJcIjtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0sXG4gICAgICAgIHRva2VuVG9TdHJpbmcgPSBmdW5jdGlvbiB0b2tlblRvU3RyaW5nKGxpbGR1cikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICB2YXIgbWFwcGVkID0gdG9rZW5Ub0ZpZWxkKHRva2VuKTtcblxuICAgICAgICBpZiAobWFwcGVkKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMi5udW0obGlsZHVyLmdldChtYXBwZWQpLCB0b2tlbi5sZW5ndGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LFxuICAgICAgICB0b2tlbnMgPSBGb3JtYXR0ZXIucGFyc2VGb3JtYXQoZm10KSxcbiAgICAgICAgcmVhbFRva2VucyA9IHRva2Vucy5yZWR1Y2UoZnVuY3Rpb24gKGZvdW5kLCBfcmVmKSB7XG4gICAgICB2YXIgbGl0ZXJhbCA9IF9yZWYubGl0ZXJhbCxcbiAgICAgICAgICB2YWwgPSBfcmVmLnZhbDtcbiAgICAgIHJldHVybiBsaXRlcmFsID8gZm91bmQgOiBmb3VuZC5jb25jYXQodmFsKTtcbiAgICB9LCBbXSksXG4gICAgICAgIGNvbGxhcHNlZCA9IGR1ci5zaGlmdFRvLmFwcGx5KGR1ciwgcmVhbFRva2Vucy5tYXAodG9rZW5Ub0ZpZWxkKS5maWx0ZXIoZnVuY3Rpb24gKHQpIHtcbiAgICAgIHJldHVybiB0O1xuICAgIH0pKTtcblxuICAgIHJldHVybiBzdHJpbmdpZnlUb2tlbnModG9rZW5zLCB0b2tlblRvU3RyaW5nKGNvbGxhcHNlZCkpO1xuICB9O1xuXG4gIHJldHVybiBGb3JtYXR0ZXI7XG59KCk7XG5cbnZhciBJbnZhbGlkID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gSW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uKSB7XG4gICAgdGhpcy5yZWFzb24gPSByZWFzb247XG4gICAgdGhpcy5leHBsYW5hdGlvbiA9IGV4cGxhbmF0aW9uO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IEludmFsaWQucHJvdG90eXBlO1xuXG4gIF9wcm90by50b01lc3NhZ2UgPSBmdW5jdGlvbiB0b01lc3NhZ2UoKSB7XG4gICAgaWYgKHRoaXMuZXhwbGFuYXRpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLnJlYXNvbiArIFwiOiBcIiArIHRoaXMuZXhwbGFuYXRpb247XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnJlYXNvbjtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIEludmFsaWQ7XG59KCk7XG5cbi8qKlxuICogQGludGVyZmFjZVxuICovXG5cbnZhciBab25lID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gWm9uZSgpIHt9XG5cbiAgdmFyIF9wcm90byA9IFpvbmUucHJvdG90eXBlO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBvZmZzZXQncyBjb21tb24gbmFtZSAoc3VjaCBhcyBFU1QpIGF0IHRoZSBzcGVjaWZpZWQgdGltZXN0YW1wXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge251bWJlcn0gdHMgLSBFcG9jaCBtaWxsaXNlY29uZHMgZm9yIHdoaWNoIHRvIGdldCB0aGUgbmFtZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIE9wdGlvbnMgdG8gYWZmZWN0IHRoZSBmb3JtYXRcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMuZm9ybWF0IC0gV2hhdCBzdHlsZSBvZiBvZmZzZXQgdG8gcmV0dXJuLiBBY2NlcHRzICdsb25nJyBvciAnc2hvcnQnLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5sb2NhbGUgLSBXaGF0IGxvY2FsZSB0byByZXR1cm4gdGhlIG9mZnNldCBuYW1lIGluLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBfcHJvdG8ub2Zmc2V0TmFtZSA9IGZ1bmN0aW9uIG9mZnNldE5hbWUodHMsIG9wdHMpIHtcbiAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBvZmZzZXQncyB2YWx1ZSBhcyBhIHN0cmluZ1xuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRzIC0gRXBvY2ggbWlsbGlzZWNvbmRzIGZvciB3aGljaCB0byBnZXQgdGhlIG9mZnNldFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZm9ybWF0IC0gV2hhdCBzdHlsZSBvZiBvZmZzZXQgdG8gcmV0dXJuLlxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgQWNjZXB0cyAnbmFycm93JywgJ3Nob3J0Jywgb3IgJ3RlY2hpZScuIFJldHVybmluZyAnKzYnLCAnKzA2OjAwJywgb3IgJyswNjAwJyByZXNwZWN0aXZlbHlcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5mb3JtYXRPZmZzZXQgPSBmdW5jdGlvbiBmb3JtYXRPZmZzZXQodHMsIGZvcm1hdCkge1xuICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgb2Zmc2V0IGluIG1pbnV0ZXMgZm9yIHRoaXMgem9uZSBhdCB0aGUgc3BlY2lmaWVkIHRpbWVzdGFtcC5cbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0cyAtIEVwb2NoIG1pbGxpc2Vjb25kcyBmb3Igd2hpY2ggdG8gY29tcHV0ZSB0aGUgb2Zmc2V0XG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8ub2Zmc2V0ID0gZnVuY3Rpb24gb2Zmc2V0KHRzKSB7XG4gICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBab25lIGlzIGVxdWFsIHRvIGFub3RoZXIgem9uZVxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtab25lfSBvdGhlclpvbmUgLSB0aGUgem9uZSB0byBjb21wYXJlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyhvdGhlclpvbmUpIHtcbiAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIFpvbmUgaXMgdmFsaWQuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBfY3JlYXRlQ2xhc3MoWm9uZSwgW3tcbiAgICBrZXk6IFwidHlwZVwiLFxuICAgIGdldDpcbiAgICAvKipcbiAgICAgKiBUaGUgdHlwZSBvZiB6b25lXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGlzIHpvbmUuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm5hbWVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlhbmFOYW1lXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIG9mZnNldCBpcyBrbm93biB0byBiZSBmaXhlZCBmb3IgdGhlIHdob2xlIHllYXIuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJpc1VuaXZlcnNhbFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNWYWxpZFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gWm9uZTtcbn0oKTtcblxudmFyIHNpbmdsZXRvbiQxID0gbnVsbDtcbi8qKlxuICogUmVwcmVzZW50cyB0aGUgbG9jYWwgem9uZSBmb3IgdGhpcyBKYXZhU2NyaXB0IGVudmlyb25tZW50LlxuICogQGltcGxlbWVudHMge1pvbmV9XG4gKi9cblxudmFyIFN5c3RlbVpvbmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9ab25lKSB7XG4gIF9pbmhlcml0c0xvb3NlKFN5c3RlbVpvbmUsIF9ab25lKTtcblxuICBmdW5jdGlvbiBTeXN0ZW1ab25lKCkge1xuICAgIHJldHVybiBfWm9uZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gU3lzdGVtWm9uZS5wcm90b3R5cGU7XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgX3Byb3RvLm9mZnNldE5hbWUgPSBmdW5jdGlvbiBvZmZzZXROYW1lKHRzLCBfcmVmKSB7XG4gICAgdmFyIGZvcm1hdCA9IF9yZWYuZm9ybWF0LFxuICAgICAgICBsb2NhbGUgPSBfcmVmLmxvY2FsZTtcbiAgICByZXR1cm4gcGFyc2Vab25lSW5mbyh0cywgZm9ybWF0LCBsb2NhbGUpO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIDtcblxuICBfcHJvdG8uZm9ybWF0T2Zmc2V0ID0gZnVuY3Rpb24gZm9ybWF0T2Zmc2V0JDEodHMsIGZvcm1hdCkge1xuICAgIHJldHVybiBmb3JtYXRPZmZzZXQodGhpcy5vZmZzZXQodHMpLCBmb3JtYXQpO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIDtcblxuICBfcHJvdG8ub2Zmc2V0ID0gZnVuY3Rpb24gb2Zmc2V0KHRzKSB7XG4gICAgcmV0dXJuIC1uZXcgRGF0ZSh0cykuZ2V0VGltZXpvbmVPZmZzZXQoKTtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgX3Byb3RvLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyhvdGhlclpvbmUpIHtcbiAgICByZXR1cm4gb3RoZXJab25lLnR5cGUgPT09IFwic3lzdGVtXCI7XG4gIH1cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgO1xuXG4gIF9jcmVhdGVDbGFzcyhTeXN0ZW1ab25lLCBbe1xuICAgIGtleTogXCJ0eXBlXCIsXG4gICAgZ2V0OlxuICAgIC8qKiBAb3ZlcnJpZGUgKiovXG4gICAgZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIFwic3lzdGVtXCI7XG4gICAgfVxuICAgIC8qKiBAb3ZlcnJpZGUgKiovXG5cbiAgfSwge1xuICAgIGtleTogXCJuYW1lXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZTtcbiAgICB9XG4gICAgLyoqIEBvdmVycmlkZSAqKi9cblxuICB9LCB7XG4gICAga2V5OiBcImlzVW5pdmVyc2FsXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzVmFsaWRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcImluc3RhbmNlXCIsXG4gICAgZ2V0OlxuICAgIC8qKlxuICAgICAqIEdldCBhIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiB0aGUgbG9jYWwgem9uZVxuICAgICAqIEByZXR1cm4ge1N5c3RlbVpvbmV9XG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgaWYgKHNpbmdsZXRvbiQxID09PSBudWxsKSB7XG4gICAgICAgIHNpbmdsZXRvbiQxID0gbmV3IFN5c3RlbVpvbmUoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNpbmdsZXRvbiQxO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTeXN0ZW1ab25lO1xufShab25lKTtcblxudmFyIGR0ZkNhY2hlID0ge307XG5cbmZ1bmN0aW9uIG1ha2VEVEYoem9uZSkge1xuICBpZiAoIWR0ZkNhY2hlW3pvbmVdKSB7XG4gICAgZHRmQ2FjaGVbem9uZV0gPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChcImVuLVVTXCIsIHtcbiAgICAgIGhvdXIxMjogZmFsc2UsXG4gICAgICB0aW1lWm9uZTogem9uZSxcbiAgICAgIHllYXI6IFwibnVtZXJpY1wiLFxuICAgICAgbW9udGg6IFwiMi1kaWdpdFwiLFxuICAgICAgZGF5OiBcIjItZGlnaXRcIixcbiAgICAgIGhvdXI6IFwiMi1kaWdpdFwiLFxuICAgICAgbWludXRlOiBcIjItZGlnaXRcIixcbiAgICAgIHNlY29uZDogXCIyLWRpZ2l0XCIsXG4gICAgICBlcmE6IFwic2hvcnRcIlxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGR0ZkNhY2hlW3pvbmVdO1xufVxuXG52YXIgdHlwZVRvUG9zID0ge1xuICB5ZWFyOiAwLFxuICBtb250aDogMSxcbiAgZGF5OiAyLFxuICBlcmE6IDMsXG4gIGhvdXI6IDQsXG4gIG1pbnV0ZTogNSxcbiAgc2Vjb25kOiA2XG59O1xuXG5mdW5jdGlvbiBoYWNreU9mZnNldChkdGYsIGRhdGUpIHtcbiAgdmFyIGZvcm1hdHRlZCA9IGR0Zi5mb3JtYXQoZGF0ZSkucmVwbGFjZSgvXFx1MjAwRS9nLCBcIlwiKSxcbiAgICAgIHBhcnNlZCA9IC8oXFxkKylcXC8oXFxkKylcXC8oXFxkKykgKEFEfEJDKSw/IChcXGQrKTooXFxkKyk6KFxcZCspLy5leGVjKGZvcm1hdHRlZCksXG4gICAgICBmTW9udGggPSBwYXJzZWRbMV0sXG4gICAgICBmRGF5ID0gcGFyc2VkWzJdLFxuICAgICAgZlllYXIgPSBwYXJzZWRbM10sXG4gICAgICBmYWRPckJjID0gcGFyc2VkWzRdLFxuICAgICAgZkhvdXIgPSBwYXJzZWRbNV0sXG4gICAgICBmTWludXRlID0gcGFyc2VkWzZdLFxuICAgICAgZlNlY29uZCA9IHBhcnNlZFs3XTtcbiAgcmV0dXJuIFtmWWVhciwgZk1vbnRoLCBmRGF5LCBmYWRPckJjLCBmSG91ciwgZk1pbnV0ZSwgZlNlY29uZF07XG59XG5cbmZ1bmN0aW9uIHBhcnRzT2Zmc2V0KGR0ZiwgZGF0ZSkge1xuICB2YXIgZm9ybWF0dGVkID0gZHRmLmZvcm1hdFRvUGFydHMoZGF0ZSk7XG4gIHZhciBmaWxsZWQgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGZvcm1hdHRlZC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBfZm9ybWF0dGVkJGkgPSBmb3JtYXR0ZWRbaV0sXG4gICAgICAgIHR5cGUgPSBfZm9ybWF0dGVkJGkudHlwZSxcbiAgICAgICAgdmFsdWUgPSBfZm9ybWF0dGVkJGkudmFsdWU7XG4gICAgdmFyIHBvcyA9IHR5cGVUb1Bvc1t0eXBlXTtcblxuICAgIGlmICh0eXBlID09PSBcImVyYVwiKSB7XG4gICAgICBmaWxsZWRbcG9zXSA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoIWlzVW5kZWZpbmVkKHBvcykpIHtcbiAgICAgIGZpbGxlZFtwb3NdID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmlsbGVkO1xufVxuXG52YXIgaWFuYVpvbmVDYWNoZSA9IHt9O1xuLyoqXG4gKiBBIHpvbmUgaWRlbnRpZmllZCBieSBhbiBJQU5BIGlkZW50aWZpZXIsIGxpa2UgQW1lcmljYS9OZXdfWW9ya1xuICogQGltcGxlbWVudHMge1pvbmV9XG4gKi9cblxudmFyIElBTkFab25lID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfWm9uZSkge1xuICBfaW5oZXJpdHNMb29zZShJQU5BWm9uZSwgX1pvbmUpO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFpvbmUgbmFtZVxuICAgKiBAcmV0dXJuIHtJQU5BWm9uZX1cbiAgICovXG4gIElBTkFab25lLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShuYW1lKSB7XG4gICAgaWYgKCFpYW5hWm9uZUNhY2hlW25hbWVdKSB7XG4gICAgICBpYW5hWm9uZUNhY2hlW25hbWVdID0gbmV3IElBTkFab25lKG5hbWUpO1xuICAgIH1cblxuICAgIHJldHVybiBpYW5hWm9uZUNhY2hlW25hbWVdO1xuICB9XG4gIC8qKlxuICAgKiBSZXNldCBsb2NhbCBjYWNoZXMuIFNob3VsZCBvbmx5IGJlIG5lY2Vzc2FyeSBpbiB0ZXN0aW5nIHNjZW5hcmlvcy5cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIDtcblxuICBJQU5BWm9uZS5yZXNldENhY2hlID0gZnVuY3Rpb24gcmVzZXRDYWNoZSgpIHtcbiAgICBpYW5hWm9uZUNhY2hlID0ge307XG4gICAgZHRmQ2FjaGUgPSB7fTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBwcm92aWRlZCBzdHJpbmcgaXMgYSB2YWxpZCBzcGVjaWZpZXIuIFRoaXMgb25seSBjaGVja3MgdGhlIHN0cmluZydzIGZvcm1hdCwgbm90IHRoYXQgdGhlIHNwZWNpZmllciBpZGVudGlmaWVzIGEga25vd24gem9uZTsgc2VlIGlzVmFsaWRab25lIGZvciB0aGF0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcyAtIFRoZSBzdHJpbmcgdG8gY2hlY2sgdmFsaWRpdHkgb25cbiAgICogQGV4YW1wbGUgSUFOQVpvbmUuaXNWYWxpZFNwZWNpZmllcihcIkFtZXJpY2EvTmV3X1lvcmtcIikgLy89PiB0cnVlXG4gICAqIEBleGFtcGxlIElBTkFab25lLmlzVmFsaWRTcGVjaWZpZXIoXCJTcG9ydH5+YmxvcnBcIikgLy89PiBmYWxzZVxuICAgKiBAZGVwcmVjYXRlZCBUaGlzIG1ldGhvZCByZXR1cm5zIGZhbHNlIGZvciBzb21lIHZhbGlkIElBTkEgbmFtZXMuIFVzZSBpc1ZhbGlkWm9uZSBpbnN0ZWFkLlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIElBTkFab25lLmlzVmFsaWRTcGVjaWZpZXIgPSBmdW5jdGlvbiBpc1ZhbGlkU3BlY2lmaWVyKHMpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkWm9uZShzKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBwcm92aWRlZCBzdHJpbmcgaWRlbnRpZmllcyBhIHJlYWwgem9uZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gem9uZSAtIFRoZSBzdHJpbmcgdG8gY2hlY2tcbiAgICogQGV4YW1wbGUgSUFOQVpvbmUuaXNWYWxpZFpvbmUoXCJBbWVyaWNhL05ld19Zb3JrXCIpIC8vPT4gdHJ1ZVxuICAgKiBAZXhhbXBsZSBJQU5BWm9uZS5pc1ZhbGlkWm9uZShcIkZhbnRhc2lhL0Nhc3RsZVwiKSAvLz0+IGZhbHNlXG4gICAqIEBleGFtcGxlIElBTkFab25lLmlzVmFsaWRab25lKFwiU3BvcnR+fmJsb3JwXCIpIC8vPT4gZmFsc2VcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBJQU5BWm9uZS5pc1ZhbGlkWm9uZSA9IGZ1bmN0aW9uIGlzVmFsaWRab25lKHpvbmUpIHtcbiAgICBpZiAoIXpvbmUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoXCJlbi1VU1wiLCB7XG4gICAgICAgIHRpbWVab25lOiB6b25lXG4gICAgICB9KS5mb3JtYXQoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gSUFOQVpvbmUobmFtZSkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX1pvbmUuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIC8qKiBAcHJpdmF0ZSAqKi9cblxuICAgIF90aGlzLnpvbmVOYW1lID0gbmFtZTtcbiAgICAvKiogQHByaXZhdGUgKiovXG5cbiAgICBfdGhpcy52YWxpZCA9IElBTkFab25lLmlzVmFsaWRab25lKG5hbWUpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuXG5cbiAgdmFyIF9wcm90byA9IElBTkFab25lLnByb3RvdHlwZTtcblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBfcHJvdG8ub2Zmc2V0TmFtZSA9IGZ1bmN0aW9uIG9mZnNldE5hbWUodHMsIF9yZWYpIHtcbiAgICB2YXIgZm9ybWF0ID0gX3JlZi5mb3JtYXQsXG4gICAgICAgIGxvY2FsZSA9IF9yZWYubG9jYWxlO1xuICAgIHJldHVybiBwYXJzZVpvbmVJbmZvKHRzLCBmb3JtYXQsIGxvY2FsZSwgdGhpcy5uYW1lKTtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgX3Byb3RvLmZvcm1hdE9mZnNldCA9IGZ1bmN0aW9uIGZvcm1hdE9mZnNldCQxKHRzLCBmb3JtYXQpIHtcbiAgICByZXR1cm4gZm9ybWF0T2Zmc2V0KHRoaXMub2Zmc2V0KHRzKSwgZm9ybWF0KTtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgX3Byb3RvLm9mZnNldCA9IGZ1bmN0aW9uIG9mZnNldCh0cykge1xuICAgIHZhciBkYXRlID0gbmV3IERhdGUodHMpO1xuICAgIGlmIChpc05hTihkYXRlKSkgcmV0dXJuIE5hTjtcbiAgICB2YXIgZHRmID0gbWFrZURURih0aGlzLm5hbWUpO1xuXG4gICAgdmFyIF9yZWYyID0gZHRmLmZvcm1hdFRvUGFydHMgPyBwYXJ0c09mZnNldChkdGYsIGRhdGUpIDogaGFja3lPZmZzZXQoZHRmLCBkYXRlKSxcbiAgICAgICAgeWVhciA9IF9yZWYyWzBdLFxuICAgICAgICBtb250aCA9IF9yZWYyWzFdLFxuICAgICAgICBkYXkgPSBfcmVmMlsyXSxcbiAgICAgICAgYWRPckJjID0gX3JlZjJbM10sXG4gICAgICAgIGhvdXIgPSBfcmVmMls0XSxcbiAgICAgICAgbWludXRlID0gX3JlZjJbNV0sXG4gICAgICAgIHNlY29uZCA9IF9yZWYyWzZdO1xuXG4gICAgaWYgKGFkT3JCYyA9PT0gXCJCQ1wiKSB7XG4gICAgICB5ZWFyID0gLU1hdGguYWJzKHllYXIpICsgMTtcbiAgICB9IC8vIGJlY2F1c2Ugd2UncmUgdXNpbmcgaG91cjEyIGFuZCBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0xMDI1NTY0JmNhbj0yJnE9JTIyMjQlM0EwMCUyMiUyMGRhdGV0aW1lZm9ybWF0XG5cblxuICAgIHZhciBhZGp1c3RlZEhvdXIgPSBob3VyID09PSAyNCA/IDAgOiBob3VyO1xuICAgIHZhciBhc1VUQyA9IG9ialRvTG9jYWxUUyh7XG4gICAgICB5ZWFyOiB5ZWFyLFxuICAgICAgbW9udGg6IG1vbnRoLFxuICAgICAgZGF5OiBkYXksXG4gICAgICBob3VyOiBhZGp1c3RlZEhvdXIsXG4gICAgICBtaW51dGU6IG1pbnV0ZSxcbiAgICAgIHNlY29uZDogc2Vjb25kLFxuICAgICAgbWlsbGlzZWNvbmQ6IDBcbiAgICB9KTtcbiAgICB2YXIgYXNUUyA9ICtkYXRlO1xuICAgIHZhciBvdmVyID0gYXNUUyAlIDEwMDA7XG4gICAgYXNUUyAtPSBvdmVyID49IDAgPyBvdmVyIDogMTAwMCArIG92ZXI7XG4gICAgcmV0dXJuIChhc1VUQyAtIGFzVFMpIC8gKDYwICogMTAwMCk7XG4gIH1cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgO1xuXG4gIF9wcm90by5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMob3RoZXJab25lKSB7XG4gICAgcmV0dXJuIG90aGVyWm9uZS50eXBlID09PSBcImlhbmFcIiAmJiBvdGhlclpvbmUubmFtZSA9PT0gdGhpcy5uYW1lO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIDtcblxuICBfY3JlYXRlQ2xhc3MoSUFOQVpvbmUsIFt7XG4gICAga2V5OiBcInR5cGVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBcImlhbmFcIjtcbiAgICB9XG4gICAgLyoqIEBvdmVycmlkZSAqKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm5hbWVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnpvbmVOYW1lO1xuICAgIH1cbiAgICAvKiogQG92ZXJyaWRlICoqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiaXNVbml2ZXJzYWxcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNWYWxpZFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMudmFsaWQ7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIElBTkFab25lO1xufShab25lKTtcblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG4vKipcbiAqIEEgem9uZSB3aXRoIGEgZml4ZWQgb2Zmc2V0IChtZWFuaW5nIG5vIERTVClcbiAqIEBpbXBsZW1lbnRzIHtab25lfVxuICovXG5cbnZhciBGaXhlZE9mZnNldFpvbmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9ab25lKSB7XG4gIF9pbmhlcml0c0xvb3NlKEZpeGVkT2Zmc2V0Wm9uZSwgX1pvbmUpO1xuXG4gIC8qKlxuICAgKiBHZXQgYW4gaW5zdGFuY2Ugd2l0aCBhIHNwZWNpZmllZCBvZmZzZXRcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCAtIFRoZSBvZmZzZXQgaW4gbWludXRlc1xuICAgKiBAcmV0dXJuIHtGaXhlZE9mZnNldFpvbmV9XG4gICAqL1xuICBGaXhlZE9mZnNldFpvbmUuaW5zdGFuY2UgPSBmdW5jdGlvbiBpbnN0YW5jZShvZmZzZXQpIHtcbiAgICByZXR1cm4gb2Zmc2V0ID09PSAwID8gRml4ZWRPZmZzZXRab25lLnV0Y0luc3RhbmNlIDogbmV3IEZpeGVkT2Zmc2V0Wm9uZShvZmZzZXQpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYW4gaW5zdGFuY2Ugb2YgRml4ZWRPZmZzZXRab25lIGZyb20gYSBVVEMgb2Zmc2V0IHN0cmluZywgbGlrZSBcIlVUQys2XCJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHMgLSBUaGUgb2Zmc2V0IHN0cmluZyB0byBwYXJzZVxuICAgKiBAZXhhbXBsZSBGaXhlZE9mZnNldFpvbmUucGFyc2VTcGVjaWZpZXIoXCJVVEMrNlwiKVxuICAgKiBAZXhhbXBsZSBGaXhlZE9mZnNldFpvbmUucGFyc2VTcGVjaWZpZXIoXCJVVEMrMDZcIilcbiAgICogQGV4YW1wbGUgRml4ZWRPZmZzZXRab25lLnBhcnNlU3BlY2lmaWVyKFwiVVRDLTY6MDBcIilcbiAgICogQHJldHVybiB7Rml4ZWRPZmZzZXRab25lfVxuICAgKi9cbiAgO1xuXG4gIEZpeGVkT2Zmc2V0Wm9uZS5wYXJzZVNwZWNpZmllciA9IGZ1bmN0aW9uIHBhcnNlU3BlY2lmaWVyKHMpIHtcbiAgICBpZiAocykge1xuICAgICAgdmFyIHIgPSBzLm1hdGNoKC9edXRjKD86KFsrLV1cXGR7MSwyfSkoPzo6KFxcZHsyfSkpPyk/JC9pKTtcblxuICAgICAgaWYgKHIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaXhlZE9mZnNldFpvbmUoc2lnbmVkT2Zmc2V0KHJbMV0sIHJbMl0pKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBmdW5jdGlvbiBGaXhlZE9mZnNldFpvbmUob2Zmc2V0KSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfWm9uZS5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgLyoqIEBwcml2YXRlICoqL1xuXG4gICAgX3RoaXMuZml4ZWQgPSBvZmZzZXQ7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG5cblxuICB2YXIgX3Byb3RvID0gRml4ZWRPZmZzZXRab25lLnByb3RvdHlwZTtcblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBfcHJvdG8ub2Zmc2V0TmFtZSA9IGZ1bmN0aW9uIG9mZnNldE5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgX3Byb3RvLmZvcm1hdE9mZnNldCA9IGZ1bmN0aW9uIGZvcm1hdE9mZnNldCQxKHRzLCBmb3JtYXQpIHtcbiAgICByZXR1cm4gZm9ybWF0T2Zmc2V0KHRoaXMuZml4ZWQsIGZvcm1hdCk7XG4gIH1cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgO1xuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIF9wcm90by5vZmZzZXQgPSBmdW5jdGlvbiBvZmZzZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZml4ZWQ7XG4gIH1cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgO1xuXG4gIF9wcm90by5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMob3RoZXJab25lKSB7XG4gICAgcmV0dXJuIG90aGVyWm9uZS50eXBlID09PSBcImZpeGVkXCIgJiYgb3RoZXJab25lLmZpeGVkID09PSB0aGlzLmZpeGVkO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIDtcblxuICBfY3JlYXRlQ2xhc3MoRml4ZWRPZmZzZXRab25lLCBbe1xuICAgIGtleTogXCJ0eXBlXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gXCJmaXhlZFwiO1xuICAgIH1cbiAgICAvKiogQG92ZXJyaWRlICoqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibmFtZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuZml4ZWQgPT09IDAgPyBcIlVUQ1wiIDogXCJVVENcIiArIGZvcm1hdE9mZnNldCh0aGlzLmZpeGVkLCBcIm5hcnJvd1wiKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaWFuYU5hbWVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIGlmICh0aGlzLmZpeGVkID09PSAwKSB7XG4gICAgICAgIHJldHVybiBcIkV0Yy9VVENcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBcIkV0Yy9HTVRcIiArIGZvcm1hdE9mZnNldCgtdGhpcy5maXhlZCwgXCJuYXJyb3dcIik7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzVW5pdmVyc2FsXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNWYWxpZFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6IFwidXRjSW5zdGFuY2VcIixcbiAgICBnZXQ6XG4gICAgLyoqXG4gICAgICogR2V0IGEgc2luZ2xldG9uIGluc3RhbmNlIG9mIFVUQ1xuICAgICAqIEByZXR1cm4ge0ZpeGVkT2Zmc2V0Wm9uZX1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAoc2luZ2xldG9uID09PSBudWxsKSB7XG4gICAgICAgIHNpbmdsZXRvbiA9IG5ldyBGaXhlZE9mZnNldFpvbmUoMCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzaW5nbGV0b247XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEZpeGVkT2Zmc2V0Wm9uZTtcbn0oWm9uZSk7XG5cbi8qKlxuICogQSB6b25lIHRoYXQgZmFpbGVkIHRvIHBhcnNlLiBZb3Ugc2hvdWxkIG5ldmVyIG5lZWQgdG8gaW5zdGFudGlhdGUgdGhpcy5cbiAqIEBpbXBsZW1lbnRzIHtab25lfVxuICovXG5cbnZhciBJbnZhbGlkWm9uZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1pvbmUpIHtcbiAgX2luaGVyaXRzTG9vc2UoSW52YWxpZFpvbmUsIF9ab25lKTtcblxuICBmdW5jdGlvbiBJbnZhbGlkWm9uZSh6b25lTmFtZSkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX1pvbmUuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIC8qKiAgQHByaXZhdGUgKi9cblxuICAgIF90aGlzLnpvbmVOYW1lID0gem9uZU5hbWU7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG5cblxuICB2YXIgX3Byb3RvID0gSW52YWxpZFpvbmUucHJvdG90eXBlO1xuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIF9wcm90by5vZmZzZXROYW1lID0gZnVuY3Rpb24gb2Zmc2V0TmFtZSgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgX3Byb3RvLmZvcm1hdE9mZnNldCA9IGZ1bmN0aW9uIGZvcm1hdE9mZnNldCgpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgX3Byb3RvLm9mZnNldCA9IGZ1bmN0aW9uIG9mZnNldCgpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIDtcblxuICBfcHJvdG8uZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKiogQG92ZXJyaWRlICoqL1xuICA7XG5cbiAgX2NyZWF0ZUNsYXNzKEludmFsaWRab25lLCBbe1xuICAgIGtleTogXCJ0eXBlXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gXCJpbnZhbGlkXCI7XG4gICAgfVxuICAgIC8qKiBAb3ZlcnJpZGUgKiovXG5cbiAgfSwge1xuICAgIGtleTogXCJuYW1lXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy56b25lTmFtZTtcbiAgICB9XG4gICAgLyoqIEBvdmVycmlkZSAqKi9cblxuICB9LCB7XG4gICAga2V5OiBcImlzVW5pdmVyc2FsXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzVmFsaWRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gSW52YWxpZFpvbmU7XG59KFpvbmUpO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZVpvbmUoaW5wdXQsIGRlZmF1bHRab25lKSB7XG5cbiAgaWYgKGlzVW5kZWZpbmVkKGlucHV0KSB8fCBpbnB1dCA9PT0gbnVsbCkge1xuICAgIHJldHVybiBkZWZhdWx0Wm9uZTtcbiAgfSBlbHNlIGlmIChpbnB1dCBpbnN0YW5jZW9mIFpvbmUpIHtcbiAgICByZXR1cm4gaW5wdXQ7XG4gIH0gZWxzZSBpZiAoaXNTdHJpbmcoaW5wdXQpKSB7XG4gICAgdmFyIGxvd2VyZWQgPSBpbnB1dC50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChsb3dlcmVkID09PSBcImxvY2FsXCIgfHwgbG93ZXJlZCA9PT0gXCJzeXN0ZW1cIikgcmV0dXJuIGRlZmF1bHRab25lO2Vsc2UgaWYgKGxvd2VyZWQgPT09IFwidXRjXCIgfHwgbG93ZXJlZCA9PT0gXCJnbXRcIikgcmV0dXJuIEZpeGVkT2Zmc2V0Wm9uZS51dGNJbnN0YW5jZTtlbHNlIHJldHVybiBGaXhlZE9mZnNldFpvbmUucGFyc2VTcGVjaWZpZXIobG93ZXJlZCkgfHwgSUFOQVpvbmUuY3JlYXRlKGlucHV0KTtcbiAgfSBlbHNlIGlmIChpc051bWJlcihpbnB1dCkpIHtcbiAgICByZXR1cm4gRml4ZWRPZmZzZXRab25lLmluc3RhbmNlKGlucHV0KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09IFwib2JqZWN0XCIgJiYgaW5wdXQub2Zmc2V0ICYmIHR5cGVvZiBpbnB1dC5vZmZzZXQgPT09IFwibnVtYmVyXCIpIHtcbiAgICAvLyBUaGlzIGlzIGR1bWIsIGJ1dCB0aGUgaW5zdGFuY2VvZiBjaGVjayBhYm92ZSBkb2Vzbid0IHNlZW0gdG8gcmVhbGx5IHdvcmtcbiAgICAvLyBzbyB3ZSdyZSBkdWNrIGNoZWNraW5nIGl0XG4gICAgcmV0dXJuIGlucHV0O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgSW52YWxpZFpvbmUoaW5wdXQpO1xuICB9XG59XG5cbnZhciBub3cgPSBmdW5jdGlvbiBub3coKSB7XG4gIHJldHVybiBEYXRlLm5vdygpO1xufSxcbiAgICBkZWZhdWx0Wm9uZSA9IFwic3lzdGVtXCIsXG4gICAgZGVmYXVsdExvY2FsZSA9IG51bGwsXG4gICAgZGVmYXVsdE51bWJlcmluZ1N5c3RlbSA9IG51bGwsXG4gICAgZGVmYXVsdE91dHB1dENhbGVuZGFyID0gbnVsbCxcbiAgICB0aHJvd09uSW52YWxpZDtcbi8qKlxuICogU2V0dGluZ3MgY29udGFpbnMgc3RhdGljIGdldHRlcnMgYW5kIHNldHRlcnMgdGhhdCBjb250cm9sIEx1eG9uJ3Mgb3ZlcmFsbCBiZWhhdmlvci4gTHV4b24gaXMgYSBzaW1wbGUgbGlicmFyeSB3aXRoIGZldyBvcHRpb25zLCBidXQgdGhlIG9uZXMgaXQgZG9lcyBoYXZlIGxpdmUgaGVyZS5cbiAqL1xuXG5cbnZhciBTZXR0aW5ncyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFNldHRpbmdzKCkge31cblxuICAvKipcbiAgICogUmVzZXQgTHV4b24ncyBnbG9iYWwgY2FjaGVzLiBTaG91bGQgb25seSBiZSBuZWNlc3NhcnkgaW4gdGVzdGluZyBzY2VuYXJpb3MuXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBTZXR0aW5ncy5yZXNldENhY2hlcyA9IGZ1bmN0aW9uIHJlc2V0Q2FjaGVzKCkge1xuICAgIExvY2FsZS5yZXNldENhY2hlKCk7XG4gICAgSUFOQVpvbmUucmVzZXRDYWNoZSgpO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhTZXR0aW5ncywgbnVsbCwgW3tcbiAgICBrZXk6IFwibm93XCIsXG4gICAgZ2V0OlxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY2FsbGJhY2sgZm9yIHJldHVybmluZyB0aGUgY3VycmVudCB0aW1lc3RhbXAuXG4gICAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBub3c7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY2FsbGJhY2sgZm9yIHJldHVybmluZyB0aGUgY3VycmVudCB0aW1lc3RhbXAuXG4gICAgICogVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBudW1iZXIsIHdoaWNoIHdpbGwgYmUgaW50ZXJwcmV0ZWQgYXMgYW4gRXBvY2ggbWlsbGlzZWNvbmQgY291bnRcbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAgICogQGV4YW1wbGUgU2V0dGluZ3Mubm93ID0gKCkgPT4gRGF0ZS5ub3coKSArIDMwMDAgLy8gcHJldGVuZCBpdCBpcyAzIHNlY29uZHMgaW4gdGhlIGZ1dHVyZVxuICAgICAqIEBleGFtcGxlIFNldHRpbmdzLm5vdyA9ICgpID0+IDAgLy8gYWx3YXlzIHByZXRlbmQgaXQncyBKYW4gMSwgMTk3MCBhdCBtaWRuaWdodCBpbiBVVEMgdGltZVxuICAgICAqL1xuICAgICxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldChuKSB7XG4gICAgICBub3cgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGRlZmF1bHQgdGltZSB6b25lIHRvIGNyZWF0ZSBEYXRlVGltZXMgaW4uIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAgICogVXNlIHRoZSB2YWx1ZSBcInN5c3RlbVwiIHRvIHJlc2V0IHRoaXMgdmFsdWUgdG8gdGhlIHN5c3RlbSdzIHRpbWUgem9uZS5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiZGVmYXVsdFpvbmVcIixcbiAgICBnZXQ6XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkZWZhdWx0IHRpbWUgem9uZSBvYmplY3QgY3VycmVudGx5IHVzZWQgdG8gY3JlYXRlIERhdGVUaW1lcy4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy5cbiAgICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyB0aGUgc3lzdGVtJ3MgdGltZSB6b25lICh0aGUgb25lIHNldCBvbiB0aGUgbWFjaGluZSB0aGF0IHJ1bnMgdGhpcyBjb2RlKS5cbiAgICAgKiBAdHlwZSB7Wm9uZX1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gbm9ybWFsaXplWm9uZShkZWZhdWx0Wm9uZSwgU3lzdGVtWm9uZS5pbnN0YW5jZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZGVmYXVsdCBsb2NhbGUgdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgLFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHpvbmUpIHtcbiAgICAgIGRlZmF1bHRab25lID0gem9uZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZGVmYXVsdExvY2FsZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRMb2NhbGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZGVmYXVsdCBsb2NhbGUgdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgLFxuICAgIHNldDogZnVuY3Rpb24gc2V0KGxvY2FsZSkge1xuICAgICAgZGVmYXVsdExvY2FsZSA9IGxvY2FsZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkZWZhdWx0IG51bWJlcmluZyBzeXN0ZW0gdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJkZWZhdWx0TnVtYmVyaW5nU3lzdGVtXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdE51bWJlcmluZ1N5c3RlbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBkZWZhdWx0IG51bWJlcmluZyBzeXN0ZW0gdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgLFxuICAgIHNldDogZnVuY3Rpb24gc2V0KG51bWJlcmluZ1N5c3RlbSkge1xuICAgICAgZGVmYXVsdE51bWJlcmluZ1N5c3RlbSA9IG51bWJlcmluZ1N5c3RlbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkZWZhdWx0IG91dHB1dCBjYWxlbmRhciB0byBjcmVhdGUgRGF0ZVRpbWVzIHdpdGguIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImRlZmF1bHRPdXRwdXRDYWxlbmRhclwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRPdXRwdXRDYWxlbmRhcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBkZWZhdWx0IG91dHB1dCBjYWxlbmRhciB0byBjcmVhdGUgRGF0ZVRpbWVzIHdpdGguIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICAsXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQob3V0cHV0Q2FsZW5kYXIpIHtcbiAgICAgIGRlZmF1bHRPdXRwdXRDYWxlbmRhciA9IG91dHB1dENhbGVuZGFyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgd2hldGhlciBMdXhvbiB3aWxsIHRocm93IHdoZW4gaXQgZW5jb3VudGVycyBpbnZhbGlkIERhdGVUaW1lcywgRHVyYXRpb25zLCBvciBJbnRlcnZhbHNcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInRocm93T25JbnZhbGlkXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhyb3dPbkludmFsaWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIEx1eG9uIHdpbGwgdGhyb3cgd2hlbiBpdCBlbmNvdW50ZXJzIGludmFsaWQgRGF0ZVRpbWVzLCBEdXJhdGlvbnMsIG9yIEludGVydmFsc1xuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgICxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh0KSB7XG4gICAgICB0aHJvd09uSW52YWxpZCA9IHQ7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFNldHRpbmdzO1xufSgpO1xuXG52YXIgX2V4Y2x1ZGVkID0gW1wiYmFzZVwiXSxcbiAgICBfZXhjbHVkZWQyID0gW1wicGFkVG9cIiwgXCJmbG9vclwiXTtcblxudmFyIGludGxMRkNhY2hlID0ge307XG5cbmZ1bmN0aW9uIGdldENhY2hlZExGKGxvY1N0cmluZywgb3B0cykge1xuICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgb3B0cyA9IHt9O1xuICB9XG5cbiAgdmFyIGtleSA9IEpTT04uc3RyaW5naWZ5KFtsb2NTdHJpbmcsIG9wdHNdKTtcbiAgdmFyIGR0ZiA9IGludGxMRkNhY2hlW2tleV07XG5cbiAgaWYgKCFkdGYpIHtcbiAgICBkdGYgPSBuZXcgSW50bC5MaXN0Rm9ybWF0KGxvY1N0cmluZywgb3B0cyk7XG4gICAgaW50bExGQ2FjaGVba2V5XSA9IGR0ZjtcbiAgfVxuXG4gIHJldHVybiBkdGY7XG59XG5cbnZhciBpbnRsRFRDYWNoZSA9IHt9O1xuXG5mdW5jdGlvbiBnZXRDYWNoZWREVEYobG9jU3RyaW5nLCBvcHRzKSB7XG4gIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICBvcHRzID0ge307XG4gIH1cblxuICB2YXIga2V5ID0gSlNPTi5zdHJpbmdpZnkoW2xvY1N0cmluZywgb3B0c10pO1xuICB2YXIgZHRmID0gaW50bERUQ2FjaGVba2V5XTtcblxuICBpZiAoIWR0Zikge1xuICAgIGR0ZiA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY1N0cmluZywgb3B0cyk7XG4gICAgaW50bERUQ2FjaGVba2V5XSA9IGR0ZjtcbiAgfVxuXG4gIHJldHVybiBkdGY7XG59XG5cbnZhciBpbnRsTnVtQ2FjaGUgPSB7fTtcblxuZnVuY3Rpb24gZ2V0Q2FjaGVkSU5GKGxvY1N0cmluZywgb3B0cykge1xuICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgb3B0cyA9IHt9O1xuICB9XG5cbiAgdmFyIGtleSA9IEpTT04uc3RyaW5naWZ5KFtsb2NTdHJpbmcsIG9wdHNdKTtcbiAgdmFyIGluZiA9IGludGxOdW1DYWNoZVtrZXldO1xuXG4gIGlmICghaW5mKSB7XG4gICAgaW5mID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KGxvY1N0cmluZywgb3B0cyk7XG4gICAgaW50bE51bUNhY2hlW2tleV0gPSBpbmY7XG4gIH1cblxuICByZXR1cm4gaW5mO1xufVxuXG52YXIgaW50bFJlbENhY2hlID0ge307XG5cbmZ1bmN0aW9uIGdldENhY2hlZFJURihsb2NTdHJpbmcsIG9wdHMpIHtcbiAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgIG9wdHMgPSB7fTtcbiAgfVxuXG4gIHZhciBfb3B0cyA9IG9wdHM7XG4gICAgICBfb3B0cy5iYXNlO1xuICAgICAgdmFyIGNhY2hlS2V5T3B0cyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKF9vcHRzLCBfZXhjbHVkZWQpOyAvLyBleGNsdWRlIGBiYXNlYCBmcm9tIHRoZSBvcHRpb25zXG5cblxuICB2YXIga2V5ID0gSlNPTi5zdHJpbmdpZnkoW2xvY1N0cmluZywgY2FjaGVLZXlPcHRzXSk7XG4gIHZhciBpbmYgPSBpbnRsUmVsQ2FjaGVba2V5XTtcblxuICBpZiAoIWluZikge1xuICAgIGluZiA9IG5ldyBJbnRsLlJlbGF0aXZlVGltZUZvcm1hdChsb2NTdHJpbmcsIG9wdHMpO1xuICAgIGludGxSZWxDYWNoZVtrZXldID0gaW5mO1xuICB9XG5cbiAgcmV0dXJuIGluZjtcbn1cblxudmFyIHN5c0xvY2FsZUNhY2hlID0gbnVsbDtcblxuZnVuY3Rpb24gc3lzdGVtTG9jYWxlKCkge1xuICBpZiAoc3lzTG9jYWxlQ2FjaGUpIHtcbiAgICByZXR1cm4gc3lzTG9jYWxlQ2FjaGU7XG4gIH0gZWxzZSB7XG4gICAgc3lzTG9jYWxlQ2FjaGUgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgpLnJlc29sdmVkT3B0aW9ucygpLmxvY2FsZTtcbiAgICByZXR1cm4gc3lzTG9jYWxlQ2FjaGU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VMb2NhbGVTdHJpbmcobG9jYWxlU3RyKSB7XG4gIC8vIEkgcmVhbGx5IHdhbnQgdG8gYXZvaWQgd3JpdGluZyBhIEJDUCA0NyBwYXJzZXJcbiAgLy8gc2VlLCBlLmcuIGh0dHBzOi8vZ2l0aHViLmNvbS93b29vcm0vYmNwLTQ3XG4gIC8vIEluc3RlYWQsIHdlJ2xsIGRvIHRoaXM6XG4gIC8vIGEpIGlmIHRoZSBzdHJpbmcgaGFzIG5vIC11IGV4dGVuc2lvbnMsIGp1c3QgbGVhdmUgaXQgYWxvbmVcbiAgLy8gYikgaWYgaXQgZG9lcywgdXNlIEludGwgdG8gcmVzb2x2ZSBldmVyeXRoaW5nXG4gIC8vIGMpIGlmIEludGwgZmFpbHMsIHRyeSBhZ2FpbiB3aXRob3V0IHRoZSAtdVxuICB2YXIgdUluZGV4ID0gbG9jYWxlU3RyLmluZGV4T2YoXCItdS1cIik7XG5cbiAgaWYgKHVJbmRleCA9PT0gLTEpIHtcbiAgICByZXR1cm4gW2xvY2FsZVN0cl07XG4gIH0gZWxzZSB7XG4gICAgdmFyIG9wdGlvbnM7XG4gICAgdmFyIHNtYWxsZXIgPSBsb2NhbGVTdHIuc3Vic3RyaW5nKDAsIHVJbmRleCk7XG5cbiAgICB0cnkge1xuICAgICAgb3B0aW9ucyA9IGdldENhY2hlZERURihsb2NhbGVTdHIpLnJlc29sdmVkT3B0aW9ucygpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIG9wdGlvbnMgPSBnZXRDYWNoZWREVEYoc21hbGxlcikucmVzb2x2ZWRPcHRpb25zKCk7XG4gICAgfVxuXG4gICAgdmFyIF9vcHRpb25zID0gb3B0aW9ucyxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtID0gX29wdGlvbnMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBjYWxlbmRhciA9IF9vcHRpb25zLmNhbGVuZGFyOyAvLyByZXR1cm4gdGhlIHNtYWxsZXIgb25lIHNvIHRoYXQgd2UgY2FuIGFwcGVuZCB0aGUgY2FsZW5kYXIgYW5kIG51bWJlcmluZyBvdmVycmlkZXMgdG8gaXRcblxuICAgIHJldHVybiBbc21hbGxlciwgbnVtYmVyaW5nU3lzdGVtLCBjYWxlbmRhcl07XG4gIH1cbn1cblxuZnVuY3Rpb24gaW50bENvbmZpZ1N0cmluZyhsb2NhbGVTdHIsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIpIHtcbiAgaWYgKG91dHB1dENhbGVuZGFyIHx8IG51bWJlcmluZ1N5c3RlbSkge1xuICAgIGxvY2FsZVN0ciArPSBcIi11XCI7XG5cbiAgICBpZiAob3V0cHV0Q2FsZW5kYXIpIHtcbiAgICAgIGxvY2FsZVN0ciArPSBcIi1jYS1cIiArIG91dHB1dENhbGVuZGFyO1xuICAgIH1cblxuICAgIGlmIChudW1iZXJpbmdTeXN0ZW0pIHtcbiAgICAgIGxvY2FsZVN0ciArPSBcIi1udS1cIiArIG51bWJlcmluZ1N5c3RlbTtcbiAgICB9XG5cbiAgICByZXR1cm4gbG9jYWxlU3RyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsb2NhbGVTdHI7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWFwTW9udGhzKGYpIHtcbiAgdmFyIG1zID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDE7IGkgPD0gMTI7IGkrKykge1xuICAgIHZhciBkdCA9IERhdGVUaW1lLnV0YygyMDE2LCBpLCAxKTtcbiAgICBtcy5wdXNoKGYoZHQpKTtcbiAgfVxuXG4gIHJldHVybiBtcztcbn1cblxuZnVuY3Rpb24gbWFwV2Vla2RheXMoZikge1xuICB2YXIgbXMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMTsgaSA8PSA3OyBpKyspIHtcbiAgICB2YXIgZHQgPSBEYXRlVGltZS51dGMoMjAxNiwgMTEsIDEzICsgaSk7XG4gICAgbXMucHVzaChmKGR0KSk7XG4gIH1cblxuICByZXR1cm4gbXM7XG59XG5cbmZ1bmN0aW9uIGxpc3RTdHVmZihsb2MsIGxlbmd0aCwgZGVmYXVsdE9LLCBlbmdsaXNoRm4sIGludGxGbikge1xuICB2YXIgbW9kZSA9IGxvYy5saXN0aW5nTW9kZShkZWZhdWx0T0spO1xuXG4gIGlmIChtb2RlID09PSBcImVycm9yXCIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBlbHNlIGlmIChtb2RlID09PSBcImVuXCIpIHtcbiAgICByZXR1cm4gZW5nbGlzaEZuKGxlbmd0aCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGludGxGbihsZW5ndGgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHN1cHBvcnRzRmFzdE51bWJlcnMobG9jKSB7XG4gIGlmIChsb2MubnVtYmVyaW5nU3lzdGVtICYmIGxvYy5udW1iZXJpbmdTeXN0ZW0gIT09IFwibGF0blwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsb2MubnVtYmVyaW5nU3lzdGVtID09PSBcImxhdG5cIiB8fCAhbG9jLmxvY2FsZSB8fCBsb2MubG9jYWxlLnN0YXJ0c1dpdGgoXCJlblwiKSB8fCBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsb2MuaW50bCkucmVzb2x2ZWRPcHRpb25zKCkubnVtYmVyaW5nU3lzdGVtID09PSBcImxhdG5cIjtcbiAgfVxufVxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cblxudmFyIFBvbHlOdW1iZXJGb3JtYXR0ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBQb2x5TnVtYmVyRm9ybWF0dGVyKGludGwsIGZvcmNlU2ltcGxlLCBvcHRzKSB7XG4gICAgdGhpcy5wYWRUbyA9IG9wdHMucGFkVG8gfHwgMDtcbiAgICB0aGlzLmZsb29yID0gb3B0cy5mbG9vciB8fCBmYWxzZTtcblxuICAgIG9wdHMucGFkVG87XG4gICAgICAgIG9wdHMuZmxvb3I7XG4gICAgICAgIHZhciBvdGhlck9wdHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShvcHRzLCBfZXhjbHVkZWQyKTtcblxuICAgIGlmICghZm9yY2VTaW1wbGUgfHwgT2JqZWN0LmtleXMob3RoZXJPcHRzKS5sZW5ndGggPiAwKSB7XG4gICAgICB2YXIgaW50bE9wdHMgPSBfZXh0ZW5kcyh7XG4gICAgICAgIHVzZUdyb3VwaW5nOiBmYWxzZVxuICAgICAgfSwgb3B0cyk7XG5cbiAgICAgIGlmIChvcHRzLnBhZFRvID4gMCkgaW50bE9wdHMubWluaW11bUludGVnZXJEaWdpdHMgPSBvcHRzLnBhZFRvO1xuICAgICAgdGhpcy5pbmYgPSBnZXRDYWNoZWRJTkYoaW50bCwgaW50bE9wdHMpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBQb2x5TnVtYmVyRm9ybWF0dGVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8uZm9ybWF0ID0gZnVuY3Rpb24gZm9ybWF0KGkpIHtcbiAgICBpZiAodGhpcy5pbmYpIHtcbiAgICAgIHZhciBmaXhlZCA9IHRoaXMuZmxvb3IgPyBNYXRoLmZsb29yKGkpIDogaTtcbiAgICAgIHJldHVybiB0aGlzLmluZi5mb3JtYXQoZml4ZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB0byBtYXRjaCB0aGUgYnJvd3NlcidzIG51bWJlcmZvcm1hdHRlciBkZWZhdWx0c1xuICAgICAgdmFyIF9maXhlZCA9IHRoaXMuZmxvb3IgPyBNYXRoLmZsb29yKGkpIDogcm91bmRUbyhpLCAzKTtcblxuICAgICAgcmV0dXJuIHBhZFN0YXJ0KF9maXhlZCwgdGhpcy5wYWRUbyk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBQb2x5TnVtYmVyRm9ybWF0dGVyO1xufSgpO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cblxudmFyIFBvbHlEYXRlRm9ybWF0dGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUG9seURhdGVGb3JtYXR0ZXIoZHQsIGludGwsIG9wdHMpIHtcbiAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgIHZhciB6O1xuXG4gICAgaWYgKGR0LnpvbmUuaXNVbml2ZXJzYWwpIHtcbiAgICAgIC8vIFVUQy04IG9yIEV0Yy9VVEMtOCBhcmUgbm90IHBhcnQgb2YgdHpkYXRhLCBvbmx5IEV0Yy9HTVQrOCBhbmQgdGhlIGxpa2UuXG4gICAgICAvLyBUaGF0IGlzIHdoeSBmaXhlZC1vZmZzZXQgVFogaXMgc2V0IHRvIHRoYXQgdW5sZXNzIGl0IGlzOlxuICAgICAgLy8gMS4gUmVwcmVzZW50aW5nIG9mZnNldCAwIHdoZW4gVVRDIGlzIHVzZWQgdG8gbWFpbnRhaW4gcHJldmlvdXMgYmVoYXZpb3IgYW5kIGRvZXMgbm90IGJlY29tZSBHTVQuXG4gICAgICAvLyAyLiBVbnN1cHBvcnRlZCBieSB0aGUgYnJvd3NlcjpcbiAgICAgIC8vICAgIC0gc29tZSBkbyBub3Qgc3VwcG9ydCBFdGMvXG4gICAgICAvLyAgICAtIDwgRXRjL0dNVC0xNCwgPiBFdGMvR01UKzEyLCBhbmQgMzAtbWludXRlIG9yIDQ1LW1pbnV0ZSBvZmZzZXRzIGFyZSBub3QgcGFydCBvZiB0emRhdGFcbiAgICAgIHZhciBnbXRPZmZzZXQgPSAtMSAqIChkdC5vZmZzZXQgLyA2MCk7XG4gICAgICB2YXIgb2Zmc2V0WiA9IGdtdE9mZnNldCA+PSAwID8gXCJFdGMvR01UK1wiICsgZ210T2Zmc2V0IDogXCJFdGMvR01UXCIgKyBnbXRPZmZzZXQ7XG5cbiAgICAgIGlmIChkdC5vZmZzZXQgIT09IDAgJiYgSUFOQVpvbmUuY3JlYXRlKG9mZnNldFopLnZhbGlkKSB7XG4gICAgICAgIHogPSBvZmZzZXRaO1xuICAgICAgICB0aGlzLmR0ID0gZHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOb3QgYWxsIGZpeGVkLW9mZnNldCB6b25lcyBsaWtlIEV0Yy8rNDozMCBhcmUgcHJlc2VudCBpbiB0emRhdGEuXG4gICAgICAgIC8vIFNvIHdlIGhhdmUgdG8gbWFrZSBkby4gVHdvIGNhc2VzOlxuICAgICAgICAvLyAxLiBUaGUgZm9ybWF0IG9wdGlvbnMgdGVsbCB1cyB0byBzaG93IHRoZSB6b25lLiBXZSBjYW4ndCBkbyB0aGF0LCBzbyB0aGUgYmVzdFxuICAgICAgICAvLyB3ZSBjYW4gZG8gaXMgZm9ybWF0IHRoZSBkYXRlIGluIFVUQy5cbiAgICAgICAgLy8gMi4gVGhlIGZvcm1hdCBvcHRpb25zIGRvbid0IHRlbGwgdXMgdG8gc2hvdyB0aGUgem9uZS4gVGhlbiB3ZSBjYW4gYWRqdXN0IHRoZW1cbiAgICAgICAgLy8gdGhlIHRpbWUgYW5kIHRlbGwgdGhlIGZvcm1hdHRlciB0byBzaG93IGl0IHRvIHVzIGluIFVUQywgc28gdGhhdCB0aGUgdGltZSBpcyByaWdodFxuICAgICAgICAvLyBhbmQgdGhlIGJhZCB6b25lIGRvZXNuJ3Qgc2hvdyB1cC5cbiAgICAgICAgeiA9IFwiVVRDXCI7XG5cbiAgICAgICAgaWYgKG9wdHMudGltZVpvbmVOYW1lKSB7XG4gICAgICAgICAgdGhpcy5kdCA9IGR0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZHQgPSBkdC5vZmZzZXQgPT09IDAgPyBkdCA6IERhdGVUaW1lLmZyb21NaWxsaXMoZHQudHMgKyBkdC5vZmZzZXQgKiA2MCAqIDEwMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChkdC56b25lLnR5cGUgPT09IFwic3lzdGVtXCIpIHtcbiAgICAgIHRoaXMuZHQgPSBkdDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kdCA9IGR0O1xuICAgICAgeiA9IGR0LnpvbmUubmFtZTtcbiAgICB9XG5cbiAgICB2YXIgaW50bE9wdHMgPSBfZXh0ZW5kcyh7fSwgdGhpcy5vcHRzKTtcblxuICAgIGlmICh6KSB7XG4gICAgICBpbnRsT3B0cy50aW1lWm9uZSA9IHo7XG4gICAgfVxuXG4gICAgdGhpcy5kdGYgPSBnZXRDYWNoZWREVEYoaW50bCwgaW50bE9wdHMpO1xuICB9XG5cbiAgdmFyIF9wcm90bzIgPSBQb2x5RGF0ZUZvcm1hdHRlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvMi5mb3JtYXQgPSBmdW5jdGlvbiBmb3JtYXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZHRmLmZvcm1hdCh0aGlzLmR0LnRvSlNEYXRlKCkpO1xuICB9O1xuXG4gIF9wcm90bzIuZm9ybWF0VG9QYXJ0cyA9IGZ1bmN0aW9uIGZvcm1hdFRvUGFydHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZHRmLmZvcm1hdFRvUGFydHModGhpcy5kdC50b0pTRGF0ZSgpKTtcbiAgfTtcblxuICBfcHJvdG8yLnJlc29sdmVkT3B0aW9ucyA9IGZ1bmN0aW9uIHJlc29sdmVkT3B0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5kdGYucmVzb2x2ZWRPcHRpb25zKCk7XG4gIH07XG5cbiAgcmV0dXJuIFBvbHlEYXRlRm9ybWF0dGVyO1xufSgpO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cblxudmFyIFBvbHlSZWxGb3JtYXR0ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBQb2x5UmVsRm9ybWF0dGVyKGludGwsIGlzRW5nbGlzaCwgb3B0cykge1xuICAgIHRoaXMub3B0cyA9IF9leHRlbmRzKHtcbiAgICAgIHN0eWxlOiBcImxvbmdcIlxuICAgIH0sIG9wdHMpO1xuXG4gICAgaWYgKCFpc0VuZ2xpc2ggJiYgaGFzUmVsYXRpdmUoKSkge1xuICAgICAgdGhpcy5ydGYgPSBnZXRDYWNoZWRSVEYoaW50bCwgb3B0cyk7XG4gICAgfVxuICB9XG5cbiAgdmFyIF9wcm90bzMgPSBQb2x5UmVsRm9ybWF0dGVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8zLmZvcm1hdCA9IGZ1bmN0aW9uIGZvcm1hdChjb3VudCwgdW5pdCkge1xuICAgIGlmICh0aGlzLnJ0Zikge1xuICAgICAgcmV0dXJuIHRoaXMucnRmLmZvcm1hdChjb3VudCwgdW5pdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmb3JtYXRSZWxhdGl2ZVRpbWUodW5pdCwgY291bnQsIHRoaXMub3B0cy5udW1lcmljLCB0aGlzLm9wdHMuc3R5bGUgIT09IFwibG9uZ1wiKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvMy5mb3JtYXRUb1BhcnRzID0gZnVuY3Rpb24gZm9ybWF0VG9QYXJ0cyhjb3VudCwgdW5pdCkge1xuICAgIGlmICh0aGlzLnJ0Zikge1xuICAgICAgcmV0dXJuIHRoaXMucnRmLmZvcm1hdFRvUGFydHMoY291bnQsIHVuaXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBQb2x5UmVsRm9ybWF0dGVyO1xufSgpO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cblxudmFyIExvY2FsZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIExvY2FsZS5mcm9tT3B0cyA9IGZ1bmN0aW9uIGZyb21PcHRzKG9wdHMpIHtcbiAgICByZXR1cm4gTG9jYWxlLmNyZWF0ZShvcHRzLmxvY2FsZSwgb3B0cy5udW1iZXJpbmdTeXN0ZW0sIG9wdHMub3V0cHV0Q2FsZW5kYXIsIG9wdHMuZGVmYXVsdFRvRU4pO1xuICB9O1xuXG4gIExvY2FsZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyLCBkZWZhdWx0VG9FTikge1xuICAgIGlmIChkZWZhdWx0VG9FTiA9PT0gdm9pZCAwKSB7XG4gICAgICBkZWZhdWx0VG9FTiA9IGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBzcGVjaWZpZWRMb2NhbGUgPSBsb2NhbGUgfHwgU2V0dGluZ3MuZGVmYXVsdExvY2FsZTsgLy8gdGhlIHN5c3RlbSBsb2NhbGUgaXMgdXNlZnVsIGZvciBodW1hbiByZWFkYWJsZSBzdHJpbmdzIGJ1dCBhbm5veWluZyBmb3IgcGFyc2luZy9mb3JtYXR0aW5nIGtub3duIGZvcm1hdHNcblxuICAgIHZhciBsb2NhbGVSID0gc3BlY2lmaWVkTG9jYWxlIHx8IChkZWZhdWx0VG9FTiA/IFwiZW4tVVNcIiA6IHN5c3RlbUxvY2FsZSgpKTtcbiAgICB2YXIgbnVtYmVyaW5nU3lzdGVtUiA9IG51bWJlcmluZ1N5c3RlbSB8fCBTZXR0aW5ncy5kZWZhdWx0TnVtYmVyaW5nU3lzdGVtO1xuICAgIHZhciBvdXRwdXRDYWxlbmRhclIgPSBvdXRwdXRDYWxlbmRhciB8fCBTZXR0aW5ncy5kZWZhdWx0T3V0cHV0Q2FsZW5kYXI7XG4gICAgcmV0dXJuIG5ldyBMb2NhbGUobG9jYWxlUiwgbnVtYmVyaW5nU3lzdGVtUiwgb3V0cHV0Q2FsZW5kYXJSLCBzcGVjaWZpZWRMb2NhbGUpO1xuICB9O1xuXG4gIExvY2FsZS5yZXNldENhY2hlID0gZnVuY3Rpb24gcmVzZXRDYWNoZSgpIHtcbiAgICBzeXNMb2NhbGVDYWNoZSA9IG51bGw7XG4gICAgaW50bERUQ2FjaGUgPSB7fTtcbiAgICBpbnRsTnVtQ2FjaGUgPSB7fTtcbiAgICBpbnRsUmVsQ2FjaGUgPSB7fTtcbiAgfTtcblxuICBMb2NhbGUuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3QoX3RlbXApIHtcbiAgICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgICAgICBsb2NhbGUgPSBfcmVmLmxvY2FsZSxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtID0gX3JlZi5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIG91dHB1dENhbGVuZGFyID0gX3JlZi5vdXRwdXRDYWxlbmRhcjtcblxuICAgIHJldHVybiBMb2NhbGUuY3JlYXRlKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gTG9jYWxlKGxvY2FsZSwgbnVtYmVyaW5nLCBvdXRwdXRDYWxlbmRhciwgc3BlY2lmaWVkTG9jYWxlKSB7XG4gICAgdmFyIF9wYXJzZUxvY2FsZVN0cmluZyA9IHBhcnNlTG9jYWxlU3RyaW5nKGxvY2FsZSksXG4gICAgICAgIHBhcnNlZExvY2FsZSA9IF9wYXJzZUxvY2FsZVN0cmluZ1swXSxcbiAgICAgICAgcGFyc2VkTnVtYmVyaW5nU3lzdGVtID0gX3BhcnNlTG9jYWxlU3RyaW5nWzFdLFxuICAgICAgICBwYXJzZWRPdXRwdXRDYWxlbmRhciA9IF9wYXJzZUxvY2FsZVN0cmluZ1syXTtcblxuICAgIHRoaXMubG9jYWxlID0gcGFyc2VkTG9jYWxlO1xuICAgIHRoaXMubnVtYmVyaW5nU3lzdGVtID0gbnVtYmVyaW5nIHx8IHBhcnNlZE51bWJlcmluZ1N5c3RlbSB8fCBudWxsO1xuICAgIHRoaXMub3V0cHV0Q2FsZW5kYXIgPSBvdXRwdXRDYWxlbmRhciB8fCBwYXJzZWRPdXRwdXRDYWxlbmRhciB8fCBudWxsO1xuICAgIHRoaXMuaW50bCA9IGludGxDb25maWdTdHJpbmcodGhpcy5sb2NhbGUsIHRoaXMubnVtYmVyaW5nU3lzdGVtLCB0aGlzLm91dHB1dENhbGVuZGFyKTtcbiAgICB0aGlzLndlZWtkYXlzQ2FjaGUgPSB7XG4gICAgICBmb3JtYXQ6IHt9LFxuICAgICAgc3RhbmRhbG9uZToge31cbiAgICB9O1xuICAgIHRoaXMubW9udGhzQ2FjaGUgPSB7XG4gICAgICBmb3JtYXQ6IHt9LFxuICAgICAgc3RhbmRhbG9uZToge31cbiAgICB9O1xuICAgIHRoaXMubWVyaWRpZW1DYWNoZSA9IG51bGw7XG4gICAgdGhpcy5lcmFDYWNoZSA9IHt9O1xuICAgIHRoaXMuc3BlY2lmaWVkTG9jYWxlID0gc3BlY2lmaWVkTG9jYWxlO1xuICAgIHRoaXMuZmFzdE51bWJlcnNDYWNoZWQgPSBudWxsO1xuICB9XG5cbiAgdmFyIF9wcm90bzQgPSBMb2NhbGUucHJvdG90eXBlO1xuXG4gIF9wcm90bzQubGlzdGluZ01vZGUgPSBmdW5jdGlvbiBsaXN0aW5nTW9kZSgpIHtcbiAgICB2YXIgaXNBY3R1YWxseUVuID0gdGhpcy5pc0VuZ2xpc2goKTtcbiAgICB2YXIgaGFzTm9XZWlyZG5lc3MgPSAodGhpcy5udW1iZXJpbmdTeXN0ZW0gPT09IG51bGwgfHwgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPT09IFwibGF0blwiKSAmJiAodGhpcy5vdXRwdXRDYWxlbmRhciA9PT0gbnVsbCB8fCB0aGlzLm91dHB1dENhbGVuZGFyID09PSBcImdyZWdvcnlcIik7XG4gICAgcmV0dXJuIGlzQWN0dWFsbHlFbiAmJiBoYXNOb1dlaXJkbmVzcyA/IFwiZW5cIiA6IFwiaW50bFwiO1xuICB9O1xuXG4gIF9wcm90bzQuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZShhbHRzKSB7XG4gICAgaWYgKCFhbHRzIHx8IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFsdHMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBMb2NhbGUuY3JlYXRlKGFsdHMubG9jYWxlIHx8IHRoaXMuc3BlY2lmaWVkTG9jYWxlLCBhbHRzLm51bWJlcmluZ1N5c3RlbSB8fCB0aGlzLm51bWJlcmluZ1N5c3RlbSwgYWx0cy5vdXRwdXRDYWxlbmRhciB8fCB0aGlzLm91dHB1dENhbGVuZGFyLCBhbHRzLmRlZmF1bHRUb0VOIHx8IGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvNC5yZWRlZmF1bHRUb0VOID0gZnVuY3Rpb24gcmVkZWZhdWx0VG9FTihhbHRzKSB7XG4gICAgaWYgKGFsdHMgPT09IHZvaWQgMCkge1xuICAgICAgYWx0cyA9IHt9O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNsb25lKF9leHRlbmRzKHt9LCBhbHRzLCB7XG4gICAgICBkZWZhdWx0VG9FTjogdHJ1ZVxuICAgIH0pKTtcbiAgfTtcblxuICBfcHJvdG80LnJlZGVmYXVsdFRvU3lzdGVtID0gZnVuY3Rpb24gcmVkZWZhdWx0VG9TeXN0ZW0oYWx0cykge1xuICAgIGlmIChhbHRzID09PSB2b2lkIDApIHtcbiAgICAgIGFsdHMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jbG9uZShfZXh0ZW5kcyh7fSwgYWx0cywge1xuICAgICAgZGVmYXVsdFRvRU46IGZhbHNlXG4gICAgfSkpO1xuICB9O1xuXG4gIF9wcm90bzQubW9udGhzID0gZnVuY3Rpb24gbW9udGhzJDEobGVuZ3RoLCBmb3JtYXQsIGRlZmF1bHRPSykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBpZiAoZm9ybWF0ID09PSB2b2lkIDApIHtcbiAgICAgIGZvcm1hdCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChkZWZhdWx0T0sgPT09IHZvaWQgMCkge1xuICAgICAgZGVmYXVsdE9LID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlzdFN0dWZmKHRoaXMsIGxlbmd0aCwgZGVmYXVsdE9LLCBtb250aHMsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpbnRsID0gZm9ybWF0ID8ge1xuICAgICAgICBtb250aDogbGVuZ3RoLFxuICAgICAgICBkYXk6IFwibnVtZXJpY1wiXG4gICAgICB9IDoge1xuICAgICAgICBtb250aDogbGVuZ3RoXG4gICAgICB9LFxuICAgICAgICAgIGZvcm1hdFN0ciA9IGZvcm1hdCA/IFwiZm9ybWF0XCIgOiBcInN0YW5kYWxvbmVcIjtcblxuICAgICAgaWYgKCFfdGhpcy5tb250aHNDYWNoZVtmb3JtYXRTdHJdW2xlbmd0aF0pIHtcbiAgICAgICAgX3RoaXMubW9udGhzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdID0gbWFwTW9udGhzKGZ1bmN0aW9uIChkdCkge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5leHRyYWN0KGR0LCBpbnRsLCBcIm1vbnRoXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF90aGlzLm1vbnRoc0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG80LndlZWtkYXlzID0gZnVuY3Rpb24gd2Vla2RheXMkMShsZW5ndGgsIGZvcm1hdCwgZGVmYXVsdE9LKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBpZiAoZm9ybWF0ID09PSB2b2lkIDApIHtcbiAgICAgIGZvcm1hdCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChkZWZhdWx0T0sgPT09IHZvaWQgMCkge1xuICAgICAgZGVmYXVsdE9LID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlzdFN0dWZmKHRoaXMsIGxlbmd0aCwgZGVmYXVsdE9LLCB3ZWVrZGF5cywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGludGwgPSBmb3JtYXQgPyB7XG4gICAgICAgIHdlZWtkYXk6IGxlbmd0aCxcbiAgICAgICAgeWVhcjogXCJudW1lcmljXCIsXG4gICAgICAgIG1vbnRoOiBcImxvbmdcIixcbiAgICAgICAgZGF5OiBcIm51bWVyaWNcIlxuICAgICAgfSA6IHtcbiAgICAgICAgd2Vla2RheTogbGVuZ3RoXG4gICAgICB9LFxuICAgICAgICAgIGZvcm1hdFN0ciA9IGZvcm1hdCA/IFwiZm9ybWF0XCIgOiBcInN0YW5kYWxvbmVcIjtcblxuICAgICAgaWYgKCFfdGhpczIud2Vla2RheXNDYWNoZVtmb3JtYXRTdHJdW2xlbmd0aF0pIHtcbiAgICAgICAgX3RoaXMyLndlZWtkYXlzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdID0gbWFwV2Vla2RheXMoZnVuY3Rpb24gKGR0KSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMi5leHRyYWN0KGR0LCBpbnRsLCBcIndlZWtkYXlcIik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3RoaXMyLndlZWtkYXlzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90bzQubWVyaWRpZW1zID0gZnVuY3Rpb24gbWVyaWRpZW1zJDEoZGVmYXVsdE9LKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICBpZiAoZGVmYXVsdE9LID09PSB2b2lkIDApIHtcbiAgICAgIGRlZmF1bHRPSyA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpc3RTdHVmZih0aGlzLCB1bmRlZmluZWQsIGRlZmF1bHRPSywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG1lcmlkaWVtcztcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBJbiB0aGVvcnkgdGhlcmUgY291bGQgYmUgYXJpYml0cmFyeSBkYXkgcGVyaW9kcy4gV2UncmUgZ29ubmEgYXNzdW1lIHRoZXJlIGFyZSBleGFjdGx5IHR3b1xuICAgICAgLy8gZm9yIEFNIGFuZCBQTS4gVGhpcyBpcyBwcm9iYWJseSB3cm9uZywgYnV0IGl0J3MgbWFrZXMgcGFyc2luZyB3YXkgZWFzaWVyLlxuICAgICAgaWYgKCFfdGhpczMubWVyaWRpZW1DYWNoZSkge1xuICAgICAgICB2YXIgaW50bCA9IHtcbiAgICAgICAgICBob3VyOiBcIm51bWVyaWNcIixcbiAgICAgICAgICBob3VyQ3ljbGU6IFwiaDEyXCJcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXMzLm1lcmlkaWVtQ2FjaGUgPSBbRGF0ZVRpbWUudXRjKDIwMTYsIDExLCAxMywgOSksIERhdGVUaW1lLnV0YygyMDE2LCAxMSwgMTMsIDE5KV0ubWFwKGZ1bmN0aW9uIChkdCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczMuZXh0cmFjdChkdCwgaW50bCwgXCJkYXlwZXJpb2RcIik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3RoaXMzLm1lcmlkaWVtQ2FjaGU7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvNC5lcmFzID0gZnVuY3Rpb24gZXJhcyQxKGxlbmd0aCwgZGVmYXVsdE9LKSB7XG4gICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICBpZiAoZGVmYXVsdE9LID09PSB2b2lkIDApIHtcbiAgICAgIGRlZmF1bHRPSyA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpc3RTdHVmZih0aGlzLCBsZW5ndGgsIGRlZmF1bHRPSywgZXJhcywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGludGwgPSB7XG4gICAgICAgIGVyYTogbGVuZ3RoXG4gICAgICB9OyAvLyBUaGlzIGlzIHByb2JsZW1hdGljLiBEaWZmZXJlbnQgY2FsZW5kYXJzIGFyZSBnb2luZyB0byBkZWZpbmUgZXJhcyB0b3RhbGx5IGRpZmZlcmVudGx5LiBXaGF0IEkgbmVlZCBpcyB0aGUgbWluaW11bSBzZXQgb2YgZGF0ZXNcbiAgICAgIC8vIHRvIGRlZmluaXRlbHkgZW51bWVyYXRlIHRoZW0uXG5cbiAgICAgIGlmICghX3RoaXM0LmVyYUNhY2hlW2xlbmd0aF0pIHtcbiAgICAgICAgX3RoaXM0LmVyYUNhY2hlW2xlbmd0aF0gPSBbRGF0ZVRpbWUudXRjKC00MCwgMSwgMSksIERhdGVUaW1lLnV0YygyMDE3LCAxLCAxKV0ubWFwKGZ1bmN0aW9uIChkdCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczQuZXh0cmFjdChkdCwgaW50bCwgXCJlcmFcIik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3RoaXM0LmVyYUNhY2hlW2xlbmd0aF07XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvNC5leHRyYWN0ID0gZnVuY3Rpb24gZXh0cmFjdChkdCwgaW50bE9wdHMsIGZpZWxkKSB7XG4gICAgdmFyIGRmID0gdGhpcy5kdEZvcm1hdHRlcihkdCwgaW50bE9wdHMpLFxuICAgICAgICByZXN1bHRzID0gZGYuZm9ybWF0VG9QYXJ0cygpLFxuICAgICAgICBtYXRjaGluZyA9IHJlc3VsdHMuZmluZChmdW5jdGlvbiAobSkge1xuICAgICAgcmV0dXJuIG0udHlwZS50b0xvd2VyQ2FzZSgpID09PSBmaWVsZDtcbiAgICB9KTtcbiAgICByZXR1cm4gbWF0Y2hpbmcgPyBtYXRjaGluZy52YWx1ZSA6IG51bGw7XG4gIH07XG5cbiAgX3Byb3RvNC5udW1iZXJGb3JtYXR0ZXIgPSBmdW5jdGlvbiBudW1iZXJGb3JtYXR0ZXIob3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICAvLyB0aGlzIGZvcmNlc2ltcGxlIG9wdGlvbiBpcyBuZXZlciB1c2VkICh0aGUgb25seSBjYWxsZXIgc2hvcnQtY2lyY3VpdHMgb24gaXQsIGJ1dCBpdCBzZWVtcyBzYWZlciB0byBsZWF2ZSlcbiAgICAvLyAoaW4gY29udHJhc3QsIHRoZSByZXN0IG9mIHRoZSBjb25kaXRpb24gaXMgdXNlZCBoZWF2aWx5KVxuICAgIHJldHVybiBuZXcgUG9seU51bWJlckZvcm1hdHRlcih0aGlzLmludGwsIG9wdHMuZm9yY2VTaW1wbGUgfHwgdGhpcy5mYXN0TnVtYmVycywgb3B0cyk7XG4gIH07XG5cbiAgX3Byb3RvNC5kdEZvcm1hdHRlciA9IGZ1bmN0aW9uIGR0Rm9ybWF0dGVyKGR0LCBpbnRsT3B0cykge1xuICAgIGlmIChpbnRsT3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnRsT3B0cyA9IHt9O1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUG9seURhdGVGb3JtYXR0ZXIoZHQsIHRoaXMuaW50bCwgaW50bE9wdHMpO1xuICB9O1xuXG4gIF9wcm90bzQucmVsRm9ybWF0dGVyID0gZnVuY3Rpb24gcmVsRm9ybWF0dGVyKG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQb2x5UmVsRm9ybWF0dGVyKHRoaXMuaW50bCwgdGhpcy5pc0VuZ2xpc2goKSwgb3B0cyk7XG4gIH07XG5cbiAgX3Byb3RvNC5saXN0Rm9ybWF0dGVyID0gZnVuY3Rpb24gbGlzdEZvcm1hdHRlcihvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIHJldHVybiBnZXRDYWNoZWRMRih0aGlzLmludGwsIG9wdHMpO1xuICB9O1xuXG4gIF9wcm90bzQuaXNFbmdsaXNoID0gZnVuY3Rpb24gaXNFbmdsaXNoKCkge1xuICAgIHJldHVybiB0aGlzLmxvY2FsZSA9PT0gXCJlblwiIHx8IHRoaXMubG9jYWxlLnRvTG93ZXJDYXNlKCkgPT09IFwiZW4tdXNcIiB8fCBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCh0aGlzLmludGwpLnJlc29sdmVkT3B0aW9ucygpLmxvY2FsZS5zdGFydHNXaXRoKFwiZW4tdXNcIik7XG4gIH07XG5cbiAgX3Byb3RvNC5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMob3RoZXIpIHtcbiAgICByZXR1cm4gdGhpcy5sb2NhbGUgPT09IG90aGVyLmxvY2FsZSAmJiB0aGlzLm51bWJlcmluZ1N5c3RlbSA9PT0gb3RoZXIubnVtYmVyaW5nU3lzdGVtICYmIHRoaXMub3V0cHV0Q2FsZW5kYXIgPT09IG90aGVyLm91dHB1dENhbGVuZGFyO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhMb2NhbGUsIFt7XG4gICAga2V5OiBcImZhc3ROdW1iZXJzXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAodGhpcy5mYXN0TnVtYmVyc0NhY2hlZCA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuZmFzdE51bWJlcnNDYWNoZWQgPSBzdXBwb3J0c0Zhc3ROdW1iZXJzKHRoaXMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5mYXN0TnVtYmVyc0NhY2hlZDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTG9jYWxlO1xufSgpO1xuXG4vKlxuICogVGhpcyBmaWxlIGhhbmRsZXMgcGFyc2luZyBmb3Igd2VsbC1zcGVjaWZpZWQgZm9ybWF0cy4gSGVyZSdzIGhvdyBpdCB3b3JrczpcbiAqIFR3byB0aGluZ3MgZ28gaW50byBwYXJzaW5nOiBhIHJlZ2V4IHRvIG1hdGNoIHdpdGggYW5kIGFuIGV4dHJhY3RvciB0byB0YWtlIGFwYXJ0IHRoZSBncm91cHMgaW4gdGhlIG1hdGNoLlxuICogQW4gZXh0cmFjdG9yIGlzIGp1c3QgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgcmVnZXggbWF0Y2ggYXJyYXkgYW5kIHJldHVybnMgYSB7IHllYXI6IC4uLiwgbW9udGg6IC4uLiB9IG9iamVjdFxuICogcGFyc2UoKSBkb2VzIHRoZSB3b3JrIG9mIGV4ZWN1dGluZyB0aGUgcmVnZXggYW5kIGFwcGx5aW5nIHRoZSBleHRyYWN0b3IuIEl0IHRha2VzIG11bHRpcGxlIHJlZ2V4L2V4dHJhY3RvciBwYWlycyB0byB0cnkgaW4gc2VxdWVuY2UuXG4gKiBFeHRyYWN0b3JzIGNhbiB0YWtlIGEgXCJjdXJzb3JcIiByZXByZXNlbnRpbmcgdGhlIG9mZnNldCBpbiB0aGUgbWF0Y2ggdG8gbG9vayBhdC4gVGhpcyBtYWtlcyBpdCBlYXN5IHRvIGNvbWJpbmUgZXh0cmFjdG9ycy5cbiAqIGNvbWJpbmVFeHRyYWN0b3JzKCkgZG9lcyB0aGUgd29yayBvZiBjb21iaW5pbmcgdGhlbSwga2VlcGluZyB0cmFjayBvZiB0aGUgY3Vyc29yIHRocm91Z2ggbXVsdGlwbGUgZXh0cmFjdGlvbnMuXG4gKiBTb21lIGV4dHJhY3Rpb25zIGFyZSBzdXBlciBkdW1iIGFuZCBzaW1wbGVQYXJzZSBhbmQgZnJvbVN0cmluZ3MgaGVscCBEUlkgdGhlbS5cbiAqL1xuXG5mdW5jdGlvbiBjb21iaW5lUmVnZXhlcygpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHJlZ2V4ZXMgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgcmVnZXhlc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHZhciBmdWxsID0gcmVnZXhlcy5yZWR1Y2UoZnVuY3Rpb24gKGYsIHIpIHtcbiAgICByZXR1cm4gZiArIHIuc291cmNlO1xuICB9LCBcIlwiKTtcbiAgcmV0dXJuIFJlZ0V4cChcIl5cIiArIGZ1bGwgKyBcIiRcIik7XG59XG5cbmZ1bmN0aW9uIGNvbWJpbmVFeHRyYWN0b3JzKCkge1xuICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGV4dHJhY3RvcnMgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICBleHRyYWN0b3JzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKG0pIHtcbiAgICByZXR1cm4gZXh0cmFjdG9ycy5yZWR1Y2UoZnVuY3Rpb24gKF9yZWYsIGV4KSB7XG4gICAgICB2YXIgbWVyZ2VkVmFscyA9IF9yZWZbMF0sXG4gICAgICAgICAgbWVyZ2VkWm9uZSA9IF9yZWZbMV0sXG4gICAgICAgICAgY3Vyc29yID0gX3JlZlsyXTtcblxuICAgICAgdmFyIF9leCA9IGV4KG0sIGN1cnNvciksXG4gICAgICAgICAgdmFsID0gX2V4WzBdLFxuICAgICAgICAgIHpvbmUgPSBfZXhbMV0sXG4gICAgICAgICAgbmV4dCA9IF9leFsyXTtcblxuICAgICAgcmV0dXJuIFtfZXh0ZW5kcyh7fSwgbWVyZ2VkVmFscywgdmFsKSwgem9uZSB8fCBtZXJnZWRab25lLCBuZXh0XTtcbiAgICB9LCBbe30sIG51bGwsIDFdKS5zbGljZSgwLCAyKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2Uocykge1xuICBpZiAocyA9PSBudWxsKSB7XG4gICAgcmV0dXJuIFtudWxsLCBudWxsXTtcbiAgfVxuXG4gIGZvciAodmFyIF9sZW4zID0gYXJndW1lbnRzLmxlbmd0aCwgcGF0dGVybnMgPSBuZXcgQXJyYXkoX2xlbjMgPiAxID8gX2xlbjMgLSAxIDogMCksIF9rZXkzID0gMTsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgIHBhdHRlcm5zW19rZXkzIC0gMV0gPSBhcmd1bWVudHNbX2tleTNdO1xuICB9XG5cbiAgZm9yICh2YXIgX2kgPSAwLCBfcGF0dGVybnMgPSBwYXR0ZXJuczsgX2kgPCBfcGF0dGVybnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgdmFyIF9wYXR0ZXJucyRfaSA9IF9wYXR0ZXJuc1tfaV0sXG4gICAgICAgIHJlZ2V4ID0gX3BhdHRlcm5zJF9pWzBdLFxuICAgICAgICBleHRyYWN0b3IgPSBfcGF0dGVybnMkX2lbMV07XG4gICAgdmFyIG0gPSByZWdleC5leGVjKHMpO1xuXG4gICAgaWYgKG0pIHtcbiAgICAgIHJldHVybiBleHRyYWN0b3IobSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFtudWxsLCBudWxsXTtcbn1cblxuZnVuY3Rpb24gc2ltcGxlUGFyc2UoKSB7XG4gIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwga2V5cyA9IG5ldyBBcnJheShfbGVuNCksIF9rZXk0ID0gMDsgX2tleTQgPCBfbGVuNDsgX2tleTQrKykge1xuICAgIGtleXNbX2tleTRdID0gYXJndW1lbnRzW19rZXk0XTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAobWF0Y2gsIGN1cnNvcikge1xuICAgIHZhciByZXQgPSB7fTtcbiAgICB2YXIgaTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICByZXRba2V5c1tpXV0gPSBwYXJzZUludGVnZXIobWF0Y2hbY3Vyc29yICsgaV0pO1xuICAgIH1cblxuICAgIHJldHVybiBbcmV0LCBudWxsLCBjdXJzb3IgKyBpXTtcbiAgfTtcbn0gLy8gSVNPIGFuZCBTUUwgcGFyc2luZ1xuXG5cbnZhciBvZmZzZXRSZWdleCA9IC8oPzooWil8KFsrLV1cXGRcXGQpKD86Oj8oXFxkXFxkKSk/KS87XG52YXIgaXNvRXh0ZW5kZWRab25lID0gXCIoPzpcIiArIG9mZnNldFJlZ2V4LnNvdXJjZSArIFwiPyg/OlxcXFxbKFwiICsgaWFuYVJlZ2V4LnNvdXJjZSArIFwiKVxcXFxdKT8pP1wiO1xudmFyIGlzb1RpbWVCYXNlUmVnZXggPSAvKFxcZFxcZCkoPzo6PyhcXGRcXGQpKD86Oj8oXFxkXFxkKSg/OlsuLF0oXFxkezEsMzB9KSk/KT8pPy87XG52YXIgaXNvVGltZVJlZ2V4ID0gUmVnRXhwKFwiXCIgKyBpc29UaW1lQmFzZVJlZ2V4LnNvdXJjZSArIGlzb0V4dGVuZGVkWm9uZSk7XG52YXIgaXNvVGltZUV4dGVuc2lvblJlZ2V4ID0gUmVnRXhwKFwiKD86VFwiICsgaXNvVGltZVJlZ2V4LnNvdXJjZSArIFwiKT9cIik7XG52YXIgaXNvWW1kUmVnZXggPSAvKFsrLV1cXGR7Nn18XFxkezR9KSg/Oi0/KFxcZFxcZCkoPzotPyhcXGRcXGQpKT8pPy87XG52YXIgaXNvV2Vla1JlZ2V4ID0gLyhcXGR7NH0pLT9XKFxcZFxcZCkoPzotPyhcXGQpKT8vO1xudmFyIGlzb09yZGluYWxSZWdleCA9IC8oXFxkezR9KS0/KFxcZHszfSkvO1xudmFyIGV4dHJhY3RJU09XZWVrRGF0YSA9IHNpbXBsZVBhcnNlKFwid2Vla1llYXJcIiwgXCJ3ZWVrTnVtYmVyXCIsIFwid2Vla0RheVwiKTtcbnZhciBleHRyYWN0SVNPT3JkaW5hbERhdGEgPSBzaW1wbGVQYXJzZShcInllYXJcIiwgXCJvcmRpbmFsXCIpO1xudmFyIHNxbFltZFJlZ2V4ID0gLyhcXGR7NH0pLShcXGRcXGQpLShcXGRcXGQpLzsgLy8gZHVtYmVkLWRvd24gdmVyc2lvbiBvZiB0aGUgSVNPIG9uZVxuXG52YXIgc3FsVGltZVJlZ2V4ID0gUmVnRXhwKGlzb1RpbWVCYXNlUmVnZXguc291cmNlICsgXCIgPyg/OlwiICsgb2Zmc2V0UmVnZXguc291cmNlICsgXCJ8KFwiICsgaWFuYVJlZ2V4LnNvdXJjZSArIFwiKSk/XCIpO1xudmFyIHNxbFRpbWVFeHRlbnNpb25SZWdleCA9IFJlZ0V4cChcIig/OiBcIiArIHNxbFRpbWVSZWdleC5zb3VyY2UgKyBcIik/XCIpO1xuXG5mdW5jdGlvbiBpbnQobWF0Y2gsIHBvcywgZmFsbGJhY2spIHtcbiAgdmFyIG0gPSBtYXRjaFtwb3NdO1xuICByZXR1cm4gaXNVbmRlZmluZWQobSkgPyBmYWxsYmFjayA6IHBhcnNlSW50ZWdlcihtKTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdElTT1ltZChtYXRjaCwgY3Vyc29yKSB7XG4gIHZhciBpdGVtID0ge1xuICAgIHllYXI6IGludChtYXRjaCwgY3Vyc29yKSxcbiAgICBtb250aDogaW50KG1hdGNoLCBjdXJzb3IgKyAxLCAxKSxcbiAgICBkYXk6IGludChtYXRjaCwgY3Vyc29yICsgMiwgMSlcbiAgfTtcbiAgcmV0dXJuIFtpdGVtLCBudWxsLCBjdXJzb3IgKyAzXTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdElTT1RpbWUobWF0Y2gsIGN1cnNvcikge1xuICB2YXIgaXRlbSA9IHtcbiAgICBob3VyczogaW50KG1hdGNoLCBjdXJzb3IsIDApLFxuICAgIG1pbnV0ZXM6IGludChtYXRjaCwgY3Vyc29yICsgMSwgMCksXG4gICAgc2Vjb25kczogaW50KG1hdGNoLCBjdXJzb3IgKyAyLCAwKSxcbiAgICBtaWxsaXNlY29uZHM6IHBhcnNlTWlsbGlzKG1hdGNoW2N1cnNvciArIDNdKVxuICB9O1xuICByZXR1cm4gW2l0ZW0sIG51bGwsIGN1cnNvciArIDRdO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0SVNPT2Zmc2V0KG1hdGNoLCBjdXJzb3IpIHtcbiAgdmFyIGxvY2FsID0gIW1hdGNoW2N1cnNvcl0gJiYgIW1hdGNoW2N1cnNvciArIDFdLFxuICAgICAgZnVsbE9mZnNldCA9IHNpZ25lZE9mZnNldChtYXRjaFtjdXJzb3IgKyAxXSwgbWF0Y2hbY3Vyc29yICsgMl0pLFxuICAgICAgem9uZSA9IGxvY2FsID8gbnVsbCA6IEZpeGVkT2Zmc2V0Wm9uZS5pbnN0YW5jZShmdWxsT2Zmc2V0KTtcbiAgcmV0dXJuIFt7fSwgem9uZSwgY3Vyc29yICsgM107XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RJQU5BWm9uZShtYXRjaCwgY3Vyc29yKSB7XG4gIHZhciB6b25lID0gbWF0Y2hbY3Vyc29yXSA/IElBTkFab25lLmNyZWF0ZShtYXRjaFtjdXJzb3JdKSA6IG51bGw7XG4gIHJldHVybiBbe30sIHpvbmUsIGN1cnNvciArIDFdO1xufSAvLyBJU08gdGltZSBwYXJzaW5nXG5cblxudmFyIGlzb1RpbWVPbmx5ID0gUmVnRXhwKFwiXlQ/XCIgKyBpc29UaW1lQmFzZVJlZ2V4LnNvdXJjZSArIFwiJFwiKTsgLy8gSVNPIGR1cmF0aW9uIHBhcnNpbmdcblxudmFyIGlzb0R1cmF0aW9uID0gL14tP1AoPzooPzooLT9cXGR7MSw5fSg/OlxcLlxcZHsxLDl9KT8pWSk/KD86KC0/XFxkezEsOX0oPzpcXC5cXGR7MSw5fSk/KU0pPyg/OigtP1xcZHsxLDl9KD86XFwuXFxkezEsOX0pPylXKT8oPzooLT9cXGR7MSw5fSg/OlxcLlxcZHsxLDl9KT8pRCk/KD86VCg/OigtP1xcZHsxLDl9KD86XFwuXFxkezEsOX0pPylIKT8oPzooLT9cXGR7MSw5fSg/OlxcLlxcZHsxLDl9KT8pTSk/KD86KC0/XFxkezEsMjB9KSg/OlsuLF0oLT9cXGR7MSw5fSkpP1MpPyk/KSQvO1xuXG5mdW5jdGlvbiBleHRyYWN0SVNPRHVyYXRpb24obWF0Y2gpIHtcbiAgdmFyIHMgPSBtYXRjaFswXSxcbiAgICAgIHllYXJTdHIgPSBtYXRjaFsxXSxcbiAgICAgIG1vbnRoU3RyID0gbWF0Y2hbMl0sXG4gICAgICB3ZWVrU3RyID0gbWF0Y2hbM10sXG4gICAgICBkYXlTdHIgPSBtYXRjaFs0XSxcbiAgICAgIGhvdXJTdHIgPSBtYXRjaFs1XSxcbiAgICAgIG1pbnV0ZVN0ciA9IG1hdGNoWzZdLFxuICAgICAgc2Vjb25kU3RyID0gbWF0Y2hbN10sXG4gICAgICBtaWxsaXNlY29uZHNTdHIgPSBtYXRjaFs4XTtcbiAgdmFyIGhhc05lZ2F0aXZlUHJlZml4ID0gc1swXSA9PT0gXCItXCI7XG4gIHZhciBuZWdhdGl2ZVNlY29uZHMgPSBzZWNvbmRTdHIgJiYgc2Vjb25kU3RyWzBdID09PSBcIi1cIjtcblxuICB2YXIgbWF5YmVOZWdhdGUgPSBmdW5jdGlvbiBtYXliZU5lZ2F0ZShudW0sIGZvcmNlKSB7XG4gICAgaWYgKGZvcmNlID09PSB2b2lkIDApIHtcbiAgICAgIGZvcmNlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bSAhPT0gdW5kZWZpbmVkICYmIChmb3JjZSB8fCBudW0gJiYgaGFzTmVnYXRpdmVQcmVmaXgpID8gLW51bSA6IG51bTtcbiAgfTtcblxuICByZXR1cm4gW3tcbiAgICB5ZWFyczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyh5ZWFyU3RyKSksXG4gICAgbW9udGhzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKG1vbnRoU3RyKSksXG4gICAgd2Vla3M6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcod2Vla1N0cikpLFxuICAgIGRheXM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcoZGF5U3RyKSksXG4gICAgaG91cnM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcoaG91clN0cikpLFxuICAgIG1pbnV0ZXM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcobWludXRlU3RyKSksXG4gICAgc2Vjb25kczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyhzZWNvbmRTdHIpLCBzZWNvbmRTdHIgPT09IFwiLTBcIiksXG4gICAgbWlsbGlzZWNvbmRzOiBtYXliZU5lZ2F0ZShwYXJzZU1pbGxpcyhtaWxsaXNlY29uZHNTdHIpLCBuZWdhdGl2ZVNlY29uZHMpXG4gIH1dO1xufSAvLyBUaGVzZSBhcmUgYSBsaXR0bGUgYnJhaW5kZWFkLiBFRFQgKnNob3VsZCogdGVsbCB1cyB0aGF0IHdlJ3JlIGluLCBzYXksIEFtZXJpY2EvTmV3X1lvcmtcbi8vIGFuZCBub3QganVzdCB0aGF0IHdlJ3JlIGluIC0yNDAgKnJpZ2h0IG5vdyouIEJ1dCBzaW5jZSBJIGRvbid0IHRoaW5rIHRoZXNlIGFyZSB1c2VkIHRoYXQgb2Z0ZW5cbi8vIEknbSBqdXN0IGdvaW5nIHRvIGlnbm9yZSB0aGF0XG5cblxudmFyIG9ic09mZnNldHMgPSB7XG4gIEdNVDogMCxcbiAgRURUOiAtNCAqIDYwLFxuICBFU1Q6IC01ICogNjAsXG4gIENEVDogLTUgKiA2MCxcbiAgQ1NUOiAtNiAqIDYwLFxuICBNRFQ6IC02ICogNjAsXG4gIE1TVDogLTcgKiA2MCxcbiAgUERUOiAtNyAqIDYwLFxuICBQU1Q6IC04ICogNjBcbn07XG5cbmZ1bmN0aW9uIGZyb21TdHJpbmdzKHdlZWtkYXlTdHIsIHllYXJTdHIsIG1vbnRoU3RyLCBkYXlTdHIsIGhvdXJTdHIsIG1pbnV0ZVN0ciwgc2Vjb25kU3RyKSB7XG4gIHZhciByZXN1bHQgPSB7XG4gICAgeWVhcjogeWVhclN0ci5sZW5ndGggPT09IDIgPyB1bnRydW5jYXRlWWVhcihwYXJzZUludGVnZXIoeWVhclN0cikpIDogcGFyc2VJbnRlZ2VyKHllYXJTdHIpLFxuICAgIG1vbnRoOiBtb250aHNTaG9ydC5pbmRleE9mKG1vbnRoU3RyKSArIDEsXG4gICAgZGF5OiBwYXJzZUludGVnZXIoZGF5U3RyKSxcbiAgICBob3VyOiBwYXJzZUludGVnZXIoaG91clN0ciksXG4gICAgbWludXRlOiBwYXJzZUludGVnZXIobWludXRlU3RyKVxuICB9O1xuICBpZiAoc2Vjb25kU3RyKSByZXN1bHQuc2Vjb25kID0gcGFyc2VJbnRlZ2VyKHNlY29uZFN0cik7XG5cbiAgaWYgKHdlZWtkYXlTdHIpIHtcbiAgICByZXN1bHQud2Vla2RheSA9IHdlZWtkYXlTdHIubGVuZ3RoID4gMyA/IHdlZWtkYXlzTG9uZy5pbmRleE9mKHdlZWtkYXlTdHIpICsgMSA6IHdlZWtkYXlzU2hvcnQuaW5kZXhPZih3ZWVrZGF5U3RyKSArIDE7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufSAvLyBSRkMgMjgyMi81MzIyXG5cblxudmFyIHJmYzI4MjIgPSAvXig/OihNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pLFxccyk/KFxcZHsxLDJ9KVxccyhKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYylcXHMoXFxkezIsNH0pXFxzKFxcZFxcZCk6KFxcZFxcZCkoPzo6KFxcZFxcZCkpP1xccyg/OihVVHxHTVR8W0VDTVBdW1NEXVQpfChbWnpdKXwoPzooWystXVxcZFxcZCkoXFxkXFxkKSkpJC87XG5cbmZ1bmN0aW9uIGV4dHJhY3RSRkMyODIyKG1hdGNoKSB7XG4gIHZhciB3ZWVrZGF5U3RyID0gbWF0Y2hbMV0sXG4gICAgICBkYXlTdHIgPSBtYXRjaFsyXSxcbiAgICAgIG1vbnRoU3RyID0gbWF0Y2hbM10sXG4gICAgICB5ZWFyU3RyID0gbWF0Y2hbNF0sXG4gICAgICBob3VyU3RyID0gbWF0Y2hbNV0sXG4gICAgICBtaW51dGVTdHIgPSBtYXRjaFs2XSxcbiAgICAgIHNlY29uZFN0ciA9IG1hdGNoWzddLFxuICAgICAgb2JzT2Zmc2V0ID0gbWF0Y2hbOF0sXG4gICAgICBtaWxPZmZzZXQgPSBtYXRjaFs5XSxcbiAgICAgIG9mZkhvdXJTdHIgPSBtYXRjaFsxMF0sXG4gICAgICBvZmZNaW51dGVTdHIgPSBtYXRjaFsxMV0sXG4gICAgICByZXN1bHQgPSBmcm9tU3RyaW5ncyh3ZWVrZGF5U3RyLCB5ZWFyU3RyLCBtb250aFN0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0cik7XG4gIHZhciBvZmZzZXQ7XG5cbiAgaWYgKG9ic09mZnNldCkge1xuICAgIG9mZnNldCA9IG9ic09mZnNldHNbb2JzT2Zmc2V0XTtcbiAgfSBlbHNlIGlmIChtaWxPZmZzZXQpIHtcbiAgICBvZmZzZXQgPSAwO1xuICB9IGVsc2Uge1xuICAgIG9mZnNldCA9IHNpZ25lZE9mZnNldChvZmZIb3VyU3RyLCBvZmZNaW51dGVTdHIpO1xuICB9XG5cbiAgcmV0dXJuIFtyZXN1bHQsIG5ldyBGaXhlZE9mZnNldFpvbmUob2Zmc2V0KV07XG59XG5cbmZ1bmN0aW9uIHByZXByb2Nlc3NSRkMyODIyKHMpIHtcbiAgLy8gUmVtb3ZlIGNvbW1lbnRzIGFuZCBmb2xkaW5nIHdoaXRlc3BhY2UgYW5kIHJlcGxhY2UgbXVsdGlwbGUtc3BhY2VzIHdpdGggYSBzaW5nbGUgc3BhY2VcbiAgcmV0dXJuIHMucmVwbGFjZSgvXFwoW14pXSpcXCl8W1xcblxcdF0vZywgXCIgXCIpLnJlcGxhY2UoLyhcXHNcXHMrKS9nLCBcIiBcIikudHJpbSgpO1xufSAvLyBodHRwIGRhdGVcblxuXG52YXIgcmZjMTEyMyA9IC9eKE1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1biksIChcXGRcXGQpIChKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYykgKFxcZHs0fSkgKFxcZFxcZCk6KFxcZFxcZCk6KFxcZFxcZCkgR01UJC8sXG4gICAgcmZjODUwID0gL14oTW9uZGF5fFR1ZXNkYXl8V2Vkc2RheXxUaHVyc2RheXxGcmlkYXl8U2F0dXJkYXl8U3VuZGF5KSwgKFxcZFxcZCktKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKS0oXFxkXFxkKSAoXFxkXFxkKTooXFxkXFxkKTooXFxkXFxkKSBHTVQkLyxcbiAgICBhc2NpaSA9IC9eKE1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1bikgKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKSAoIFxcZHxcXGRcXGQpIChcXGRcXGQpOihcXGRcXGQpOihcXGRcXGQpIChcXGR7NH0pJC87XG5cbmZ1bmN0aW9uIGV4dHJhY3RSRkMxMTIzT3I4NTAobWF0Y2gpIHtcbiAgdmFyIHdlZWtkYXlTdHIgPSBtYXRjaFsxXSxcbiAgICAgIGRheVN0ciA9IG1hdGNoWzJdLFxuICAgICAgbW9udGhTdHIgPSBtYXRjaFszXSxcbiAgICAgIHllYXJTdHIgPSBtYXRjaFs0XSxcbiAgICAgIGhvdXJTdHIgPSBtYXRjaFs1XSxcbiAgICAgIG1pbnV0ZVN0ciA9IG1hdGNoWzZdLFxuICAgICAgc2Vjb25kU3RyID0gbWF0Y2hbN10sXG4gICAgICByZXN1bHQgPSBmcm9tU3RyaW5ncyh3ZWVrZGF5U3RyLCB5ZWFyU3RyLCBtb250aFN0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0cik7XG4gIHJldHVybiBbcmVzdWx0LCBGaXhlZE9mZnNldFpvbmUudXRjSW5zdGFuY2VdO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0QVNDSUkobWF0Y2gpIHtcbiAgdmFyIHdlZWtkYXlTdHIgPSBtYXRjaFsxXSxcbiAgICAgIG1vbnRoU3RyID0gbWF0Y2hbMl0sXG4gICAgICBkYXlTdHIgPSBtYXRjaFszXSxcbiAgICAgIGhvdXJTdHIgPSBtYXRjaFs0XSxcbiAgICAgIG1pbnV0ZVN0ciA9IG1hdGNoWzVdLFxuICAgICAgc2Vjb25kU3RyID0gbWF0Y2hbNl0sXG4gICAgICB5ZWFyU3RyID0gbWF0Y2hbN10sXG4gICAgICByZXN1bHQgPSBmcm9tU3RyaW5ncyh3ZWVrZGF5U3RyLCB5ZWFyU3RyLCBtb250aFN0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0cik7XG4gIHJldHVybiBbcmVzdWx0LCBGaXhlZE9mZnNldFpvbmUudXRjSW5zdGFuY2VdO1xufVxuXG52YXIgaXNvWW1kV2l0aFRpbWVFeHRlbnNpb25SZWdleCA9IGNvbWJpbmVSZWdleGVzKGlzb1ltZFJlZ2V4LCBpc29UaW1lRXh0ZW5zaW9uUmVnZXgpO1xudmFyIGlzb1dlZWtXaXRoVGltZUV4dGVuc2lvblJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoaXNvV2Vla1JlZ2V4LCBpc29UaW1lRXh0ZW5zaW9uUmVnZXgpO1xudmFyIGlzb09yZGluYWxXaXRoVGltZUV4dGVuc2lvblJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoaXNvT3JkaW5hbFJlZ2V4LCBpc29UaW1lRXh0ZW5zaW9uUmVnZXgpO1xudmFyIGlzb1RpbWVDb21iaW5lZFJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoaXNvVGltZVJlZ2V4KTtcbnZhciBleHRyYWN0SVNPWW1kVGltZUFuZE9mZnNldCA9IGNvbWJpbmVFeHRyYWN0b3JzKGV4dHJhY3RJU09ZbWQsIGV4dHJhY3RJU09UaW1lLCBleHRyYWN0SVNPT2Zmc2V0LCBleHRyYWN0SUFOQVpvbmUpO1xudmFyIGV4dHJhY3RJU09XZWVrVGltZUFuZE9mZnNldCA9IGNvbWJpbmVFeHRyYWN0b3JzKGV4dHJhY3RJU09XZWVrRGF0YSwgZXh0cmFjdElTT1RpbWUsIGV4dHJhY3RJU09PZmZzZXQsIGV4dHJhY3RJQU5BWm9uZSk7XG52YXIgZXh0cmFjdElTT09yZGluYWxEYXRlQW5kVGltZSA9IGNvbWJpbmVFeHRyYWN0b3JzKGV4dHJhY3RJU09PcmRpbmFsRGF0YSwgZXh0cmFjdElTT1RpbWUsIGV4dHJhY3RJU09PZmZzZXQsIGV4dHJhY3RJQU5BWm9uZSk7XG52YXIgZXh0cmFjdElTT1RpbWVBbmRPZmZzZXQgPSBjb21iaW5lRXh0cmFjdG9ycyhleHRyYWN0SVNPVGltZSwgZXh0cmFjdElTT09mZnNldCwgZXh0cmFjdElBTkFab25lKTtcbi8qXG4gKiBAcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlSVNPRGF0ZShzKSB7XG4gIHJldHVybiBwYXJzZShzLCBbaXNvWW1kV2l0aFRpbWVFeHRlbnNpb25SZWdleCwgZXh0cmFjdElTT1ltZFRpbWVBbmRPZmZzZXRdLCBbaXNvV2Vla1dpdGhUaW1lRXh0ZW5zaW9uUmVnZXgsIGV4dHJhY3RJU09XZWVrVGltZUFuZE9mZnNldF0sIFtpc29PcmRpbmFsV2l0aFRpbWVFeHRlbnNpb25SZWdleCwgZXh0cmFjdElTT09yZGluYWxEYXRlQW5kVGltZV0sIFtpc29UaW1lQ29tYmluZWRSZWdleCwgZXh0cmFjdElTT1RpbWVBbmRPZmZzZXRdKTtcbn1cbmZ1bmN0aW9uIHBhcnNlUkZDMjgyMkRhdGUocykge1xuICByZXR1cm4gcGFyc2UocHJlcHJvY2Vzc1JGQzI4MjIocyksIFtyZmMyODIyLCBleHRyYWN0UkZDMjgyMl0pO1xufVxuZnVuY3Rpb24gcGFyc2VIVFRQRGF0ZShzKSB7XG4gIHJldHVybiBwYXJzZShzLCBbcmZjMTEyMywgZXh0cmFjdFJGQzExMjNPcjg1MF0sIFtyZmM4NTAsIGV4dHJhY3RSRkMxMTIzT3I4NTBdLCBbYXNjaWksIGV4dHJhY3RBU0NJSV0pO1xufVxuZnVuY3Rpb24gcGFyc2VJU09EdXJhdGlvbihzKSB7XG4gIHJldHVybiBwYXJzZShzLCBbaXNvRHVyYXRpb24sIGV4dHJhY3RJU09EdXJhdGlvbl0pO1xufVxudmFyIGV4dHJhY3RJU09UaW1lT25seSA9IGNvbWJpbmVFeHRyYWN0b3JzKGV4dHJhY3RJU09UaW1lKTtcbmZ1bmN0aW9uIHBhcnNlSVNPVGltZU9ubHkocykge1xuICByZXR1cm4gcGFyc2UocywgW2lzb1RpbWVPbmx5LCBleHRyYWN0SVNPVGltZU9ubHldKTtcbn1cbnZhciBzcWxZbWRXaXRoVGltZUV4dGVuc2lvblJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoc3FsWW1kUmVnZXgsIHNxbFRpbWVFeHRlbnNpb25SZWdleCk7XG52YXIgc3FsVGltZUNvbWJpbmVkUmVnZXggPSBjb21iaW5lUmVnZXhlcyhzcWxUaW1lUmVnZXgpO1xudmFyIGV4dHJhY3RJU09UaW1lT2Zmc2V0QW5kSUFOQVpvbmUgPSBjb21iaW5lRXh0cmFjdG9ycyhleHRyYWN0SVNPVGltZSwgZXh0cmFjdElTT09mZnNldCwgZXh0cmFjdElBTkFab25lKTtcbmZ1bmN0aW9uIHBhcnNlU1FMKHMpIHtcbiAgcmV0dXJuIHBhcnNlKHMsIFtzcWxZbWRXaXRoVGltZUV4dGVuc2lvblJlZ2V4LCBleHRyYWN0SVNPWW1kVGltZUFuZE9mZnNldF0sIFtzcWxUaW1lQ29tYmluZWRSZWdleCwgZXh0cmFjdElTT1RpbWVPZmZzZXRBbmRJQU5BWm9uZV0pO1xufVxuXG52YXIgSU5WQUxJRCQyID0gXCJJbnZhbGlkIER1cmF0aW9uXCI7IC8vIHVuaXQgY29udmVyc2lvbiBjb25zdGFudHNcblxudmFyIGxvd09yZGVyTWF0cml4ID0ge1xuICB3ZWVrczoge1xuICAgIGRheXM6IDcsXG4gICAgaG91cnM6IDcgKiAyNCxcbiAgICBtaW51dGVzOiA3ICogMjQgKiA2MCxcbiAgICBzZWNvbmRzOiA3ICogMjQgKiA2MCAqIDYwLFxuICAgIG1pbGxpc2Vjb25kczogNyAqIDI0ICogNjAgKiA2MCAqIDEwMDBcbiAgfSxcbiAgZGF5czoge1xuICAgIGhvdXJzOiAyNCxcbiAgICBtaW51dGVzOiAyNCAqIDYwLFxuICAgIHNlY29uZHM6IDI0ICogNjAgKiA2MCxcbiAgICBtaWxsaXNlY29uZHM6IDI0ICogNjAgKiA2MCAqIDEwMDBcbiAgfSxcbiAgaG91cnM6IHtcbiAgICBtaW51dGVzOiA2MCxcbiAgICBzZWNvbmRzOiA2MCAqIDYwLFxuICAgIG1pbGxpc2Vjb25kczogNjAgKiA2MCAqIDEwMDBcbiAgfSxcbiAgbWludXRlczoge1xuICAgIHNlY29uZHM6IDYwLFxuICAgIG1pbGxpc2Vjb25kczogNjAgKiAxMDAwXG4gIH0sXG4gIHNlY29uZHM6IHtcbiAgICBtaWxsaXNlY29uZHM6IDEwMDBcbiAgfVxufSxcbiAgICBjYXN1YWxNYXRyaXggPSBfZXh0ZW5kcyh7XG4gIHllYXJzOiB7XG4gICAgcXVhcnRlcnM6IDQsXG4gICAgbW9udGhzOiAxMixcbiAgICB3ZWVrczogNTIsXG4gICAgZGF5czogMzY1LFxuICAgIGhvdXJzOiAzNjUgKiAyNCxcbiAgICBtaW51dGVzOiAzNjUgKiAyNCAqIDYwLFxuICAgIHNlY29uZHM6IDM2NSAqIDI0ICogNjAgKiA2MCxcbiAgICBtaWxsaXNlY29uZHM6IDM2NSAqIDI0ICogNjAgKiA2MCAqIDEwMDBcbiAgfSxcbiAgcXVhcnRlcnM6IHtcbiAgICBtb250aHM6IDMsXG4gICAgd2Vla3M6IDEzLFxuICAgIGRheXM6IDkxLFxuICAgIGhvdXJzOiA5MSAqIDI0LFxuICAgIG1pbnV0ZXM6IDkxICogMjQgKiA2MCxcbiAgICBzZWNvbmRzOiA5MSAqIDI0ICogNjAgKiA2MCxcbiAgICBtaWxsaXNlY29uZHM6IDkxICogMjQgKiA2MCAqIDYwICogMTAwMFxuICB9LFxuICBtb250aHM6IHtcbiAgICB3ZWVrczogNCxcbiAgICBkYXlzOiAzMCxcbiAgICBob3VyczogMzAgKiAyNCxcbiAgICBtaW51dGVzOiAzMCAqIDI0ICogNjAsXG4gICAgc2Vjb25kczogMzAgKiAyNCAqIDYwICogNjAsXG4gICAgbWlsbGlzZWNvbmRzOiAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDBcbiAgfVxufSwgbG93T3JkZXJNYXRyaXgpLFxuICAgIGRheXNJblllYXJBY2N1cmF0ZSA9IDE0NjA5Ny4wIC8gNDAwLFxuICAgIGRheXNJbk1vbnRoQWNjdXJhdGUgPSAxNDYwOTcuMCAvIDQ4MDAsXG4gICAgYWNjdXJhdGVNYXRyaXggPSBfZXh0ZW5kcyh7XG4gIHllYXJzOiB7XG4gICAgcXVhcnRlcnM6IDQsXG4gICAgbW9udGhzOiAxMixcbiAgICB3ZWVrczogZGF5c0luWWVhckFjY3VyYXRlIC8gNyxcbiAgICBkYXlzOiBkYXlzSW5ZZWFyQWNjdXJhdGUsXG4gICAgaG91cnM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0LFxuICAgIG1pbnV0ZXM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAsXG4gICAgc2Vjb25kczogZGF5c0luWWVhckFjY3VyYXRlICogMjQgKiA2MCAqIDYwLFxuICAgIG1pbGxpc2Vjb25kczogZGF5c0luWWVhckFjY3VyYXRlICogMjQgKiA2MCAqIDYwICogMTAwMFxuICB9LFxuICBxdWFydGVyczoge1xuICAgIG1vbnRoczogMyxcbiAgICB3ZWVrczogZGF5c0luWWVhckFjY3VyYXRlIC8gMjgsXG4gICAgZGF5czogZGF5c0luWWVhckFjY3VyYXRlIC8gNCxcbiAgICBob3VyczogZGF5c0luWWVhckFjY3VyYXRlICogMjQgLyA0LFxuICAgIG1pbnV0ZXM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAgLyA0LFxuICAgIHNlY29uZHM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAgKiA2MCAvIDQsXG4gICAgbWlsbGlzZWNvbmRzOiBkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCAqIDYwICogNjAgKiAxMDAwIC8gNFxuICB9LFxuICBtb250aHM6IHtcbiAgICB3ZWVrczogZGF5c0luTW9udGhBY2N1cmF0ZSAvIDcsXG4gICAgZGF5czogZGF5c0luTW9udGhBY2N1cmF0ZSxcbiAgICBob3VyczogZGF5c0luTW9udGhBY2N1cmF0ZSAqIDI0LFxuICAgIG1pbnV0ZXM6IGRheXNJbk1vbnRoQWNjdXJhdGUgKiAyNCAqIDYwLFxuICAgIHNlY29uZHM6IGRheXNJbk1vbnRoQWNjdXJhdGUgKiAyNCAqIDYwICogNjAsXG4gICAgbWlsbGlzZWNvbmRzOiBkYXlzSW5Nb250aEFjY3VyYXRlICogMjQgKiA2MCAqIDYwICogMTAwMFxuICB9XG59LCBsb3dPcmRlck1hdHJpeCk7IC8vIHVuaXRzIG9yZGVyZWQgYnkgc2l6ZVxuXG52YXIgb3JkZXJlZFVuaXRzJDEgPSBbXCJ5ZWFyc1wiLCBcInF1YXJ0ZXJzXCIsIFwibW9udGhzXCIsIFwid2Vla3NcIiwgXCJkYXlzXCIsIFwiaG91cnNcIiwgXCJtaW51dGVzXCIsIFwic2Vjb25kc1wiLCBcIm1pbGxpc2Vjb25kc1wiXTtcbnZhciByZXZlcnNlVW5pdHMgPSBvcmRlcmVkVW5pdHMkMS5zbGljZSgwKS5yZXZlcnNlKCk7IC8vIGNsb25lIHJlYWxseSBtZWFucyBcImNyZWF0ZSBhbm90aGVyIGluc3RhbmNlIGp1c3QgbGlrZSB0aGlzIG9uZSwgYnV0IHdpdGggdGhlc2UgY2hhbmdlc1wiXG5cbmZ1bmN0aW9uIGNsb25lJDEoZHVyLCBhbHRzLCBjbGVhcikge1xuICBpZiAoY2xlYXIgPT09IHZvaWQgMCkge1xuICAgIGNsZWFyID0gZmFsc2U7XG4gIH1cblxuICAvLyBkZWVwIG1lcmdlIGZvciB2YWxzXG4gIHZhciBjb25mID0ge1xuICAgIHZhbHVlczogY2xlYXIgPyBhbHRzLnZhbHVlcyA6IF9leHRlbmRzKHt9LCBkdXIudmFsdWVzLCBhbHRzLnZhbHVlcyB8fCB7fSksXG4gICAgbG9jOiBkdXIubG9jLmNsb25lKGFsdHMubG9jKSxcbiAgICBjb252ZXJzaW9uQWNjdXJhY3k6IGFsdHMuY29udmVyc2lvbkFjY3VyYWN5IHx8IGR1ci5jb252ZXJzaW9uQWNjdXJhY3lcbiAgfTtcbiAgcmV0dXJuIG5ldyBEdXJhdGlvbihjb25mKTtcbn1cblxuZnVuY3Rpb24gYW50aVRydW5jKG4pIHtcbiAgcmV0dXJuIG4gPCAwID8gTWF0aC5mbG9vcihuKSA6IE1hdGguY2VpbChuKTtcbn0gLy8gTkI6IG11dGF0ZXMgcGFyYW1ldGVyc1xuXG5cbmZ1bmN0aW9uIGNvbnZlcnQobWF0cml4LCBmcm9tTWFwLCBmcm9tVW5pdCwgdG9NYXAsIHRvVW5pdCkge1xuICB2YXIgY29udiA9IG1hdHJpeFt0b1VuaXRdW2Zyb21Vbml0XSxcbiAgICAgIHJhdyA9IGZyb21NYXBbZnJvbVVuaXRdIC8gY29udixcbiAgICAgIHNhbWVTaWduID0gTWF0aC5zaWduKHJhdykgPT09IE1hdGguc2lnbih0b01hcFt0b1VuaXRdKSxcbiAgICAgIC8vIG9rLCBzbyB0aGlzIGlzIHdpbGQsIGJ1dCBzZWUgdGhlIG1hdHJpeCBpbiB0aGUgdGVzdHNcbiAgYWRkZWQgPSAhc2FtZVNpZ24gJiYgdG9NYXBbdG9Vbml0XSAhPT0gMCAmJiBNYXRoLmFicyhyYXcpIDw9IDEgPyBhbnRpVHJ1bmMocmF3KSA6IE1hdGgudHJ1bmMocmF3KTtcbiAgdG9NYXBbdG9Vbml0XSArPSBhZGRlZDtcbiAgZnJvbU1hcFtmcm9tVW5pdF0gLT0gYWRkZWQgKiBjb252O1xufSAvLyBOQjogbXV0YXRlcyBwYXJhbWV0ZXJzXG5cblxuZnVuY3Rpb24gbm9ybWFsaXplVmFsdWVzKG1hdHJpeCwgdmFscykge1xuICByZXZlcnNlVW5pdHMucmVkdWNlKGZ1bmN0aW9uIChwcmV2aW91cywgY3VycmVudCkge1xuICAgIGlmICghaXNVbmRlZmluZWQodmFsc1tjdXJyZW50XSkpIHtcbiAgICAgIGlmIChwcmV2aW91cykge1xuICAgICAgICBjb252ZXJ0KG1hdHJpeCwgdmFscywgcHJldmlvdXMsIHZhbHMsIGN1cnJlbnQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY3VycmVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHByZXZpb3VzO1xuICAgIH1cbiAgfSwgbnVsbCk7XG59XG4vKipcbiAqIEEgRHVyYXRpb24gb2JqZWN0IHJlcHJlc2VudHMgYSBwZXJpb2Qgb2YgdGltZSwgbGlrZSBcIjIgbW9udGhzXCIgb3IgXCIxIGRheSwgMSBob3VyXCIuIENvbmNlcHR1YWxseSwgaXQncyBqdXN0IGEgbWFwIG9mIHVuaXRzIHRvIHRoZWlyIHF1YW50aXRpZXMsIGFjY29tcGFuaWVkIGJ5IHNvbWUgYWRkaXRpb25hbCBjb25maWd1cmF0aW9uIGFuZCBtZXRob2RzIGZvciBjcmVhdGluZywgcGFyc2luZywgaW50ZXJyb2dhdGluZywgdHJhbnNmb3JtaW5nLCBhbmQgZm9ybWF0dGluZyB0aGVtLiBUaGV5IGNhbiBiZSB1c2VkIG9uIHRoZWlyIG93biBvciBpbiBjb25qdW5jdGlvbiB3aXRoIG90aGVyIEx1eG9uIHR5cGVzOyBmb3IgZXhhbXBsZSwgeW91IGNhbiB1c2Uge0BsaW5rIERhdGVUaW1lI3BsdXN9IHRvIGFkZCBhIER1cmF0aW9uIG9iamVjdCB0byBhIERhdGVUaW1lLCBwcm9kdWNpbmcgYW5vdGhlciBEYXRlVGltZS5cbiAqXG4gKiBIZXJlIGlzIGEgYnJpZWYgb3ZlcnZpZXcgb2YgY29tbW9ubHkgdXNlZCBtZXRob2RzIGFuZCBnZXR0ZXJzIGluIER1cmF0aW9uOlxuICpcbiAqICogKipDcmVhdGlvbioqIFRvIGNyZWF0ZSBhIER1cmF0aW9uLCB1c2Uge0BsaW5rIER1cmF0aW9uI2Zyb21NaWxsaXN9LCB7QGxpbmsgRHVyYXRpb24jZnJvbU9iamVjdH0sIG9yIHtAbGluayBEdXJhdGlvbiNmcm9tSVNPfS5cbiAqICogKipVbml0IHZhbHVlcyoqIFNlZSB0aGUge0BsaW5rIER1cmF0aW9uI3llYXJzfSwge0BsaW5rIER1cmF0aW9uLm1vbnRoc30sIHtAbGluayBEdXJhdGlvbiN3ZWVrc30sIHtAbGluayBEdXJhdGlvbiNkYXlzfSwge0BsaW5rIER1cmF0aW9uI2hvdXJzfSwge0BsaW5rIER1cmF0aW9uI21pbnV0ZXN9LCB7QGxpbmsgRHVyYXRpb24jc2Vjb25kc30sIHtAbGluayBEdXJhdGlvbiNtaWxsaXNlY29uZHN9IGFjY2Vzc29ycy5cbiAqICogKipDb25maWd1cmF0aW9uKiogU2VlICB7QGxpbmsgRHVyYXRpb24jbG9jYWxlfSBhbmQge0BsaW5rIER1cmF0aW9uI251bWJlcmluZ1N5c3RlbX0gYWNjZXNzb3JzLlxuICogKiAqKlRyYW5zZm9ybWF0aW9uKiogVG8gY3JlYXRlIG5ldyBEdXJhdGlvbnMgb3V0IG9mIG9sZCBvbmVzIHVzZSB7QGxpbmsgRHVyYXRpb24jcGx1c30sIHtAbGluayBEdXJhdGlvbiNtaW51c30sIHtAbGluayBEdXJhdGlvbiNub3JtYWxpemV9LCB7QGxpbmsgRHVyYXRpb24jc2V0fSwge0BsaW5rIER1cmF0aW9uI3JlY29uZmlndXJlfSwge0BsaW5rIER1cmF0aW9uI3NoaWZ0VG99LCBhbmQge0BsaW5rIER1cmF0aW9uI25lZ2F0ZX0uXG4gKiAqICoqT3V0cHV0KiogVG8gY29udmVydCB0aGUgRHVyYXRpb24gaW50byBvdGhlciByZXByZXNlbnRhdGlvbnMsIHNlZSB7QGxpbmsgRHVyYXRpb24jYXN9LCB7QGxpbmsgRHVyYXRpb24jdG9JU099LCB7QGxpbmsgRHVyYXRpb24jdG9Gb3JtYXR9LCBhbmQge0BsaW5rIER1cmF0aW9uI3RvSlNPTn1cbiAqXG4gKiBUaGVyZSdzIGFyZSBtb3JlIG1ldGhvZHMgZG9jdW1lbnRlZCBiZWxvdy4gSW4gYWRkaXRpb24sIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHN1YnRsZXIgdG9waWNzIGxpa2UgaW50ZXJuYXRpb25hbGl6YXRpb24gYW5kIHZhbGlkaXR5LCBzZWUgdGhlIGV4dGVybmFsIGRvY3VtZW50YXRpb24uXG4gKi9cblxuXG52YXIgRHVyYXRpb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGZ1bmN0aW9uIER1cmF0aW9uKGNvbmZpZykge1xuICAgIHZhciBhY2N1cmF0ZSA9IGNvbmZpZy5jb252ZXJzaW9uQWNjdXJhY3kgPT09IFwibG9uZ3Rlcm1cIiB8fCBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMudmFsdWVzID0gY29uZmlnLnZhbHVlcztcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMubG9jID0gY29uZmlnLmxvYyB8fCBMb2NhbGUuY3JlYXRlKCk7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG5cbiAgICB0aGlzLmNvbnZlcnNpb25BY2N1cmFjeSA9IGFjY3VyYXRlID8gXCJsb25ndGVybVwiIDogXCJjYXN1YWxcIjtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMuaW52YWxpZCA9IGNvbmZpZy5pbnZhbGlkIHx8IG51bGw7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG5cbiAgICB0aGlzLm1hdHJpeCA9IGFjY3VyYXRlID8gYWNjdXJhdGVNYXRyaXggOiBjYXN1YWxNYXRyaXg7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG5cbiAgICB0aGlzLmlzTHV4b25EdXJhdGlvbiA9IHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBEdXJhdGlvbiBmcm9tIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvdW50IG9mIG1pbGxpc2Vjb25kc1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgZm9yIHBhcnNpbmdcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nZW4tVVMnXSAtIHRoZSBsb2NhbGUgdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2VcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuXG5cbiAgRHVyYXRpb24uZnJvbU1pbGxpcyA9IGZ1bmN0aW9uIGZyb21NaWxsaXMoY291bnQsIG9wdHMpIHtcbiAgICByZXR1cm4gRHVyYXRpb24uZnJvbU9iamVjdCh7XG4gICAgICBtaWxsaXNlY29uZHM6IGNvdW50XG4gICAgfSwgb3B0cyk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIER1cmF0aW9uIGZyb20gYSBKYXZhU2NyaXB0IG9iamVjdCB3aXRoIGtleXMgbGlrZSAneWVhcnMnIGFuZCAnaG91cnMnLlxuICAgKiBJZiB0aGlzIG9iamVjdCBpcyBlbXB0eSB0aGVuIGEgemVybyBtaWxsaXNlY29uZHMgZHVyYXRpb24gaXMgcmV0dXJuZWQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSB0aGUgb2JqZWN0IHRvIGNyZWF0ZSB0aGUgRGF0ZVRpbWUgZnJvbVxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLnllYXJzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoucXVhcnRlcnNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5tb250aHNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai53ZWVrc1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmRheXNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5ob3Vyc1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLm1pbnV0ZXNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5zZWNvbmRzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubWlsbGlzZWNvbmRzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cz1bXV0gLSBvcHRpb25zIGZvciBjcmVhdGluZyB0aGlzIER1cmF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J2VuLVVTJ10gLSB0aGUgbG9jYWxlIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmNvbnZlcnNpb25BY2N1cmFjeT0nY2FzdWFsJ10gLSB0aGUgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgO1xuXG4gIER1cmF0aW9uLmZyb21PYmplY3QgPSBmdW5jdGlvbiBmcm9tT2JqZWN0KG9iaiwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAob2JqID09IG51bGwgfHwgdHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIikge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwiRHVyYXRpb24uZnJvbU9iamVjdDogYXJndW1lbnQgZXhwZWN0ZWQgdG8gYmUgYW4gb2JqZWN0LCBnb3QgXCIgKyAob2JqID09PSBudWxsID8gXCJudWxsXCIgOiB0eXBlb2Ygb2JqKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEdXJhdGlvbih7XG4gICAgICB2YWx1ZXM6IG5vcm1hbGl6ZU9iamVjdChvYmosIER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQpLFxuICAgICAgbG9jOiBMb2NhbGUuZnJvbU9iamVjdChvcHRzKSxcbiAgICAgIGNvbnZlcnNpb25BY2N1cmFjeTogb3B0cy5jb252ZXJzaW9uQWNjdXJhY3lcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgRHVyYXRpb24gZnJvbSBEdXJhdGlvbkxpa2UuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0IHwgbnVtYmVyIHwgRHVyYXRpb259IGR1cmF0aW9uTGlrZVxuICAgKiBPbmUgb2Y6XG4gICAqIC0gb2JqZWN0IHdpdGgga2V5cyBsaWtlICd5ZWFycycgYW5kICdob3VycycuXG4gICAqIC0gbnVtYmVyIHJlcHJlc2VudGluZyBtaWxsaXNlY29uZHNcbiAgICogLSBEdXJhdGlvbiBpbnN0YW5jZVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIDtcblxuICBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlID0gZnVuY3Rpb24gZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbkxpa2UpIHtcbiAgICBpZiAoaXNOdW1iZXIoZHVyYXRpb25MaWtlKSkge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmZyb21NaWxsaXMoZHVyYXRpb25MaWtlKTtcbiAgICB9IGVsc2UgaWYgKER1cmF0aW9uLmlzRHVyYXRpb24oZHVyYXRpb25MaWtlKSkge1xuICAgICAgcmV0dXJuIGR1cmF0aW9uTGlrZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkdXJhdGlvbkxpa2UgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBEdXJhdGlvbi5mcm9tT2JqZWN0KGR1cmF0aW9uTGlrZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIlVua25vd24gZHVyYXRpb24gYXJndW1lbnQgXCIgKyBkdXJhdGlvbkxpa2UgKyBcIiBvZiB0eXBlIFwiICsgdHlwZW9mIGR1cmF0aW9uTGlrZSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEdXJhdGlvbiBmcm9tIGFuIElTTyA4NjAxIGR1cmF0aW9uIHN0cmluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0ZXh0IHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyBmb3IgcGFyc2luZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gdGhlIGxvY2FsZSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI0R1cmF0aW9uc1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPKCdQM1k2TTFXNERUMTJIMzBNNVMnKS50b09iamVjdCgpIC8vPT4geyB5ZWFyczogMywgbW9udGhzOiA2LCB3ZWVrczogMSwgZGF5czogNCwgaG91cnM6IDEyLCBtaW51dGVzOiAzMCwgc2Vjb25kczogNSB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU08oJ1BUMjNIJykudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDIzIH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbUlTTygnUDVZM00nKS50b09iamVjdCgpIC8vPT4geyB5ZWFyczogNSwgbW9udGhzOiAzIH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICA7XG5cbiAgRHVyYXRpb24uZnJvbUlTTyA9IGZ1bmN0aW9uIGZyb21JU08odGV4dCwgb3B0cykge1xuICAgIHZhciBfcGFyc2VJU09EdXJhdGlvbiA9IHBhcnNlSVNPRHVyYXRpb24odGV4dCksXG4gICAgICAgIHBhcnNlZCA9IF9wYXJzZUlTT0R1cmF0aW9uWzBdO1xuXG4gICAgaWYgKHBhcnNlZCkge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmZyb21PYmplY3QocGFyc2VkLCBvcHRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmludmFsaWQoXCJ1bnBhcnNhYmxlXCIsIFwidGhlIGlucHV0IFxcXCJcIiArIHRleHQgKyBcIlxcXCIgY2FuJ3QgYmUgcGFyc2VkIGFzIElTTyA4NjAxXCIpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgRHVyYXRpb24gZnJvbSBhbiBJU08gODYwMSB0aW1lIHN0cmluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0ZXh0IHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyBmb3IgcGFyc2luZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gdGhlIGxvY2FsZSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVzXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU09UaW1lKCcxMToyMjozMy40NDQnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDIyLCBzZWNvbmRzOiAzMywgbWlsbGlzZWNvbmRzOiA0NDQgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnMTE6MDAnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDAsIHNlY29uZHM6IDAgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnVDExOjAwJykudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAwLCBzZWNvbmRzOiAwIH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbUlTT1RpbWUoJzExMDAnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDAsIHNlY29uZHM6IDAgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnVDExMDAnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDAsIHNlY29uZHM6IDAgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIDtcblxuICBEdXJhdGlvbi5mcm9tSVNPVGltZSA9IGZ1bmN0aW9uIGZyb21JU09UaW1lKHRleHQsIG9wdHMpIHtcbiAgICB2YXIgX3BhcnNlSVNPVGltZU9ubHkgPSBwYXJzZUlTT1RpbWVPbmx5KHRleHQpLFxuICAgICAgICBwYXJzZWQgPSBfcGFyc2VJU09UaW1lT25seVswXTtcblxuICAgIGlmIChwYXJzZWQpIHtcbiAgICAgIHJldHVybiBEdXJhdGlvbi5mcm9tT2JqZWN0KHBhcnNlZCwgb3B0cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBEdXJhdGlvbi5pbnZhbGlkKFwidW5wYXJzYWJsZVwiLCBcInRoZSBpbnB1dCBcXFwiXCIgKyB0ZXh0ICsgXCJcXFwiIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMVwiKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpbnZhbGlkIER1cmF0aW9uLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVhc29uIC0gc2ltcGxlIHN0cmluZyBvZiB3aHkgdGhpcyBkYXRldGltZSBpcyBpbnZhbGlkLiBTaG91bGQgbm90IGNvbnRhaW4gcGFyYW1ldGVycyBvciBhbnl0aGluZyBlbHNlIGRhdGEtZGVwZW5kZW50XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZXhwbGFuYXRpb249bnVsbF0gLSBsb25nZXIgZXhwbGFuYXRpb24sIG1heSBpbmNsdWRlIHBhcmFtZXRlcnMgYW5kIG90aGVyIHVzZWZ1bCBkZWJ1Z2dpbmcgaW5mb3JtYXRpb25cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICA7XG5cbiAgRHVyYXRpb24uaW52YWxpZCA9IGZ1bmN0aW9uIGludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbikge1xuICAgIGlmIChleHBsYW5hdGlvbiA9PT0gdm9pZCAwKSB7XG4gICAgICBleHBsYW5hdGlvbiA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKCFyZWFzb24pIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIm5lZWQgdG8gc3BlY2lmeSBhIHJlYXNvbiB0aGUgRHVyYXRpb24gaXMgaW52YWxpZFwiKTtcbiAgICB9XG5cbiAgICB2YXIgaW52YWxpZCA9IHJlYXNvbiBpbnN0YW5jZW9mIEludmFsaWQgPyByZWFzb24gOiBuZXcgSW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uKTtcblxuICAgIGlmIChTZXR0aW5ncy50aHJvd09uSW52YWxpZCkge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWREdXJhdGlvbkVycm9yKGludmFsaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IER1cmF0aW9uKHtcbiAgICAgICAgaW52YWxpZDogaW52YWxpZFxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgO1xuXG4gIER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQgPSBmdW5jdGlvbiBub3JtYWxpemVVbml0KHVuaXQpIHtcbiAgICB2YXIgbm9ybWFsaXplZCA9IHtcbiAgICAgIHllYXI6IFwieWVhcnNcIixcbiAgICAgIHllYXJzOiBcInllYXJzXCIsXG4gICAgICBxdWFydGVyOiBcInF1YXJ0ZXJzXCIsXG4gICAgICBxdWFydGVyczogXCJxdWFydGVyc1wiLFxuICAgICAgbW9udGg6IFwibW9udGhzXCIsXG4gICAgICBtb250aHM6IFwibW9udGhzXCIsXG4gICAgICB3ZWVrOiBcIndlZWtzXCIsXG4gICAgICB3ZWVrczogXCJ3ZWVrc1wiLFxuICAgICAgZGF5OiBcImRheXNcIixcbiAgICAgIGRheXM6IFwiZGF5c1wiLFxuICAgICAgaG91cjogXCJob3Vyc1wiLFxuICAgICAgaG91cnM6IFwiaG91cnNcIixcbiAgICAgIG1pbnV0ZTogXCJtaW51dGVzXCIsXG4gICAgICBtaW51dGVzOiBcIm1pbnV0ZXNcIixcbiAgICAgIHNlY29uZDogXCJzZWNvbmRzXCIsXG4gICAgICBzZWNvbmRzOiBcInNlY29uZHNcIixcbiAgICAgIG1pbGxpc2Vjb25kOiBcIm1pbGxpc2Vjb25kc1wiLFxuICAgICAgbWlsbGlzZWNvbmRzOiBcIm1pbGxpc2Vjb25kc1wiXG4gICAgfVt1bml0ID8gdW5pdC50b0xvd2VyQ2FzZSgpIDogdW5pdF07XG4gICAgaWYgKCFub3JtYWxpemVkKSB0aHJvdyBuZXcgSW52YWxpZFVuaXRFcnJvcih1bml0KTtcbiAgICByZXR1cm4gbm9ybWFsaXplZDtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gb2JqZWN0IGlzIGEgRHVyYXRpb24uIFdvcmtzIGFjcm9zcyBjb250ZXh0IGJvdW5kYXJpZXNcbiAgICogQHBhcmFtIHtvYmplY3R9IG9cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBEdXJhdGlvbi5pc0R1cmF0aW9uID0gZnVuY3Rpb24gaXNEdXJhdGlvbihvKSB7XG4gICAgcmV0dXJuIG8gJiYgby5pc0x1eG9uRHVyYXRpb24gfHwgZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIEdldCAgdGhlIGxvY2FsZSBvZiBhIER1cmF0aW9uLCBzdWNoICdlbi1HQidcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIDtcblxuICB2YXIgX3Byb3RvID0gRHVyYXRpb24ucHJvdG90eXBlO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRHVyYXRpb24gZm9ybWF0dGVkIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIGZvcm1hdCBzdHJpbmcuIFlvdSBtYXkgdXNlIHRoZXNlIHRva2VuczpcbiAgICogKiBgU2AgZm9yIG1pbGxpc2Vjb25kc1xuICAgKiAqIGBzYCBmb3Igc2Vjb25kc1xuICAgKiAqIGBtYCBmb3IgbWludXRlc1xuICAgKiAqIGBoYCBmb3IgaG91cnNcbiAgICogKiBgZGAgZm9yIGRheXNcbiAgICogKiBgd2AgZm9yIHdlZWtzXG4gICAqICogYE1gIGZvciBtb250aHNcbiAgICogKiBgeWAgZm9yIHllYXJzXG4gICAqIE5vdGVzOlxuICAgKiAqIEFkZCBwYWRkaW5nIGJ5IHJlcGVhdGluZyB0aGUgdG9rZW4sIGUuZy4gXCJ5eVwiIHBhZHMgdGhlIHllYXJzIHRvIHR3byBkaWdpdHMsIFwiaGhoaFwiIHBhZHMgdGhlIGhvdXJzIG91dCB0byBmb3VyIGRpZ2l0c1xuICAgKiAqIFRoZSBkdXJhdGlvbiB3aWxsIGJlIGNvbnZlcnRlZCB0byB0aGUgc2V0IG9mIHVuaXRzIGluIHRoZSBmb3JtYXQgc3RyaW5nIHVzaW5nIHtAbGluayBEdXJhdGlvbiNzaGlmdFRvfSBhbmQgdGhlIER1cmF0aW9ucydzIGNvbnZlcnNpb24gYWNjdXJhY3kgc2V0dGluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGZtdCAtIHRoZSBmb3JtYXQgc3RyaW5nXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmZsb29yPXRydWVdIC0gZmxvb3IgbnVtZXJpY2FsIHZhbHVlc1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfSkudG9Gb3JtYXQoXCJ5IGQgc1wiKSAvLz0+IFwiMSA2IDJcIlxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfSkudG9Gb3JtYXQoXCJ5eSBkZCBzc3NcIikgLy89PiBcIjAxIDA2IDAwMlwiXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMSwgZGF5czogNiwgc2Vjb25kczogMiB9KS50b0Zvcm1hdChcIk0gU1wiKSAvLz0+IFwiMTIgNTE4NDAyMDAwXCJcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgX3Byb3RvLnRvRm9ybWF0ID0gZnVuY3Rpb24gdG9Gb3JtYXQoZm10LCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIC8vIHJldmVyc2UtY29tcGF0IHNpbmNlIDEuMjsgd2UgYWx3YXlzIHJvdW5kIGRvd24gbm93LCBuZXZlciB1cCwgYW5kIHdlIGRvIGl0IGJ5IGRlZmF1bHRcbiAgICB2YXIgZm10T3B0cyA9IF9leHRlbmRzKHt9LCBvcHRzLCB7XG4gICAgICBmbG9vcjogb3B0cy5yb3VuZCAhPT0gZmFsc2UgJiYgb3B0cy5mbG9vciAhPT0gZmFsc2VcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBGb3JtYXR0ZXIuY3JlYXRlKHRoaXMubG9jLCBmbXRPcHRzKS5mb3JtYXREdXJhdGlvbkZyb21TdHJpbmcodGhpcywgZm10KSA6IElOVkFMSUQkMjtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIER1cmF0aW9uIHdpdGggYWxsIHVuaXRzIGluY2x1ZGVkLlxuICAgKiBUbyBtb2RpZnkgaXRzIGJlaGF2aW9yIHVzZSB0aGUgYGxpc3RTdHlsZWAgYW5kIGFueSBJbnRsLk51bWJlckZvcm1hdCBvcHRpb24sIHRob3VnaCBgdW5pdERpc3BsYXlgIGlzIGVzcGVjaWFsbHkgcmVsZXZhbnQuXG4gICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvSW50bC9OdW1iZXJGb3JtYXRcbiAgICogQHBhcmFtIG9wdHMgLSBPbiBvcHRpb24gb2JqZWN0IHRvIG92ZXJyaWRlIHRoZSBmb3JtYXR0aW5nLiBBY2NlcHRzIHRoZSBzYW1lIGtleXMgYXMgdGhlIG9wdGlvbnMgcGFyYW1ldGVyIG9mIHRoZSBuYXRpdmUgYEludC5OdW1iZXJGb3JtYXRgIGNvbnN0cnVjdG9yLCBhcyB3ZWxsIGFzIGBsaXN0U3R5bGVgLlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB2YXIgZHVyID0gRHVyYXRpb24uZnJvbU9iamVjdCh7IGRheXM6IDEsIGhvdXJzOiA1LCBtaW51dGVzOiA2IH0pXG4gICAqIGR1ci50b0h1bWFuKCkgLy89PiAnMSBkYXksIDUgaG91cnMsIDYgbWludXRlcydcbiAgICogZHVyLnRvSHVtYW4oeyBsaXN0U3R5bGU6IFwibG9uZ1wiIH0pIC8vPT4gJzEgZGF5LCA1IGhvdXJzLCBhbmQgNiBtaW51dGVzJ1xuICAgKiBkdXIudG9IdW1hbih7IHVuaXREaXNwbGF5OiBcInNob3J0XCIgfSkgLy89PiAnMSBkYXksIDUgaHIsIDYgbWluJ1xuICAgKiBgYGBcbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9IdW1hbiA9IGZ1bmN0aW9uIHRvSHVtYW4ob3B0cykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgdmFyIGwgPSBvcmRlcmVkVW5pdHMkMS5tYXAoZnVuY3Rpb24gKHVuaXQpIHtcbiAgICAgIHZhciB2YWwgPSBfdGhpcy52YWx1ZXNbdW5pdF07XG5cbiAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWwpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3RoaXMubG9jLm51bWJlckZvcm1hdHRlcihfZXh0ZW5kcyh7XG4gICAgICAgIHN0eWxlOiBcInVuaXRcIixcbiAgICAgICAgdW5pdERpc3BsYXk6IFwibG9uZ1wiXG4gICAgICB9LCBvcHRzLCB7XG4gICAgICAgIHVuaXQ6IHVuaXQuc2xpY2UoMCwgLTEpXG4gICAgICB9KSkuZm9ybWF0KHZhbCk7XG4gICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChuKSB7XG4gICAgICByZXR1cm4gbjtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5sb2MubGlzdEZvcm1hdHRlcihfZXh0ZW5kcyh7XG4gICAgICB0eXBlOiBcImNvbmp1bmN0aW9uXCIsXG4gICAgICBzdHlsZTogb3B0cy5saXN0U3R5bGUgfHwgXCJuYXJyb3dcIlxuICAgIH0sIG9wdHMpKS5mb3JtYXQobCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBKYXZhU2NyaXB0IG9iamVjdCB3aXRoIHRoaXMgRHVyYXRpb24ncyB2YWx1ZXMuXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMSwgZGF5czogNiwgc2Vjb25kczogMiB9KS50b09iamVjdCgpIC8vPT4geyB5ZWFyczogMSwgZGF5czogNiwgc2Vjb25kczogMiB9XG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdCgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHt9O1xuICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgdGhpcy52YWx1ZXMpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEdXJhdGlvbi5cbiAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMSNEdXJhdGlvbnNcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IHllYXJzOiAzLCBzZWNvbmRzOiA0NSB9KS50b0lTTygpIC8vPT4gJ1AzWVQ0NVMnXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBtb250aHM6IDQsIHNlY29uZHM6IDQ1IH0pLnRvSVNPKCkgLy89PiAnUDRNVDQ1UydcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IG1vbnRoczogNSB9KS50b0lTTygpIC8vPT4gJ1A1TSdcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IG1pbnV0ZXM6IDUgfSkudG9JU08oKSAvLz0+ICdQVDVNJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgbWlsbGlzZWNvbmRzOiA2IH0pLnRvSVNPKCkgLy89PiAnUFQwLjAwNlMnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9JU08gPSBmdW5jdGlvbiB0b0lTTygpIHtcbiAgICAvLyB3ZSBjb3VsZCB1c2UgdGhlIGZvcm1hdHRlciwgYnV0IHRoaXMgaXMgYW4gZWFzaWVyIHdheSB0byBnZXQgdGhlIG1pbmltdW0gc3RyaW5nXG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBudWxsO1xuICAgIHZhciBzID0gXCJQXCI7XG4gICAgaWYgKHRoaXMueWVhcnMgIT09IDApIHMgKz0gdGhpcy55ZWFycyArIFwiWVwiO1xuICAgIGlmICh0aGlzLm1vbnRocyAhPT0gMCB8fCB0aGlzLnF1YXJ0ZXJzICE9PSAwKSBzICs9IHRoaXMubW9udGhzICsgdGhpcy5xdWFydGVycyAqIDMgKyBcIk1cIjtcbiAgICBpZiAodGhpcy53ZWVrcyAhPT0gMCkgcyArPSB0aGlzLndlZWtzICsgXCJXXCI7XG4gICAgaWYgKHRoaXMuZGF5cyAhPT0gMCkgcyArPSB0aGlzLmRheXMgKyBcIkRcIjtcbiAgICBpZiAodGhpcy5ob3VycyAhPT0gMCB8fCB0aGlzLm1pbnV0ZXMgIT09IDAgfHwgdGhpcy5zZWNvbmRzICE9PSAwIHx8IHRoaXMubWlsbGlzZWNvbmRzICE9PSAwKSBzICs9IFwiVFwiO1xuICAgIGlmICh0aGlzLmhvdXJzICE9PSAwKSBzICs9IHRoaXMuaG91cnMgKyBcIkhcIjtcbiAgICBpZiAodGhpcy5taW51dGVzICE9PSAwKSBzICs9IHRoaXMubWludXRlcyArIFwiTVwiO1xuICAgIGlmICh0aGlzLnNlY29uZHMgIT09IDAgfHwgdGhpcy5taWxsaXNlY29uZHMgIT09IDApIC8vIHRoaXMgd2lsbCBoYW5kbGUgXCJmbG9hdGluZyBwb2ludCBtYWRuZXNzXCIgYnkgcmVtb3ZpbmcgZXh0cmEgZGVjaW1hbCBwbGFjZXNcbiAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzU4ODAwNC9pcy1mbG9hdGluZy1wb2ludC1tYXRoLWJyb2tlblxuICAgICAgcyArPSByb3VuZFRvKHRoaXMuc2Vjb25kcyArIHRoaXMubWlsbGlzZWNvbmRzIC8gMTAwMCwgMykgKyBcIlNcIjtcbiAgICBpZiAocyA9PT0gXCJQXCIpIHMgKz0gXCJUMFNcIjtcbiAgICByZXR1cm4gcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRHVyYXRpb24sIGZvcm1hdHRlZCBhcyBhIHRpbWUgb2YgZGF5LlxuICAgKiBOb3RlIHRoYXQgdGhpcyB3aWxsIHJldHVybiBudWxsIGlmIHRoZSBkdXJhdGlvbiBpcyBpbnZhbGlkLCBuZWdhdGl2ZSwgb3IgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuIDI0IGhvdXJzLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnN1cHByZXNzTWlsbGlzZWNvbmRzPWZhbHNlXSAtIGV4Y2x1ZGUgbWlsbGlzZWNvbmRzIGZyb20gdGhlIGZvcm1hdCBpZiB0aGV5J3JlIDBcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc1NlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBzZWNvbmRzIGZyb20gdGhlIGZvcm1hdCBpZiB0aGV5J3JlIDBcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlUHJlZml4PWZhbHNlXSAtIGluY2x1ZGUgdGhlIGBUYCBwcmVmaXhcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmZvcm1hdD0nZXh0ZW5kZWQnXSAtIGNob29zZSBiZXR3ZWVuIHRoZSBiYXNpYyBhbmQgZXh0ZW5kZWQgZm9ybWF0XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTEgfSkudG9JU09UaW1lKCkgLy89PiAnMTE6MDA6MDAuMDAwJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDExIH0pLnRvSVNPVGltZSh7IHN1cHByZXNzTWlsbGlzZWNvbmRzOiB0cnVlIH0pIC8vPT4gJzExOjAwOjAwJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDExIH0pLnRvSVNPVGltZSh7IHN1cHByZXNzU2Vjb25kczogdHJ1ZSB9KSAvLz0+ICcxMTowMCdcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxMSB9KS50b0lTT1RpbWUoeyBpbmNsdWRlUHJlZml4OiB0cnVlIH0pIC8vPT4gJ1QxMTowMDowMC4wMDAnXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTEgfSkudG9JU09UaW1lKHsgZm9ybWF0OiAnYmFzaWMnIH0pIC8vPT4gJzExMDAwMC4wMDAnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9JU09UaW1lID0gZnVuY3Rpb24gdG9JU09UaW1lKG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBudWxsO1xuICAgIHZhciBtaWxsaXMgPSB0aGlzLnRvTWlsbGlzKCk7XG4gICAgaWYgKG1pbGxpcyA8IDAgfHwgbWlsbGlzID49IDg2NDAwMDAwKSByZXR1cm4gbnVsbDtcbiAgICBvcHRzID0gX2V4dGVuZHMoe1xuICAgICAgc3VwcHJlc3NNaWxsaXNlY29uZHM6IGZhbHNlLFxuICAgICAgc3VwcHJlc3NTZWNvbmRzOiBmYWxzZSxcbiAgICAgIGluY2x1ZGVQcmVmaXg6IGZhbHNlLFxuICAgICAgZm9ybWF0OiBcImV4dGVuZGVkXCJcbiAgICB9LCBvcHRzKTtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLnNoaWZ0VG8oXCJob3Vyc1wiLCBcIm1pbnV0ZXNcIiwgXCJzZWNvbmRzXCIsIFwibWlsbGlzZWNvbmRzXCIpO1xuICAgIHZhciBmbXQgPSBvcHRzLmZvcm1hdCA9PT0gXCJiYXNpY1wiID8gXCJoaG1tXCIgOiBcImhoOm1tXCI7XG5cbiAgICBpZiAoIW9wdHMuc3VwcHJlc3NTZWNvbmRzIHx8IHZhbHVlLnNlY29uZHMgIT09IDAgfHwgdmFsdWUubWlsbGlzZWNvbmRzICE9PSAwKSB7XG4gICAgICBmbXQgKz0gb3B0cy5mb3JtYXQgPT09IFwiYmFzaWNcIiA/IFwic3NcIiA6IFwiOnNzXCI7XG5cbiAgICAgIGlmICghb3B0cy5zdXBwcmVzc01pbGxpc2Vjb25kcyB8fCB2YWx1ZS5taWxsaXNlY29uZHMgIT09IDApIHtcbiAgICAgICAgZm10ICs9IFwiLlNTU1wiO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBzdHIgPSB2YWx1ZS50b0Zvcm1hdChmbXQpO1xuXG4gICAgaWYgKG9wdHMuaW5jbHVkZVByZWZpeCkge1xuICAgICAgc3RyID0gXCJUXCIgKyBzdHI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0cjtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gSlNPTi5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9JU08oKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gZGVidWdnaW5nLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMudG9JU08oKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbiBtaWxsaXNlY29uZHMgdmFsdWUgb2YgdGhpcyBEdXJhdGlvbi5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b01pbGxpcyA9IGZ1bmN0aW9uIHRvTWlsbGlzKCkge1xuICAgIHJldHVybiB0aGlzLmFzKFwibWlsbGlzZWNvbmRzXCIpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG1pbGxpc2Vjb25kcyB2YWx1ZSBvZiB0aGlzIER1cmF0aW9uLiBBbGlhcyBvZiB7QGxpbmsgdG9NaWxsaXN9XG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8udmFsdWVPZiA9IGZ1bmN0aW9uIHZhbHVlT2YoKSB7XG4gICAgcmV0dXJuIHRoaXMudG9NaWxsaXMoKTtcbiAgfVxuICAvKipcbiAgICogTWFrZSB0aGlzIER1cmF0aW9uIGxvbmdlciBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC4gUmV0dXJuIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uXG4gICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSBUaGUgYW1vdW50IHRvIGFkZC4gRWl0aGVyIGEgTHV4b24gRHVyYXRpb24sIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgdGhlIG9iamVjdCBhcmd1bWVudCB0byBEdXJhdGlvbi5mcm9tT2JqZWN0KClcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBsdXMgPSBmdW5jdGlvbiBwbHVzKGR1cmF0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIHZhciBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKSxcbiAgICAgICAgcmVzdWx0ID0ge307XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG9yZGVyZWRVbml0cyQxKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICAgIHZhciBrID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eShkdXIudmFsdWVzLCBrKSB8fCBoYXNPd25Qcm9wZXJ0eSh0aGlzLnZhbHVlcywgaykpIHtcbiAgICAgICAgcmVzdWx0W2tdID0gZHVyLmdldChrKSArIHRoaXMuZ2V0KGspO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjbG9uZSQxKHRoaXMsIHtcbiAgICAgIHZhbHVlczogcmVzdWx0XG4gICAgfSwgdHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIE1ha2UgdGhpcyBEdXJhdGlvbiBzaG9ydGVyIGJ5IHRoZSBzcGVjaWZpZWQgYW1vdW50LiBSZXR1cm4gYSBuZXdseS1jb25zdHJ1Y3RlZCBEdXJhdGlvbi5cbiAgICogQHBhcmFtIHtEdXJhdGlvbnxPYmplY3R8bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBhbW91bnQgdG8gc3VidHJhY3QuIEVpdGhlciBhIEx1eG9uIER1cmF0aW9uLCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIHRoZSBvYmplY3QgYXJndW1lbnQgdG8gRHVyYXRpb24uZnJvbU9iamVjdCgpXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5taW51cyA9IGZ1bmN0aW9uIG1pbnVzKGR1cmF0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIHZhciBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKTtcbiAgICByZXR1cm4gdGhpcy5wbHVzKGR1ci5uZWdhdGUoKSk7XG4gIH1cbiAgLyoqXG4gICAqIFNjYWxlIHRoaXMgRHVyYXRpb24gYnkgdGhlIHNwZWNpZmllZCBhbW91bnQuIFJldHVybiBhIG5ld2x5LWNvbnN0cnVjdGVkIER1cmF0aW9uLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiAtIFRoZSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIHVuaXQuIEFyaXR5IGlzIDEgb3IgMjogdGhlIHZhbHVlIG9mIHRoZSB1bml0IGFuZCwgb3B0aW9uYWxseSwgdGhlIHVuaXQgbmFtZS4gTXVzdCByZXR1cm4gYSBudW1iZXIuXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMSwgbWludXRlczogMzAgfSkubWFwVW5pdHMoeCA9PiB4ICogMikgLy89PiB7IGhvdXJzOiAyLCBtaW51dGVzOiA2MCB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMSwgbWludXRlczogMzAgfSkubWFwVW5pdHMoKHgsIHUpID0+IHUgPT09IFwiaG91clwiID8geCAqIDIgOiB4KSAvLz0+IHsgaG91cnM6IDIsIG1pbnV0ZXM6IDMwIH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLm1hcFVuaXRzID0gZnVuY3Rpb24gbWFwVW5pdHMoZm4pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuXG4gICAgZm9yICh2YXIgX2kgPSAwLCBfT2JqZWN0JGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLnZhbHVlcyk7IF9pIDwgX09iamVjdCRrZXlzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIGsgPSBfT2JqZWN0JGtleXNbX2ldO1xuICAgICAgcmVzdWx0W2tdID0gYXNOdW1iZXIoZm4odGhpcy52YWx1ZXNba10sIGspKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xvbmUkMSh0aGlzLCB7XG4gICAgICB2YWx1ZXM6IHJlc3VsdFxuICAgIH0sIHRydWUpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIHVuaXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gYSB1bml0IHN1Y2ggYXMgJ21pbnV0ZScgb3IgJ2RheSdcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDIsIGRheXM6IDN9KS5nZXQoJ3llYXJzJykgLy89PiAyXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3Qoe3llYXJzOiAyLCBkYXlzOiAzfSkuZ2V0KCdtb250aHMnKSAvLz0+IDBcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDIsIGRheXM6IDN9KS5nZXQoJ2RheXMnKSAvLz0+IDNcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5nZXQgPSBmdW5jdGlvbiBnZXQodW5pdCkge1xuICAgIHJldHVybiB0aGlzW0R1cmF0aW9uLm5vcm1hbGl6ZVVuaXQodW5pdCldO1xuICB9XG4gIC8qKlxuICAgKiBcIlNldFwiIHRoZSB2YWx1ZXMgb2Ygc3BlY2lmaWVkIHVuaXRzLiBSZXR1cm4gYSBuZXdseS1jb25zdHJ1Y3RlZCBEdXJhdGlvbi5cbiAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlcyAtIGEgbWFwcGluZyBvZiB1bml0cyB0byBudW1iZXJzXG4gICAqIEBleGFtcGxlIGR1ci5zZXQoeyB5ZWFyczogMjAxNyB9KVxuICAgKiBAZXhhbXBsZSBkdXIuc2V0KHsgaG91cnM6IDgsIG1pbnV0ZXM6IDMwIH0pXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zZXQgPSBmdW5jdGlvbiBzZXQodmFsdWVzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuXG4gICAgdmFyIG1peGVkID0gX2V4dGVuZHMoe30sIHRoaXMudmFsdWVzLCBub3JtYWxpemVPYmplY3QodmFsdWVzLCBEdXJhdGlvbi5ub3JtYWxpemVVbml0KSk7XG5cbiAgICByZXR1cm4gY2xvbmUkMSh0aGlzLCB7XG4gICAgICB2YWx1ZXM6IG1peGVkXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIGxvY2FsZSBhbmQvb3IgbnVtYmVyaW5nU3lzdGVtLiAgUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIER1cmF0aW9uLlxuICAgKiBAZXhhbXBsZSBkdXIucmVjb25maWd1cmUoeyBsb2NhbGU6ICdlbi1HQicgfSlcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlY29uZmlndXJlID0gZnVuY3Rpb24gcmVjb25maWd1cmUoX3RlbXApIHtcbiAgICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgICAgICBsb2NhbGUgPSBfcmVmLmxvY2FsZSxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtID0gX3JlZi5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIGNvbnZlcnNpb25BY2N1cmFjeSA9IF9yZWYuY29udmVyc2lvbkFjY3VyYWN5O1xuXG4gICAgdmFyIGxvYyA9IHRoaXMubG9jLmNsb25lKHtcbiAgICAgIGxvY2FsZTogbG9jYWxlLFxuICAgICAgbnVtYmVyaW5nU3lzdGVtOiBudW1iZXJpbmdTeXN0ZW1cbiAgICB9KSxcbiAgICAgICAgb3B0cyA9IHtcbiAgICAgIGxvYzogbG9jXG4gICAgfTtcblxuICAgIGlmIChjb252ZXJzaW9uQWNjdXJhY3kpIHtcbiAgICAgIG9wdHMuY29udmVyc2lvbkFjY3VyYWN5ID0gY29udmVyc2lvbkFjY3VyYWN5O1xuICAgIH1cblxuICAgIHJldHVybiBjbG9uZSQxKHRoaXMsIG9wdHMpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGxlbmd0aCBvZiB0aGUgZHVyYXRpb24gaW4gdGhlIHNwZWNpZmllZCB1bml0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIGEgdW5pdCBzdWNoIGFzICdtaW51dGVzJyBvciAnZGF5cydcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDF9KS5hcygnZGF5cycpIC8vPT4gMzY1XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3Qoe3llYXJzOiAxfSkuYXMoJ21vbnRocycpIC8vPT4gMTJcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7aG91cnM6IDYwfSkuYXMoJ2RheXMnKSAvLz0+IDIuNVxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmFzID0gZnVuY3Rpb24gYXModW5pdCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnNoaWZ0VG8odW5pdCkuZ2V0KHVuaXQpIDogTmFOO1xuICB9XG4gIC8qKlxuICAgKiBSZWR1Y2UgdGhpcyBEdXJhdGlvbiB0byBpdHMgY2Fub25pY2FsIHJlcHJlc2VudGF0aW9uIGluIGl0cyBjdXJyZW50IHVuaXRzLlxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDIsIGRheXM6IDUwMDAgfSkubm9ybWFsaXplKCkudG9PYmplY3QoKSAvLz0+IHsgeWVhcnM6IDE1LCBkYXlzOiAyNTUgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDEyLCBtaW51dGVzOiAtNDUgfSkubm9ybWFsaXplKCkudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAxNSB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5ub3JtYWxpemUgPSBmdW5jdGlvbiBub3JtYWxpemUoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIHZhciB2YWxzID0gdGhpcy50b09iamVjdCgpO1xuICAgIG5vcm1hbGl6ZVZhbHVlcyh0aGlzLm1hdHJpeCwgdmFscyk7XG4gICAgcmV0dXJuIGNsb25lJDEodGhpcywge1xuICAgICAgdmFsdWVzOiB2YWxzXG4gICAgfSwgdHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnQgdGhpcyBEdXJhdGlvbiBpbnRvIGl0cyByZXByZXNlbnRhdGlvbiBpbiBhIGRpZmZlcmVudCBzZXQgb2YgdW5pdHMuXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMSwgc2Vjb25kczogMzAgfSkuc2hpZnRUbygnbWludXRlcycsICdtaWxsaXNlY29uZHMnKS50b09iamVjdCgpIC8vPT4geyBtaW51dGVzOiA2MCwgbWlsbGlzZWNvbmRzOiAzMDAwMCB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zaGlmdFRvID0gZnVuY3Rpb24gc2hpZnRUbygpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgdW5pdHMgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICB1bml0c1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAodW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB1bml0cyA9IHVuaXRzLm1hcChmdW5jdGlvbiAodSkge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQodSk7XG4gICAgfSk7XG4gICAgdmFyIGJ1aWx0ID0ge30sXG4gICAgICAgIGFjY3VtdWxhdGVkID0ge30sXG4gICAgICAgIHZhbHMgPSB0aGlzLnRvT2JqZWN0KCk7XG4gICAgdmFyIGxhc3RVbml0O1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2Uob3JkZXJlZFVuaXRzJDEpLCBfc3RlcDI7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMigpKS5kb25lOykge1xuICAgICAgdmFyIGsgPSBfc3RlcDIudmFsdWU7XG5cbiAgICAgIGlmICh1bml0cy5pbmRleE9mKGspID49IDApIHtcbiAgICAgICAgbGFzdFVuaXQgPSBrO1xuICAgICAgICB2YXIgb3duID0gMDsgLy8gYW55dGhpbmcgd2UgaGF2ZW4ndCBib2lsZWQgZG93biB5ZXQgc2hvdWxkIGdldCBib2lsZWQgdG8gdGhpcyB1bml0XG5cbiAgICAgICAgZm9yICh2YXIgYWsgaW4gYWNjdW11bGF0ZWQpIHtcbiAgICAgICAgICBvd24gKz0gdGhpcy5tYXRyaXhbYWtdW2tdICogYWNjdW11bGF0ZWRbYWtdO1xuICAgICAgICAgIGFjY3VtdWxhdGVkW2FrXSA9IDA7XG4gICAgICAgIH0gLy8gcGx1cyBhbnl0aGluZyB0aGF0J3MgYWxyZWFkeSBpbiB0aGlzIHVuaXRcblxuXG4gICAgICAgIGlmIChpc051bWJlcih2YWxzW2tdKSkge1xuICAgICAgICAgIG93biArPSB2YWxzW2tdO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGkgPSBNYXRoLnRydW5jKG93bik7XG4gICAgICAgIGJ1aWx0W2tdID0gaTtcbiAgICAgICAgYWNjdW11bGF0ZWRba10gPSAob3duICogMTAwMCAtIGkgKiAxMDAwKSAvIDEwMDA7IC8vIHBsdXMgYW55dGhpbmcgZnVydGhlciBkb3duIHRoZSBjaGFpbiB0aGF0IHNob3VsZCBiZSByb2xsZWQgdXAgaW4gdG8gdGhpc1xuXG4gICAgICAgIGZvciAodmFyIGRvd24gaW4gdmFscykge1xuICAgICAgICAgIGlmIChvcmRlcmVkVW5pdHMkMS5pbmRleE9mKGRvd24pID4gb3JkZXJlZFVuaXRzJDEuaW5kZXhPZihrKSkge1xuICAgICAgICAgICAgY29udmVydCh0aGlzLm1hdHJpeCwgdmFscywgZG93biwgYnVpbHQsIGspO1xuICAgICAgICAgIH1cbiAgICAgICAgfSAvLyBvdGhlcndpc2UsIGtlZXAgaXQgaW4gdGhlIHdpbmdzIHRvIGJvaWwgaXQgbGF0ZXJcblxuICAgICAgfSBlbHNlIGlmIChpc051bWJlcih2YWxzW2tdKSkge1xuICAgICAgICBhY2N1bXVsYXRlZFtrXSA9IHZhbHNba107XG4gICAgICB9XG4gICAgfSAvLyBhbnl0aGluZyBsZWZ0b3ZlciBiZWNvbWVzIHRoZSBkZWNpbWFsIGZvciB0aGUgbGFzdCB1bml0XG4gICAgLy8gbGFzdFVuaXQgbXVzdCBiZSBkZWZpbmVkIHNpbmNlIHVuaXRzIGlzIG5vdCBlbXB0eVxuXG5cbiAgICBmb3IgKHZhciBrZXkgaW4gYWNjdW11bGF0ZWQpIHtcbiAgICAgIGlmIChhY2N1bXVsYXRlZFtrZXldICE9PSAwKSB7XG4gICAgICAgIGJ1aWx0W2xhc3RVbml0XSArPSBrZXkgPT09IGxhc3RVbml0ID8gYWNjdW11bGF0ZWRba2V5XSA6IGFjY3VtdWxhdGVkW2tleV0gLyB0aGlzLm1hdHJpeFtsYXN0VW5pdF1ba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2xvbmUkMSh0aGlzLCB7XG4gICAgICB2YWx1ZXM6IGJ1aWx0XG4gICAgfSwgdHJ1ZSkubm9ybWFsaXplKCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbmVnYXRpdmUgb2YgdGhpcyBEdXJhdGlvbi5cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxLCBzZWNvbmRzOiAzMCB9KS5uZWdhdGUoKS50b09iamVjdCgpIC8vPT4geyBob3VyczogLTEsIHNlY29uZHM6IC0zMCB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5uZWdhdGUgPSBmdW5jdGlvbiBuZWdhdGUoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIHZhciBuZWdhdGVkID0ge307XG5cbiAgICBmb3IgKHZhciBfaTIgPSAwLCBfT2JqZWN0JGtleXMyID0gT2JqZWN0LmtleXModGhpcy52YWx1ZXMpOyBfaTIgPCBfT2JqZWN0JGtleXMyLmxlbmd0aDsgX2kyKyspIHtcbiAgICAgIHZhciBrID0gX09iamVjdCRrZXlzMltfaTJdO1xuICAgICAgbmVnYXRlZFtrXSA9IHRoaXMudmFsdWVzW2tdID09PSAwID8gMCA6IC10aGlzLnZhbHVlc1trXTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xvbmUkMSh0aGlzLCB7XG4gICAgICB2YWx1ZXM6IG5lZ2F0ZWRcbiAgICB9LCB0cnVlKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSB5ZWFycy5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIDtcblxuICAvKipcbiAgICogRXF1YWxpdHkgY2hlY2tcbiAgICogVHdvIER1cmF0aW9ucyBhcmUgZXF1YWwgaWZmIHRoZXkgaGF2ZSB0aGUgc2FtZSB1bml0cyBhbmQgdGhlIHNhbWUgdmFsdWVzIGZvciBlYWNoIHVuaXQuXG4gICAqIEBwYXJhbSB7RHVyYXRpb259IG90aGVyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBfcHJvdG8uZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzKG90aGVyKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQgfHwgIW90aGVyLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubG9jLmVxdWFscyhvdGhlci5sb2MpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXEodjEsIHYyKSB7XG4gICAgICAvLyBDb25zaWRlciAwIGFuZCB1bmRlZmluZWQgYXMgZXF1YWxcbiAgICAgIGlmICh2MSA9PT0gdW5kZWZpbmVkIHx8IHYxID09PSAwKSByZXR1cm4gdjIgPT09IHVuZGVmaW5lZCB8fCB2MiA9PT0gMDtcbiAgICAgIHJldHVybiB2MSA9PT0gdjI7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2Uob3JkZXJlZFVuaXRzJDEpLCBfc3RlcDM7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMygpKS5kb25lOykge1xuICAgICAgdmFyIHUgPSBfc3RlcDMudmFsdWU7XG5cbiAgICAgIGlmICghZXEodGhpcy52YWx1ZXNbdV0sIG90aGVyLnZhbHVlc1t1XSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhEdXJhdGlvbiwgW3tcbiAgICBrZXk6IFwibG9jYWxlXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5sb2MubG9jYWxlIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBudW1iZXJpbmcgc3lzdGVtIG9mIGEgRHVyYXRpb24sIHN1Y2ggJ2JlbmcnLiBUaGUgbnVtYmVyaW5nIHN5c3RlbSBpcyB1c2VkIHdoZW4gZm9ybWF0dGluZyB0aGUgRHVyYXRpb25cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJudW1iZXJpbmdTeXN0ZW1cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmxvYy5udW1iZXJpbmdTeXN0ZW0gOiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ5ZWFyc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLnllYXJzIHx8IDAgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcXVhcnRlcnMuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInF1YXJ0ZXJzXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMucXVhcnRlcnMgfHwgMCA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtb250aHMuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm1vbnRoc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLm1vbnRocyB8fCAwIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHdlZWtzXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIndlZWtzXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMud2Vla3MgfHwgMCA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkYXlzLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJkYXlzXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMuZGF5cyB8fCAwIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGhvdXJzLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJob3Vyc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLmhvdXJzIHx8IDAgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWludXRlcy5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibWludXRlc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLm1pbnV0ZXMgfHwgMCA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzZWNvbmRzLlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInNlY29uZHNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5zZWNvbmRzIHx8IDAgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWlsbGlzZWNvbmRzLlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm1pbGxpc2Vjb25kc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLm1pbGxpc2Vjb25kcyB8fCAwIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIER1cmF0aW9uIGlzIGludmFsaWQuIEludmFsaWQgZHVyYXRpb25zIGFyZSByZXR1cm5lZCBieSBkaWZmIG9wZXJhdGlvbnNcbiAgICAgKiBvbiBpbnZhbGlkIERhdGVUaW1lcyBvciBJbnRlcnZhbHMuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImlzVmFsaWRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmludmFsaWQgPT09IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gZXJyb3IgY29kZSBpZiB0aGlzIER1cmF0aW9uIGJlY2FtZSBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBEdXJhdGlvbiBpcyB2YWxpZFxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImludmFsaWRSZWFzb25cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmludmFsaWQgPyB0aGlzLmludmFsaWQucmVhc29uIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBleHBsYW5hdGlvbiBvZiB3aHkgdGhpcyBEdXJhdGlvbiBiZWNhbWUgaW52YWxpZCwgb3IgbnVsbCBpZiB0aGUgRHVyYXRpb24gaXMgdmFsaWRcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiaW52YWxpZEV4cGxhbmF0aW9uXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLmV4cGxhbmF0aW9uIDogbnVsbDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRHVyYXRpb247XG59KCk7XG5cbnZhciBJTlZBTElEJDEgPSBcIkludmFsaWQgSW50ZXJ2YWxcIjsgLy8gY2hlY2tzIGlmIHRoZSBzdGFydCBpcyBlcXVhbCB0byBvciBiZWZvcmUgdGhlIGVuZFxuXG5mdW5jdGlvbiB2YWxpZGF0ZVN0YXJ0RW5kKHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCFzdGFydCB8fCAhc3RhcnQuaXNWYWxpZCkge1xuICAgIHJldHVybiBJbnRlcnZhbC5pbnZhbGlkKFwibWlzc2luZyBvciBpbnZhbGlkIHN0YXJ0XCIpO1xuICB9IGVsc2UgaWYgKCFlbmQgfHwgIWVuZC5pc1ZhbGlkKSB7XG4gICAgcmV0dXJuIEludGVydmFsLmludmFsaWQoXCJtaXNzaW5nIG9yIGludmFsaWQgZW5kXCIpO1xuICB9IGVsc2UgaWYgKGVuZCA8IHN0YXJ0KSB7XG4gICAgcmV0dXJuIEludGVydmFsLmludmFsaWQoXCJlbmQgYmVmb3JlIHN0YXJ0XCIsIFwiVGhlIGVuZCBvZiBhbiBpbnRlcnZhbCBtdXN0IGJlIGFmdGVyIGl0cyBzdGFydCwgYnV0IHlvdSBoYWQgc3RhcnQ9XCIgKyBzdGFydC50b0lTTygpICsgXCIgYW5kIGVuZD1cIiArIGVuZC50b0lTTygpKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuLyoqXG4gKiBBbiBJbnRlcnZhbCBvYmplY3QgcmVwcmVzZW50cyBhIGhhbGYtb3BlbiBpbnRlcnZhbCBvZiB0aW1lLCB3aGVyZSBlYWNoIGVuZHBvaW50IGlzIGEge0BsaW5rIERhdGVUaW1lfS4gQ29uY2VwdHVhbGx5LCBpdCdzIGEgY29udGFpbmVyIGZvciB0aG9zZSB0d28gZW5kcG9pbnRzLCBhY2NvbXBhbmllZCBieSBtZXRob2RzIGZvciBjcmVhdGluZywgcGFyc2luZywgaW50ZXJyb2dhdGluZywgY29tcGFyaW5nLCB0cmFuc2Zvcm1pbmcsIGFuZCBmb3JtYXR0aW5nIHRoZW0uXG4gKlxuICogSGVyZSBpcyBhIGJyaWVmIG92ZXJ2aWV3IG9mIHRoZSBtb3N0IGNvbW1vbmx5IHVzZWQgbWV0aG9kcyBhbmQgZ2V0dGVycyBpbiBJbnRlcnZhbDpcbiAqXG4gKiAqICoqQ3JlYXRpb24qKiBUbyBjcmVhdGUgYW4gSW50ZXJ2YWwsIHVzZSB7QGxpbmsgSW50ZXJ2YWwjZnJvbURhdGVUaW1lc30sIHtAbGluayBJbnRlcnZhbCNhZnRlcn0sIHtAbGluayBJbnRlcnZhbCNiZWZvcmV9LCBvciB7QGxpbmsgSW50ZXJ2YWwjZnJvbUlTT30uXG4gKiAqICoqQWNjZXNzb3JzKiogVXNlIHtAbGluayBJbnRlcnZhbCNzdGFydH0gYW5kIHtAbGluayBJbnRlcnZhbCNlbmR9IHRvIGdldCB0aGUgc3RhcnQgYW5kIGVuZC5cbiAqICogKipJbnRlcnJvZ2F0aW9uKiogVG8gYW5hbHl6ZSB0aGUgSW50ZXJ2YWwsIHVzZSB7QGxpbmsgSW50ZXJ2YWwjY291bnR9LCB7QGxpbmsgSW50ZXJ2YWwjbGVuZ3RofSwge0BsaW5rIEludGVydmFsI2hhc1NhbWV9LCB7QGxpbmsgSW50ZXJ2YWwjY29udGFpbnN9LCB7QGxpbmsgSW50ZXJ2YWwjaXNBZnRlcn0sIG9yIHtAbGluayBJbnRlcnZhbCNpc0JlZm9yZX0uXG4gKiAqICoqVHJhbnNmb3JtYXRpb24qKiBUbyBjcmVhdGUgb3RoZXIgSW50ZXJ2YWxzIG91dCBvZiB0aGlzIG9uZSwgdXNlIHtAbGluayBJbnRlcnZhbCNzZXR9LCB7QGxpbmsgSW50ZXJ2YWwjc3BsaXRBdH0sIHtAbGluayBJbnRlcnZhbCNzcGxpdEJ5fSwge0BsaW5rIEludGVydmFsI2RpdmlkZUVxdWFsbHl9LCB7QGxpbmsgSW50ZXJ2YWwjbWVyZ2V9LCB7QGxpbmsgSW50ZXJ2YWwjeG9yfSwge0BsaW5rIEludGVydmFsI3VuaW9ufSwge0BsaW5rIEludGVydmFsI2ludGVyc2VjdGlvbn0sIG9yIHtAbGluayBJbnRlcnZhbCNkaWZmZXJlbmNlfS5cbiAqICogKipDb21wYXJpc29uKiogVG8gY29tcGFyZSB0aGlzIEludGVydmFsIHRvIGFub3RoZXIgb25lLCB1c2Uge0BsaW5rIEludGVydmFsI2VxdWFsc30sIHtAbGluayBJbnRlcnZhbCNvdmVybGFwc30sIHtAbGluayBJbnRlcnZhbCNhYnV0c1N0YXJ0fSwge0BsaW5rIEludGVydmFsI2FidXRzRW5kfSwge0BsaW5rIEludGVydmFsI2VuZ3VsZnN9XG4gKiAqICoqT3V0cHV0KiogVG8gY29udmVydCB0aGUgSW50ZXJ2YWwgaW50byBvdGhlciByZXByZXNlbnRhdGlvbnMsIHNlZSB7QGxpbmsgSW50ZXJ2YWwjdG9TdHJpbmd9LCB7QGxpbmsgSW50ZXJ2YWwjdG9JU099LCB7QGxpbmsgSW50ZXJ2YWwjdG9JU09EYXRlfSwge0BsaW5rIEludGVydmFsI3RvSVNPVGltZX0sIHtAbGluayBJbnRlcnZhbCN0b0Zvcm1hdH0sIGFuZCB7QGxpbmsgSW50ZXJ2YWwjdG9EdXJhdGlvbn0uXG4gKi9cblxuXG52YXIgSW50ZXJ2YWwgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGZ1bmN0aW9uIEludGVydmFsKGNvbmZpZykge1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucyA9IGNvbmZpZy5zdGFydDtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMuZSA9IGNvbmZpZy5lbmQ7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG5cbiAgICB0aGlzLmludmFsaWQgPSBjb25maWcuaW52YWxpZCB8fCBudWxsO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgdGhpcy5pc0x1eG9uSW50ZXJ2YWwgPSB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW52YWxpZCBJbnRlcnZhbC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlYXNvbiAtIHNpbXBsZSBzdHJpbmcgb2Ygd2h5IHRoaXMgSW50ZXJ2YWwgaXMgaW52YWxpZC4gU2hvdWxkIG5vdCBjb250YWluIHBhcmFtZXRlcnMgb3IgYW55dGhpbmcgZWxzZSBkYXRhLWRlcGVuZGVudFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2V4cGxhbmF0aW9uPW51bGxdIC0gbG9uZ2VyIGV4cGxhbmF0aW9uLCBtYXkgaW5jbHVkZSBwYXJhbWV0ZXJzIGFuZCBvdGhlciB1c2VmdWwgZGVidWdnaW5nIGluZm9ybWF0aW9uXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cblxuXG4gIEludGVydmFsLmludmFsaWQgPSBmdW5jdGlvbiBpbnZhbGlkKHJlYXNvbiwgZXhwbGFuYXRpb24pIHtcbiAgICBpZiAoZXhwbGFuYXRpb24gPT09IHZvaWQgMCkge1xuICAgICAgZXhwbGFuYXRpb24gPSBudWxsO1xuICAgIH1cblxuICAgIGlmICghcmVhc29uKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJuZWVkIHRvIHNwZWNpZnkgYSByZWFzb24gdGhlIEludGVydmFsIGlzIGludmFsaWRcIik7XG4gICAgfVxuXG4gICAgdmFyIGludmFsaWQgPSByZWFzb24gaW5zdGFuY2VvZiBJbnZhbGlkID8gcmVhc29uIDogbmV3IEludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbik7XG5cbiAgICBpZiAoU2V0dGluZ3MudGhyb3dPbkludmFsaWQpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkSW50ZXJ2YWxFcnJvcihpbnZhbGlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBJbnRlcnZhbCh7XG4gICAgICAgIGludmFsaWQ6IGludmFsaWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGFuIEludGVydmFsIGZyb20gYSBzdGFydCBEYXRlVGltZSBhbmQgYW4gZW5kIERhdGVUaW1lLiBJbmNsdXNpdmUgb2YgdGhlIHN0YXJ0IGJ1dCBub3QgdGhlIGVuZC5cbiAgICogQHBhcmFtIHtEYXRlVGltZXxEYXRlfE9iamVjdH0gc3RhcnRcbiAgICogQHBhcmFtIHtEYXRlVGltZXxEYXRlfE9iamVjdH0gZW5kXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgO1xuXG4gIEludGVydmFsLmZyb21EYXRlVGltZXMgPSBmdW5jdGlvbiBmcm9tRGF0ZVRpbWVzKHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgYnVpbHRTdGFydCA9IGZyaWVuZGx5RGF0ZVRpbWUoc3RhcnQpLFxuICAgICAgICBidWlsdEVuZCA9IGZyaWVuZGx5RGF0ZVRpbWUoZW5kKTtcbiAgICB2YXIgdmFsaWRhdGVFcnJvciA9IHZhbGlkYXRlU3RhcnRFbmQoYnVpbHRTdGFydCwgYnVpbHRFbmQpO1xuXG4gICAgaWYgKHZhbGlkYXRlRXJyb3IgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG5ldyBJbnRlcnZhbCh7XG4gICAgICAgIHN0YXJ0OiBidWlsdFN0YXJ0LFxuICAgICAgICBlbmQ6IGJ1aWx0RW5kXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlRXJyb3I7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gSW50ZXJ2YWwgZnJvbSBhIHN0YXJ0IERhdGVUaW1lIGFuZCBhIER1cmF0aW9uIHRvIGV4dGVuZCB0by5cbiAgICogQHBhcmFtIHtEYXRlVGltZXxEYXRlfE9iamVjdH0gc3RhcnRcbiAgICogQHBhcmFtIHtEdXJhdGlvbnxPYmplY3R8bnVtYmVyfSBkdXJhdGlvbiAtIHRoZSBsZW5ndGggb2YgdGhlIEludGVydmFsLlxuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICovXG4gIDtcblxuICBJbnRlcnZhbC5hZnRlciA9IGZ1bmN0aW9uIGFmdGVyKHN0YXJ0LCBkdXJhdGlvbikge1xuICAgIHZhciBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKSxcbiAgICAgICAgZHQgPSBmcmllbmRseURhdGVUaW1lKHN0YXJ0KTtcbiAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdCwgZHQucGx1cyhkdXIpKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGFuIEludGVydmFsIGZyb20gYW4gZW5kIERhdGVUaW1lIGFuZCBhIER1cmF0aW9uIHRvIGV4dGVuZCBiYWNrd2FyZHMgdG8uXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV8RGF0ZXxPYmplY3R9IGVuZFxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gdGhlIGxlbmd0aCBvZiB0aGUgSW50ZXJ2YWwuXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgO1xuXG4gIEludGVydmFsLmJlZm9yZSA9IGZ1bmN0aW9uIGJlZm9yZShlbmQsIGR1cmF0aW9uKSB7XG4gICAgdmFyIGR1ciA9IER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb24pLFxuICAgICAgICBkdCA9IGZyaWVuZGx5RGF0ZVRpbWUoZW5kKTtcbiAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdC5taW51cyhkdXIpLCBkdCk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBJbnRlcnZhbCBmcm9tIGFuIElTTyA4NjAxIHN0cmluZy5cbiAgICogQWNjZXB0cyBgPHN0YXJ0Pi88ZW5kPmAsIGA8c3RhcnQ+LzxkdXJhdGlvbj5gLCBhbmQgYDxkdXJhdGlvbj4vPGVuZD5gIGZvcm1hdHMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIElTTyBzdHJpbmcgdG8gcGFyc2VcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXSAtIG9wdGlvbnMgdG8gcGFzcyB7QGxpbmsgRGF0ZVRpbWUjZnJvbUlTT30gYW5kIG9wdGlvbmFsbHkge0BsaW5rIER1cmF0aW9uI2Zyb21JU099XG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjVGltZV9pbnRlcnZhbHNcbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICA7XG5cbiAgSW50ZXJ2YWwuZnJvbUlTTyA9IGZ1bmN0aW9uIGZyb21JU08odGV4dCwgb3B0cykge1xuICAgIHZhciBfc3BsaXQgPSAodGV4dCB8fCBcIlwiKS5zcGxpdChcIi9cIiwgMiksXG4gICAgICAgIHMgPSBfc3BsaXRbMF0sXG4gICAgICAgIGUgPSBfc3BsaXRbMV07XG5cbiAgICBpZiAocyAmJiBlKSB7XG4gICAgICB2YXIgc3RhcnQsIHN0YXJ0SXNWYWxpZDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgc3RhcnQgPSBEYXRlVGltZS5mcm9tSVNPKHMsIG9wdHMpO1xuICAgICAgICBzdGFydElzVmFsaWQgPSBzdGFydC5pc1ZhbGlkO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBzdGFydElzVmFsaWQgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGVuZCwgZW5kSXNWYWxpZDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZW5kID0gRGF0ZVRpbWUuZnJvbUlTTyhlLCBvcHRzKTtcbiAgICAgICAgZW5kSXNWYWxpZCA9IGVuZC5pc1ZhbGlkO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBlbmRJc1ZhbGlkID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGFydElzVmFsaWQgJiYgZW5kSXNWYWxpZCkge1xuICAgICAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhzdGFydCwgZW5kKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXJ0SXNWYWxpZCkge1xuICAgICAgICB2YXIgZHVyID0gRHVyYXRpb24uZnJvbUlTTyhlLCBvcHRzKTtcblxuICAgICAgICBpZiAoZHVyLmlzVmFsaWQpIHtcbiAgICAgICAgICByZXR1cm4gSW50ZXJ2YWwuYWZ0ZXIoc3RhcnQsIGR1cik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW5kSXNWYWxpZCkge1xuICAgICAgICB2YXIgX2R1ciA9IER1cmF0aW9uLmZyb21JU08ocywgb3B0cyk7XG5cbiAgICAgICAgaWYgKF9kdXIuaXNWYWxpZCkge1xuICAgICAgICAgIHJldHVybiBJbnRlcnZhbC5iZWZvcmUoZW5kLCBfZHVyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBJbnRlcnZhbC5pbnZhbGlkKFwidW5wYXJzYWJsZVwiLCBcInRoZSBpbnB1dCBcXFwiXCIgKyB0ZXh0ICsgXCJcXFwiIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMVwiKTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gb2JqZWN0IGlzIGFuIEludGVydmFsLiBXb3JrcyBhY3Jvc3MgY29udGV4dCBib3VuZGFyaWVzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICA7XG5cbiAgSW50ZXJ2YWwuaXNJbnRlcnZhbCA9IGZ1bmN0aW9uIGlzSW50ZXJ2YWwobykge1xuICAgIHJldHVybiBvICYmIG8uaXNMdXhvbkludGVydmFsIHx8IGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzdGFydCBvZiB0aGUgSW50ZXJ2YWxcbiAgICogQHR5cGUge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIHZhciBfcHJvdG8gPSBJbnRlcnZhbC5wcm90b3R5cGU7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxlbmd0aCBvZiB0aGUgSW50ZXJ2YWwgaW4gdGhlIHNwZWNpZmllZCB1bml0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIHRoZSB1bml0IChzdWNoIGFzICdob3Vycycgb3IgJ2RheXMnKSB0byByZXR1cm4gdGhlIGxlbmd0aCBpbi5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgX3Byb3RvLmxlbmd0aCA9IGZ1bmN0aW9uIGxlbmd0aCh1bml0KSB7XG4gICAgaWYgKHVuaXQgPT09IHZvaWQgMCkge1xuICAgICAgdW5pdCA9IFwibWlsbGlzZWNvbmRzXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudG9EdXJhdGlvbi5hcHBseSh0aGlzLCBbdW5pdF0pLmdldCh1bml0KSA6IE5hTjtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY291bnQgb2YgbWludXRlcywgaG91cnMsIGRheXMsIG1vbnRocywgb3IgeWVhcnMgaW5jbHVkZWQgaW4gdGhlIEludGVydmFsLCBldmVuIGluIHBhcnQuXG4gICAqIFVubGlrZSB7QGxpbmsgSW50ZXJ2YWwjbGVuZ3RofSB0aGlzIGNvdW50cyBzZWN0aW9ucyBvZiB0aGUgY2FsZW5kYXIsIG5vdCBwZXJpb2RzIG9mIHRpbWUsIGUuZy4gc3BlY2lmeWluZyAnZGF5J1xuICAgKiBhc2tzICd3aGF0IGRhdGVzIGFyZSBpbmNsdWRlZCBpbiB0aGlzIGludGVydmFsPycsIG5vdCAnaG93IG1hbnkgZGF5cyBsb25nIGlzIHRoaXMgaW50ZXJ2YWw/J1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW3VuaXQ9J21pbGxpc2Vjb25kcyddIC0gdGhlIHVuaXQgb2YgdGltZSB0byBjb3VudC5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jb3VudCA9IGZ1bmN0aW9uIGNvdW50KHVuaXQpIHtcbiAgICBpZiAodW5pdCA9PT0gdm9pZCAwKSB7XG4gICAgICB1bml0ID0gXCJtaWxsaXNlY29uZHNcIjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIE5hTjtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLnN0YXJ0LnN0YXJ0T2YodW5pdCksXG4gICAgICAgIGVuZCA9IHRoaXMuZW5kLnN0YXJ0T2YodW5pdCk7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoZW5kLmRpZmYoc3RhcnQsIHVuaXQpLmdldCh1bml0KSkgKyAxO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCdzIHN0YXJ0IGFuZCBlbmQgYXJlIGJvdGggaW4gdGhlIHNhbWUgdW5pdCBvZiB0aW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gdGhlIHVuaXQgb2YgdGltZSB0byBjaGVjayBzYW1lbmVzcyBvblxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYXNTYW1lID0gZnVuY3Rpb24gaGFzU2FtZSh1bml0KSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuaXNFbXB0eSgpIHx8IHRoaXMuZS5taW51cygxKS5oYXNTYW1lKHRoaXMucywgdW5pdCkgOiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCBoYXMgdGhlIHNhbWUgc3RhcnQgYW5kIGVuZCBEYXRlVGltZXMuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmlzRW1wdHkgPSBmdW5jdGlvbiBpc0VtcHR5KCkge1xuICAgIHJldHVybiB0aGlzLnMudmFsdWVPZigpID09PSB0aGlzLmUudmFsdWVPZigpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsJ3Mgc3RhcnQgaXMgYWZ0ZXIgdGhlIHNwZWNpZmllZCBEYXRlVGltZS5cbiAgICogQHBhcmFtIHtEYXRlVGltZX0gZGF0ZVRpbWVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uaXNBZnRlciA9IGZ1bmN0aW9uIGlzQWZ0ZXIoZGF0ZVRpbWUpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0aGlzLnMgPiBkYXRlVGltZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCdzIGVuZCBpcyBiZWZvcmUgdGhlIHNwZWNpZmllZCBEYXRlVGltZS5cbiAgICogQHBhcmFtIHtEYXRlVGltZX0gZGF0ZVRpbWVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uaXNCZWZvcmUgPSBmdW5jdGlvbiBpc0JlZm9yZShkYXRlVGltZSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXMuZSA8PSBkYXRlVGltZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCBjb250YWlucyB0aGUgc3BlY2lmaWVkIERhdGVUaW1lLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBkYXRlVGltZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jb250YWlucyA9IGZ1bmN0aW9uIGNvbnRhaW5zKGRhdGVUaW1lKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5zIDw9IGRhdGVUaW1lICYmIHRoaXMuZSA+IGRhdGVUaW1lO1xuICB9XG4gIC8qKlxuICAgKiBcIlNldHNcIiB0aGUgc3RhcnQgYW5kL29yIGVuZCBkYXRlcy4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIEludGVydmFsLlxuICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWVzIC0gdGhlIHZhbHVlcyB0byBzZXRcbiAgICogQHBhcmFtIHtEYXRlVGltZX0gdmFsdWVzLnN0YXJ0IC0gdGhlIHN0YXJ0aW5nIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IHZhbHVlcy5lbmQgLSB0aGUgZW5kaW5nIERhdGVUaW1lXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zZXQgPSBmdW5jdGlvbiBzZXQoX3RlbXApIHtcbiAgICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgICAgICBzdGFydCA9IF9yZWYuc3RhcnQsXG4gICAgICAgIGVuZCA9IF9yZWYuZW5kO1xuXG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHN0YXJ0IHx8IHRoaXMucywgZW5kIHx8IHRoaXMuZSk7XG4gIH1cbiAgLyoqXG4gICAqIFNwbGl0IHRoaXMgSW50ZXJ2YWwgYXQgZWFjaCBvZiB0aGUgc3BlY2lmaWVkIERhdGVUaW1lc1xuICAgKiBAcGFyYW0gey4uLkRhdGVUaW1lfSBkYXRlVGltZXMgLSB0aGUgdW5pdCBvZiB0aW1lIHRvIGNvdW50LlxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uc3BsaXRBdCA9IGZ1bmN0aW9uIHNwbGl0QXQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gW107XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgZGF0ZVRpbWVzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgZGF0ZVRpbWVzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHZhciBzb3J0ZWQgPSBkYXRlVGltZXMubWFwKGZyaWVuZGx5RGF0ZVRpbWUpLmZpbHRlcihmdW5jdGlvbiAoZCkge1xuICAgICAgcmV0dXJuIF90aGlzLmNvbnRhaW5zKGQpO1xuICAgIH0pLnNvcnQoKSxcbiAgICAgICAgcmVzdWx0cyA9IFtdO1xuICAgIHZhciBzID0gdGhpcy5zLFxuICAgICAgICBpID0gMDtcblxuICAgIHdoaWxlIChzIDwgdGhpcy5lKSB7XG4gICAgICB2YXIgYWRkZWQgPSBzb3J0ZWRbaV0gfHwgdGhpcy5lLFxuICAgICAgICAgIG5leHQgPSArYWRkZWQgPiArdGhpcy5lID8gdGhpcy5lIDogYWRkZWQ7XG4gICAgICByZXN1bHRzLnB1c2goSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhzLCBuZXh0KSk7XG4gICAgICBzID0gbmV4dDtcbiAgICAgIGkgKz0gMTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuICAvKipcbiAgICogU3BsaXQgdGhpcyBJbnRlcnZhbCBpbnRvIHNtYWxsZXIgSW50ZXJ2YWxzLCBlYWNoIG9mIHRoZSBzcGVjaWZpZWQgbGVuZ3RoLlxuICAgKiBMZWZ0IG92ZXIgdGltZSBpcyBncm91cGVkIGludG8gYSBzbWFsbGVyIGludGVydmFsXG4gICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSBUaGUgbGVuZ3RoIG9mIGVhY2ggcmVzdWx0aW5nIGludGVydmFsLlxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uc3BsaXRCeSA9IGZ1bmN0aW9uIHNwbGl0QnkoZHVyYXRpb24pIHtcbiAgICB2YXIgZHVyID0gRHVyYXRpb24uZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbik7XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCB8fCAhZHVyLmlzVmFsaWQgfHwgZHVyLmFzKFwibWlsbGlzZWNvbmRzXCIpID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgdmFyIHMgPSB0aGlzLnMsXG4gICAgICAgIGlkeCA9IDEsXG4gICAgICAgIG5leHQ7XG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcblxuICAgIHdoaWxlIChzIDwgdGhpcy5lKSB7XG4gICAgICB2YXIgYWRkZWQgPSB0aGlzLnN0YXJ0LnBsdXMoZHVyLm1hcFVuaXRzKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHJldHVybiB4ICogaWR4O1xuICAgICAgfSkpO1xuICAgICAgbmV4dCA9ICthZGRlZCA+ICt0aGlzLmUgPyB0aGlzLmUgOiBhZGRlZDtcbiAgICAgIHJlc3VsdHMucHVzaChJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHMsIG5leHQpKTtcbiAgICAgIHMgPSBuZXh0O1xuICAgICAgaWR4ICs9IDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cbiAgLyoqXG4gICAqIFNwbGl0IHRoaXMgSW50ZXJ2YWwgaW50byB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBzbWFsbGVyIGludGVydmFscy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG51bWJlck9mUGFydHMgLSBUaGUgbnVtYmVyIG9mIEludGVydmFscyB0byBkaXZpZGUgdGhlIEludGVydmFsIGludG8uXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5kaXZpZGVFcXVhbGx5ID0gZnVuY3Rpb24gZGl2aWRlRXF1YWxseShudW1iZXJPZlBhcnRzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBbXTtcbiAgICByZXR1cm4gdGhpcy5zcGxpdEJ5KHRoaXMubGVuZ3RoKCkgLyBudW1iZXJPZlBhcnRzKS5zbGljZSgwLCBudW1iZXJPZlBhcnRzKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCBvdmVybGFwcyB3aXRoIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWxcbiAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXJcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8ub3ZlcmxhcHMgPSBmdW5jdGlvbiBvdmVybGFwcyhvdGhlcikge1xuICAgIHJldHVybiB0aGlzLmUgPiBvdGhlci5zICYmIHRoaXMucyA8IG90aGVyLmU7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBlbmQgaXMgYWRqYWNlbnQgdG8gdGhlIHNwZWNpZmllZCBJbnRlcnZhbCdzIHN0YXJ0LlxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5hYnV0c1N0YXJ0ID0gZnVuY3Rpb24gYWJ1dHNTdGFydChvdGhlcikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuICt0aGlzLmUgPT09ICtvdGhlci5zO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsJ3Mgc3RhcnQgaXMgYWRqYWNlbnQgdG8gdGhlIHNwZWNpZmllZCBJbnRlcnZhbCdzIGVuZC5cbiAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXJcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uYWJ1dHNFbmQgPSBmdW5jdGlvbiBhYnV0c0VuZChvdGhlcikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuICtvdGhlci5lID09PSArdGhpcy5zO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIGVuZ3VsZnMgdGhlIHN0YXJ0IGFuZCBlbmQgb2YgdGhlIHNwZWNpZmllZCBJbnRlcnZhbC5cbiAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXJcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZW5ndWxmcyA9IGZ1bmN0aW9uIGVuZ3VsZnMob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0aGlzLnMgPD0gb3RoZXIucyAmJiB0aGlzLmUgPj0gb3RoZXIuZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCBoYXMgdGhlIHNhbWUgc3RhcnQgYW5kIGVuZCBhcyB0aGUgc3BlY2lmaWVkIEludGVydmFsLlxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCB8fCAhb3RoZXIuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnMuZXF1YWxzKG90aGVyLnMpICYmIHRoaXMuZS5lcXVhbHMob3RoZXIuZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiBhbiBJbnRlcnZhbCByZXByZXNlbnRpbmcgdGhlIGludGVyc2VjdGlvbiBvZiB0aGlzIEludGVydmFsIGFuZCB0aGUgc3BlY2lmaWVkIEludGVydmFsLlxuICAgKiBTcGVjaWZpY2FsbHksIHRoZSByZXN1bHRpbmcgSW50ZXJ2YWwgaGFzIHRoZSBtYXhpbXVtIHN0YXJ0IHRpbWUgYW5kIHRoZSBtaW5pbXVtIGVuZCB0aW1lIG9mIHRoZSB0d28gSW50ZXJ2YWxzLlxuICAgKiBSZXR1cm5zIG51bGwgaWYgdGhlIGludGVyc2VjdGlvbiBpcyBlbXB0eSwgbWVhbmluZywgdGhlIGludGVydmFscyBkb24ndCBpbnRlcnNlY3QuXG4gICAqIEBwYXJhbSB7SW50ZXJ2YWx9IG90aGVyXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5pbnRlcnNlY3Rpb24gPSBmdW5jdGlvbiBpbnRlcnNlY3Rpb24ob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgdmFyIHMgPSB0aGlzLnMgPiBvdGhlci5zID8gdGhpcy5zIDogb3RoZXIucyxcbiAgICAgICAgZSA9IHRoaXMuZSA8IG90aGVyLmUgPyB0aGlzLmUgOiBvdGhlci5lO1xuXG4gICAgaWYgKHMgPj0gZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHMsIGUpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGFuIEludGVydmFsIHJlcHJlc2VudGluZyB0aGUgdW5pb24gb2YgdGhpcyBJbnRlcnZhbCBhbmQgdGhlIHNwZWNpZmllZCBJbnRlcnZhbC5cbiAgICogU3BlY2lmaWNhbGx5LCB0aGUgcmVzdWx0aW5nIEludGVydmFsIGhhcyB0aGUgbWluaW11bSBzdGFydCB0aW1lIGFuZCB0aGUgbWF4aW11bSBlbmQgdGltZSBvZiB0aGUgdHdvIEludGVydmFscy5cbiAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXJcbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVuaW9uID0gZnVuY3Rpb24gdW5pb24ob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgdmFyIHMgPSB0aGlzLnMgPCBvdGhlci5zID8gdGhpcy5zIDogb3RoZXIucyxcbiAgICAgICAgZSA9IHRoaXMuZSA+IG90aGVyLmUgPyB0aGlzLmUgOiBvdGhlci5lO1xuICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHMsIGUpO1xuICB9XG4gIC8qKlxuICAgKiBNZXJnZSBhbiBhcnJheSBvZiBJbnRlcnZhbHMgaW50byBhIGVxdWl2YWxlbnQgbWluaW1hbCBzZXQgb2YgSW50ZXJ2YWxzLlxuICAgKiBDb21iaW5lcyBvdmVybGFwcGluZyBhbmQgYWRqYWNlbnQgSW50ZXJ2YWxzLlxuICAgKiBAcGFyYW0ge0FycmF5fSBpbnRlcnZhbHNcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICA7XG5cbiAgSW50ZXJ2YWwubWVyZ2UgPSBmdW5jdGlvbiBtZXJnZShpbnRlcnZhbHMpIHtcbiAgICB2YXIgX2ludGVydmFscyRzb3J0JHJlZHVjID0gaW50ZXJ2YWxzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiBhLnMgLSBiLnM7XG4gICAgfSkucmVkdWNlKGZ1bmN0aW9uIChfcmVmMiwgaXRlbSkge1xuICAgICAgdmFyIHNvZmFyID0gX3JlZjJbMF0sXG4gICAgICAgICAgY3VycmVudCA9IF9yZWYyWzFdO1xuXG4gICAgICBpZiAoIWN1cnJlbnQpIHtcbiAgICAgICAgcmV0dXJuIFtzb2ZhciwgaXRlbV07XG4gICAgICB9IGVsc2UgaWYgKGN1cnJlbnQub3ZlcmxhcHMoaXRlbSkgfHwgY3VycmVudC5hYnV0c1N0YXJ0KGl0ZW0pKSB7XG4gICAgICAgIHJldHVybiBbc29mYXIsIGN1cnJlbnQudW5pb24oaXRlbSldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtzb2Zhci5jb25jYXQoW2N1cnJlbnRdKSwgaXRlbV07XG4gICAgICB9XG4gICAgfSwgW1tdLCBudWxsXSksXG4gICAgICAgIGZvdW5kID0gX2ludGVydmFscyRzb3J0JHJlZHVjWzBdLFxuICAgICAgICBmaW5hbCA9IF9pbnRlcnZhbHMkc29ydCRyZWR1Y1sxXTtcblxuICAgIGlmIChmaW5hbCkge1xuICAgICAgZm91bmQucHVzaChmaW5hbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvdW5kO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgSW50ZXJ2YWxzIHJlcHJlc2VudGluZyB0aGUgc3BhbnMgb2YgdGltZSB0aGF0IG9ubHkgYXBwZWFyIGluIG9uZSBvZiB0aGUgc3BlY2lmaWVkIEludGVydmFscy5cbiAgICogQHBhcmFtIHtBcnJheX0gaW50ZXJ2YWxzXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgO1xuXG4gIEludGVydmFsLnhvciA9IGZ1bmN0aW9uIHhvcihpbnRlcnZhbHMpIHtcbiAgICB2YXIgX0FycmF5JHByb3RvdHlwZTtcblxuICAgIHZhciBzdGFydCA9IG51bGwsXG4gICAgICAgIGN1cnJlbnRDb3VudCA9IDA7XG5cbiAgICB2YXIgcmVzdWx0cyA9IFtdLFxuICAgICAgICBlbmRzID0gaW50ZXJ2YWxzLm1hcChmdW5jdGlvbiAoaSkge1xuICAgICAgcmV0dXJuIFt7XG4gICAgICAgIHRpbWU6IGkucyxcbiAgICAgICAgdHlwZTogXCJzXCJcbiAgICAgIH0sIHtcbiAgICAgICAgdGltZTogaS5lLFxuICAgICAgICB0eXBlOiBcImVcIlxuICAgICAgfV07XG4gICAgfSksXG4gICAgICAgIGZsYXR0ZW5lZCA9IChfQXJyYXkkcHJvdG90eXBlID0gQXJyYXkucHJvdG90eXBlKS5jb25jYXQuYXBwbHkoX0FycmF5JHByb3RvdHlwZSwgZW5kcyksXG4gICAgICAgIGFyciA9IGZsYXR0ZW5lZC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gYS50aW1lIC0gYi50aW1lO1xuICAgIH0pO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShhcnIpLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgICAgdmFyIGkgPSBfc3RlcC52YWx1ZTtcbiAgICAgIGN1cnJlbnRDb3VudCArPSBpLnR5cGUgPT09IFwic1wiID8gMSA6IC0xO1xuXG4gICAgICBpZiAoY3VycmVudENvdW50ID09PSAxKSB7XG4gICAgICAgIHN0YXJ0ID0gaS50aW1lO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHN0YXJ0ICYmICtzdGFydCAhPT0gK2kudGltZSkge1xuICAgICAgICAgIHJlc3VsdHMucHVzaChJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHN0YXJ0LCBpLnRpbWUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXJ0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gSW50ZXJ2YWwubWVyZ2UocmVzdWx0cyk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiBhbiBJbnRlcnZhbCByZXByZXNlbnRpbmcgdGhlIHNwYW4gb2YgdGltZSBpbiB0aGlzIEludGVydmFsIHRoYXQgZG9lc24ndCBvdmVybGFwIHdpdGggYW55IG9mIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWxzLlxuICAgKiBAcGFyYW0gey4uLkludGVydmFsfSBpbnRlcnZhbHNcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmRpZmZlcmVuY2UgPSBmdW5jdGlvbiBkaWZmZXJlbmNlKCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBpbnRlcnZhbHMgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgIGludGVydmFsc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgIH1cblxuICAgIHJldHVybiBJbnRlcnZhbC54b3IoW3RoaXNdLmNvbmNhdChpbnRlcnZhbHMpKS5tYXAoZnVuY3Rpb24gKGkpIHtcbiAgICAgIHJldHVybiBfdGhpczIuaW50ZXJzZWN0aW9uKGkpO1xuICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoaSkge1xuICAgICAgcmV0dXJuIGkgJiYgIWkuaXNFbXB0eSgpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgSW50ZXJ2YWwgYXBwcm9wcmlhdGUgZm9yIGRlYnVnZ2luZy5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gSU5WQUxJRCQxO1xuICAgIHJldHVybiBcIltcIiArIHRoaXMucy50b0lTTygpICsgXCIgXFx1MjAxMyBcIiArIHRoaXMuZS50b0lTTygpICsgXCIpXCI7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIEludGVydmFsLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVfaW50ZXJ2YWxzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gVGhlIHNhbWUgb3B0aW9ucyBhcyB7QGxpbmsgRGF0ZVRpbWUjdG9JU099XG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9JU08gPSBmdW5jdGlvbiB0b0lTTyhvcHRzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEJDE7XG4gICAgcmV0dXJuIHRoaXMucy50b0lTTyhvcHRzKSArIFwiL1wiICsgdGhpcy5lLnRvSVNPKG9wdHMpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgZGF0ZSBvZiB0aGlzIEludGVydmFsLlxuICAgKiBUaGUgdGltZSBjb21wb25lbnRzIGFyZSBpZ25vcmVkLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVfaW50ZXJ2YWxzXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9JU09EYXRlID0gZnVuY3Rpb24gdG9JU09EYXRlKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gSU5WQUxJRCQxO1xuICAgIHJldHVybiB0aGlzLnMudG9JU09EYXRlKCkgKyBcIi9cIiArIHRoaXMuZS50b0lTT0RhdGUoKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRpbWUgb2YgdGhpcyBJbnRlcnZhbC5cbiAgICogVGhlIGRhdGUgY29tcG9uZW50cyBhcmUgaWdub3JlZC5cbiAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMSNUaW1lX2ludGVydmFsc1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIFRoZSBzYW1lIG9wdGlvbnMgYXMge0BsaW5rIERhdGVUaW1lI3RvSVNPfVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvSVNPVGltZSA9IGZ1bmN0aW9uIHRvSVNPVGltZShvcHRzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEJDE7XG4gICAgcmV0dXJuIHRoaXMucy50b0lTT1RpbWUob3B0cykgKyBcIi9cIiArIHRoaXMuZS50b0lTT1RpbWUob3B0cyk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBJbnRlcnZhbCBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgZm9ybWF0IHN0cmluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGVGb3JtYXQgLSB0aGUgZm9ybWF0IHN0cmluZy4gVGhpcyBzdHJpbmcgZm9ybWF0cyB0aGUgc3RhcnQgYW5kIGVuZCB0aW1lLiBTZWUge0BsaW5rIERhdGVUaW1lI3RvRm9ybWF0fSBmb3IgZGV0YWlscy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5zZXBhcmF0b3IgPSAgJyBcdTIwMTMgJ10gLSBhIHNlcGFyYXRvciB0byBwbGFjZSBiZXR3ZWVuIHRoZSBzdGFydCBhbmQgZW5kIHJlcHJlc2VudGF0aW9uc1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvRm9ybWF0ID0gZnVuY3Rpb24gdG9Gb3JtYXQoZGF0ZUZvcm1hdCwgX3RlbXAyKSB7XG4gICAgdmFyIF9yZWYzID0gX3RlbXAyID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wMixcbiAgICAgICAgX3JlZjMkc2VwYXJhdG9yID0gX3JlZjMuc2VwYXJhdG9yLFxuICAgICAgICBzZXBhcmF0b3IgPSBfcmVmMyRzZXBhcmF0b3IgPT09IHZvaWQgMCA/IFwiIFx1MjAxMyBcIiA6IF9yZWYzJHNlcGFyYXRvcjtcblxuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gSU5WQUxJRCQxO1xuICAgIHJldHVybiBcIlwiICsgdGhpcy5zLnRvRm9ybWF0KGRhdGVGb3JtYXQpICsgc2VwYXJhdG9yICsgdGhpcy5lLnRvRm9ybWF0KGRhdGVGb3JtYXQpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gYSBEdXJhdGlvbiByZXByZXNlbnRpbmcgdGhlIHRpbWUgc3Bhbm5lZCBieSB0aGlzIGludGVydmFsLlxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gW3VuaXQ9WydtaWxsaXNlY29uZHMnXV0gLSB0aGUgdW5pdCBvciB1bml0cyAoc3VjaCBhcyAnaG91cnMnIG9yICdkYXlzJykgdG8gaW5jbHVkZSBpbiB0aGUgZHVyYXRpb24uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgY3JlYXRpb24gb2YgdGhlIER1cmF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS50b0R1cmF0aW9uKCkudG9PYmplY3QoKSAvLz0+IHsgbWlsbGlzZWNvbmRzOiA4ODQ4OTI1NyB9XG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLnRvRHVyYXRpb24oJ2RheXMnKS50b09iamVjdCgpIC8vPT4geyBkYXlzOiAxLjAyNDE4MTIxNTI3Nzc3NzggfVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS50b0R1cmF0aW9uKFsnaG91cnMnLCAnbWludXRlcyddKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMjQsIG1pbnV0ZXM6IDM0LjgyMDk1IH1cbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikudG9EdXJhdGlvbihbJ2hvdXJzJywgJ21pbnV0ZXMnLCAnc2Vjb25kcyddKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMjQsIG1pbnV0ZXM6IDM0LCBzZWNvbmRzOiA0OS4yNTcgfVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS50b0R1cmF0aW9uKCdzZWNvbmRzJykudG9PYmplY3QoKSAvLz0+IHsgc2Vjb25kczogODg0ODkuMjU3IH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvRHVyYXRpb24gPSBmdW5jdGlvbiB0b0R1cmF0aW9uKHVuaXQsIG9wdHMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmludmFsaWQodGhpcy5pbnZhbGlkUmVhc29uKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5lLmRpZmYodGhpcy5zLCB1bml0LCBvcHRzKTtcbiAgfVxuICAvKipcbiAgICogUnVuIG1hcEZuIG9uIHRoZSBpbnRlcnZhbCBzdGFydCBhbmQgZW5kLCByZXR1cm5pbmcgYSBuZXcgSW50ZXJ2YWwgZnJvbSB0aGUgcmVzdWx0aW5nIERhdGVUaW1lc1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBtYXBGblxuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikubWFwRW5kcG9pbnRzKGVuZHBvaW50ID0+IGVuZHBvaW50LnRvVVRDKCkpXG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLm1hcEVuZHBvaW50cyhlbmRwb2ludCA9PiBlbmRwb2ludC5wbHVzKHsgaG91cnM6IDIgfSkpXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLm1hcEVuZHBvaW50cyA9IGZ1bmN0aW9uIG1hcEVuZHBvaW50cyhtYXBGbikge1xuICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKG1hcEZuKHRoaXMucyksIG1hcEZuKHRoaXMuZSkpO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhJbnRlcnZhbCwgW3tcbiAgICBrZXk6IFwic3RhcnRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnMgOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBlbmQgb2YgdGhlIEludGVydmFsXG4gICAgICogQHR5cGUge0RhdGVUaW1lfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiZW5kXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5lIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBlbmQgaXMgYXQgbGVhc3QgaXRzIHN0YXJ0LCBtZWFuaW5nIHRoYXQgdGhlIEludGVydmFsIGlzbid0ICdiYWNrd2FyZHMnLlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiaXNWYWxpZFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaW52YWxpZFJlYXNvbiA9PT0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBlcnJvciBjb2RlIGlmIHRoaXMgSW50ZXJ2YWwgaXMgaW52YWxpZCwgb3IgbnVsbCBpZiB0aGUgSW50ZXJ2YWwgaXMgdmFsaWRcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiaW52YWxpZFJlYXNvblwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5yZWFzb24gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGV4cGxhbmF0aW9uIG9mIHdoeSB0aGlzIEludGVydmFsIGJlY2FtZSBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBJbnRlcnZhbCBpcyB2YWxpZFxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJpbnZhbGlkRXhwbGFuYXRpb25cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmludmFsaWQgPyB0aGlzLmludmFsaWQuZXhwbGFuYXRpb24gOiBudWxsO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBJbnRlcnZhbDtcbn0oKTtcblxuLyoqXG4gKiBUaGUgSW5mbyBjbGFzcyBjb250YWlucyBzdGF0aWMgbWV0aG9kcyBmb3IgcmV0cmlldmluZyBnZW5lcmFsIHRpbWUgYW5kIGRhdGUgcmVsYXRlZCBkYXRhLiBGb3IgZXhhbXBsZSwgaXQgaGFzIG1ldGhvZHMgZm9yIGZpbmRpbmcgb3V0IGlmIGEgdGltZSB6b25lIGhhcyBhIERTVCwgZm9yIGxpc3RpbmcgdGhlIG1vbnRocyBpbiBhbnkgc3VwcG9ydGVkIGxvY2FsZSwgYW5kIGZvciBkaXNjb3ZlcmluZyB3aGljaCBvZiBMdXhvbiBmZWF0dXJlcyBhcmUgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LlxuICovXG5cbnZhciBJbmZvID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gSW5mbygpIHt9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgem9uZSBjb250YWlucyBhIERTVC5cbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW3pvbmU9J2xvY2FsJ10gLSBab25lIHRvIGNoZWNrLiBEZWZhdWx0cyB0byB0aGUgZW52aXJvbm1lbnQncyBsb2NhbCB6b25lLlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgSW5mby5oYXNEU1QgPSBmdW5jdGlvbiBoYXNEU1Qoem9uZSkge1xuICAgIGlmICh6b25lID09PSB2b2lkIDApIHtcbiAgICAgIHpvbmUgPSBTZXR0aW5ncy5kZWZhdWx0Wm9uZTtcbiAgICB9XG5cbiAgICB2YXIgcHJvdG8gPSBEYXRlVGltZS5ub3coKS5zZXRab25lKHpvbmUpLnNldCh7XG4gICAgICBtb250aDogMTJcbiAgICB9KTtcbiAgICByZXR1cm4gIXpvbmUuaXNVbml2ZXJzYWwgJiYgcHJvdG8ub2Zmc2V0ICE9PSBwcm90by5zZXQoe1xuICAgICAgbW9udGg6IDZcbiAgICB9KS5vZmZzZXQ7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgem9uZSBpcyBhIHZhbGlkIElBTkEgc3BlY2lmaWVyLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gem9uZSAtIFpvbmUgdG8gY2hlY2tcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBJbmZvLmlzVmFsaWRJQU5BWm9uZSA9IGZ1bmN0aW9uIGlzVmFsaWRJQU5BWm9uZSh6b25lKSB7XG4gICAgcmV0dXJuIElBTkFab25lLmlzVmFsaWRab25lKHpvbmUpO1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGUgaW5wdXQgaW50byBhIHtAbGluayBab25lfSBpbnN0YW5jZS5cbiAgICpcbiAgICogKiBJZiBgaW5wdXRgIGlzIGFscmVhZHkgYSBab25lIGluc3RhbmNlLCBpdCBpcyByZXR1cm5lZCB1bmNoYW5nZWQuXG4gICAqICogSWYgYGlucHV0YCBpcyBhIHN0cmluZyBjb250YWluaW5nIGEgdmFsaWQgdGltZSB6b25lIG5hbWUsIGEgWm9uZSBpbnN0YW5jZVxuICAgKiAgIHdpdGggdGhhdCBuYW1lIGlzIHJldHVybmVkLlxuICAgKiAqIElmIGBpbnB1dGAgaXMgYSBzdHJpbmcgdGhhdCBkb2Vzbid0IHJlZmVyIHRvIGEga25vd24gdGltZSB6b25lLCBhIFpvbmVcbiAgICogICBpbnN0YW5jZSB3aXRoIHtAbGluayBab25lI2lzVmFsaWR9ID09IGZhbHNlIGlzIHJldHVybmVkLlxuICAgKiAqIElmIGBpbnB1dCBpcyBhIG51bWJlciwgYSBab25lIGluc3RhbmNlIHdpdGggdGhlIHNwZWNpZmllZCBmaXhlZCBvZmZzZXRcbiAgICogICBpbiBtaW51dGVzIGlzIHJldHVybmVkLlxuICAgKiAqIElmIGBpbnB1dGAgaXMgYG51bGxgIG9yIGB1bmRlZmluZWRgLCB0aGUgZGVmYXVsdCB6b25lIGlzIHJldHVybmVkLlxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfG51bWJlcn0gW2lucHV0XSAtIHRoZSB2YWx1ZSB0byBiZSBjb252ZXJ0ZWRcbiAgICogQHJldHVybiB7Wm9uZX1cbiAgICovXG4gIDtcblxuICBJbmZvLm5vcm1hbGl6ZVpvbmUgPSBmdW5jdGlvbiBub3JtYWxpemVab25lJDEoaW5wdXQpIHtcbiAgICByZXR1cm4gbm9ybWFsaXplWm9uZShpbnB1dCwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2Ygc3RhbmRhbG9uZSBtb250aCBuYW1lcy5cbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9EYXRlVGltZUZvcm1hdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xlbmd0aD0nbG9uZyddIC0gdGhlIGxlbmd0aCBvZiB0aGUgbW9udGggcmVwcmVzZW50YXRpb24sIHN1Y2ggYXMgXCJudW1lcmljXCIsIFwiMi1kaWdpdFwiLCBcIm5hcnJvd1wiLCBcInNob3J0XCIsIFwibG9uZ1wiXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubnVtYmVyaW5nU3lzdGVtPW51bGxdIC0gdGhlIG51bWJlcmluZyBzeXN0ZW1cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY09iaj1udWxsXSAtIGFuIGV4aXN0aW5nIGxvY2FsZSBvYmplY3QgdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5vdXRwdXRDYWxlbmRhcj0nZ3JlZ29yeSddIC0gdGhlIGNhbGVuZGFyXG4gICAqIEBleGFtcGxlIEluZm8ubW9udGhzKClbMF0gLy89PiAnSmFudWFyeSdcbiAgICogQGV4YW1wbGUgSW5mby5tb250aHMoJ3Nob3J0JylbMF0gLy89PiAnSmFuJ1xuICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnbnVtZXJpYycpWzBdIC8vPT4gJzEnXG4gICAqIEBleGFtcGxlIEluZm8ubW9udGhzKCdzaG9ydCcsIHsgbG9jYWxlOiAnZnItQ0EnIH0gKVswXSAvLz0+ICdqYW52LidcbiAgICogQGV4YW1wbGUgSW5mby5tb250aHMoJ251bWVyaWMnLCB7IGxvY2FsZTogJ2FyJyB9KVswXSAvLz0+ICdcdTA2NjEnXG4gICAqIEBleGFtcGxlIEluZm8ubW9udGhzKCdsb25nJywgeyBvdXRwdXRDYWxlbmRhcjogJ2lzbGFtaWMnIH0pWzBdIC8vPT4gJ1JhYmlcdTAyQkIgSSdcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICA7XG5cbiAgSW5mby5tb250aHMgPSBmdW5jdGlvbiBtb250aHMobGVuZ3RoLCBfdGVtcCkge1xuICAgIGlmIChsZW5ndGggPT09IHZvaWQgMCkge1xuICAgICAgbGVuZ3RoID0gXCJsb25nXCI7XG4gICAgfVxuXG4gICAgdmFyIF9yZWYgPSBfdGVtcCA9PT0gdm9pZCAwID8ge30gOiBfdGVtcCxcbiAgICAgICAgX3JlZiRsb2NhbGUgPSBfcmVmLmxvY2FsZSxcbiAgICAgICAgbG9jYWxlID0gX3JlZiRsb2NhbGUgPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmJGxvY2FsZSxcbiAgICAgICAgX3JlZiRudW1iZXJpbmdTeXN0ZW0gPSBfcmVmLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtID0gX3JlZiRudW1iZXJpbmdTeXN0ZW0gPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmJG51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgX3JlZiRsb2NPYmogPSBfcmVmLmxvY09iaixcbiAgICAgICAgbG9jT2JqID0gX3JlZiRsb2NPYmogPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmJGxvY09iaixcbiAgICAgICAgX3JlZiRvdXRwdXRDYWxlbmRhciA9IF9yZWYub3V0cHV0Q2FsZW5kYXIsXG4gICAgICAgIG91dHB1dENhbGVuZGFyID0gX3JlZiRvdXRwdXRDYWxlbmRhciA9PT0gdm9pZCAwID8gXCJncmVnb3J5XCIgOiBfcmVmJG91dHB1dENhbGVuZGFyO1xuXG4gICAgcmV0dXJuIChsb2NPYmogfHwgTG9jYWxlLmNyZWF0ZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIpKS5tb250aHMobGVuZ3RoKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGFuIGFycmF5IG9mIGZvcm1hdCBtb250aCBuYW1lcy5cbiAgICogRm9ybWF0IG1vbnRocyBkaWZmZXIgZnJvbSBzdGFuZGFsb25lIG1vbnRocyBpbiB0aGF0IHRoZXkncmUgbWVhbnQgdG8gYXBwZWFyIG5leHQgdG8gdGhlIGRheSBvZiB0aGUgbW9udGguIEluIHNvbWUgbGFuZ3VhZ2VzLCB0aGF0XG4gICAqIGNoYW5nZXMgdGhlIHN0cmluZy5cbiAgICogU2VlIHtAbGluayBJbmZvI21vbnRoc31cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtsZW5ndGg9J2xvbmcnXSAtIHRoZSBsZW5ndGggb2YgdGhlIG1vbnRoIHJlcHJlc2VudGF0aW9uLCBzdWNoIGFzIFwibnVtZXJpY1wiLCBcIjItZGlnaXRcIiwgXCJuYXJyb3dcIiwgXCJzaG9ydFwiLCBcImxvbmdcIlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZV0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbT1udWxsXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NPYmo9bnVsbF0gLSBhbiBleGlzdGluZyBsb2NhbGUgb2JqZWN0IHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMub3V0cHV0Q2FsZW5kYXI9J2dyZWdvcnknXSAtIHRoZSBjYWxlbmRhclxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIDtcblxuICBJbmZvLm1vbnRoc0Zvcm1hdCA9IGZ1bmN0aW9uIG1vbnRoc0Zvcm1hdChsZW5ndGgsIF90ZW1wMikge1xuICAgIGlmIChsZW5ndGggPT09IHZvaWQgMCkge1xuICAgICAgbGVuZ3RoID0gXCJsb25nXCI7XG4gICAgfVxuXG4gICAgdmFyIF9yZWYyID0gX3RlbXAyID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wMixcbiAgICAgICAgX3JlZjIkbG9jYWxlID0gX3JlZjIubG9jYWxlLFxuICAgICAgICBsb2NhbGUgPSBfcmVmMiRsb2NhbGUgPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmMiRsb2NhbGUsXG4gICAgICAgIF9yZWYyJG51bWJlcmluZ1N5c3RlbSA9IF9yZWYyLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtID0gX3JlZjIkbnVtYmVyaW5nU3lzdGVtID09PSB2b2lkIDAgPyBudWxsIDogX3JlZjIkbnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBfcmVmMiRsb2NPYmogPSBfcmVmMi5sb2NPYmosXG4gICAgICAgIGxvY09iaiA9IF9yZWYyJGxvY09iaiA9PT0gdm9pZCAwID8gbnVsbCA6IF9yZWYyJGxvY09iaixcbiAgICAgICAgX3JlZjIkb3V0cHV0Q2FsZW5kYXIgPSBfcmVmMi5vdXRwdXRDYWxlbmRhcixcbiAgICAgICAgb3V0cHV0Q2FsZW5kYXIgPSBfcmVmMiRvdXRwdXRDYWxlbmRhciA9PT0gdm9pZCAwID8gXCJncmVnb3J5XCIgOiBfcmVmMiRvdXRwdXRDYWxlbmRhcjtcblxuICAgIHJldHVybiAobG9jT2JqIHx8IExvY2FsZS5jcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyKSkubW9udGhzKGxlbmd0aCwgdHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiBzdGFuZGFsb25lIHdlZWsgbmFtZXMuXG4gICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZVRpbWVGb3JtYXRcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtsZW5ndGg9J2xvbmcnXSAtIHRoZSBsZW5ndGggb2YgdGhlIHdlZWtkYXkgcmVwcmVzZW50YXRpb24sIHN1Y2ggYXMgXCJuYXJyb3dcIiwgXCJzaG9ydFwiLCBcImxvbmdcIi5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGVdIC0gdGhlIGxvY2FsZSBjb2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5udW1iZXJpbmdTeXN0ZW09bnVsbF0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jT2JqPW51bGxdIC0gYW4gZXhpc3RpbmcgbG9jYWxlIG9iamVjdCB0byB1c2VcbiAgICogQGV4YW1wbGUgSW5mby53ZWVrZGF5cygpWzBdIC8vPT4gJ01vbmRheSdcbiAgICogQGV4YW1wbGUgSW5mby53ZWVrZGF5cygnc2hvcnQnKVswXSAvLz0+ICdNb24nXG4gICAqIEBleGFtcGxlIEluZm8ud2Vla2RheXMoJ3Nob3J0JywgeyBsb2NhbGU6ICdmci1DQScgfSlbMF0gLy89PiAnbHVuLidcbiAgICogQGV4YW1wbGUgSW5mby53ZWVrZGF5cygnc2hvcnQnLCB7IGxvY2FsZTogJ2FyJyB9KVswXSAvLz0+ICdcdTA2MjdcdTA2NDRcdTA2MjdcdTA2MkJcdTA2NDZcdTA2NEFcdTA2NDYnXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgO1xuXG4gIEluZm8ud2Vla2RheXMgPSBmdW5jdGlvbiB3ZWVrZGF5cyhsZW5ndGgsIF90ZW1wMykge1xuICAgIGlmIChsZW5ndGggPT09IHZvaWQgMCkge1xuICAgICAgbGVuZ3RoID0gXCJsb25nXCI7XG4gICAgfVxuXG4gICAgdmFyIF9yZWYzID0gX3RlbXAzID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wMyxcbiAgICAgICAgX3JlZjMkbG9jYWxlID0gX3JlZjMubG9jYWxlLFxuICAgICAgICBsb2NhbGUgPSBfcmVmMyRsb2NhbGUgPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmMyRsb2NhbGUsXG4gICAgICAgIF9yZWYzJG51bWJlcmluZ1N5c3RlbSA9IF9yZWYzLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtID0gX3JlZjMkbnVtYmVyaW5nU3lzdGVtID09PSB2b2lkIDAgPyBudWxsIDogX3JlZjMkbnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBfcmVmMyRsb2NPYmogPSBfcmVmMy5sb2NPYmosXG4gICAgICAgIGxvY09iaiA9IF9yZWYzJGxvY09iaiA9PT0gdm9pZCAwID8gbnVsbCA6IF9yZWYzJGxvY09iajtcblxuICAgIHJldHVybiAobG9jT2JqIHx8IExvY2FsZS5jcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG51bGwpKS53ZWVrZGF5cyhsZW5ndGgpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgZm9ybWF0IHdlZWsgbmFtZXMuXG4gICAqIEZvcm1hdCB3ZWVrZGF5cyBkaWZmZXIgZnJvbSBzdGFuZGFsb25lIHdlZWtkYXlzIGluIHRoYXQgdGhleSdyZSBtZWFudCB0byBhcHBlYXIgbmV4dCB0byBtb3JlIGRhdGUgaW5mb3JtYXRpb24uIEluIHNvbWUgbGFuZ3VhZ2VzLCB0aGF0XG4gICAqIGNoYW5nZXMgdGhlIHN0cmluZy5cbiAgICogU2VlIHtAbGluayBJbmZvI3dlZWtkYXlzfVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xlbmd0aD0nbG9uZyddIC0gdGhlIGxlbmd0aCBvZiB0aGUgbW9udGggcmVwcmVzZW50YXRpb24sIHN1Y2ggYXMgXCJuYXJyb3dcIiwgXCJzaG9ydFwiLCBcImxvbmdcIi5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9bnVsbF0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbT1udWxsXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NPYmo9bnVsbF0gLSBhbiBleGlzdGluZyBsb2NhbGUgb2JqZWN0IHRvIHVzZVxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIDtcblxuICBJbmZvLndlZWtkYXlzRm9ybWF0ID0gZnVuY3Rpb24gd2Vla2RheXNGb3JtYXQobGVuZ3RoLCBfdGVtcDQpIHtcbiAgICBpZiAobGVuZ3RoID09PSB2b2lkIDApIHtcbiAgICAgIGxlbmd0aCA9IFwibG9uZ1wiO1xuICAgIH1cblxuICAgIHZhciBfcmVmNCA9IF90ZW1wNCA9PT0gdm9pZCAwID8ge30gOiBfdGVtcDQsXG4gICAgICAgIF9yZWY0JGxvY2FsZSA9IF9yZWY0LmxvY2FsZSxcbiAgICAgICAgbG9jYWxlID0gX3JlZjQkbG9jYWxlID09PSB2b2lkIDAgPyBudWxsIDogX3JlZjQkbG9jYWxlLFxuICAgICAgICBfcmVmNCRudW1iZXJpbmdTeXN0ZW0gPSBfcmVmNC5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIG51bWJlcmluZ1N5c3RlbSA9IF9yZWY0JG51bWJlcmluZ1N5c3RlbSA9PT0gdm9pZCAwID8gbnVsbCA6IF9yZWY0JG51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgX3JlZjQkbG9jT2JqID0gX3JlZjQubG9jT2JqLFxuICAgICAgICBsb2NPYmogPSBfcmVmNCRsb2NPYmogPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmNCRsb2NPYmo7XG5cbiAgICByZXR1cm4gKGxvY09iaiB8fCBMb2NhbGUuY3JlYXRlKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBudWxsKSkud2Vla2RheXMobGVuZ3RoLCB0cnVlKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGFuIGFycmF5IG9mIG1lcmlkaWVtcy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGVdIC0gdGhlIGxvY2FsZSBjb2RlXG4gICAqIEBleGFtcGxlIEluZm8ubWVyaWRpZW1zKCkgLy89PiBbICdBTScsICdQTScgXVxuICAgKiBAZXhhbXBsZSBJbmZvLm1lcmlkaWVtcyh7IGxvY2FsZTogJ215JyB9KSAvLz0+IFsgJ1x1MTAxNFx1MTAzNlx1MTAxNFx1MTAwMFx1MTAzQScsICdcdTEwMEFcdTEwMTRcdTEwMzEnIF1cbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICA7XG5cbiAgSW5mby5tZXJpZGllbXMgPSBmdW5jdGlvbiBtZXJpZGllbXMoX3RlbXA1KSB7XG4gICAgdmFyIF9yZWY1ID0gX3RlbXA1ID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wNSxcbiAgICAgICAgX3JlZjUkbG9jYWxlID0gX3JlZjUubG9jYWxlLFxuICAgICAgICBsb2NhbGUgPSBfcmVmNSRsb2NhbGUgPT09IHZvaWQgMCA/IG51bGwgOiBfcmVmNSRsb2NhbGU7XG5cbiAgICByZXR1cm4gTG9jYWxlLmNyZWF0ZShsb2NhbGUpLm1lcmlkaWVtcygpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgZXJhcywgc3VjaCBhcyBbJ0JDJywgJ0FEJ10uIFRoZSBsb2NhbGUgY2FuIGJlIHNwZWNpZmllZCwgYnV0IHRoZSBjYWxlbmRhciBzeXN0ZW0gaXMgYWx3YXlzIEdyZWdvcmlhbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtsZW5ndGg9J3Nob3J0J10gLSB0aGUgbGVuZ3RoIG9mIHRoZSBlcmEgcmVwcmVzZW50YXRpb24sIHN1Y2ggYXMgXCJzaG9ydFwiIG9yIFwibG9uZ1wiLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZV0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQGV4YW1wbGUgSW5mby5lcmFzKCkgLy89PiBbICdCQycsICdBRCcgXVxuICAgKiBAZXhhbXBsZSBJbmZvLmVyYXMoJ2xvbmcnKSAvLz0+IFsgJ0JlZm9yZSBDaHJpc3QnLCAnQW5ubyBEb21pbmknIF1cbiAgICogQGV4YW1wbGUgSW5mby5lcmFzKCdsb25nJywgeyBsb2NhbGU6ICdmcicgfSkgLy89PiBbICdhdmFudCBKXHUwMEU5c3VzLUNocmlzdCcsICdhcHJcdTAwRThzIEpcdTAwRTlzdXMtQ2hyaXN0JyBdXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgO1xuXG4gIEluZm8uZXJhcyA9IGZ1bmN0aW9uIGVyYXMobGVuZ3RoLCBfdGVtcDYpIHtcbiAgICBpZiAobGVuZ3RoID09PSB2b2lkIDApIHtcbiAgICAgIGxlbmd0aCA9IFwic2hvcnRcIjtcbiAgICB9XG5cbiAgICB2YXIgX3JlZjYgPSBfdGVtcDYgPT09IHZvaWQgMCA/IHt9IDogX3RlbXA2LFxuICAgICAgICBfcmVmNiRsb2NhbGUgPSBfcmVmNi5sb2NhbGUsXG4gICAgICAgIGxvY2FsZSA9IF9yZWY2JGxvY2FsZSA9PT0gdm9pZCAwID8gbnVsbCA6IF9yZWY2JGxvY2FsZTtcblxuICAgIHJldHVybiBMb2NhbGUuY3JlYXRlKGxvY2FsZSwgbnVsbCwgXCJncmVnb3J5XCIpLmVyYXMobGVuZ3RoKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHRoZSBzZXQgb2YgYXZhaWxhYmxlIGZlYXR1cmVzIGluIHRoaXMgZW52aXJvbm1lbnQuXG4gICAqIFNvbWUgZmVhdHVyZXMgb2YgTHV4b24gYXJlIG5vdCBhdmFpbGFibGUgaW4gYWxsIGVudmlyb25tZW50cy4gRm9yIGV4YW1wbGUsIG9uIG9sZGVyIGJyb3dzZXJzLCByZWxhdGl2ZSB0aW1lIGZvcm1hdHRpbmcgc3VwcG9ydCBpcyBub3QgYXZhaWxhYmxlLiBVc2UgdGhpcyBmdW5jdGlvbiB0byBmaWd1cmUgb3V0IGlmIHRoYXQncyB0aGUgY2FzZS5cbiAgICogS2V5czpcbiAgICogKiBgcmVsYXRpdmVgOiB3aGV0aGVyIHRoaXMgZW52aXJvbm1lbnQgc3VwcG9ydHMgcmVsYXRpdmUgdGltZSBmb3JtYXR0aW5nXG4gICAqIEBleGFtcGxlIEluZm8uZmVhdHVyZXMoKSAvLz0+IHsgcmVsYXRpdmU6IGZhbHNlIH1cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgO1xuXG4gIEluZm8uZmVhdHVyZXMgPSBmdW5jdGlvbiBmZWF0dXJlcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVsYXRpdmU6IGhhc1JlbGF0aXZlKClcbiAgICB9O1xuICB9O1xuXG4gIHJldHVybiBJbmZvO1xufSgpO1xuXG5mdW5jdGlvbiBkYXlEaWZmKGVhcmxpZXIsIGxhdGVyKSB7XG4gIHZhciB1dGNEYXlTdGFydCA9IGZ1bmN0aW9uIHV0Y0RheVN0YXJ0KGR0KSB7XG4gICAgcmV0dXJuIGR0LnRvVVRDKDAsIHtcbiAgICAgIGtlZXBMb2NhbFRpbWU6IHRydWVcbiAgICB9KS5zdGFydE9mKFwiZGF5XCIpLnZhbHVlT2YoKTtcbiAgfSxcbiAgICAgIG1zID0gdXRjRGF5U3RhcnQobGF0ZXIpIC0gdXRjRGF5U3RhcnQoZWFybGllcik7XG5cbiAgcmV0dXJuIE1hdGguZmxvb3IoRHVyYXRpb24uZnJvbU1pbGxpcyhtcykuYXMoXCJkYXlzXCIpKTtcbn1cblxuZnVuY3Rpb24gaGlnaE9yZGVyRGlmZnMoY3Vyc29yLCBsYXRlciwgdW5pdHMpIHtcbiAgdmFyIGRpZmZlcnMgPSBbW1wieWVhcnNcIiwgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYi55ZWFyIC0gYS55ZWFyO1xuICB9XSwgW1wicXVhcnRlcnNcIiwgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYi5xdWFydGVyIC0gYS5xdWFydGVyO1xuICB9XSwgW1wibW9udGhzXCIsIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIGIubW9udGggLSBhLm1vbnRoICsgKGIueWVhciAtIGEueWVhcikgKiAxMjtcbiAgfV0sIFtcIndlZWtzXCIsIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgdmFyIGRheXMgPSBkYXlEaWZmKGEsIGIpO1xuICAgIHJldHVybiAoZGF5cyAtIGRheXMgJSA3KSAvIDc7XG4gIH1dLCBbXCJkYXlzXCIsIGRheURpZmZdXTtcbiAgdmFyIHJlc3VsdHMgPSB7fTtcbiAgdmFyIGxvd2VzdE9yZGVyLCBoaWdoV2F0ZXI7XG5cbiAgZm9yICh2YXIgX2kgPSAwLCBfZGlmZmVycyA9IGRpZmZlcnM7IF9pIDwgX2RpZmZlcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgdmFyIF9kaWZmZXJzJF9pID0gX2RpZmZlcnNbX2ldLFxuICAgICAgICB1bml0ID0gX2RpZmZlcnMkX2lbMF0sXG4gICAgICAgIGRpZmZlciA9IF9kaWZmZXJzJF9pWzFdO1xuXG4gICAgaWYgKHVuaXRzLmluZGV4T2YodW5pdCkgPj0gMCkge1xuICAgICAgdmFyIF9jdXJzb3IkcGx1cztcblxuICAgICAgbG93ZXN0T3JkZXIgPSB1bml0O1xuICAgICAgdmFyIGRlbHRhID0gZGlmZmVyKGN1cnNvciwgbGF0ZXIpO1xuICAgICAgaGlnaFdhdGVyID0gY3Vyc29yLnBsdXMoKF9jdXJzb3IkcGx1cyA9IHt9LCBfY3Vyc29yJHBsdXNbdW5pdF0gPSBkZWx0YSwgX2N1cnNvciRwbHVzKSk7XG5cbiAgICAgIGlmIChoaWdoV2F0ZXIgPiBsYXRlcikge1xuICAgICAgICB2YXIgX2N1cnNvciRwbHVzMjtcblxuICAgICAgICBjdXJzb3IgPSBjdXJzb3IucGx1cygoX2N1cnNvciRwbHVzMiA9IHt9LCBfY3Vyc29yJHBsdXMyW3VuaXRdID0gZGVsdGEgLSAxLCBfY3Vyc29yJHBsdXMyKSk7XG4gICAgICAgIGRlbHRhIC09IDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJzb3IgPSBoaWdoV2F0ZXI7XG4gICAgICB9XG5cbiAgICAgIHJlc3VsdHNbdW5pdF0gPSBkZWx0YTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gW2N1cnNvciwgcmVzdWx0cywgaGlnaFdhdGVyLCBsb3dlc3RPcmRlcl07XG59XG5cbmZ1bmN0aW9uIF9kaWZmIChlYXJsaWVyLCBsYXRlciwgdW5pdHMsIG9wdHMpIHtcbiAgdmFyIF9oaWdoT3JkZXJEaWZmcyA9IGhpZ2hPcmRlckRpZmZzKGVhcmxpZXIsIGxhdGVyLCB1bml0cyksXG4gICAgICBjdXJzb3IgPSBfaGlnaE9yZGVyRGlmZnNbMF0sXG4gICAgICByZXN1bHRzID0gX2hpZ2hPcmRlckRpZmZzWzFdLFxuICAgICAgaGlnaFdhdGVyID0gX2hpZ2hPcmRlckRpZmZzWzJdLFxuICAgICAgbG93ZXN0T3JkZXIgPSBfaGlnaE9yZGVyRGlmZnNbM107XG5cbiAgdmFyIHJlbWFpbmluZ01pbGxpcyA9IGxhdGVyIC0gY3Vyc29yO1xuICB2YXIgbG93ZXJPcmRlclVuaXRzID0gdW5pdHMuZmlsdGVyKGZ1bmN0aW9uICh1KSB7XG4gICAgcmV0dXJuIFtcImhvdXJzXCIsIFwibWludXRlc1wiLCBcInNlY29uZHNcIiwgXCJtaWxsaXNlY29uZHNcIl0uaW5kZXhPZih1KSA+PSAwO1xuICB9KTtcblxuICBpZiAobG93ZXJPcmRlclVuaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGlmIChoaWdoV2F0ZXIgPCBsYXRlcikge1xuICAgICAgdmFyIF9jdXJzb3IkcGx1czM7XG5cbiAgICAgIGhpZ2hXYXRlciA9IGN1cnNvci5wbHVzKChfY3Vyc29yJHBsdXMzID0ge30sIF9jdXJzb3IkcGx1czNbbG93ZXN0T3JkZXJdID0gMSwgX2N1cnNvciRwbHVzMykpO1xuICAgIH1cblxuICAgIGlmIChoaWdoV2F0ZXIgIT09IGN1cnNvcikge1xuICAgICAgcmVzdWx0c1tsb3dlc3RPcmRlcl0gPSAocmVzdWx0c1tsb3dlc3RPcmRlcl0gfHwgMCkgKyByZW1haW5pbmdNaWxsaXMgLyAoaGlnaFdhdGVyIC0gY3Vyc29yKTtcbiAgICB9XG4gIH1cblxuICB2YXIgZHVyYXRpb24gPSBEdXJhdGlvbi5mcm9tT2JqZWN0KHJlc3VsdHMsIG9wdHMpO1xuXG4gIGlmIChsb3dlck9yZGVyVW5pdHMubGVuZ3RoID4gMCkge1xuICAgIHZhciBfRHVyYXRpb24kZnJvbU1pbGxpcztcblxuICAgIHJldHVybiAoX0R1cmF0aW9uJGZyb21NaWxsaXMgPSBEdXJhdGlvbi5mcm9tTWlsbGlzKHJlbWFpbmluZ01pbGxpcywgb3B0cykpLnNoaWZ0VG8uYXBwbHkoX0R1cmF0aW9uJGZyb21NaWxsaXMsIGxvd2VyT3JkZXJVbml0cykucGx1cyhkdXJhdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGR1cmF0aW9uO1xuICB9XG59XG5cbnZhciBudW1iZXJpbmdTeXN0ZW1zID0ge1xuICBhcmFiOiBcIltcXHUwNjYwLVxcdTA2NjldXCIsXG4gIGFyYWJleHQ6IFwiW1xcdTA2RjAtXFx1MDZGOV1cIixcbiAgYmFsaTogXCJbXFx1MUI1MC1cXHUxQjU5XVwiLFxuICBiZW5nOiBcIltcXHUwOUU2LVxcdTA5RUZdXCIsXG4gIGRldmE6IFwiW1xcdTA5NjYtXFx1MDk2Rl1cIixcbiAgZnVsbHdpZGU6IFwiW1xcdUZGMTAtXFx1RkYxOV1cIixcbiAgZ3VqcjogXCJbXFx1MEFFNi1cXHUwQUVGXVwiLFxuICBoYW5pZGVjOiBcIltcdTMwMDd8XHU0RTAwfFx1NEU4Q3xcdTRFMDl8XHU1NkRCfFx1NEU5NHxcdTUxNkR8XHU0RTAzfFx1NTE2QnxcdTRFNURdXCIsXG4gIGtobXI6IFwiW1xcdTE3RTAtXFx1MTdFOV1cIixcbiAga25kYTogXCJbXFx1MENFNi1cXHUwQ0VGXVwiLFxuICBsYW9vOiBcIltcXHUwRUQwLVxcdTBFRDldXCIsXG4gIGxpbWI6IFwiW1xcdTE5NDYtXFx1MTk0Rl1cIixcbiAgbWx5bTogXCJbXFx1MEQ2Ni1cXHUwRDZGXVwiLFxuICBtb25nOiBcIltcXHUxODEwLVxcdTE4MTldXCIsXG4gIG15bXI6IFwiW1xcdTEwNDAtXFx1MTA0OV1cIixcbiAgb3J5YTogXCJbXFx1MEI2Ni1cXHUwQjZGXVwiLFxuICB0YW1sZGVjOiBcIltcXHUwQkU2LVxcdTBCRUZdXCIsXG4gIHRlbHU6IFwiW1xcdTBDNjYtXFx1MEM2Rl1cIixcbiAgdGhhaTogXCJbXFx1MEU1MC1cXHUwRTU5XVwiLFxuICB0aWJ0OiBcIltcXHUwRjIwLVxcdTBGMjldXCIsXG4gIGxhdG46IFwiXFxcXGRcIlxufTtcbnZhciBudW1iZXJpbmdTeXN0ZW1zVVRGMTYgPSB7XG4gIGFyYWI6IFsxNjMyLCAxNjQxXSxcbiAgYXJhYmV4dDogWzE3NzYsIDE3ODVdLFxuICBiYWxpOiBbNjk5MiwgNzAwMV0sXG4gIGJlbmc6IFsyNTM0LCAyNTQzXSxcbiAgZGV2YTogWzI0MDYsIDI0MTVdLFxuICBmdWxsd2lkZTogWzY1Mjk2LCA2NTMwM10sXG4gIGd1anI6IFsyNzkwLCAyNzk5XSxcbiAga2htcjogWzYxMTIsIDYxMjFdLFxuICBrbmRhOiBbMzMwMiwgMzMxMV0sXG4gIGxhb286IFszNzkyLCAzODAxXSxcbiAgbGltYjogWzY0NzAsIDY0NzldLFxuICBtbHltOiBbMzQzMCwgMzQzOV0sXG4gIG1vbmc6IFs2MTYwLCA2MTY5XSxcbiAgbXltcjogWzQxNjAsIDQxNjldLFxuICBvcnlhOiBbMjkxOCwgMjkyN10sXG4gIHRhbWxkZWM6IFszMDQ2LCAzMDU1XSxcbiAgdGVsdTogWzMxNzQsIDMxODNdLFxuICB0aGFpOiBbMzY2NCwgMzY3M10sXG4gIHRpYnQ6IFszODcyLCAzODgxXVxufTtcbnZhciBoYW5pZGVjQ2hhcnMgPSBudW1iZXJpbmdTeXN0ZW1zLmhhbmlkZWMucmVwbGFjZSgvW1xcW3xcXF1dL2csIFwiXCIpLnNwbGl0KFwiXCIpO1xuZnVuY3Rpb24gcGFyc2VEaWdpdHMoc3RyKSB7XG4gIHZhciB2YWx1ZSA9IHBhcnNlSW50KHN0ciwgMTApO1xuXG4gIGlmIChpc05hTih2YWx1ZSkpIHtcbiAgICB2YWx1ZSA9IFwiXCI7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGNvZGUgPSBzdHIuY2hhckNvZGVBdChpKTtcblxuICAgICAgaWYgKHN0cltpXS5zZWFyY2gobnVtYmVyaW5nU3lzdGVtcy5oYW5pZGVjKSAhPT0gLTEpIHtcbiAgICAgICAgdmFsdWUgKz0gaGFuaWRlY0NoYXJzLmluZGV4T2Yoc3RyW2ldKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBudW1iZXJpbmdTeXN0ZW1zVVRGMTYpIHtcbiAgICAgICAgICB2YXIgX251bWJlcmluZ1N5c3RlbXNVVEYgPSBudW1iZXJpbmdTeXN0ZW1zVVRGMTZba2V5XSxcbiAgICAgICAgICAgICAgbWluID0gX251bWJlcmluZ1N5c3RlbXNVVEZbMF0sXG4gICAgICAgICAgICAgIG1heCA9IF9udW1iZXJpbmdTeXN0ZW1zVVRGWzFdO1xuXG4gICAgICAgICAgaWYgKGNvZGUgPj0gbWluICYmIGNvZGUgPD0gbWF4KSB7XG4gICAgICAgICAgICB2YWx1ZSArPSBjb2RlIC0gbWluO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwYXJzZUludCh2YWx1ZSwgMTApO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gZGlnaXRSZWdleChfcmVmLCBhcHBlbmQpIHtcbiAgdmFyIG51bWJlcmluZ1N5c3RlbSA9IF9yZWYubnVtYmVyaW5nU3lzdGVtO1xuXG4gIGlmIChhcHBlbmQgPT09IHZvaWQgMCkge1xuICAgIGFwcGVuZCA9IFwiXCI7XG4gIH1cblxuICByZXR1cm4gbmV3IFJlZ0V4cChcIlwiICsgbnVtYmVyaW5nU3lzdGVtc1tudW1iZXJpbmdTeXN0ZW0gfHwgXCJsYXRuXCJdICsgYXBwZW5kKTtcbn1cblxudmFyIE1JU1NJTkdfRlRQID0gXCJtaXNzaW5nIEludGwuRGF0ZVRpbWVGb3JtYXQuZm9ybWF0VG9QYXJ0cyBzdXBwb3J0XCI7XG5cbmZ1bmN0aW9uIGludFVuaXQocmVnZXgsIHBvc3QpIHtcbiAgaWYgKHBvc3QgPT09IHZvaWQgMCkge1xuICAgIHBvc3QgPSBmdW5jdGlvbiBwb3N0KGkpIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHJlZ2V4OiByZWdleCxcbiAgICBkZXNlcjogZnVuY3Rpb24gZGVzZXIoX3JlZikge1xuICAgICAgdmFyIHMgPSBfcmVmWzBdO1xuICAgICAgcmV0dXJuIHBvc3QocGFyc2VEaWdpdHMocykpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIE5CU1AgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDE2MCk7XG52YXIgc3BhY2VPck5CU1AgPSBcIlsgXCIgKyBOQlNQICsgXCJdXCI7XG52YXIgc3BhY2VPck5CU1BSZWdFeHAgPSBuZXcgUmVnRXhwKHNwYWNlT3JOQlNQLCBcImdcIik7XG5cbmZ1bmN0aW9uIGZpeExpc3RSZWdleChzKSB7XG4gIC8vIG1ha2UgZG90cyBvcHRpb25hbCBhbmQgYWxzbyBtYWtlIHRoZW0gbGl0ZXJhbFxuICAvLyBtYWtlIHNwYWNlIGFuZCBub24gYnJlYWthYmxlIHNwYWNlIGNoYXJhY3RlcnMgaW50ZXJjaGFuZ2VhYmxlXG4gIHJldHVybiBzLnJlcGxhY2UoL1xcLi9nLCBcIlxcXFwuP1wiKS5yZXBsYWNlKHNwYWNlT3JOQlNQUmVnRXhwLCBzcGFjZU9yTkJTUCk7XG59XG5cbmZ1bmN0aW9uIHN0cmlwSW5zZW5zaXRpdml0aWVzKHMpIHtcbiAgcmV0dXJuIHMucmVwbGFjZSgvXFwuL2csIFwiXCIpIC8vIGlnbm9yZSBkb3RzIHRoYXQgd2VyZSBtYWRlIG9wdGlvbmFsXG4gIC5yZXBsYWNlKHNwYWNlT3JOQlNQUmVnRXhwLCBcIiBcIikgLy8gaW50ZXJjaGFuZ2Ugc3BhY2UgYW5kIG5ic3BcbiAgLnRvTG93ZXJDYXNlKCk7XG59XG5cbmZ1bmN0aW9uIG9uZU9mKHN0cmluZ3MsIHN0YXJ0SW5kZXgpIHtcbiAgaWYgKHN0cmluZ3MgPT09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVnZXg6IFJlZ0V4cChzdHJpbmdzLm1hcChmaXhMaXN0UmVnZXgpLmpvaW4oXCJ8XCIpKSxcbiAgICAgIGRlc2VyOiBmdW5jdGlvbiBkZXNlcihfcmVmMikge1xuICAgICAgICB2YXIgcyA9IF9yZWYyWzBdO1xuICAgICAgICByZXR1cm4gc3RyaW5ncy5maW5kSW5kZXgoZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICByZXR1cm4gc3RyaXBJbnNlbnNpdGl2aXRpZXMocykgPT09IHN0cmlwSW5zZW5zaXRpdml0aWVzKGkpO1xuICAgICAgICB9KSArIHN0YXJ0SW5kZXg7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBvZmZzZXQocmVnZXgsIGdyb3Vwcykge1xuICByZXR1cm4ge1xuICAgIHJlZ2V4OiByZWdleCxcbiAgICBkZXNlcjogZnVuY3Rpb24gZGVzZXIoX3JlZjMpIHtcbiAgICAgIHZhciBoID0gX3JlZjNbMV0sXG4gICAgICAgICAgbSA9IF9yZWYzWzJdO1xuICAgICAgcmV0dXJuIHNpZ25lZE9mZnNldChoLCBtKTtcbiAgICB9LFxuICAgIGdyb3VwczogZ3JvdXBzXG4gIH07XG59XG5cbmZ1bmN0aW9uIHNpbXBsZShyZWdleCkge1xuICByZXR1cm4ge1xuICAgIHJlZ2V4OiByZWdleCxcbiAgICBkZXNlcjogZnVuY3Rpb24gZGVzZXIoX3JlZjQpIHtcbiAgICAgIHZhciBzID0gX3JlZjRbMF07XG4gICAgICByZXR1cm4gcztcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGVzY2FwZVRva2VuKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZS5yZXBsYWNlKC9bXFwtXFxbXFxde30oKSorPy4sXFxcXFxcXiR8I1xcc10vZywgXCJcXFxcJCZcIik7XG59XG5cbmZ1bmN0aW9uIHVuaXRGb3JUb2tlbih0b2tlbiwgbG9jKSB7XG4gIHZhciBvbmUgPSBkaWdpdFJlZ2V4KGxvYyksXG4gICAgICB0d28gPSBkaWdpdFJlZ2V4KGxvYywgXCJ7Mn1cIiksXG4gICAgICB0aHJlZSA9IGRpZ2l0UmVnZXgobG9jLCBcInszfVwiKSxcbiAgICAgIGZvdXIgPSBkaWdpdFJlZ2V4KGxvYywgXCJ7NH1cIiksXG4gICAgICBzaXggPSBkaWdpdFJlZ2V4KGxvYywgXCJ7Nn1cIiksXG4gICAgICBvbmVPclR3byA9IGRpZ2l0UmVnZXgobG9jLCBcInsxLDJ9XCIpLFxuICAgICAgb25lVG9UaHJlZSA9IGRpZ2l0UmVnZXgobG9jLCBcInsxLDN9XCIpLFxuICAgICAgb25lVG9TaXggPSBkaWdpdFJlZ2V4KGxvYywgXCJ7MSw2fVwiKSxcbiAgICAgIG9uZVRvTmluZSA9IGRpZ2l0UmVnZXgobG9jLCBcInsxLDl9XCIpLFxuICAgICAgdHdvVG9Gb3VyID0gZGlnaXRSZWdleChsb2MsIFwiezIsNH1cIiksXG4gICAgICBmb3VyVG9TaXggPSBkaWdpdFJlZ2V4KGxvYywgXCJ7NCw2fVwiKSxcbiAgICAgIGxpdGVyYWwgPSBmdW5jdGlvbiBsaXRlcmFsKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVnZXg6IFJlZ0V4cChlc2NhcGVUb2tlbih0LnZhbCkpLFxuICAgICAgZGVzZXI6IGZ1bmN0aW9uIGRlc2VyKF9yZWY1KSB7XG4gICAgICAgIHZhciBzID0gX3JlZjVbMF07XG4gICAgICAgIHJldHVybiBzO1xuICAgICAgfSxcbiAgICAgIGxpdGVyYWw6IHRydWVcbiAgICB9O1xuICB9LFxuICAgICAgdW5pdGF0ZSA9IGZ1bmN0aW9uIHVuaXRhdGUodCkge1xuICAgIGlmICh0b2tlbi5saXRlcmFsKSB7XG4gICAgICByZXR1cm4gbGl0ZXJhbCh0KTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHQudmFsKSB7XG4gICAgICAvLyBlcmFcbiAgICAgIGNhc2UgXCJHXCI6XG4gICAgICAgIHJldHVybiBvbmVPZihsb2MuZXJhcyhcInNob3J0XCIsIGZhbHNlKSwgMCk7XG5cbiAgICAgIGNhc2UgXCJHR1wiOlxuICAgICAgICByZXR1cm4gb25lT2YobG9jLmVyYXMoXCJsb25nXCIsIGZhbHNlKSwgMCk7XG4gICAgICAvLyB5ZWFyc1xuXG4gICAgICBjYXNlIFwieVwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChvbmVUb1NpeCk7XG5cbiAgICAgIGNhc2UgXCJ5eVwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdCh0d29Ub0ZvdXIsIHVudHJ1bmNhdGVZZWFyKTtcblxuICAgICAgY2FzZSBcInl5eXlcIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQoZm91cik7XG5cbiAgICAgIGNhc2UgXCJ5eXl5eVwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChmb3VyVG9TaXgpO1xuXG4gICAgICBjYXNlIFwieXl5eXl5XCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KHNpeCk7XG4gICAgICAvLyBtb250aHNcblxuICAgICAgY2FzZSBcIk1cIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pO1xuXG4gICAgICBjYXNlIFwiTU1cIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQodHdvKTtcblxuICAgICAgY2FzZSBcIk1NTVwiOlxuICAgICAgICByZXR1cm4gb25lT2YobG9jLm1vbnRocyhcInNob3J0XCIsIHRydWUsIGZhbHNlKSwgMSk7XG5cbiAgICAgIGNhc2UgXCJNTU1NXCI6XG4gICAgICAgIHJldHVybiBvbmVPZihsb2MubW9udGhzKFwibG9uZ1wiLCB0cnVlLCBmYWxzZSksIDEpO1xuXG4gICAgICBjYXNlIFwiTFwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG5cbiAgICAgIGNhc2UgXCJMTFwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuXG4gICAgICBjYXNlIFwiTExMXCI6XG4gICAgICAgIHJldHVybiBvbmVPZihsb2MubW9udGhzKFwic2hvcnRcIiwgZmFsc2UsIGZhbHNlKSwgMSk7XG5cbiAgICAgIGNhc2UgXCJMTExMXCI6XG4gICAgICAgIHJldHVybiBvbmVPZihsb2MubW9udGhzKFwibG9uZ1wiLCBmYWxzZSwgZmFsc2UpLCAxKTtcbiAgICAgIC8vIGRhdGVzXG5cbiAgICAgIGNhc2UgXCJkXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcblxuICAgICAgY2FzZSBcImRkXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG4gICAgICAvLyBvcmRpbmFsc1xuXG4gICAgICBjYXNlIFwib1wiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChvbmVUb1RocmVlKTtcblxuICAgICAgY2FzZSBcIm9vb1wiOlxuICAgICAgICByZXR1cm4gaW50VW5pdCh0aHJlZSk7XG4gICAgICAvLyB0aW1lXG5cbiAgICAgIGNhc2UgXCJISFwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuXG4gICAgICBjYXNlIFwiSFwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG5cbiAgICAgIGNhc2UgXCJoaFwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuXG4gICAgICBjYXNlIFwiaFwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG5cbiAgICAgIGNhc2UgXCJtbVwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuXG4gICAgICBjYXNlIFwibVwiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG5cbiAgICAgIGNhc2UgXCJxXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcblxuICAgICAgY2FzZSBcInFxXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG5cbiAgICAgIGNhc2UgXCJzXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcblxuICAgICAgY2FzZSBcInNzXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG5cbiAgICAgIGNhc2UgXCJTXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KG9uZVRvVGhyZWUpO1xuXG4gICAgICBjYXNlIFwiU1NTXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KHRocmVlKTtcblxuICAgICAgY2FzZSBcInVcIjpcbiAgICAgICAgcmV0dXJuIHNpbXBsZShvbmVUb05pbmUpO1xuXG4gICAgICBjYXNlIFwidXVcIjpcbiAgICAgICAgcmV0dXJuIHNpbXBsZShvbmVPclR3byk7XG5cbiAgICAgIGNhc2UgXCJ1dXVcIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQob25lKTtcbiAgICAgIC8vIG1lcmlkaWVtXG5cbiAgICAgIGNhc2UgXCJhXCI6XG4gICAgICAgIHJldHVybiBvbmVPZihsb2MubWVyaWRpZW1zKCksIDApO1xuICAgICAgLy8gd2Vla1llYXIgKGspXG5cbiAgICAgIGNhc2UgXCJra2trXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KGZvdXIpO1xuXG4gICAgICBjYXNlIFwia2tcIjpcbiAgICAgICAgcmV0dXJuIGludFVuaXQodHdvVG9Gb3VyLCB1bnRydW5jYXRlWWVhcik7XG4gICAgICAvLyB3ZWVrTnVtYmVyIChXKVxuXG4gICAgICBjYXNlIFwiV1wiOlxuICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG5cbiAgICAgIGNhc2UgXCJXV1wiOlxuICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuICAgICAgLy8gd2Vla2RheXNcblxuICAgICAgY2FzZSBcIkVcIjpcbiAgICAgIGNhc2UgXCJjXCI6XG4gICAgICAgIHJldHVybiBpbnRVbml0KG9uZSk7XG5cbiAgICAgIGNhc2UgXCJFRUVcIjpcbiAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy53ZWVrZGF5cyhcInNob3J0XCIsIGZhbHNlLCBmYWxzZSksIDEpO1xuXG4gICAgICBjYXNlIFwiRUVFRVwiOlxuICAgICAgICByZXR1cm4gb25lT2YobG9jLndlZWtkYXlzKFwibG9uZ1wiLCBmYWxzZSwgZmFsc2UpLCAxKTtcblxuICAgICAgY2FzZSBcImNjY1wiOlxuICAgICAgICByZXR1cm4gb25lT2YobG9jLndlZWtkYXlzKFwic2hvcnRcIiwgdHJ1ZSwgZmFsc2UpLCAxKTtcblxuICAgICAgY2FzZSBcImNjY2NcIjpcbiAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy53ZWVrZGF5cyhcImxvbmdcIiwgdHJ1ZSwgZmFsc2UpLCAxKTtcbiAgICAgIC8vIG9mZnNldC96b25lXG5cbiAgICAgIGNhc2UgXCJaXCI6XG4gICAgICBjYXNlIFwiWlpcIjpcbiAgICAgICAgcmV0dXJuIG9mZnNldChuZXcgUmVnRXhwKFwiKFsrLV1cIiArIG9uZU9yVHdvLnNvdXJjZSArIFwiKSg/OjooXCIgKyB0d28uc291cmNlICsgXCIpKT9cIiksIDIpO1xuXG4gICAgICBjYXNlIFwiWlpaXCI6XG4gICAgICAgIHJldHVybiBvZmZzZXQobmV3IFJlZ0V4cChcIihbKy1dXCIgKyBvbmVPclR3by5zb3VyY2UgKyBcIikoXCIgKyB0d28uc291cmNlICsgXCIpP1wiKSwgMik7XG4gICAgICAvLyB3ZSBkb24ndCBzdXBwb3J0IFpaWlogKFBTVCkgb3IgWlpaWlogKFBhY2lmaWMgU3RhbmRhcmQgVGltZSkgaW4gcGFyc2luZ1xuICAgICAgLy8gYmVjYXVzZSB3ZSBkb24ndCBoYXZlIGFueSB3YXkgdG8gZmlndXJlIG91dCB3aGF0IHRoZXkgYXJlXG5cbiAgICAgIGNhc2UgXCJ6XCI6XG4gICAgICAgIHJldHVybiBzaW1wbGUoL1thLXpfKy0vXXsxLDI1Nn0/L2kpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbGl0ZXJhbCh0KTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHVuaXQgPSB1bml0YXRlKHRva2VuKSB8fCB7XG4gICAgaW52YWxpZFJlYXNvbjogTUlTU0lOR19GVFBcbiAgfTtcbiAgdW5pdC50b2tlbiA9IHRva2VuO1xuICByZXR1cm4gdW5pdDtcbn1cblxudmFyIHBhcnRUeXBlU3R5bGVUb1Rva2VuVmFsID0ge1xuICB5ZWFyOiB7XG4gICAgXCIyLWRpZ2l0XCI6IFwieXlcIixcbiAgICBudW1lcmljOiBcInl5eXl5XCJcbiAgfSxcbiAgbW9udGg6IHtcbiAgICBudW1lcmljOiBcIk1cIixcbiAgICBcIjItZGlnaXRcIjogXCJNTVwiLFxuICAgIHNob3J0OiBcIk1NTVwiLFxuICAgIGxvbmc6IFwiTU1NTVwiXG4gIH0sXG4gIGRheToge1xuICAgIG51bWVyaWM6IFwiZFwiLFxuICAgIFwiMi1kaWdpdFwiOiBcImRkXCJcbiAgfSxcbiAgd2Vla2RheToge1xuICAgIHNob3J0OiBcIkVFRVwiLFxuICAgIGxvbmc6IFwiRUVFRVwiXG4gIH0sXG4gIGRheXBlcmlvZDogXCJhXCIsXG4gIGRheVBlcmlvZDogXCJhXCIsXG4gIGhvdXI6IHtcbiAgICBudW1lcmljOiBcImhcIixcbiAgICBcIjItZGlnaXRcIjogXCJoaFwiXG4gIH0sXG4gIG1pbnV0ZToge1xuICAgIG51bWVyaWM6IFwibVwiLFxuICAgIFwiMi1kaWdpdFwiOiBcIm1tXCJcbiAgfSxcbiAgc2Vjb25kOiB7XG4gICAgbnVtZXJpYzogXCJzXCIsXG4gICAgXCIyLWRpZ2l0XCI6IFwic3NcIlxuICB9XG59O1xuXG5mdW5jdGlvbiB0b2tlbkZvclBhcnQocGFydCwgbG9jYWxlLCBmb3JtYXRPcHRzKSB7XG4gIHZhciB0eXBlID0gcGFydC50eXBlLFxuICAgICAgdmFsdWUgPSBwYXJ0LnZhbHVlO1xuXG4gIGlmICh0eXBlID09PSBcImxpdGVyYWxcIikge1xuICAgIHJldHVybiB7XG4gICAgICBsaXRlcmFsOiB0cnVlLFxuICAgICAgdmFsOiB2YWx1ZVxuICAgIH07XG4gIH1cblxuICB2YXIgc3R5bGUgPSBmb3JtYXRPcHRzW3R5cGVdO1xuICB2YXIgdmFsID0gcGFydFR5cGVTdHlsZVRvVG9rZW5WYWxbdHlwZV07XG5cbiAgaWYgKHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIpIHtcbiAgICB2YWwgPSB2YWxbc3R5bGVdO1xuICB9XG5cbiAgaWYgKHZhbCkge1xuICAgIHJldHVybiB7XG4gICAgICBsaXRlcmFsOiBmYWxzZSxcbiAgICAgIHZhbDogdmFsXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkUmVnZXgodW5pdHMpIHtcbiAgdmFyIHJlID0gdW5pdHMubWFwKGZ1bmN0aW9uICh1KSB7XG4gICAgcmV0dXJuIHUucmVnZXg7XG4gIH0pLnJlZHVjZShmdW5jdGlvbiAoZiwgcikge1xuICAgIHJldHVybiBmICsgXCIoXCIgKyByLnNvdXJjZSArIFwiKVwiO1xuICB9LCBcIlwiKTtcbiAgcmV0dXJuIFtcIl5cIiArIHJlICsgXCIkXCIsIHVuaXRzXTtcbn1cblxuZnVuY3Rpb24gbWF0Y2goaW5wdXQsIHJlZ2V4LCBoYW5kbGVycykge1xuICB2YXIgbWF0Y2hlcyA9IGlucHV0Lm1hdGNoKHJlZ2V4KTtcblxuICBpZiAobWF0Y2hlcykge1xuICAgIHZhciBhbGwgPSB7fTtcbiAgICB2YXIgbWF0Y2hJbmRleCA9IDE7XG5cbiAgICBmb3IgKHZhciBpIGluIGhhbmRsZXJzKSB7XG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkoaGFuZGxlcnMsIGkpKSB7XG4gICAgICAgIHZhciBoID0gaGFuZGxlcnNbaV0sXG4gICAgICAgICAgICBncm91cHMgPSBoLmdyb3VwcyA/IGguZ3JvdXBzICsgMSA6IDE7XG5cbiAgICAgICAgaWYgKCFoLmxpdGVyYWwgJiYgaC50b2tlbikge1xuICAgICAgICAgIGFsbFtoLnRva2VuLnZhbFswXV0gPSBoLmRlc2VyKG1hdGNoZXMuc2xpY2UobWF0Y2hJbmRleCwgbWF0Y2hJbmRleCArIGdyb3VwcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgbWF0Y2hJbmRleCArPSBncm91cHM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFttYXRjaGVzLCBhbGxdO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBbbWF0Y2hlcywge31dO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRhdGVUaW1lRnJvbU1hdGNoZXMobWF0Y2hlcykge1xuICB2YXIgdG9GaWVsZCA9IGZ1bmN0aW9uIHRvRmllbGQodG9rZW4pIHtcbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICBjYXNlIFwiU1wiOlxuICAgICAgICByZXR1cm4gXCJtaWxsaXNlY29uZFwiO1xuXG4gICAgICBjYXNlIFwic1wiOlxuICAgICAgICByZXR1cm4gXCJzZWNvbmRcIjtcblxuICAgICAgY2FzZSBcIm1cIjpcbiAgICAgICAgcmV0dXJuIFwibWludXRlXCI7XG5cbiAgICAgIGNhc2UgXCJoXCI6XG4gICAgICBjYXNlIFwiSFwiOlxuICAgICAgICByZXR1cm4gXCJob3VyXCI7XG5cbiAgICAgIGNhc2UgXCJkXCI6XG4gICAgICAgIHJldHVybiBcImRheVwiO1xuXG4gICAgICBjYXNlIFwib1wiOlxuICAgICAgICByZXR1cm4gXCJvcmRpbmFsXCI7XG5cbiAgICAgIGNhc2UgXCJMXCI6XG4gICAgICBjYXNlIFwiTVwiOlxuICAgICAgICByZXR1cm4gXCJtb250aFwiO1xuXG4gICAgICBjYXNlIFwieVwiOlxuICAgICAgICByZXR1cm4gXCJ5ZWFyXCI7XG5cbiAgICAgIGNhc2UgXCJFXCI6XG4gICAgICBjYXNlIFwiY1wiOlxuICAgICAgICByZXR1cm4gXCJ3ZWVrZGF5XCI7XG5cbiAgICAgIGNhc2UgXCJXXCI6XG4gICAgICAgIHJldHVybiBcIndlZWtOdW1iZXJcIjtcblxuICAgICAgY2FzZSBcImtcIjpcbiAgICAgICAgcmV0dXJuIFwid2Vla1llYXJcIjtcblxuICAgICAgY2FzZSBcInFcIjpcbiAgICAgICAgcmV0dXJuIFwicXVhcnRlclwiO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHpvbmUgPSBudWxsO1xuICB2YXIgc3BlY2lmaWNPZmZzZXQ7XG5cbiAgaWYgKCFpc1VuZGVmaW5lZChtYXRjaGVzLnopKSB7XG4gICAgem9uZSA9IElBTkFab25lLmNyZWF0ZShtYXRjaGVzLnopO1xuICB9XG5cbiAgaWYgKCFpc1VuZGVmaW5lZChtYXRjaGVzLlopKSB7XG4gICAgaWYgKCF6b25lKSB7XG4gICAgICB6b25lID0gbmV3IEZpeGVkT2Zmc2V0Wm9uZShtYXRjaGVzLlopO1xuICAgIH1cblxuICAgIHNwZWNpZmljT2Zmc2V0ID0gbWF0Y2hlcy5aO1xuICB9XG5cbiAgaWYgKCFpc1VuZGVmaW5lZChtYXRjaGVzLnEpKSB7XG4gICAgbWF0Y2hlcy5NID0gKG1hdGNoZXMucSAtIDEpICogMyArIDE7XG4gIH1cblxuICBpZiAoIWlzVW5kZWZpbmVkKG1hdGNoZXMuaCkpIHtcbiAgICBpZiAobWF0Y2hlcy5oIDwgMTIgJiYgbWF0Y2hlcy5hID09PSAxKSB7XG4gICAgICBtYXRjaGVzLmggKz0gMTI7XG4gICAgfSBlbHNlIGlmIChtYXRjaGVzLmggPT09IDEyICYmIG1hdGNoZXMuYSA9PT0gMCkge1xuICAgICAgbWF0Y2hlcy5oID0gMDtcbiAgICB9XG4gIH1cblxuICBpZiAobWF0Y2hlcy5HID09PSAwICYmIG1hdGNoZXMueSkge1xuICAgIG1hdGNoZXMueSA9IC1tYXRjaGVzLnk7XG4gIH1cblxuICBpZiAoIWlzVW5kZWZpbmVkKG1hdGNoZXMudSkpIHtcbiAgICBtYXRjaGVzLlMgPSBwYXJzZU1pbGxpcyhtYXRjaGVzLnUpO1xuICB9XG5cbiAgdmFyIHZhbHMgPSBPYmplY3Qua2V5cyhtYXRjaGVzKS5yZWR1Y2UoZnVuY3Rpb24gKHIsIGspIHtcbiAgICB2YXIgZiA9IHRvRmllbGQoayk7XG5cbiAgICBpZiAoZikge1xuICAgICAgcltmXSA9IG1hdGNoZXNba107XG4gICAgfVxuXG4gICAgcmV0dXJuIHI7XG4gIH0sIHt9KTtcbiAgcmV0dXJuIFt2YWxzLCB6b25lLCBzcGVjaWZpY09mZnNldF07XG59XG5cbnZhciBkdW1teURhdGVUaW1lQ2FjaGUgPSBudWxsO1xuXG5mdW5jdGlvbiBnZXREdW1teURhdGVUaW1lKCkge1xuICBpZiAoIWR1bW15RGF0ZVRpbWVDYWNoZSkge1xuICAgIGR1bW15RGF0ZVRpbWVDYWNoZSA9IERhdGVUaW1lLmZyb21NaWxsaXMoMTU1NTU1NTU1NTU1NSk7XG4gIH1cblxuICByZXR1cm4gZHVtbXlEYXRlVGltZUNhY2hlO1xufVxuXG5mdW5jdGlvbiBtYXliZUV4cGFuZE1hY3JvVG9rZW4odG9rZW4sIGxvY2FsZSkge1xuICBpZiAodG9rZW4ubGl0ZXJhbCkge1xuICAgIHJldHVybiB0b2tlbjtcbiAgfVxuXG4gIHZhciBmb3JtYXRPcHRzID0gRm9ybWF0dGVyLm1hY3JvVG9rZW5Ub0Zvcm1hdE9wdHModG9rZW4udmFsKTtcblxuICBpZiAoIWZvcm1hdE9wdHMpIHtcbiAgICByZXR1cm4gdG9rZW47XG4gIH1cblxuICB2YXIgZm9ybWF0dGVyID0gRm9ybWF0dGVyLmNyZWF0ZShsb2NhbGUsIGZvcm1hdE9wdHMpO1xuICB2YXIgcGFydHMgPSBmb3JtYXR0ZXIuZm9ybWF0RGF0ZVRpbWVQYXJ0cyhnZXREdW1teURhdGVUaW1lKCkpO1xuICB2YXIgdG9rZW5zID0gcGFydHMubWFwKGZ1bmN0aW9uIChwKSB7XG4gICAgcmV0dXJuIHRva2VuRm9yUGFydChwLCBsb2NhbGUsIGZvcm1hdE9wdHMpO1xuICB9KTtcblxuICBpZiAodG9rZW5zLmluY2x1ZGVzKHVuZGVmaW5lZCkpIHtcbiAgICByZXR1cm4gdG9rZW47XG4gIH1cblxuICByZXR1cm4gdG9rZW5zO1xufVxuXG5mdW5jdGlvbiBleHBhbmRNYWNyb1Rva2Vucyh0b2tlbnMsIGxvY2FsZSkge1xuICB2YXIgX0FycmF5JHByb3RvdHlwZTtcblxuICByZXR1cm4gKF9BcnJheSRwcm90b3R5cGUgPSBBcnJheS5wcm90b3R5cGUpLmNvbmNhdC5hcHBseShfQXJyYXkkcHJvdG90eXBlLCB0b2tlbnMubWFwKGZ1bmN0aW9uICh0KSB7XG4gICAgcmV0dXJuIG1heWJlRXhwYW5kTWFjcm9Ub2tlbih0LCBsb2NhbGUpO1xuICB9KSk7XG59XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxuXG5mdW5jdGlvbiBleHBsYWluRnJvbVRva2Vucyhsb2NhbGUsIGlucHV0LCBmb3JtYXQpIHtcbiAgdmFyIHRva2VucyA9IGV4cGFuZE1hY3JvVG9rZW5zKEZvcm1hdHRlci5wYXJzZUZvcm1hdChmb3JtYXQpLCBsb2NhbGUpLFxuICAgICAgdW5pdHMgPSB0b2tlbnMubWFwKGZ1bmN0aW9uICh0KSB7XG4gICAgcmV0dXJuIHVuaXRGb3JUb2tlbih0LCBsb2NhbGUpO1xuICB9KSxcbiAgICAgIGRpc3F1YWxpZnlpbmdVbml0ID0gdW5pdHMuZmluZChmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiB0LmludmFsaWRSZWFzb247XG4gIH0pO1xuXG4gIGlmIChkaXNxdWFsaWZ5aW5nVW5pdCkge1xuICAgIHJldHVybiB7XG4gICAgICBpbnB1dDogaW5wdXQsXG4gICAgICB0b2tlbnM6IHRva2VucyxcbiAgICAgIGludmFsaWRSZWFzb246IGRpc3F1YWxpZnlpbmdVbml0LmludmFsaWRSZWFzb25cbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHZhciBfYnVpbGRSZWdleCA9IGJ1aWxkUmVnZXgodW5pdHMpLFxuICAgICAgICByZWdleFN0cmluZyA9IF9idWlsZFJlZ2V4WzBdLFxuICAgICAgICBoYW5kbGVycyA9IF9idWlsZFJlZ2V4WzFdLFxuICAgICAgICByZWdleCA9IFJlZ0V4cChyZWdleFN0cmluZywgXCJpXCIpLFxuICAgICAgICBfbWF0Y2ggPSBtYXRjaChpbnB1dCwgcmVnZXgsIGhhbmRsZXJzKSxcbiAgICAgICAgcmF3TWF0Y2hlcyA9IF9tYXRjaFswXSxcbiAgICAgICAgbWF0Y2hlcyA9IF9tYXRjaFsxXSxcbiAgICAgICAgX3JlZjYgPSBtYXRjaGVzID8gZGF0ZVRpbWVGcm9tTWF0Y2hlcyhtYXRjaGVzKSA6IFtudWxsLCBudWxsLCB1bmRlZmluZWRdLFxuICAgICAgICByZXN1bHQgPSBfcmVmNlswXSxcbiAgICAgICAgem9uZSA9IF9yZWY2WzFdLFxuICAgICAgICBzcGVjaWZpY09mZnNldCA9IF9yZWY2WzJdO1xuXG4gICAgaWYgKGhhc093blByb3BlcnR5KG1hdGNoZXMsIFwiYVwiKSAmJiBoYXNPd25Qcm9wZXJ0eShtYXRjaGVzLCBcIkhcIikpIHtcbiAgICAgIHRocm93IG5ldyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcihcIkNhbid0IGluY2x1ZGUgbWVyaWRpZW0gd2hlbiBzcGVjaWZ5aW5nIDI0LWhvdXIgZm9ybWF0XCIpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBpbnB1dDogaW5wdXQsXG4gICAgICB0b2tlbnM6IHRva2VucyxcbiAgICAgIHJlZ2V4OiByZWdleCxcbiAgICAgIHJhd01hdGNoZXM6IHJhd01hdGNoZXMsXG4gICAgICBtYXRjaGVzOiBtYXRjaGVzLFxuICAgICAgcmVzdWx0OiByZXN1bHQsXG4gICAgICB6b25lOiB6b25lLFxuICAgICAgc3BlY2lmaWNPZmZzZXQ6IHNwZWNpZmljT2Zmc2V0XG4gICAgfTtcbiAgfVxufVxuZnVuY3Rpb24gcGFyc2VGcm9tVG9rZW5zKGxvY2FsZSwgaW5wdXQsIGZvcm1hdCkge1xuICB2YXIgX2V4cGxhaW5Gcm9tVG9rZW5zID0gZXhwbGFpbkZyb21Ub2tlbnMobG9jYWxlLCBpbnB1dCwgZm9ybWF0KSxcbiAgICAgIHJlc3VsdCA9IF9leHBsYWluRnJvbVRva2Vucy5yZXN1bHQsXG4gICAgICB6b25lID0gX2V4cGxhaW5Gcm9tVG9rZW5zLnpvbmUsXG4gICAgICBzcGVjaWZpY09mZnNldCA9IF9leHBsYWluRnJvbVRva2Vucy5zcGVjaWZpY09mZnNldCxcbiAgICAgIGludmFsaWRSZWFzb24gPSBfZXhwbGFpbkZyb21Ub2tlbnMuaW52YWxpZFJlYXNvbjtcblxuICByZXR1cm4gW3Jlc3VsdCwgem9uZSwgc3BlY2lmaWNPZmZzZXQsIGludmFsaWRSZWFzb25dO1xufVxuXG52YXIgbm9uTGVhcExhZGRlciA9IFswLCAzMSwgNTksIDkwLCAxMjAsIDE1MSwgMTgxLCAyMTIsIDI0MywgMjczLCAzMDQsIDMzNF0sXG4gICAgbGVhcExhZGRlciA9IFswLCAzMSwgNjAsIDkxLCAxMjEsIDE1MiwgMTgyLCAyMTMsIDI0NCwgMjc0LCAzMDUsIDMzNV07XG5cbmZ1bmN0aW9uIHVuaXRPdXRPZlJhbmdlKHVuaXQsIHZhbHVlKSB7XG4gIHJldHVybiBuZXcgSW52YWxpZChcInVuaXQgb3V0IG9mIHJhbmdlXCIsIFwieW91IHNwZWNpZmllZCBcIiArIHZhbHVlICsgXCIgKG9mIHR5cGUgXCIgKyB0eXBlb2YgdmFsdWUgKyBcIikgYXMgYSBcIiArIHVuaXQgKyBcIiwgd2hpY2ggaXMgaW52YWxpZFwiKTtcbn1cblxuZnVuY3Rpb24gZGF5T2ZXZWVrKHllYXIsIG1vbnRoLCBkYXkpIHtcbiAgdmFyIGQgPSBuZXcgRGF0ZShEYXRlLlVUQyh5ZWFyLCBtb250aCAtIDEsIGRheSkpO1xuXG4gIGlmICh5ZWFyIDwgMTAwICYmIHllYXIgPj0gMCkge1xuICAgIGQuc2V0VVRDRnVsbFllYXIoZC5nZXRVVENGdWxsWWVhcigpIC0gMTkwMCk7XG4gIH1cblxuICB2YXIganMgPSBkLmdldFVUQ0RheSgpO1xuICByZXR1cm4ganMgPT09IDAgPyA3IDoganM7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVPcmRpbmFsKHllYXIsIG1vbnRoLCBkYXkpIHtcbiAgcmV0dXJuIGRheSArIChpc0xlYXBZZWFyKHllYXIpID8gbGVhcExhZGRlciA6IG5vbkxlYXBMYWRkZXIpW21vbnRoIC0gMV07XG59XG5cbmZ1bmN0aW9uIHVuY29tcHV0ZU9yZGluYWwoeWVhciwgb3JkaW5hbCkge1xuICB2YXIgdGFibGUgPSBpc0xlYXBZZWFyKHllYXIpID8gbGVhcExhZGRlciA6IG5vbkxlYXBMYWRkZXIsXG4gICAgICBtb250aDAgPSB0YWJsZS5maW5kSW5kZXgoZnVuY3Rpb24gKGkpIHtcbiAgICByZXR1cm4gaSA8IG9yZGluYWw7XG4gIH0pLFxuICAgICAgZGF5ID0gb3JkaW5hbCAtIHRhYmxlW21vbnRoMF07XG4gIHJldHVybiB7XG4gICAgbW9udGg6IG1vbnRoMCArIDEsXG4gICAgZGF5OiBkYXlcbiAgfTtcbn1cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5cbmZ1bmN0aW9uIGdyZWdvcmlhblRvV2VlayhncmVnT2JqKSB7XG4gIHZhciB5ZWFyID0gZ3JlZ09iai55ZWFyLFxuICAgICAgbW9udGggPSBncmVnT2JqLm1vbnRoLFxuICAgICAgZGF5ID0gZ3JlZ09iai5kYXksXG4gICAgICBvcmRpbmFsID0gY29tcHV0ZU9yZGluYWwoeWVhciwgbW9udGgsIGRheSksXG4gICAgICB3ZWVrZGF5ID0gZGF5T2ZXZWVrKHllYXIsIG1vbnRoLCBkYXkpO1xuICB2YXIgd2Vla051bWJlciA9IE1hdGguZmxvb3IoKG9yZGluYWwgLSB3ZWVrZGF5ICsgMTApIC8gNyksXG4gICAgICB3ZWVrWWVhcjtcblxuICBpZiAod2Vla051bWJlciA8IDEpIHtcbiAgICB3ZWVrWWVhciA9IHllYXIgLSAxO1xuICAgIHdlZWtOdW1iZXIgPSB3ZWVrc0luV2Vla1llYXIod2Vla1llYXIpO1xuICB9IGVsc2UgaWYgKHdlZWtOdW1iZXIgPiB3ZWVrc0luV2Vla1llYXIoeWVhcikpIHtcbiAgICB3ZWVrWWVhciA9IHllYXIgKyAxO1xuICAgIHdlZWtOdW1iZXIgPSAxO1xuICB9IGVsc2Uge1xuICAgIHdlZWtZZWFyID0geWVhcjtcbiAgfVxuXG4gIHJldHVybiBfZXh0ZW5kcyh7XG4gICAgd2Vla1llYXI6IHdlZWtZZWFyLFxuICAgIHdlZWtOdW1iZXI6IHdlZWtOdW1iZXIsXG4gICAgd2Vla2RheTogd2Vla2RheVxuICB9LCB0aW1lT2JqZWN0KGdyZWdPYmopKTtcbn1cbmZ1bmN0aW9uIHdlZWtUb0dyZWdvcmlhbih3ZWVrRGF0YSkge1xuICB2YXIgd2Vla1llYXIgPSB3ZWVrRGF0YS53ZWVrWWVhcixcbiAgICAgIHdlZWtOdW1iZXIgPSB3ZWVrRGF0YS53ZWVrTnVtYmVyLFxuICAgICAgd2Vla2RheSA9IHdlZWtEYXRhLndlZWtkYXksXG4gICAgICB3ZWVrZGF5T2ZKYW40ID0gZGF5T2ZXZWVrKHdlZWtZZWFyLCAxLCA0KSxcbiAgICAgIHllYXJJbkRheXMgPSBkYXlzSW5ZZWFyKHdlZWtZZWFyKTtcbiAgdmFyIG9yZGluYWwgPSB3ZWVrTnVtYmVyICogNyArIHdlZWtkYXkgLSB3ZWVrZGF5T2ZKYW40IC0gMyxcbiAgICAgIHllYXI7XG5cbiAgaWYgKG9yZGluYWwgPCAxKSB7XG4gICAgeWVhciA9IHdlZWtZZWFyIC0gMTtcbiAgICBvcmRpbmFsICs9IGRheXNJblllYXIoeWVhcik7XG4gIH0gZWxzZSBpZiAob3JkaW5hbCA+IHllYXJJbkRheXMpIHtcbiAgICB5ZWFyID0gd2Vla1llYXIgKyAxO1xuICAgIG9yZGluYWwgLT0gZGF5c0luWWVhcih3ZWVrWWVhcik7XG4gIH0gZWxzZSB7XG4gICAgeWVhciA9IHdlZWtZZWFyO1xuICB9XG5cbiAgdmFyIF91bmNvbXB1dGVPcmRpbmFsID0gdW5jb21wdXRlT3JkaW5hbCh5ZWFyLCBvcmRpbmFsKSxcbiAgICAgIG1vbnRoID0gX3VuY29tcHV0ZU9yZGluYWwubW9udGgsXG4gICAgICBkYXkgPSBfdW5jb21wdXRlT3JkaW5hbC5kYXk7XG5cbiAgcmV0dXJuIF9leHRlbmRzKHtcbiAgICB5ZWFyOiB5ZWFyLFxuICAgIG1vbnRoOiBtb250aCxcbiAgICBkYXk6IGRheVxuICB9LCB0aW1lT2JqZWN0KHdlZWtEYXRhKSk7XG59XG5mdW5jdGlvbiBncmVnb3JpYW5Ub09yZGluYWwoZ3JlZ0RhdGEpIHtcbiAgdmFyIHllYXIgPSBncmVnRGF0YS55ZWFyLFxuICAgICAgbW9udGggPSBncmVnRGF0YS5tb250aCxcbiAgICAgIGRheSA9IGdyZWdEYXRhLmRheTtcbiAgdmFyIG9yZGluYWwgPSBjb21wdXRlT3JkaW5hbCh5ZWFyLCBtb250aCwgZGF5KTtcbiAgcmV0dXJuIF9leHRlbmRzKHtcbiAgICB5ZWFyOiB5ZWFyLFxuICAgIG9yZGluYWw6IG9yZGluYWxcbiAgfSwgdGltZU9iamVjdChncmVnRGF0YSkpO1xufVxuZnVuY3Rpb24gb3JkaW5hbFRvR3JlZ29yaWFuKG9yZGluYWxEYXRhKSB7XG4gIHZhciB5ZWFyID0gb3JkaW5hbERhdGEueWVhcixcbiAgICAgIG9yZGluYWwgPSBvcmRpbmFsRGF0YS5vcmRpbmFsO1xuXG4gIHZhciBfdW5jb21wdXRlT3JkaW5hbDIgPSB1bmNvbXB1dGVPcmRpbmFsKHllYXIsIG9yZGluYWwpLFxuICAgICAgbW9udGggPSBfdW5jb21wdXRlT3JkaW5hbDIubW9udGgsXG4gICAgICBkYXkgPSBfdW5jb21wdXRlT3JkaW5hbDIuZGF5O1xuXG4gIHJldHVybiBfZXh0ZW5kcyh7XG4gICAgeWVhcjogeWVhcixcbiAgICBtb250aDogbW9udGgsXG4gICAgZGF5OiBkYXlcbiAgfSwgdGltZU9iamVjdChvcmRpbmFsRGF0YSkpO1xufVxuZnVuY3Rpb24gaGFzSW52YWxpZFdlZWtEYXRhKG9iaikge1xuICB2YXIgdmFsaWRZZWFyID0gaXNJbnRlZ2VyKG9iai53ZWVrWWVhciksXG4gICAgICB2YWxpZFdlZWsgPSBpbnRlZ2VyQmV0d2VlbihvYmoud2Vla051bWJlciwgMSwgd2Vla3NJbldlZWtZZWFyKG9iai53ZWVrWWVhcikpLFxuICAgICAgdmFsaWRXZWVrZGF5ID0gaW50ZWdlckJldHdlZW4ob2JqLndlZWtkYXksIDEsIDcpO1xuXG4gIGlmICghdmFsaWRZZWFyKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwid2Vla1llYXJcIiwgb2JqLndlZWtZZWFyKTtcbiAgfSBlbHNlIGlmICghdmFsaWRXZWVrKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwid2Vla1wiLCBvYmoud2Vlayk7XG4gIH0gZWxzZSBpZiAoIXZhbGlkV2Vla2RheSkge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcIndlZWtkYXlcIiwgb2JqLndlZWtkYXkpO1xuICB9IGVsc2UgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaGFzSW52YWxpZE9yZGluYWxEYXRhKG9iaikge1xuICB2YXIgdmFsaWRZZWFyID0gaXNJbnRlZ2VyKG9iai55ZWFyKSxcbiAgICAgIHZhbGlkT3JkaW5hbCA9IGludGVnZXJCZXR3ZWVuKG9iai5vcmRpbmFsLCAxLCBkYXlzSW5ZZWFyKG9iai55ZWFyKSk7XG5cbiAgaWYgKCF2YWxpZFllYXIpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJ5ZWFyXCIsIG9iai55ZWFyKTtcbiAgfSBlbHNlIGlmICghdmFsaWRPcmRpbmFsKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwib3JkaW5hbFwiLCBvYmoub3JkaW5hbCk7XG4gIH0gZWxzZSByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBoYXNJbnZhbGlkR3JlZ29yaWFuRGF0YShvYmopIHtcbiAgdmFyIHZhbGlkWWVhciA9IGlzSW50ZWdlcihvYmoueWVhciksXG4gICAgICB2YWxpZE1vbnRoID0gaW50ZWdlckJldHdlZW4ob2JqLm1vbnRoLCAxLCAxMiksXG4gICAgICB2YWxpZERheSA9IGludGVnZXJCZXR3ZWVuKG9iai5kYXksIDEsIGRheXNJbk1vbnRoKG9iai55ZWFyLCBvYmoubW9udGgpKTtcblxuICBpZiAoIXZhbGlkWWVhcikge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcInllYXJcIiwgb2JqLnllYXIpO1xuICB9IGVsc2UgaWYgKCF2YWxpZE1vbnRoKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwibW9udGhcIiwgb2JqLm1vbnRoKTtcbiAgfSBlbHNlIGlmICghdmFsaWREYXkpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJkYXlcIiwgb2JqLmRheSk7XG4gIH0gZWxzZSByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBoYXNJbnZhbGlkVGltZURhdGEob2JqKSB7XG4gIHZhciBob3VyID0gb2JqLmhvdXIsXG4gICAgICBtaW51dGUgPSBvYmoubWludXRlLFxuICAgICAgc2Vjb25kID0gb2JqLnNlY29uZCxcbiAgICAgIG1pbGxpc2Vjb25kID0gb2JqLm1pbGxpc2Vjb25kO1xuICB2YXIgdmFsaWRIb3VyID0gaW50ZWdlckJldHdlZW4oaG91ciwgMCwgMjMpIHx8IGhvdXIgPT09IDI0ICYmIG1pbnV0ZSA9PT0gMCAmJiBzZWNvbmQgPT09IDAgJiYgbWlsbGlzZWNvbmQgPT09IDAsXG4gICAgICB2YWxpZE1pbnV0ZSA9IGludGVnZXJCZXR3ZWVuKG1pbnV0ZSwgMCwgNTkpLFxuICAgICAgdmFsaWRTZWNvbmQgPSBpbnRlZ2VyQmV0d2VlbihzZWNvbmQsIDAsIDU5KSxcbiAgICAgIHZhbGlkTWlsbGlzZWNvbmQgPSBpbnRlZ2VyQmV0d2VlbihtaWxsaXNlY29uZCwgMCwgOTk5KTtcblxuICBpZiAoIXZhbGlkSG91cikge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcImhvdXJcIiwgaG91cik7XG4gIH0gZWxzZSBpZiAoIXZhbGlkTWludXRlKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwibWludXRlXCIsIG1pbnV0ZSk7XG4gIH0gZWxzZSBpZiAoIXZhbGlkU2Vjb25kKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwic2Vjb25kXCIsIHNlY29uZCk7XG4gIH0gZWxzZSBpZiAoIXZhbGlkTWlsbGlzZWNvbmQpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJtaWxsaXNlY29uZFwiLCBtaWxsaXNlY29uZCk7XG4gIH0gZWxzZSByZXR1cm4gZmFsc2U7XG59XG5cbnZhciBJTlZBTElEID0gXCJJbnZhbGlkIERhdGVUaW1lXCI7XG52YXIgTUFYX0RBVEUgPSA4LjY0ZTE1O1xuXG5mdW5jdGlvbiB1bnN1cHBvcnRlZFpvbmUoem9uZSkge1xuICByZXR1cm4gbmV3IEludmFsaWQoXCJ1bnN1cHBvcnRlZCB6b25lXCIsIFwidGhlIHpvbmUgXFxcIlwiICsgem9uZS5uYW1lICsgXCJcXFwiIGlzIG5vdCBzdXBwb3J0ZWRcIik7XG59IC8vIHdlIGNhY2hlIHdlZWsgZGF0YSBvbiB0aGUgRFQgb2JqZWN0IGFuZCB0aGlzIGludGVybWVkaWF0ZXMgdGhlIGNhY2hlXG5cblxuZnVuY3Rpb24gcG9zc2libHlDYWNoZWRXZWVrRGF0YShkdCkge1xuICBpZiAoZHQud2Vla0RhdGEgPT09IG51bGwpIHtcbiAgICBkdC53ZWVrRGF0YSA9IGdyZWdvcmlhblRvV2VlayhkdC5jKTtcbiAgfVxuXG4gIHJldHVybiBkdC53ZWVrRGF0YTtcbn0gLy8gY2xvbmUgcmVhbGx5IG1lYW5zLCBcIm1ha2UgYSBuZXcgb2JqZWN0IHdpdGggdGhlc2UgbW9kaWZpY2F0aW9uc1wiLiBhbGwgXCJzZXR0ZXJzXCIgcmVhbGx5IHVzZSB0aGlzXG4vLyB0byBjcmVhdGUgYSBuZXcgb2JqZWN0IHdoaWxlIG9ubHkgY2hhbmdpbmcgc29tZSBvZiB0aGUgcHJvcGVydGllc1xuXG5cbmZ1bmN0aW9uIGNsb25lKGluc3QsIGFsdHMpIHtcbiAgdmFyIGN1cnJlbnQgPSB7XG4gICAgdHM6IGluc3QudHMsXG4gICAgem9uZTogaW5zdC56b25lLFxuICAgIGM6IGluc3QuYyxcbiAgICBvOiBpbnN0Lm8sXG4gICAgbG9jOiBpbnN0LmxvYyxcbiAgICBpbnZhbGlkOiBpbnN0LmludmFsaWRcbiAgfTtcbiAgcmV0dXJuIG5ldyBEYXRlVGltZShfZXh0ZW5kcyh7fSwgY3VycmVudCwgYWx0cywge1xuICAgIG9sZDogY3VycmVudFxuICB9KSk7XG59IC8vIGZpbmQgdGhlIHJpZ2h0IG9mZnNldCBhIGdpdmVuIGxvY2FsIHRpbWUuIFRoZSBvIGlucHV0IGlzIG91ciBndWVzcywgd2hpY2ggZGV0ZXJtaW5lcyB3aGljaFxuLy8gb2Zmc2V0IHdlJ2xsIHBpY2sgaW4gYW1iaWd1b3VzIGNhc2VzIChlLmcuIHRoZXJlIGFyZSB0d28gMyBBTXMgYi9jIEZhbGxiYWNrIERTVClcblxuXG5mdW5jdGlvbiBmaXhPZmZzZXQobG9jYWxUUywgbywgdHopIHtcbiAgLy8gT3VyIFVUQyB0aW1lIGlzIGp1c3QgYSBndWVzcyBiZWNhdXNlIG91ciBvZmZzZXQgaXMganVzdCBhIGd1ZXNzXG4gIHZhciB1dGNHdWVzcyA9IGxvY2FsVFMgLSBvICogNjAgKiAxMDAwOyAvLyBUZXN0IHdoZXRoZXIgdGhlIHpvbmUgbWF0Y2hlcyB0aGUgb2Zmc2V0IGZvciB0aGlzIHRzXG5cbiAgdmFyIG8yID0gdHoub2Zmc2V0KHV0Y0d1ZXNzKTsgLy8gSWYgc28sIG9mZnNldCBkaWRuJ3QgY2hhbmdlIGFuZCB3ZSdyZSBkb25lXG5cbiAgaWYgKG8gPT09IG8yKSB7XG4gICAgcmV0dXJuIFt1dGNHdWVzcywgb107XG4gIH0gLy8gSWYgbm90LCBjaGFuZ2UgdGhlIHRzIGJ5IHRoZSBkaWZmZXJlbmNlIGluIHRoZSBvZmZzZXRcblxuXG4gIHV0Y0d1ZXNzIC09IChvMiAtIG8pICogNjAgKiAxMDAwOyAvLyBJZiB0aGF0IGdpdmVzIHVzIHRoZSBsb2NhbCB0aW1lIHdlIHdhbnQsIHdlJ3JlIGRvbmVcblxuICB2YXIgbzMgPSB0ei5vZmZzZXQodXRjR3Vlc3MpO1xuXG4gIGlmIChvMiA9PT0gbzMpIHtcbiAgICByZXR1cm4gW3V0Y0d1ZXNzLCBvMl07XG4gIH0gLy8gSWYgaXQncyBkaWZmZXJlbnQsIHdlJ3JlIGluIGEgaG9sZSB0aW1lLiBUaGUgb2Zmc2V0IGhhcyBjaGFuZ2VkLCBidXQgdGhlIHdlIGRvbid0IGFkanVzdCB0aGUgdGltZVxuXG5cbiAgcmV0dXJuIFtsb2NhbFRTIC0gTWF0aC5taW4obzIsIG8zKSAqIDYwICogMTAwMCwgTWF0aC5tYXgobzIsIG8zKV07XG59IC8vIGNvbnZlcnQgYW4gZXBvY2ggdGltZXN0YW1wIGludG8gYSBjYWxlbmRhciBvYmplY3Qgd2l0aCB0aGUgZ2l2ZW4gb2Zmc2V0XG5cblxuZnVuY3Rpb24gdHNUb09iaih0cywgb2Zmc2V0KSB7XG4gIHRzICs9IG9mZnNldCAqIDYwICogMTAwMDtcbiAgdmFyIGQgPSBuZXcgRGF0ZSh0cyk7XG4gIHJldHVybiB7XG4gICAgeWVhcjogZC5nZXRVVENGdWxsWWVhcigpLFxuICAgIG1vbnRoOiBkLmdldFVUQ01vbnRoKCkgKyAxLFxuICAgIGRheTogZC5nZXRVVENEYXRlKCksXG4gICAgaG91cjogZC5nZXRVVENIb3VycygpLFxuICAgIG1pbnV0ZTogZC5nZXRVVENNaW51dGVzKCksXG4gICAgc2Vjb25kOiBkLmdldFVUQ1NlY29uZHMoKSxcbiAgICBtaWxsaXNlY29uZDogZC5nZXRVVENNaWxsaXNlY29uZHMoKVxuICB9O1xufSAvLyBjb252ZXJ0IGEgY2FsZW5kYXIgb2JqZWN0IHRvIGEgZXBvY2ggdGltZXN0YW1wXG5cblxuZnVuY3Rpb24gb2JqVG9UUyhvYmosIG9mZnNldCwgem9uZSkge1xuICByZXR1cm4gZml4T2Zmc2V0KG9ialRvTG9jYWxUUyhvYmopLCBvZmZzZXQsIHpvbmUpO1xufSAvLyBjcmVhdGUgYSBuZXcgRFQgaW5zdGFuY2UgYnkgYWRkaW5nIGEgZHVyYXRpb24sIGFkanVzdGluZyBmb3IgRFNUc1xuXG5cbmZ1bmN0aW9uIGFkanVzdFRpbWUoaW5zdCwgZHVyKSB7XG4gIHZhciBvUHJlID0gaW5zdC5vLFxuICAgICAgeWVhciA9IGluc3QuYy55ZWFyICsgTWF0aC50cnVuYyhkdXIueWVhcnMpLFxuICAgICAgbW9udGggPSBpbnN0LmMubW9udGggKyBNYXRoLnRydW5jKGR1ci5tb250aHMpICsgTWF0aC50cnVuYyhkdXIucXVhcnRlcnMpICogMyxcbiAgICAgIGMgPSBfZXh0ZW5kcyh7fSwgaW5zdC5jLCB7XG4gICAgeWVhcjogeWVhcixcbiAgICBtb250aDogbW9udGgsXG4gICAgZGF5OiBNYXRoLm1pbihpbnN0LmMuZGF5LCBkYXlzSW5Nb250aCh5ZWFyLCBtb250aCkpICsgTWF0aC50cnVuYyhkdXIuZGF5cykgKyBNYXRoLnRydW5jKGR1ci53ZWVrcykgKiA3XG4gIH0pLFxuICAgICAgbWlsbGlzVG9BZGQgPSBEdXJhdGlvbi5mcm9tT2JqZWN0KHtcbiAgICB5ZWFyczogZHVyLnllYXJzIC0gTWF0aC50cnVuYyhkdXIueWVhcnMpLFxuICAgIHF1YXJ0ZXJzOiBkdXIucXVhcnRlcnMgLSBNYXRoLnRydW5jKGR1ci5xdWFydGVycyksXG4gICAgbW9udGhzOiBkdXIubW9udGhzIC0gTWF0aC50cnVuYyhkdXIubW9udGhzKSxcbiAgICB3ZWVrczogZHVyLndlZWtzIC0gTWF0aC50cnVuYyhkdXIud2Vla3MpLFxuICAgIGRheXM6IGR1ci5kYXlzIC0gTWF0aC50cnVuYyhkdXIuZGF5cyksXG4gICAgaG91cnM6IGR1ci5ob3VycyxcbiAgICBtaW51dGVzOiBkdXIubWludXRlcyxcbiAgICBzZWNvbmRzOiBkdXIuc2Vjb25kcyxcbiAgICBtaWxsaXNlY29uZHM6IGR1ci5taWxsaXNlY29uZHNcbiAgfSkuYXMoXCJtaWxsaXNlY29uZHNcIiksXG4gICAgICBsb2NhbFRTID0gb2JqVG9Mb2NhbFRTKGMpO1xuXG4gIHZhciBfZml4T2Zmc2V0ID0gZml4T2Zmc2V0KGxvY2FsVFMsIG9QcmUsIGluc3Quem9uZSksXG4gICAgICB0cyA9IF9maXhPZmZzZXRbMF0sXG4gICAgICBvID0gX2ZpeE9mZnNldFsxXTtcblxuICBpZiAobWlsbGlzVG9BZGQgIT09IDApIHtcbiAgICB0cyArPSBtaWxsaXNUb0FkZDsgLy8gdGhhdCBjb3VsZCBoYXZlIGNoYW5nZWQgdGhlIG9mZnNldCBieSBnb2luZyBvdmVyIGEgRFNULCBidXQgd2Ugd2FudCB0byBrZWVwIHRoZSB0cyB0aGUgc2FtZVxuXG4gICAgbyA9IGluc3Quem9uZS5vZmZzZXQodHMpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB0czogdHMsXG4gICAgbzogb1xuICB9O1xufSAvLyBoZWxwZXIgdXNlZnVsIGluIHR1cm5pbmcgdGhlIHJlc3VsdHMgb2YgcGFyc2luZyBpbnRvIHJlYWwgZGF0ZXNcbi8vIGJ5IGhhbmRsaW5nIHRoZSB6b25lIG9wdGlvbnNcblxuXG5mdW5jdGlvbiBwYXJzZURhdGFUb0RhdGVUaW1lKHBhcnNlZCwgcGFyc2VkWm9uZSwgb3B0cywgZm9ybWF0LCB0ZXh0LCBzcGVjaWZpY09mZnNldCkge1xuICB2YXIgc2V0Wm9uZSA9IG9wdHMuc2V0Wm9uZSxcbiAgICAgIHpvbmUgPSBvcHRzLnpvbmU7XG5cbiAgaWYgKHBhcnNlZCAmJiBPYmplY3Qua2V5cyhwYXJzZWQpLmxlbmd0aCAhPT0gMCkge1xuICAgIHZhciBpbnRlcnByZXRhdGlvblpvbmUgPSBwYXJzZWRab25lIHx8IHpvbmUsXG4gICAgICAgIGluc3QgPSBEYXRlVGltZS5mcm9tT2JqZWN0KHBhcnNlZCwgX2V4dGVuZHMoe30sIG9wdHMsIHtcbiAgICAgIHpvbmU6IGludGVycHJldGF0aW9uWm9uZSxcbiAgICAgIHNwZWNpZmljT2Zmc2V0OiBzcGVjaWZpY09mZnNldFxuICAgIH0pKTtcbiAgICByZXR1cm4gc2V0Wm9uZSA/IGluc3QgOiBpbnN0LnNldFpvbmUoem9uZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQobmV3IEludmFsaWQoXCJ1bnBhcnNhYmxlXCIsIFwidGhlIGlucHV0IFxcXCJcIiArIHRleHQgKyBcIlxcXCIgY2FuJ3QgYmUgcGFyc2VkIGFzIFwiICsgZm9ybWF0KSk7XG4gIH1cbn0gLy8gaWYgeW91IHdhbnQgdG8gb3V0cHV0IGEgdGVjaG5pY2FsIGZvcm1hdCAoZS5nLiBSRkMgMjgyMiksIHRoaXMgaGVscGVyXG4vLyBoZWxwcyBoYW5kbGUgdGhlIGRldGFpbHNcblxuXG5mdW5jdGlvbiB0b1RlY2hGb3JtYXQoZHQsIGZvcm1hdCwgYWxsb3daKSB7XG4gIGlmIChhbGxvd1ogPT09IHZvaWQgMCkge1xuICAgIGFsbG93WiA9IHRydWU7XG4gIH1cblxuICByZXR1cm4gZHQuaXNWYWxpZCA/IEZvcm1hdHRlci5jcmVhdGUoTG9jYWxlLmNyZWF0ZShcImVuLVVTXCIpLCB7XG4gICAgYWxsb3daOiBhbGxvd1osXG4gICAgZm9yY2VTaW1wbGU6IHRydWVcbiAgfSkuZm9ybWF0RGF0ZVRpbWVGcm9tU3RyaW5nKGR0LCBmb3JtYXQpIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gX3RvSVNPRGF0ZShvLCBleHRlbmRlZCkge1xuICB2YXIgbG9uZ0Zvcm1hdCA9IG8uYy55ZWFyID4gOTk5OSB8fCBvLmMueWVhciA8IDA7XG4gIHZhciBjID0gXCJcIjtcbiAgaWYgKGxvbmdGb3JtYXQgJiYgby5jLnllYXIgPj0gMCkgYyArPSBcIitcIjtcbiAgYyArPSBwYWRTdGFydChvLmMueWVhciwgbG9uZ0Zvcm1hdCA/IDYgOiA0KTtcblxuICBpZiAoZXh0ZW5kZWQpIHtcbiAgICBjICs9IFwiLVwiO1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLm1vbnRoKTtcbiAgICBjICs9IFwiLVwiO1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLmRheSk7XG4gIH0gZWxzZSB7XG4gICAgYyArPSBwYWRTdGFydChvLmMubW9udGgpO1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLmRheSk7XG4gIH1cblxuICByZXR1cm4gYztcbn1cblxuZnVuY3Rpb24gX3RvSVNPVGltZShvLCBleHRlbmRlZCwgc3VwcHJlc3NTZWNvbmRzLCBzdXBwcmVzc01pbGxpc2Vjb25kcywgaW5jbHVkZU9mZnNldCwgZXh0ZW5kZWRab25lKSB7XG4gIHZhciBjID0gcGFkU3RhcnQoby5jLmhvdXIpO1xuXG4gIGlmIChleHRlbmRlZCkge1xuICAgIGMgKz0gXCI6XCI7XG4gICAgYyArPSBwYWRTdGFydChvLmMubWludXRlKTtcblxuICAgIGlmIChvLmMuc2Vjb25kICE9PSAwIHx8ICFzdXBwcmVzc1NlY29uZHMpIHtcbiAgICAgIGMgKz0gXCI6XCI7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLm1pbnV0ZSk7XG4gIH1cblxuICBpZiAoby5jLnNlY29uZCAhPT0gMCB8fCAhc3VwcHJlc3NTZWNvbmRzKSB7XG4gICAgYyArPSBwYWRTdGFydChvLmMuc2Vjb25kKTtcblxuICAgIGlmIChvLmMubWlsbGlzZWNvbmQgIT09IDAgfHwgIXN1cHByZXNzTWlsbGlzZWNvbmRzKSB7XG4gICAgICBjICs9IFwiLlwiO1xuICAgICAgYyArPSBwYWRTdGFydChvLmMubWlsbGlzZWNvbmQsIDMpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChpbmNsdWRlT2Zmc2V0KSB7XG4gICAgaWYgKG8uaXNPZmZzZXRGaXhlZCAmJiBvLm9mZnNldCA9PT0gMCAmJiAhZXh0ZW5kZWRab25lKSB7XG4gICAgICBjICs9IFwiWlwiO1xuICAgIH0gZWxzZSBpZiAoby5vIDwgMCkge1xuICAgICAgYyArPSBcIi1cIjtcbiAgICAgIGMgKz0gcGFkU3RhcnQoTWF0aC50cnVuYygtby5vIC8gNjApKTtcbiAgICAgIGMgKz0gXCI6XCI7XG4gICAgICBjICs9IHBhZFN0YXJ0KE1hdGgudHJ1bmMoLW8ubyAlIDYwKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGMgKz0gXCIrXCI7XG4gICAgICBjICs9IHBhZFN0YXJ0KE1hdGgudHJ1bmMoby5vIC8gNjApKTtcbiAgICAgIGMgKz0gXCI6XCI7XG4gICAgICBjICs9IHBhZFN0YXJ0KE1hdGgudHJ1bmMoby5vICUgNjApKTtcbiAgICB9XG4gIH1cblxuICBpZiAoZXh0ZW5kZWRab25lKSB7XG4gICAgYyArPSBcIltcIiArIG8uem9uZS5pYW5hTmFtZSArIFwiXVwiO1xuICB9XG5cbiAgcmV0dXJuIGM7XG59IC8vIGRlZmF1bHRzIGZvciB1bnNwZWNpZmllZCB1bml0cyBpbiB0aGUgc3VwcG9ydGVkIGNhbGVuZGFyc1xuXG5cbnZhciBkZWZhdWx0VW5pdFZhbHVlcyA9IHtcbiAgbW9udGg6IDEsXG4gIGRheTogMSxcbiAgaG91cjogMCxcbiAgbWludXRlOiAwLFxuICBzZWNvbmQ6IDAsXG4gIG1pbGxpc2Vjb25kOiAwXG59LFxuICAgIGRlZmF1bHRXZWVrVW5pdFZhbHVlcyA9IHtcbiAgd2Vla051bWJlcjogMSxcbiAgd2Vla2RheTogMSxcbiAgaG91cjogMCxcbiAgbWludXRlOiAwLFxuICBzZWNvbmQ6IDAsXG4gIG1pbGxpc2Vjb25kOiAwXG59LFxuICAgIGRlZmF1bHRPcmRpbmFsVW5pdFZhbHVlcyA9IHtcbiAgb3JkaW5hbDogMSxcbiAgaG91cjogMCxcbiAgbWludXRlOiAwLFxuICBzZWNvbmQ6IDAsXG4gIG1pbGxpc2Vjb25kOiAwXG59OyAvLyBVbml0cyBpbiB0aGUgc3VwcG9ydGVkIGNhbGVuZGFycywgc29ydGVkIGJ5IGJpZ25lc3NcblxudmFyIG9yZGVyZWRVbml0cyA9IFtcInllYXJcIiwgXCJtb250aFwiLCBcImRheVwiLCBcImhvdXJcIiwgXCJtaW51dGVcIiwgXCJzZWNvbmRcIiwgXCJtaWxsaXNlY29uZFwiXSxcbiAgICBvcmRlcmVkV2Vla1VuaXRzID0gW1wid2Vla1llYXJcIiwgXCJ3ZWVrTnVtYmVyXCIsIFwid2Vla2RheVwiLCBcImhvdXJcIiwgXCJtaW51dGVcIiwgXCJzZWNvbmRcIiwgXCJtaWxsaXNlY29uZFwiXSxcbiAgICBvcmRlcmVkT3JkaW5hbFVuaXRzID0gW1wieWVhclwiLCBcIm9yZGluYWxcIiwgXCJob3VyXCIsIFwibWludXRlXCIsIFwic2Vjb25kXCIsIFwibWlsbGlzZWNvbmRcIl07IC8vIHN0YW5kYXJkaXplIGNhc2UgYW5kIHBsdXJhbGl0eSBpbiB1bml0c1xuXG5mdW5jdGlvbiBub3JtYWxpemVVbml0KHVuaXQpIHtcbiAgdmFyIG5vcm1hbGl6ZWQgPSB7XG4gICAgeWVhcjogXCJ5ZWFyXCIsXG4gICAgeWVhcnM6IFwieWVhclwiLFxuICAgIG1vbnRoOiBcIm1vbnRoXCIsXG4gICAgbW9udGhzOiBcIm1vbnRoXCIsXG4gICAgZGF5OiBcImRheVwiLFxuICAgIGRheXM6IFwiZGF5XCIsXG4gICAgaG91cjogXCJob3VyXCIsXG4gICAgaG91cnM6IFwiaG91clwiLFxuICAgIG1pbnV0ZTogXCJtaW51dGVcIixcbiAgICBtaW51dGVzOiBcIm1pbnV0ZVwiLFxuICAgIHF1YXJ0ZXI6IFwicXVhcnRlclwiLFxuICAgIHF1YXJ0ZXJzOiBcInF1YXJ0ZXJcIixcbiAgICBzZWNvbmQ6IFwic2Vjb25kXCIsXG4gICAgc2Vjb25kczogXCJzZWNvbmRcIixcbiAgICBtaWxsaXNlY29uZDogXCJtaWxsaXNlY29uZFwiLFxuICAgIG1pbGxpc2Vjb25kczogXCJtaWxsaXNlY29uZFwiLFxuICAgIHdlZWtkYXk6IFwid2Vla2RheVwiLFxuICAgIHdlZWtkYXlzOiBcIndlZWtkYXlcIixcbiAgICB3ZWVrbnVtYmVyOiBcIndlZWtOdW1iZXJcIixcbiAgICB3ZWVrc251bWJlcjogXCJ3ZWVrTnVtYmVyXCIsXG4gICAgd2Vla251bWJlcnM6IFwid2Vla051bWJlclwiLFxuICAgIHdlZWt5ZWFyOiBcIndlZWtZZWFyXCIsXG4gICAgd2Vla3llYXJzOiBcIndlZWtZZWFyXCIsXG4gICAgb3JkaW5hbDogXCJvcmRpbmFsXCJcbiAgfVt1bml0LnRvTG93ZXJDYXNlKCldO1xuICBpZiAoIW5vcm1hbGl6ZWQpIHRocm93IG5ldyBJbnZhbGlkVW5pdEVycm9yKHVuaXQpO1xuICByZXR1cm4gbm9ybWFsaXplZDtcbn0gLy8gdGhpcyBpcyBhIGR1bWJlZCBkb3duIHZlcnNpb24gb2YgZnJvbU9iamVjdCgpIHRoYXQgcnVucyBhYm91dCA2MCUgZmFzdGVyXG4vLyBidXQgZG9lc24ndCBkbyBhbnkgdmFsaWRhdGlvbiwgbWFrZXMgYSBidW5jaCBvZiBhc3N1bXB0aW9ucyBhYm91dCB3aGF0IHVuaXRzXG4vLyBhcmUgcHJlc2VudCwgYW5kIHNvIG9uLlxuXG5cbmZ1bmN0aW9uIHF1aWNrRFQob2JqLCBvcHRzKSB7XG4gIHZhciB6b25lID0gbm9ybWFsaXplWm9uZShvcHRzLnpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKSxcbiAgICAgIGxvYyA9IExvY2FsZS5mcm9tT2JqZWN0KG9wdHMpLFxuICAgICAgdHNOb3cgPSBTZXR0aW5ncy5ub3coKTtcbiAgdmFyIHRzLCBvOyAvLyBhc3N1bWUgd2UgaGF2ZSB0aGUgaGlnaGVyLW9yZGVyIHVuaXRzXG5cbiAgaWYgKCFpc1VuZGVmaW5lZChvYmoueWVhcikpIHtcbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG9yZGVyZWRVbml0cyksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgdSA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICBpZiAoaXNVbmRlZmluZWQob2JqW3VdKSkge1xuICAgICAgICBvYmpbdV0gPSBkZWZhdWx0VW5pdFZhbHVlc1t1XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgaW52YWxpZCA9IGhhc0ludmFsaWRHcmVnb3JpYW5EYXRhKG9iaikgfHwgaGFzSW52YWxpZFRpbWVEYXRhKG9iaik7XG5cbiAgICBpZiAoaW52YWxpZCkge1xuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoaW52YWxpZCk7XG4gICAgfVxuXG4gICAgdmFyIG9mZnNldFByb3ZpcyA9IHpvbmUub2Zmc2V0KHRzTm93KTtcblxuICAgIHZhciBfb2JqVG9UUyA9IG9ialRvVFMob2JqLCBvZmZzZXRQcm92aXMsIHpvbmUpO1xuXG4gICAgdHMgPSBfb2JqVG9UU1swXTtcbiAgICBvID0gX29ialRvVFNbMV07XG4gIH0gZWxzZSB7XG4gICAgdHMgPSB0c05vdztcbiAgfVxuXG4gIHJldHVybiBuZXcgRGF0ZVRpbWUoe1xuICAgIHRzOiB0cyxcbiAgICB6b25lOiB6b25lLFxuICAgIGxvYzogbG9jLFxuICAgIG86IG9cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGRpZmZSZWxhdGl2ZShzdGFydCwgZW5kLCBvcHRzKSB7XG4gIHZhciByb3VuZCA9IGlzVW5kZWZpbmVkKG9wdHMucm91bmQpID8gdHJ1ZSA6IG9wdHMucm91bmQsXG4gICAgICBmb3JtYXQgPSBmdW5jdGlvbiBmb3JtYXQoYywgdW5pdCkge1xuICAgIGMgPSByb3VuZFRvKGMsIHJvdW5kIHx8IG9wdHMuY2FsZW5kYXJ5ID8gMCA6IDIsIHRydWUpO1xuICAgIHZhciBmb3JtYXR0ZXIgPSBlbmQubG9jLmNsb25lKG9wdHMpLnJlbEZvcm1hdHRlcihvcHRzKTtcbiAgICByZXR1cm4gZm9ybWF0dGVyLmZvcm1hdChjLCB1bml0KTtcbiAgfSxcbiAgICAgIGRpZmZlciA9IGZ1bmN0aW9uIGRpZmZlcih1bml0KSB7XG4gICAgaWYgKG9wdHMuY2FsZW5kYXJ5KSB7XG4gICAgICBpZiAoIWVuZC5oYXNTYW1lKHN0YXJ0LCB1bml0KSkge1xuICAgICAgICByZXR1cm4gZW5kLnN0YXJ0T2YodW5pdCkuZGlmZihzdGFydC5zdGFydE9mKHVuaXQpLCB1bml0KS5nZXQodW5pdCk7XG4gICAgICB9IGVsc2UgcmV0dXJuIDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBlbmQuZGlmZihzdGFydCwgdW5pdCkuZ2V0KHVuaXQpO1xuICAgIH1cbiAgfTtcblxuICBpZiAob3B0cy51bml0KSB7XG4gICAgcmV0dXJuIGZvcm1hdChkaWZmZXIob3B0cy51bml0KSwgb3B0cy51bml0KTtcbiAgfVxuXG4gIGZvciAodmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG9wdHMudW5pdHMpLCBfc3RlcDI7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMigpKS5kb25lOykge1xuICAgIHZhciB1bml0ID0gX3N0ZXAyLnZhbHVlO1xuICAgIHZhciBjb3VudCA9IGRpZmZlcih1bml0KTtcblxuICAgIGlmIChNYXRoLmFicyhjb3VudCkgPj0gMSkge1xuICAgICAgcmV0dXJuIGZvcm1hdChjb3VudCwgdW5pdCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZvcm1hdChzdGFydCA+IGVuZCA/IC0wIDogMCwgb3B0cy51bml0c1tvcHRzLnVuaXRzLmxlbmd0aCAtIDFdKTtcbn1cblxuZnVuY3Rpb24gbGFzdE9wdHMoYXJnTGlzdCkge1xuICB2YXIgb3B0cyA9IHt9LFxuICAgICAgYXJncztcblxuICBpZiAoYXJnTGlzdC5sZW5ndGggPiAwICYmIHR5cGVvZiBhcmdMaXN0W2FyZ0xpc3QubGVuZ3RoIC0gMV0gPT09IFwib2JqZWN0XCIpIHtcbiAgICBvcHRzID0gYXJnTGlzdFthcmdMaXN0Lmxlbmd0aCAtIDFdO1xuICAgIGFyZ3MgPSBBcnJheS5mcm9tKGFyZ0xpc3QpLnNsaWNlKDAsIGFyZ0xpc3QubGVuZ3RoIC0gMSk7XG4gIH0gZWxzZSB7XG4gICAgYXJncyA9IEFycmF5LmZyb20oYXJnTGlzdCk7XG4gIH1cblxuICByZXR1cm4gW29wdHMsIGFyZ3NdO1xufVxuLyoqXG4gKiBBIERhdGVUaW1lIGlzIGFuIGltbXV0YWJsZSBkYXRhIHN0cnVjdHVyZSByZXByZXNlbnRpbmcgYSBzcGVjaWZpYyBkYXRlIGFuZCB0aW1lIGFuZCBhY2NvbXBhbnlpbmcgbWV0aG9kcy4gSXQgY29udGFpbnMgY2xhc3MgYW5kIGluc3RhbmNlIG1ldGhvZHMgZm9yIGNyZWF0aW5nLCBwYXJzaW5nLCBpbnRlcnJvZ2F0aW5nLCB0cmFuc2Zvcm1pbmcsIGFuZCBmb3JtYXR0aW5nIHRoZW0uXG4gKlxuICogQSBEYXRlVGltZSBjb21wcmlzZXMgb2Y6XG4gKiAqIEEgdGltZXN0YW1wLiBFYWNoIERhdGVUaW1lIGluc3RhbmNlIHJlZmVycyB0byBhIHNwZWNpZmljIG1pbGxpc2Vjb25kIG9mIHRoZSBVbml4IGVwb2NoLlxuICogKiBBIHRpbWUgem9uZS4gRWFjaCBpbnN0YW5jZSBpcyBjb25zaWRlcmVkIGluIHRoZSBjb250ZXh0IG9mIGEgc3BlY2lmaWMgem9uZSAoYnkgZGVmYXVsdCB0aGUgbG9jYWwgc3lzdGVtJ3Mgem9uZSkuXG4gKiAqIENvbmZpZ3VyYXRpb24gcHJvcGVydGllcyB0aGF0IGVmZmVjdCBob3cgb3V0cHV0IHN0cmluZ3MgYXJlIGZvcm1hdHRlZCwgc3VjaCBhcyBgbG9jYWxlYCwgYG51bWJlcmluZ1N5c3RlbWAsIGFuZCBgb3V0cHV0Q2FsZW5kYXJgLlxuICpcbiAqIEhlcmUgaXMgYSBicmllZiBvdmVydmlldyBvZiB0aGUgbW9zdCBjb21tb25seSB1c2VkIGZ1bmN0aW9uYWxpdHkgaXQgcHJvdmlkZXM6XG4gKlxuICogKiAqKkNyZWF0aW9uKio6IFRvIGNyZWF0ZSBhIERhdGVUaW1lIGZyb20gaXRzIGNvbXBvbmVudHMsIHVzZSBvbmUgb2YgaXRzIGZhY3RvcnkgY2xhc3MgbWV0aG9kczoge0BsaW5rIERhdGVUaW1lI2xvY2FsfSwge0BsaW5rIERhdGVUaW1lI3V0Y30sIGFuZCAobW9zdCBmbGV4aWJseSkge0BsaW5rIERhdGVUaW1lI2Zyb21PYmplY3R9LiBUbyBjcmVhdGUgb25lIGZyb20gYSBzdGFuZGFyZCBzdHJpbmcgZm9ybWF0LCB1c2Uge0BsaW5rIERhdGVUaW1lI2Zyb21JU099LCB7QGxpbmsgRGF0ZVRpbWUjZnJvbUhUVFB9LCBhbmQge0BsaW5rIERhdGVUaW1lI2Zyb21SRkMyODIyfS4gVG8gY3JlYXRlIG9uZSBmcm9tIGEgY3VzdG9tIHN0cmluZyBmb3JtYXQsIHVzZSB7QGxpbmsgRGF0ZVRpbWUjZnJvbUZvcm1hdH0uIFRvIGNyZWF0ZSBvbmUgZnJvbSBhIG5hdGl2ZSBKUyBkYXRlLCB1c2Uge0BsaW5rIERhdGVUaW1lI2Zyb21KU0RhdGV9LlxuICogKiAqKkdyZWdvcmlhbiBjYWxlbmRhciBhbmQgdGltZSoqOiBUbyBleGFtaW5lIHRoZSBHcmVnb3JpYW4gcHJvcGVydGllcyBvZiBhIERhdGVUaW1lIGluZGl2aWR1YWxseSAoaS5lIGFzIG9wcG9zZWQgdG8gY29sbGVjdGl2ZWx5IHRocm91Z2gge0BsaW5rIERhdGVUaW1lI3RvT2JqZWN0fSksIHVzZSB0aGUge0BsaW5rIERhdGVUaW1lI3llYXJ9LCB7QGxpbmsgRGF0ZVRpbWUjbW9udGh9LFxuICoge0BsaW5rIERhdGVUaW1lI2RheX0sIHtAbGluayBEYXRlVGltZSNob3VyfSwge0BsaW5rIERhdGVUaW1lI21pbnV0ZX0sIHtAbGluayBEYXRlVGltZSNzZWNvbmR9LCB7QGxpbmsgRGF0ZVRpbWUjbWlsbGlzZWNvbmR9IGFjY2Vzc29ycy5cbiAqICogKipXZWVrIGNhbGVuZGFyKio6IEZvciBJU08gd2VlayBjYWxlbmRhciBhdHRyaWJ1dGVzLCBzZWUgdGhlIHtAbGluayBEYXRlVGltZSN3ZWVrWWVhcn0sIHtAbGluayBEYXRlVGltZSN3ZWVrTnVtYmVyfSwgYW5kIHtAbGluayBEYXRlVGltZSN3ZWVrZGF5fSBhY2Nlc3NvcnMuXG4gKiAqICoqQ29uZmlndXJhdGlvbioqIFNlZSB0aGUge0BsaW5rIERhdGVUaW1lI2xvY2FsZX0gYW5kIHtAbGluayBEYXRlVGltZSNudW1iZXJpbmdTeXN0ZW19IGFjY2Vzc29ycy5cbiAqICogKipUcmFuc2Zvcm1hdGlvbioqOiBUbyB0cmFuc2Zvcm0gdGhlIERhdGVUaW1lIGludG8gb3RoZXIgRGF0ZVRpbWVzLCB1c2Uge0BsaW5rIERhdGVUaW1lI3NldH0sIHtAbGluayBEYXRlVGltZSNyZWNvbmZpZ3VyZX0sIHtAbGluayBEYXRlVGltZSNzZXRab25lfSwge0BsaW5rIERhdGVUaW1lI3NldExvY2FsZX0sIHtAbGluayBEYXRlVGltZS5wbHVzfSwge0BsaW5rIERhdGVUaW1lI21pbnVzfSwge0BsaW5rIERhdGVUaW1lI2VuZE9mfSwge0BsaW5rIERhdGVUaW1lI3N0YXJ0T2Z9LCB7QGxpbmsgRGF0ZVRpbWUjdG9VVEN9LCBhbmQge0BsaW5rIERhdGVUaW1lI3RvTG9jYWx9LlxuICogKiAqKk91dHB1dCoqOiBUbyBjb252ZXJ0IHRoZSBEYXRlVGltZSB0byBvdGhlciByZXByZXNlbnRhdGlvbnMsIHVzZSB0aGUge0BsaW5rIERhdGVUaW1lI3RvUmVsYXRpdmV9LCB7QGxpbmsgRGF0ZVRpbWUjdG9SZWxhdGl2ZUNhbGVuZGFyfSwge0BsaW5rIERhdGVUaW1lI3RvSlNPTn0sIHtAbGluayBEYXRlVGltZSN0b0lTT30sIHtAbGluayBEYXRlVGltZSN0b0hUVFB9LCB7QGxpbmsgRGF0ZVRpbWUjdG9PYmplY3R9LCB7QGxpbmsgRGF0ZVRpbWUjdG9SRkMyODIyfSwge0BsaW5rIERhdGVUaW1lI3RvU3RyaW5nfSwge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSwge0BsaW5rIERhdGVUaW1lI3RvRm9ybWF0fSwge0BsaW5rIERhdGVUaW1lI3RvTWlsbGlzfSBhbmQge0BsaW5rIERhdGVUaW1lI3RvSlNEYXRlfS5cbiAqXG4gKiBUaGVyZSdzIHBsZW50eSBvdGhlcnMgZG9jdW1lbnRlZCBiZWxvdy4gSW4gYWRkaXRpb24sIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHN1YnRsZXIgdG9waWNzIGxpa2UgaW50ZXJuYXRpb25hbGl6YXRpb24sIHRpbWUgem9uZXMsIGFsdGVybmF0aXZlIGNhbGVuZGFycywgdmFsaWRpdHksIGFuZCBzbyBvbiwgc2VlIHRoZSBleHRlcm5hbCBkb2N1bWVudGF0aW9uLlxuICovXG5cblxudmFyIERhdGVUaW1lID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKi9cbiAgZnVuY3Rpb24gRGF0ZVRpbWUoY29uZmlnKSB7XG4gICAgdmFyIHpvbmUgPSBjb25maWcuem9uZSB8fCBTZXR0aW5ncy5kZWZhdWx0Wm9uZTtcbiAgICB2YXIgaW52YWxpZCA9IGNvbmZpZy5pbnZhbGlkIHx8IChOdW1iZXIuaXNOYU4oY29uZmlnLnRzKSA/IG5ldyBJbnZhbGlkKFwiaW52YWxpZCBpbnB1dFwiKSA6IG51bGwpIHx8ICghem9uZS5pc1ZhbGlkID8gdW5zdXBwb3J0ZWRab25lKHpvbmUpIDogbnVsbCk7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG5cbiAgICB0aGlzLnRzID0gaXNVbmRlZmluZWQoY29uZmlnLnRzKSA/IFNldHRpbmdzLm5vdygpIDogY29uZmlnLnRzO1xuICAgIHZhciBjID0gbnVsbCxcbiAgICAgICAgbyA9IG51bGw7XG5cbiAgICBpZiAoIWludmFsaWQpIHtcbiAgICAgIHZhciB1bmNoYW5nZWQgPSBjb25maWcub2xkICYmIGNvbmZpZy5vbGQudHMgPT09IHRoaXMudHMgJiYgY29uZmlnLm9sZC56b25lLmVxdWFscyh6b25lKTtcblxuICAgICAgaWYgKHVuY2hhbmdlZCkge1xuICAgICAgICB2YXIgX3JlZiA9IFtjb25maWcub2xkLmMsIGNvbmZpZy5vbGQub107XG4gICAgICAgIGMgPSBfcmVmWzBdO1xuICAgICAgICBvID0gX3JlZlsxXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBvdCA9IHpvbmUub2Zmc2V0KHRoaXMudHMpO1xuICAgICAgICBjID0gdHNUb09iaih0aGlzLnRzLCBvdCk7XG4gICAgICAgIGludmFsaWQgPSBOdW1iZXIuaXNOYU4oYy55ZWFyKSA/IG5ldyBJbnZhbGlkKFwiaW52YWxpZCBpbnB1dFwiKSA6IG51bGw7XG4gICAgICAgIGMgPSBpbnZhbGlkID8gbnVsbCA6IGM7XG4gICAgICAgIG8gPSBpbnZhbGlkID8gbnVsbCA6IG90O1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuXG4gICAgdGhpcy5fem9uZSA9IHpvbmU7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG5cbiAgICB0aGlzLmxvYyA9IGNvbmZpZy5sb2MgfHwgTG9jYWxlLmNyZWF0ZSgpO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgdGhpcy5pbnZhbGlkID0gaW52YWxpZDtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMud2Vla0RhdGEgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgdGhpcy5jID0gYztcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMubyA9IG87XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG5cbiAgICB0aGlzLmlzTHV4b25EYXRlVGltZSA9IHRydWU7XG4gIH0gLy8gQ09OU1RSVUNUXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZvciB0aGUgY3VycmVudCBpbnN0YW50LCBpbiB0aGUgc3lzdGVtJ3MgdGltZSB6b25lLlxuICAgKlxuICAgKiBVc2UgU2V0dGluZ3MgdG8gb3ZlcnJpZGUgdGhlc2UgZGVmYXVsdCB2YWx1ZXMgaWYgbmVlZGVkLlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0lTTygpIC8vfj4gbm93IGluIHRoZSBJU08gZm9ybWF0XG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cblxuXG4gIERhdGVUaW1lLm5vdyA9IGZ1bmN0aW9uIG5vdygpIHtcbiAgICByZXR1cm4gbmV3IERhdGVUaW1lKHt9KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgbG9jYWwgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtudW1iZXJ9IFt5ZWFyXSAtIFRoZSBjYWxlbmRhciB5ZWFyLiBJZiBvbWl0dGVkIChhcyBpbiwgY2FsbCBgbG9jYWwoKWAgd2l0aCBubyBhcmd1bWVudHMpLCB0aGUgY3VycmVudCB0aW1lIHdpbGwgYmUgdXNlZFxuICAgKiBAcGFyYW0ge251bWJlcn0gW21vbnRoPTFdIC0gVGhlIG1vbnRoLCAxLWluZGV4ZWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtkYXk9MV0gLSBUaGUgZGF5IG9mIHRoZSBtb250aCwgMS1pbmRleGVkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbaG91cj0wXSAtIFRoZSBob3VyIG9mIHRoZSBkYXksIGluIDI0LWhvdXIgdGltZVxuICAgKiBAcGFyYW0ge251bWJlcn0gW21pbnV0ZT0wXSAtIFRoZSBtaW51dGUgb2YgdGhlIGhvdXIsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1OVxuICAgKiBAcGFyYW0ge251bWJlcn0gW3NlY29uZD0wXSAtIFRoZSBzZWNvbmQgb2YgdGhlIG1pbnV0ZSwgbWVhbmluZyBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDU5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbWlsbGlzZWNvbmQ9MF0gLSBUaGUgbWlsbGlzZWNvbmQgb2YgdGhlIHNlY29uZCwgbWVhbmluZyBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDk5OVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gbm93XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKHsgem9uZTogXCJBbWVyaWNhL05ld19Zb3JrXCIgfSkgICAgICAvL34+IG5vdywgaW4gVVMgZWFzdCBjb2FzdCB0aW1lXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAxLTAxVDAwOjAwOjAwXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMpICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTAxVDAwOjAwOjAwXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMsIDEyLCB7IGxvY2FsZTogXCJmclwiIH0pICAgICAvL34+IDIwMTctMDMtMTJUMDA6MDA6MDAsIHdpdGggYSBGcmVuY2ggbG9jYWxlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMsIDEyLCA1KSAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjAwOjAwXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMsIDEyLCA1LCB7IHpvbmU6IFwidXRjXCIgfSkgICAvL34+IDIwMTctMDMtMTJUMDU6MDA6MDAsIGluIFVUQ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgNSwgNDUpICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NTowMFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgNSwgNDUsIDEwKSAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NToxMFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgNSwgNDUsIDEwLCA3NjUpICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NToxMC43NjVcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUubG9jYWwgPSBmdW5jdGlvbiBsb2NhbCgpIHtcbiAgICB2YXIgX2xhc3RPcHRzID0gbGFzdE9wdHMoYXJndW1lbnRzKSxcbiAgICAgICAgb3B0cyA9IF9sYXN0T3B0c1swXSxcbiAgICAgICAgYXJncyA9IF9sYXN0T3B0c1sxXSxcbiAgICAgICAgeWVhciA9IGFyZ3NbMF0sXG4gICAgICAgIG1vbnRoID0gYXJnc1sxXSxcbiAgICAgICAgZGF5ID0gYXJnc1syXSxcbiAgICAgICAgaG91ciA9IGFyZ3NbM10sXG4gICAgICAgIG1pbnV0ZSA9IGFyZ3NbNF0sXG4gICAgICAgIHNlY29uZCA9IGFyZ3NbNV0sXG4gICAgICAgIG1pbGxpc2Vjb25kID0gYXJnc1s2XTtcblxuICAgIHJldHVybiBxdWlja0RUKHtcbiAgICAgIHllYXI6IHllYXIsXG4gICAgICBtb250aDogbW9udGgsXG4gICAgICBkYXk6IGRheSxcbiAgICAgIGhvdXI6IGhvdXIsXG4gICAgICBtaW51dGU6IG1pbnV0ZSxcbiAgICAgIHNlY29uZDogc2Vjb25kLFxuICAgICAgbWlsbGlzZWNvbmQ6IG1pbGxpc2Vjb25kXG4gICAgfSwgb3B0cyk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGluIFVUQ1xuICAgKiBAcGFyYW0ge251bWJlcn0gW3llYXJdIC0gVGhlIGNhbGVuZGFyIHllYXIuIElmIG9taXR0ZWQgKGFzIGluLCBjYWxsIGB1dGMoKWAgd2l0aCBubyBhcmd1bWVudHMpLCB0aGUgY3VycmVudCB0aW1lIHdpbGwgYmUgdXNlZFxuICAgKiBAcGFyYW0ge251bWJlcn0gW21vbnRoPTFdIC0gVGhlIG1vbnRoLCAxLWluZGV4ZWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtkYXk9MV0gLSBUaGUgZGF5IG9mIHRoZSBtb250aFxuICAgKiBAcGFyYW0ge251bWJlcn0gW2hvdXI9MF0gLSBUaGUgaG91ciBvZiB0aGUgZGF5LCBpbiAyNC1ob3VyIHRpbWVcbiAgICogQHBhcmFtIHtudW1iZXJ9IFttaW51dGU9MF0gLSBUaGUgbWludXRlIG9mIHRoZSBob3VyLCBtZWFuaW5nIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgNTlcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtzZWNvbmQ9MF0gLSBUaGUgc2Vjb25kIG9mIHRoZSBtaW51dGUsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1OVxuICAgKiBAcGFyYW0ge251bWJlcn0gW21pbGxpc2Vjb25kPTBdIC0gVGhlIG1pbGxpc2Vjb25kIG9mIHRoZSBzZWNvbmQsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA5OTlcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBEYXRlVGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubG9jYWxlXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5vdXRwdXRDYWxlbmRhcl0gLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5udW1iZXJpbmdTeXN0ZW1dIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiBub3dcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAxLTAxVDAwOjAwOjAwWlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNywgMykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMDFUMDA6MDA6MDBaXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwMDowMDowMFpcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcsIDMsIDEyLCA1KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjAwOjAwWlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNywgMywgMTIsIDUsIDQ1KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDU6NDU6MDBaXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSwgNDUsIHsgbG9jYWxlOiBcImZyXCIgfSkgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjQ1OjAwWiB3aXRoIGEgRnJlbmNoIGxvY2FsZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNywgMywgMTIsIDUsIDQ1LCAxMCkgICAgICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDU6NDU6MTBaXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSwgNDUsIDEwLCA3NjUsIHsgbG9jYWxlOiBcImZyXCIgfSkgLy9+PiAyMDE3LTAzLTEyVDA1OjQ1OjEwLjc2NVogd2l0aCBhIEZyZW5jaCBsb2NhbGVcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUudXRjID0gZnVuY3Rpb24gdXRjKCkge1xuICAgIHZhciBfbGFzdE9wdHMyID0gbGFzdE9wdHMoYXJndW1lbnRzKSxcbiAgICAgICAgb3B0cyA9IF9sYXN0T3B0czJbMF0sXG4gICAgICAgIGFyZ3MgPSBfbGFzdE9wdHMyWzFdLFxuICAgICAgICB5ZWFyID0gYXJnc1swXSxcbiAgICAgICAgbW9udGggPSBhcmdzWzFdLFxuICAgICAgICBkYXkgPSBhcmdzWzJdLFxuICAgICAgICBob3VyID0gYXJnc1szXSxcbiAgICAgICAgbWludXRlID0gYXJnc1s0XSxcbiAgICAgICAgc2Vjb25kID0gYXJnc1s1XSxcbiAgICAgICAgbWlsbGlzZWNvbmQgPSBhcmdzWzZdO1xuXG4gICAgb3B0cy56b25lID0gRml4ZWRPZmZzZXRab25lLnV0Y0luc3RhbmNlO1xuICAgIHJldHVybiBxdWlja0RUKHtcbiAgICAgIHllYXI6IHllYXIsXG4gICAgICBtb250aDogbW9udGgsXG4gICAgICBkYXk6IGRheSxcbiAgICAgIGhvdXI6IGhvdXIsXG4gICAgICBtaW51dGU6IG1pbnV0ZSxcbiAgICAgIHNlY29uZDogc2Vjb25kLFxuICAgICAgbWlsbGlzZWNvbmQ6IG1pbGxpc2Vjb25kXG4gICAgfSwgb3B0cyk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYSBKYXZhU2NyaXB0IERhdGUgb2JqZWN0LiBVc2VzIHRoZSBkZWZhdWx0IHpvbmUuXG4gICAqIEBwYXJhbSB7RGF0ZX0gZGF0ZSAtIGEgSmF2YVNjcmlwdCBEYXRlIG9iamVjdFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRpb25zLnpvbmU9J2xvY2FsJ10gLSB0aGUgem9uZSB0byBwbGFjZSB0aGUgRGF0ZVRpbWUgaW50b1xuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5mcm9tSlNEYXRlID0gZnVuY3Rpb24gZnJvbUpTRGF0ZShkYXRlLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIHZhciB0cyA9IGlzRGF0ZShkYXRlKSA/IGRhdGUudmFsdWVPZigpIDogTmFOO1xuXG4gICAgaWYgKE51bWJlci5pc05hTih0cykpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKFwiaW52YWxpZCBpbnB1dFwiKTtcbiAgICB9XG5cbiAgICB2YXIgem9uZVRvVXNlID0gbm9ybWFsaXplWm9uZShvcHRpb25zLnpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKTtcblxuICAgIGlmICghem9uZVRvVXNlLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKHVuc3VwcG9ydGVkWm9uZSh6b25lVG9Vc2UpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERhdGVUaW1lKHtcbiAgICAgIHRzOiB0cyxcbiAgICAgIHpvbmU6IHpvbmVUb1VzZSxcbiAgICAgIGxvYzogTG9jYWxlLmZyb21PYmplY3Qob3B0aW9ucylcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgdGhlIGVwb2NoIChtZWFuaW5nIHNpbmNlIDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuIFVzZXMgdGhlIGRlZmF1bHQgem9uZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1pbGxpc2Vjb25kcyAtIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSAxOTcwIFVUQ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRpb25zLnpvbmU9J2xvY2FsJ10gLSB0aGUgem9uZSB0byBwbGFjZSB0aGUgRGF0ZVRpbWUgaW50b1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubG9jYWxlXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5mcm9tTWlsbGlzID0gZnVuY3Rpb24gZnJvbU1pbGxpcyhtaWxsaXNlY29uZHMsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgaWYgKCFpc051bWJlcihtaWxsaXNlY29uZHMpKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJmcm9tTWlsbGlzIHJlcXVpcmVzIGEgbnVtZXJpY2FsIGlucHV0LCBidXQgcmVjZWl2ZWQgYSBcIiArIHR5cGVvZiBtaWxsaXNlY29uZHMgKyBcIiB3aXRoIHZhbHVlIFwiICsgbWlsbGlzZWNvbmRzKTtcbiAgICB9IGVsc2UgaWYgKG1pbGxpc2Vjb25kcyA8IC1NQVhfREFURSB8fCBtaWxsaXNlY29uZHMgPiBNQVhfREFURSkge1xuICAgICAgLy8gdGhpcyBpc24ndCBwZXJmZWN0IGJlY2F1c2UgYmVjYXVzZSB3ZSBjYW4gc3RpbGwgZW5kIHVwIG91dCBvZiByYW5nZSBiZWNhdXNlIG9mIGFkZGl0aW9uYWwgc2hpZnRpbmcsIGJ1dCBpdCdzIGEgc3RhcnRcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKFwiVGltZXN0YW1wIG91dCBvZiByYW5nZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZSh7XG4gICAgICAgIHRzOiBtaWxsaXNlY29uZHMsXG4gICAgICAgIHpvbmU6IG5vcm1hbGl6ZVpvbmUob3B0aW9ucy56b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSksXG4gICAgICAgIGxvYzogTG9jYWxlLmZyb21PYmplY3Qob3B0aW9ucylcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIG51bWJlciBvZiBzZWNvbmRzIHNpbmNlIHRoZSBlcG9jaCAobWVhbmluZyBzaW5jZSAxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLiBVc2VzIHRoZSBkZWZhdWx0IHpvbmUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzZWNvbmRzIC0gYSBudW1iZXIgb2Ygc2Vjb25kcyBzaW5jZSAxOTcwIFVUQ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRpb25zLnpvbmU9J2xvY2FsJ10gLSB0aGUgem9uZSB0byBwbGFjZSB0aGUgRGF0ZVRpbWUgaW50b1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubG9jYWxlXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5mcm9tU2Vjb25kcyA9IGZ1bmN0aW9uIGZyb21TZWNvbmRzKHNlY29uZHMsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgaWYgKCFpc051bWJlcihzZWNvbmRzKSkge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwiZnJvbVNlY29uZHMgcmVxdWlyZXMgYSBudW1lcmljYWwgaW5wdXRcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoe1xuICAgICAgICB0czogc2Vjb25kcyAqIDEwMDAsXG4gICAgICAgIHpvbmU6IG5vcm1hbGl6ZVpvbmUob3B0aW9ucy56b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSksXG4gICAgICAgIGxvYzogTG9jYWxlLmZyb21PYmplY3Qob3B0aW9ucylcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIEphdmFTY3JpcHQgb2JqZWN0IHdpdGgga2V5cyBsaWtlICd5ZWFyJyBhbmQgJ2hvdXInIHdpdGggcmVhc29uYWJsZSBkZWZhdWx0cy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9iaiAtIHRoZSBvYmplY3QgdG8gY3JlYXRlIHRoZSBEYXRlVGltZSBmcm9tXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoueWVhciAtIGEgeWVhciwgc3VjaCBhcyAxOTg3XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubW9udGggLSBhIG1vbnRoLCAxLTEyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmouZGF5IC0gYSBkYXkgb2YgdGhlIG1vbnRoLCAxLTMxLCBkZXBlbmRpbmcgb24gdGhlIG1vbnRoXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoub3JkaW5hbCAtIGRheSBvZiB0aGUgeWVhciwgMS0zNjUgb3IgMzY2XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoud2Vla1llYXIgLSBhbiBJU08gd2VlayB5ZWFyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoud2Vla051bWJlciAtIGFuIElTTyB3ZWVrIG51bWJlciwgYmV0d2VlbiAxIGFuZCA1MiBvciA1MywgZGVwZW5kaW5nIG9uIHRoZSB5ZWFyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoud2Vla2RheSAtIGFuIElTTyB3ZWVrZGF5LCAxLTcsIHdoZXJlIDEgaXMgTW9uZGF5IGFuZCA3IGlzIFN1bmRheVxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmhvdXIgLSBob3VyIG9mIHRoZSBkYXksIDAtMjNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5taW51dGUgLSBtaW51dGUgb2YgdGhlIGhvdXIsIDAtNTlcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5zZWNvbmQgLSBzZWNvbmQgb2YgdGhlIG1pbnV0ZSwgMC01OVxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLm1pbGxpc2Vjb25kIC0gbWlsbGlzZWNvbmQgb2YgdGhlIHNlY29uZCwgMC05OTlcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIGZvciBjcmVhdGluZyB0aGlzIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRzLnpvbmU9J2xvY2FsJ10gLSBpbnRlcnByZXQgdGhlIG51bWJlcnMgaW4gdGhlIGNvbnRleHQgb2YgYSBwYXJ0aWN1bGFyIHpvbmUuIENhbiB0YWtlIGFueSB2YWx1ZSB0YWtlbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gc2V0Wm9uZSgpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J3N5c3RlbSdzIGxvY2FsZSddIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyB5ZWFyOiAxOTgyLCBtb250aDogNSwgZGF5OiAyNX0pLnRvSVNPRGF0ZSgpIC8vPT4gJzE5ODItMDUtMjUnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyB5ZWFyOiAxOTgyIH0pLnRvSVNPRGF0ZSgpIC8vPT4gJzE5ODItMDEtMDEnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyBob3VyOiAxMCwgbWludXRlOiAyNiwgc2Vjb25kOiA2IH0pIC8vfj4gdG9kYXkgYXQgMTA6MjY6MDZcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IGhvdXI6IDEwLCBtaW51dGU6IDI2LCBzZWNvbmQ6IDYgfSwgeyB6b25lOiAndXRjJyB9KSxcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IGhvdXI6IDEwLCBtaW51dGU6IDI2LCBzZWNvbmQ6IDYgfSwgeyB6b25lOiAnbG9jYWwnIH0pXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyBob3VyOiAxMCwgbWludXRlOiAyNiwgc2Vjb25kOiA2IH0sIHsgem9uZTogJ0FtZXJpY2EvTmV3X1lvcmsnIH0pXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyB3ZWVrWWVhcjogMjAxNiwgd2Vla051bWJlcjogMiwgd2Vla2RheTogMyB9KS50b0lTT0RhdGUoKSAvLz0+ICcyMDE2LTAxLTEzJ1xuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmosIG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgb2JqID0gb2JqIHx8IHt9O1xuICAgIHZhciB6b25lVG9Vc2UgPSBub3JtYWxpemVab25lKG9wdHMuem9uZSwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpO1xuXG4gICAgaWYgKCF6b25lVG9Vc2UuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQodW5zdXBwb3J0ZWRab25lKHpvbmVUb1VzZSkpO1xuICAgIH1cblxuICAgIHZhciB0c05vdyA9IFNldHRpbmdzLm5vdygpLFxuICAgICAgICBvZmZzZXRQcm92aXMgPSAhaXNVbmRlZmluZWQob3B0cy5zcGVjaWZpY09mZnNldCkgPyBvcHRzLnNwZWNpZmljT2Zmc2V0IDogem9uZVRvVXNlLm9mZnNldCh0c05vdyksXG4gICAgICAgIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVPYmplY3Qob2JqLCBub3JtYWxpemVVbml0KSxcbiAgICAgICAgY29udGFpbnNPcmRpbmFsID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQub3JkaW5hbCksXG4gICAgICAgIGNvbnRhaW5zR3JlZ29yWWVhciA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLnllYXIpLFxuICAgICAgICBjb250YWluc0dyZWdvck1EID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQubW9udGgpIHx8ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLmRheSksXG4gICAgICAgIGNvbnRhaW5zR3JlZ29yID0gY29udGFpbnNHcmVnb3JZZWFyIHx8IGNvbnRhaW5zR3JlZ29yTUQsXG4gICAgICAgIGRlZmluaXRlV2Vla0RlZiA9IG5vcm1hbGl6ZWQud2Vla1llYXIgfHwgbm9ybWFsaXplZC53ZWVrTnVtYmVyLFxuICAgICAgICBsb2MgPSBMb2NhbGUuZnJvbU9iamVjdChvcHRzKTsgLy8gY2FzZXM6XG4gICAgLy8ganVzdCBhIHdlZWtkYXkgLT4gdGhpcyB3ZWVrJ3MgaW5zdGFuY2Ugb2YgdGhhdCB3ZWVrZGF5LCBubyB3b3JyaWVzXG4gICAgLy8gKGdyZWdvcmlhbiBkYXRhIG9yIG9yZGluYWwpICsgKHdlZWtZZWFyIG9yIHdlZWtOdW1iZXIpIC0+IGVycm9yXG4gICAgLy8gKGdyZWdvcmlhbiBtb250aCBvciBkYXkpICsgb3JkaW5hbCAtPiBlcnJvclxuICAgIC8vIG90aGVyd2lzZSBqdXN0IHVzZSB3ZWVrcyBvciBvcmRpbmFscyBvciBncmVnb3JpYW4sIGRlcGVuZGluZyBvbiB3aGF0J3Mgc3BlY2lmaWVkXG5cbiAgICBpZiAoKGNvbnRhaW5zR3JlZ29yIHx8IGNvbnRhaW5zT3JkaW5hbCkgJiYgZGVmaW5pdGVXZWVrRGVmKSB7XG4gICAgICB0aHJvdyBuZXcgQ29uZmxpY3RpbmdTcGVjaWZpY2F0aW9uRXJyb3IoXCJDYW4ndCBtaXggd2Vla1llYXIvd2Vla051bWJlciB1bml0cyB3aXRoIHllYXIvbW9udGgvZGF5IG9yIG9yZGluYWxzXCIpO1xuICAgIH1cblxuICAgIGlmIChjb250YWluc0dyZWdvck1EICYmIGNvbnRhaW5zT3JkaW5hbCkge1xuICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKFwiQ2FuJ3QgbWl4IG9yZGluYWwgZGF0ZXMgd2l0aCBtb250aC9kYXlcIik7XG4gICAgfVxuXG4gICAgdmFyIHVzZVdlZWtEYXRhID0gZGVmaW5pdGVXZWVrRGVmIHx8IG5vcm1hbGl6ZWQud2Vla2RheSAmJiAhY29udGFpbnNHcmVnb3I7IC8vIGNvbmZpZ3VyZSBvdXJzZWx2ZXMgdG8gZGVhbCB3aXRoIGdyZWdvcmlhbiBkYXRlcyBvciB3ZWVrIHN0dWZmXG5cbiAgICB2YXIgdW5pdHMsXG4gICAgICAgIGRlZmF1bHRWYWx1ZXMsXG4gICAgICAgIG9iak5vdyA9IHRzVG9PYmoodHNOb3csIG9mZnNldFByb3Zpcyk7XG5cbiAgICBpZiAodXNlV2Vla0RhdGEpIHtcbiAgICAgIHVuaXRzID0gb3JkZXJlZFdlZWtVbml0cztcbiAgICAgIGRlZmF1bHRWYWx1ZXMgPSBkZWZhdWx0V2Vla1VuaXRWYWx1ZXM7XG4gICAgICBvYmpOb3cgPSBncmVnb3JpYW5Ub1dlZWsob2JqTm93KTtcbiAgICB9IGVsc2UgaWYgKGNvbnRhaW5zT3JkaW5hbCkge1xuICAgICAgdW5pdHMgPSBvcmRlcmVkT3JkaW5hbFVuaXRzO1xuICAgICAgZGVmYXVsdFZhbHVlcyA9IGRlZmF1bHRPcmRpbmFsVW5pdFZhbHVlcztcbiAgICAgIG9iak5vdyA9IGdyZWdvcmlhblRvT3JkaW5hbChvYmpOb3cpO1xuICAgIH0gZWxzZSB7XG4gICAgICB1bml0cyA9IG9yZGVyZWRVbml0cztcbiAgICAgIGRlZmF1bHRWYWx1ZXMgPSBkZWZhdWx0VW5pdFZhbHVlcztcbiAgICB9IC8vIHNldCBkZWZhdWx0IHZhbHVlcyBmb3IgbWlzc2luZyBzdHVmZlxuXG5cbiAgICB2YXIgZm91bmRGaXJzdCA9IGZhbHNlO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UodW5pdHMpLCBfc3RlcDM7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMygpKS5kb25lOykge1xuICAgICAgdmFyIHUgPSBfc3RlcDMudmFsdWU7XG4gICAgICB2YXIgdiA9IG5vcm1hbGl6ZWRbdV07XG5cbiAgICAgIGlmICghaXNVbmRlZmluZWQodikpIHtcbiAgICAgICAgZm91bmRGaXJzdCA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKGZvdW5kRmlyc3QpIHtcbiAgICAgICAgbm9ybWFsaXplZFt1XSA9IGRlZmF1bHRWYWx1ZXNbdV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub3JtYWxpemVkW3VdID0gb2JqTm93W3VdO1xuICAgICAgfVxuICAgIH0gLy8gbWFrZSBzdXJlIHRoZSB2YWx1ZXMgd2UgaGF2ZSBhcmUgaW4gcmFuZ2VcblxuXG4gICAgdmFyIGhpZ2hlck9yZGVySW52YWxpZCA9IHVzZVdlZWtEYXRhID8gaGFzSW52YWxpZFdlZWtEYXRhKG5vcm1hbGl6ZWQpIDogY29udGFpbnNPcmRpbmFsID8gaGFzSW52YWxpZE9yZGluYWxEYXRhKG5vcm1hbGl6ZWQpIDogaGFzSW52YWxpZEdyZWdvcmlhbkRhdGEobm9ybWFsaXplZCksXG4gICAgICAgIGludmFsaWQgPSBoaWdoZXJPcmRlckludmFsaWQgfHwgaGFzSW52YWxpZFRpbWVEYXRhKG5vcm1hbGl6ZWQpO1xuXG4gICAgaWYgKGludmFsaWQpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKGludmFsaWQpO1xuICAgIH0gLy8gY29tcHV0ZSB0aGUgYWN0dWFsIHRpbWVcblxuXG4gICAgdmFyIGdyZWdvcmlhbiA9IHVzZVdlZWtEYXRhID8gd2Vla1RvR3JlZ29yaWFuKG5vcm1hbGl6ZWQpIDogY29udGFpbnNPcmRpbmFsID8gb3JkaW5hbFRvR3JlZ29yaWFuKG5vcm1hbGl6ZWQpIDogbm9ybWFsaXplZCxcbiAgICAgICAgX29ialRvVFMyID0gb2JqVG9UUyhncmVnb3JpYW4sIG9mZnNldFByb3Zpcywgem9uZVRvVXNlKSxcbiAgICAgICAgdHNGaW5hbCA9IF9vYmpUb1RTMlswXSxcbiAgICAgICAgb2Zmc2V0RmluYWwgPSBfb2JqVG9UUzJbMV0sXG4gICAgICAgIGluc3QgPSBuZXcgRGF0ZVRpbWUoe1xuICAgICAgdHM6IHRzRmluYWwsXG4gICAgICB6b25lOiB6b25lVG9Vc2UsXG4gICAgICBvOiBvZmZzZXRGaW5hbCxcbiAgICAgIGxvYzogbG9jXG4gICAgfSk7IC8vIGdyZWdvcmlhbiBkYXRhICsgd2Vla2RheSBzZXJ2ZXMgb25seSB0byB2YWxpZGF0ZVxuXG5cbiAgICBpZiAobm9ybWFsaXplZC53ZWVrZGF5ICYmIGNvbnRhaW5zR3JlZ29yICYmIG9iai53ZWVrZGF5ICE9PSBpbnN0LndlZWtkYXkpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKFwibWlzbWF0Y2hlZCB3ZWVrZGF5XCIsIFwieW91IGNhbid0IHNwZWNpZnkgYm90aCBhIHdlZWtkYXkgb2YgXCIgKyBub3JtYWxpemVkLndlZWtkYXkgKyBcIiBhbmQgYSBkYXRlIG9mIFwiICsgaW5zdC50b0lTTygpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5zdDtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhbiBJU08gODYwMSBzdHJpbmdcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgSVNPIHN0cmluZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gYWZmZWN0IHRoZSBjcmVhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0cy56b25lPSdsb2NhbCddIC0gdXNlIHRoaXMgem9uZSBpZiBubyBvZmZzZXQgaXMgc3BlY2lmaWVkIGluIHRoZSBpbnB1dCBzdHJpbmcgaXRzZWxmLiBXaWxsIGFsc28gY29udmVydCB0aGUgdGltZSB0byB0aGlzIHpvbmVcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zZXRab25lPWZhbHNlXSAtIG92ZXJyaWRlIHRoZSB6b25lIHdpdGggYSBmaXhlZC1vZmZzZXQgem9uZSBzcGVjaWZpZWQgaW4gdGhlIHN0cmluZyBpdHNlbGYsIGlmIGl0IHNwZWNpZmllcyBvbmVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nc3lzdGVtJ3MgbG9jYWxlJ10gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMub3V0cHV0Q2FsZW5kYXJdIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubnVtYmVyaW5nU3lzdGVtXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21JU08oJzIwMTYtMDUtMjVUMDk6MDg6MzQuMTIzJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUlTTygnMjAxNi0wNS0yNVQwOTowODozNC4xMjMrMDY6MDAnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSVNPKCcyMDE2LTA1LTI1VDA5OjA4OjM0LjEyMyswNjowMCcsIHtzZXRab25lOiB0cnVlfSlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUlTTygnMjAxNi0wNS0yNVQwOTowODozNC4xMjMnLCB7em9uZTogJ3V0Yyd9KVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSVNPKCcyMDE2LVcwNS00JylcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUuZnJvbUlTTyA9IGZ1bmN0aW9uIGZyb21JU08odGV4dCwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgX3BhcnNlSVNPRGF0ZSA9IHBhcnNlSVNPRGF0ZSh0ZXh0KSxcbiAgICAgICAgdmFscyA9IF9wYXJzZUlTT0RhdGVbMF0sXG4gICAgICAgIHBhcnNlZFpvbmUgPSBfcGFyc2VJU09EYXRlWzFdO1xuXG4gICAgcmV0dXJuIHBhcnNlRGF0YVRvRGF0ZVRpbWUodmFscywgcGFyc2VkWm9uZSwgb3B0cywgXCJJU08gODYwMVwiLCB0ZXh0KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhbiBSRkMgMjgyMiBzdHJpbmdcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgUkZDIDI4MjIgc3RyaW5nXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0byBhZmZlY3QgdGhlIGNyZWF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRzLnpvbmU9J2xvY2FsJ10gLSBjb252ZXJ0IHRoZSB0aW1lIHRvIHRoaXMgem9uZS4gU2luY2UgdGhlIG9mZnNldCBpcyBhbHdheXMgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcgaXRzZWxmLCB0aGlzIGhhcyBubyBlZmZlY3Qgb24gdGhlIGludGVycHJldGF0aW9uIG9mIHN0cmluZywgbWVyZWx5IHRoZSB6b25lIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaXMgZXhwcmVzc2VkIGluLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCBhIGZpeGVkLW9mZnNldCB6b25lIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgaWYgaXQgc3BlY2lmaWVzIG9uZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdzeXN0ZW0ncyBsb2NhbGUnXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tUkZDMjgyMignMjUgTm92IDIwMTYgMTM6MjM6MTIgR01UJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVJGQzI4MjIoJ0ZyaSwgMjUgTm92IDIwMTYgMTM6MjM6MTIgKzA2MDAnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tUkZDMjgyMignMjUgTm92IDIwMTYgMTM6MjMgWicpXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIERhdGVUaW1lLmZyb21SRkMyODIyID0gZnVuY3Rpb24gZnJvbVJGQzI4MjIodGV4dCwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgX3BhcnNlUkZDMjgyMkRhdGUgPSBwYXJzZVJGQzI4MjJEYXRlKHRleHQpLFxuICAgICAgICB2YWxzID0gX3BhcnNlUkZDMjgyMkRhdGVbMF0sXG4gICAgICAgIHBhcnNlZFpvbmUgPSBfcGFyc2VSRkMyODIyRGF0ZVsxXTtcblxuICAgIHJldHVybiBwYXJzZURhdGFUb0RhdGVUaW1lKHZhbHMsIHBhcnNlZFpvbmUsIG9wdHMsIFwiUkZDIDI4MjJcIiwgdGV4dCk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYW4gSFRUUCBoZWFkZXIgZGF0ZVxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9Qcm90b2NvbHMvcmZjMjYxNi9yZmMyNjE2LXNlYzMuaHRtbCNzZWMzLjMuMVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBIVFRQIGhlYWRlciBkYXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0byBhZmZlY3QgdGhlIGNyZWF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRzLnpvbmU9J2xvY2FsJ10gLSBjb252ZXJ0IHRoZSB0aW1lIHRvIHRoaXMgem9uZS4gU2luY2UgSFRUUCBkYXRlcyBhcmUgYWx3YXlzIGluIFVUQywgdGhpcyBoYXMgbm8gZWZmZWN0IG9uIHRoZSBpbnRlcnByZXRhdGlvbiBvZiBzdHJpbmcsIG1lcmVseSB0aGUgem9uZSB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGlzIGV4cHJlc3NlZCBpbi5cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zZXRab25lPWZhbHNlXSAtIG92ZXJyaWRlIHRoZSB6b25lIHdpdGggdGhlIGZpeGVkLW9mZnNldCB6b25lIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nLiBGb3IgSFRUUCBkYXRlcywgdGhpcyBpcyBhbHdheXMgVVRDLCBzbyB0aGlzIG9wdGlvbiBpcyBlcXVpdmFsZW50IHRvIHNldHRpbmcgdGhlIGB6b25lYCBvcHRpb24gdG8gJ3V0YycsIGJ1dCB0aGlzIG9wdGlvbiBpcyBpbmNsdWRlZCBmb3IgY29uc2lzdGVuY3kgd2l0aCBzaW1pbGFyIG1ldGhvZHMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J3N5c3RlbSdzIGxvY2FsZSddIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21IVFRQKCdTdW4sIDA2IE5vdiAxOTk0IDA4OjQ5OjM3IEdNVCcpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21IVFRQKCdTdW5kYXksIDA2LU5vdi05NCAwODo0OTozNyBHTVQnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSFRUUCgnU3VuIE5vdiAgNiAwODo0OTozNyAxOTk0JylcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUuZnJvbUhUVFAgPSBmdW5jdGlvbiBmcm9tSFRUUCh0ZXh0LCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIHZhciBfcGFyc2VIVFRQRGF0ZSA9IHBhcnNlSFRUUERhdGUodGV4dCksXG4gICAgICAgIHZhbHMgPSBfcGFyc2VIVFRQRGF0ZVswXSxcbiAgICAgICAgcGFyc2VkWm9uZSA9IF9wYXJzZUhUVFBEYXRlWzFdO1xuXG4gICAgcmV0dXJuIHBhcnNlRGF0YVRvRGF0ZVRpbWUodmFscywgcGFyc2VkWm9uZSwgb3B0cywgXCJIVFRQXCIsIG9wdHMpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGFuIGlucHV0IHN0cmluZyBhbmQgZm9ybWF0IHN0cmluZy5cbiAgICogRGVmYXVsdHMgdG8gZW4tVVMgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZCwgcmVnYXJkbGVzcyBvZiB0aGUgc3lzdGVtJ3MgbG9jYWxlLiBGb3IgYSB0YWJsZSBvZiB0b2tlbnMgYW5kIHRoZWlyIGludGVycHJldGF0aW9ucywgc2VlIFtoZXJlXShodHRwczovL21vbWVudC5naXRodWIuaW8vbHV4b24vIy9wYXJzaW5nP2lkPXRhYmxlLW9mLXRva2VucykuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIHN0cmluZyB0byBwYXJzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZm10IC0gdGhlIGZvcm1hdCB0aGUgc3RyaW5nIGlzIGV4cGVjdGVkIHRvIGJlIGluIChzZWUgdGhlIGxpbmsgYmVsb3cgZm9yIHRoZSBmb3JtYXRzKVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gYWZmZWN0IHRoZSBjcmVhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0cy56b25lPSdsb2NhbCddIC0gdXNlIHRoaXMgem9uZSBpZiBubyBvZmZzZXQgaXMgc3BlY2lmaWVkIGluIHRoZSBpbnB1dCBzdHJpbmcgaXRzZWxmLiBXaWxsIGFsc28gY29udmVydCB0aGUgRGF0ZVRpbWUgdG8gdGhpcyB6b25lXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc2V0Wm9uZT1mYWxzZV0gLSBvdmVycmlkZSB0aGUgem9uZSB3aXRoIGEgem9uZSBzcGVjaWZpZWQgaW4gdGhlIHN0cmluZyBpdHNlbGYsIGlmIGl0IHNwZWNpZmllcyBvbmVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nZW4tVVMnXSAtIGEgbG9jYWxlIHN0cmluZyB0byB1c2Ugd2hlbiBwYXJzaW5nLiBXaWxsIGFsc28gc2V0IHRoZSBEYXRlVGltZSB0byB0aGlzIGxvY2FsZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2Ugd2hlbiBwYXJzaW5nLiBXaWxsIGFsc28gc2V0IHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgdG8gdGhpcyBudW1iZXJpbmcgc3lzdGVtXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5mcm9tRm9ybWF0ID0gZnVuY3Rpb24gZnJvbUZvcm1hdCh0ZXh0LCBmbXQsIG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgaWYgKGlzVW5kZWZpbmVkKHRleHQpIHx8IGlzVW5kZWZpbmVkKGZtdCkpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcImZyb21Gb3JtYXQgcmVxdWlyZXMgYW4gaW5wdXQgc3RyaW5nIGFuZCBhIGZvcm1hdFwiKTtcbiAgICB9XG5cbiAgICB2YXIgX29wdHMgPSBvcHRzLFxuICAgICAgICBfb3B0cyRsb2NhbGUgPSBfb3B0cy5sb2NhbGUsXG4gICAgICAgIGxvY2FsZSA9IF9vcHRzJGxvY2FsZSA9PT0gdm9pZCAwID8gbnVsbCA6IF9vcHRzJGxvY2FsZSxcbiAgICAgICAgX29wdHMkbnVtYmVyaW5nU3lzdGVtID0gX29wdHMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBudW1iZXJpbmdTeXN0ZW0gPSBfb3B0cyRudW1iZXJpbmdTeXN0ZW0gPT09IHZvaWQgMCA/IG51bGwgOiBfb3B0cyRudW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIGxvY2FsZVRvVXNlID0gTG9jYWxlLmZyb21PcHRzKHtcbiAgICAgIGxvY2FsZTogbG9jYWxlLFxuICAgICAgbnVtYmVyaW5nU3lzdGVtOiBudW1iZXJpbmdTeXN0ZW0sXG4gICAgICBkZWZhdWx0VG9FTjogdHJ1ZVxuICAgIH0pLFxuICAgICAgICBfcGFyc2VGcm9tVG9rZW5zID0gcGFyc2VGcm9tVG9rZW5zKGxvY2FsZVRvVXNlLCB0ZXh0LCBmbXQpLFxuICAgICAgICB2YWxzID0gX3BhcnNlRnJvbVRva2Vuc1swXSxcbiAgICAgICAgcGFyc2VkWm9uZSA9IF9wYXJzZUZyb21Ub2tlbnNbMV0sXG4gICAgICAgIHNwZWNpZmljT2Zmc2V0ID0gX3BhcnNlRnJvbVRva2Vuc1syXSxcbiAgICAgICAgaW52YWxpZCA9IF9wYXJzZUZyb21Ub2tlbnNbM107XG5cbiAgICBpZiAoaW52YWxpZCkge1xuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoaW52YWxpZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwYXJzZURhdGFUb0RhdGVUaW1lKHZhbHMsIHBhcnNlZFpvbmUsIG9wdHMsIFwiZm9ybWF0IFwiICsgZm10LCB0ZXh0LCBzcGVjaWZpY09mZnNldCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCB1c2UgZnJvbUZvcm1hdCBpbnN0ZWFkXG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIGZyb21TdHJpbmcodGV4dCwgZm10LCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIHJldHVybiBEYXRlVGltZS5mcm9tRm9ybWF0KHRleHQsIGZtdCwgb3B0cyk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYSBTUUwgZGF0ZSwgdGltZSwgb3IgZGF0ZXRpbWVcbiAgICogRGVmYXVsdHMgdG8gZW4tVVMgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZCwgcmVnYXJkbGVzcyBvZiB0aGUgc3lzdGVtJ3MgbG9jYWxlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIHN0cmluZyB0byBwYXJzZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gYWZmZWN0IHRoZSBjcmVhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0cy56b25lPSdsb2NhbCddIC0gdXNlIHRoaXMgem9uZSBpZiBubyBvZmZzZXQgaXMgc3BlY2lmaWVkIGluIHRoZSBpbnB1dCBzdHJpbmcgaXRzZWxmLiBXaWxsIGFsc28gY29udmVydCB0aGUgRGF0ZVRpbWUgdG8gdGhpcyB6b25lXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc2V0Wm9uZT1mYWxzZV0gLSBvdmVycmlkZSB0aGUgem9uZSB3aXRoIGEgem9uZSBzcGVjaWZpZWQgaW4gdGhlIHN0cmluZyBpdHNlbGYsIGlmIGl0IHNwZWNpZmllcyBvbmVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nZW4tVVMnXSAtIGEgbG9jYWxlIHN0cmluZyB0byB1c2Ugd2hlbiBwYXJzaW5nLiBXaWxsIGFsc28gc2V0IHRoZSBEYXRlVGltZSB0byB0aGlzIGxvY2FsZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2Ugd2hlbiBwYXJzaW5nLiBXaWxsIGFsc28gc2V0IHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgdG8gdGhpcyBudW1iZXJpbmcgc3lzdGVtXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1JylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMjAxNy0wNS0xNSAwOToxMjozNCcpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUgMDk6MTI6MzQuMzQyJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMjAxNy0wNS0xNSAwOToxMjozNC4zNDIrMDY6MDAnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0LjM0MiBBbWVyaWNhL0xvc19BbmdlbGVzJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMjAxNy0wNS0xNSAwOToxMjozNC4zNDIgQW1lcmljYS9Mb3NfQW5nZWxlcycsIHsgc2V0Wm9uZTogdHJ1ZSB9KVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0LjM0MicsIHsgem9uZTogJ0FtZXJpY2EvTG9zX0FuZ2VsZXMnIH0pXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzA5OjEyOjM0LjM0MicpXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIERhdGVUaW1lLmZyb21TUUwgPSBmdW5jdGlvbiBmcm9tU1FMKHRleHQsIG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgdmFyIF9wYXJzZVNRTCA9IHBhcnNlU1FMKHRleHQpLFxuICAgICAgICB2YWxzID0gX3BhcnNlU1FMWzBdLFxuICAgICAgICBwYXJzZWRab25lID0gX3BhcnNlU1FMWzFdO1xuXG4gICAgcmV0dXJuIHBhcnNlRGF0YVRvRGF0ZVRpbWUodmFscywgcGFyc2VkWm9uZSwgb3B0cywgXCJTUUxcIiwgdGV4dCk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpbnZhbGlkIERhdGVUaW1lLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVhc29uIC0gc2ltcGxlIHN0cmluZyBvZiB3aHkgdGhpcyBEYXRlVGltZSBpcyBpbnZhbGlkLiBTaG91bGQgbm90IGNvbnRhaW4gcGFyYW1ldGVycyBvciBhbnl0aGluZyBlbHNlIGRhdGEtZGVwZW5kZW50XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZXhwbGFuYXRpb249bnVsbF0gLSBsb25nZXIgZXhwbGFuYXRpb24sIG1heSBpbmNsdWRlIHBhcmFtZXRlcnMgYW5kIG90aGVyIHVzZWZ1bCBkZWJ1Z2dpbmcgaW5mb3JtYXRpb25cbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUuaW52YWxpZCA9IGZ1bmN0aW9uIGludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbikge1xuICAgIGlmIChleHBsYW5hdGlvbiA9PT0gdm9pZCAwKSB7XG4gICAgICBleHBsYW5hdGlvbiA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKCFyZWFzb24pIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIm5lZWQgdG8gc3BlY2lmeSBhIHJlYXNvbiB0aGUgRGF0ZVRpbWUgaXMgaW52YWxpZFwiKTtcbiAgICB9XG5cbiAgICB2YXIgaW52YWxpZCA9IHJlYXNvbiBpbnN0YW5jZW9mIEludmFsaWQgPyByZWFzb24gOiBuZXcgSW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uKTtcblxuICAgIGlmIChTZXR0aW5ncy50aHJvd09uSW52YWxpZCkge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWREYXRlVGltZUVycm9yKGludmFsaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IERhdGVUaW1lKHtcbiAgICAgICAgaW52YWxpZDogaW52YWxpZFxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBvYmplY3QgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZVRpbWUuIFdvcmtzIGFjcm9zcyBjb250ZXh0IGJvdW5kYXJpZXNcbiAgICogQHBhcmFtIHtvYmplY3R9IG9cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5pc0RhdGVUaW1lID0gZnVuY3Rpb24gaXNEYXRlVGltZShvKSB7XG4gICAgcmV0dXJuIG8gJiYgby5pc0x1eG9uRGF0ZVRpbWUgfHwgZmFsc2U7XG4gIH0gLy8gSU5GT1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIHVuaXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gYSB1bml0IHN1Y2ggYXMgJ21pbnV0ZScgb3IgJ2RheSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNywgNCkuZ2V0KCdtb250aCcpOyAvLz0+IDdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNywgNCkuZ2V0KCdkYXknKTsgLy89PiA0XG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIDtcblxuICB2YXIgX3Byb3RvID0gRGF0ZVRpbWUucHJvdG90eXBlO1xuXG4gIF9wcm90by5nZXQgPSBmdW5jdGlvbiBnZXQodW5pdCkge1xuICAgIHJldHVybiB0aGlzW3VuaXRdO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIERhdGVUaW1lIGlzIHZhbGlkLiBJbnZhbGlkIERhdGVUaW1lcyBvY2N1ciB3aGVuOlxuICAgKiAqIFRoZSBEYXRlVGltZSB3YXMgY3JlYXRlZCBmcm9tIGludmFsaWQgY2FsZW5kYXIgaW5mb3JtYXRpb24sIHN1Y2ggYXMgdGhlIDEzdGggbW9udGggb3IgRmVicnVhcnkgMzBcbiAgICogKiBUaGUgRGF0ZVRpbWUgd2FzIGNyZWF0ZWQgYnkgYW4gb3BlcmF0aW9uIG9uIGFub3RoZXIgaW52YWxpZCBkYXRlXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSByZXNvbHZlZCBJbnRsIG9wdGlvbnMgZm9yIHRoaXMgRGF0ZVRpbWUuXG4gICAqIFRoaXMgaXMgdXNlZnVsIGluIHVuZGVyc3RhbmRpbmcgdGhlIGJlaGF2aW9yIG9mIGZvcm1hdHRpbmcgbWV0aG9kc1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIHRoZSBzYW1lIG9wdGlvbnMgYXMgdG9Mb2NhbGVTdHJpbmdcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgX3Byb3RvLnJlc29sdmVkTG9jYWxlT3B0aW9ucyA9IGZ1bmN0aW9uIHJlc29sdmVkTG9jYWxlT3B0aW9ucyhvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIHZhciBfRm9ybWF0dGVyJGNyZWF0ZSRyZXMgPSBGb3JtYXR0ZXIuY3JlYXRlKHRoaXMubG9jLmNsb25lKG9wdHMpLCBvcHRzKS5yZXNvbHZlZE9wdGlvbnModGhpcyksXG4gICAgICAgIGxvY2FsZSA9IF9Gb3JtYXR0ZXIkY3JlYXRlJHJlcy5sb2NhbGUsXG4gICAgICAgIG51bWJlcmluZ1N5c3RlbSA9IF9Gb3JtYXR0ZXIkY3JlYXRlJHJlcy5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIGNhbGVuZGFyID0gX0Zvcm1hdHRlciRjcmVhdGUkcmVzLmNhbGVuZGFyO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxvY2FsZTogbG9jYWxlLFxuICAgICAgbnVtYmVyaW5nU3lzdGVtOiBudW1iZXJpbmdTeXN0ZW0sXG4gICAgICBvdXRwdXRDYWxlbmRhcjogY2FsZW5kYXJcbiAgICB9O1xuICB9IC8vIFRSQU5TRk9STVxuXG4gIC8qKlxuICAgKiBcIlNldFwiIHRoZSBEYXRlVGltZSdzIHpvbmUgdG8gVVRDLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRGF0ZVRpbWUuXG4gICAqXG4gICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIERhdGVUaW1lI3NldFpvbmV9KCd1dGMnKVxuICAgKiBAcGFyYW0ge251bWJlcn0gW29mZnNldD0wXSAtIG9wdGlvbmFsbHksIGFuIG9mZnNldCBmcm9tIFVUQyBpbiBtaW51dGVzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cz17fV0gLSBvcHRpb25zIHRvIHBhc3MgdG8gYHNldFpvbmUoKWBcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvVVRDID0gZnVuY3Rpb24gdG9VVEMob2Zmc2V0LCBvcHRzKSB7XG4gICAgaWYgKG9mZnNldCA9PT0gdm9pZCAwKSB7XG4gICAgICBvZmZzZXQgPSAwO1xuICAgIH1cblxuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zZXRab25lKEZpeGVkT2Zmc2V0Wm9uZS5pbnN0YW5jZShvZmZzZXQpLCBvcHRzKTtcbiAgfVxuICAvKipcbiAgICogXCJTZXRcIiB0aGUgRGF0ZVRpbWUncyB6b25lIHRvIHRoZSBob3N0J3MgbG9jYWwgem9uZS4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLlxuICAgKlxuICAgKiBFcXVpdmFsZW50IHRvIGBzZXRab25lKCdsb2NhbCcpYFxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9Mb2NhbCA9IGZ1bmN0aW9uIHRvTG9jYWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0Wm9uZShTZXR0aW5ncy5kZWZhdWx0Wm9uZSk7XG4gIH1cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIERhdGVUaW1lJ3Mgem9uZSB0byBzcGVjaWZpZWQgem9uZS4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCB0aGUgc2V0dGVyIGtlZXBzIHRoZSB1bmRlcmx5aW5nIHRpbWUgdGhlIHNhbWUgKGFzIGluLCB0aGUgc2FtZSB0aW1lc3RhbXApLCBidXQgdGhlIG5ldyBpbnN0YW5jZSB3aWxsIHJlcG9ydCBkaWZmZXJlbnQgbG9jYWwgdGltZXMgYW5kIGNvbnNpZGVyIERTVHMgd2hlbiBtYWtpbmcgY29tcHV0YXRpb25zLCBhcyB3aXRoIHtAbGluayBEYXRlVGltZSNwbHVzfS4gWW91IG1heSB3aXNoIHRvIHVzZSB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbH0gYW5kIHtAbGluayBEYXRlVGltZSN0b1VUQ30gd2hpY2ggcHJvdmlkZSBzaW1wbGUgY29udmVuaWVuY2Ugd3JhcHBlcnMgZm9yIGNvbW1vbmx5IHVzZWQgem9uZXMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFt6b25lPSdsb2NhbCddIC0gYSB6b25lIGlkZW50aWZpZXIuIEFzIGEgc3RyaW5nLCB0aGF0IGNhbiBiZSBhbnkgSUFOQSB6b25lIHN1cHBvcnRlZCBieSB0aGUgaG9zdCBlbnZpcm9ubWVudCwgb3IgYSBmaXhlZC1vZmZzZXQgbmFtZSBvZiB0aGUgZm9ybSAnVVRDKzMnLCBvciB0aGUgc3RyaW5ncyAnbG9jYWwnIG9yICd1dGMnLiBZb3UgbWF5IGFsc28gc3VwcGx5IGFuIGluc3RhbmNlIG9mIGEge0BsaW5rIERhdGVUaW1lI1pvbmV9IGNsYXNzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5rZWVwTG9jYWxUaW1lPWZhbHNlXSAtIElmIHRydWUsIGFkanVzdCB0aGUgdW5kZXJseWluZyB0aW1lIHNvIHRoYXQgdGhlIGxvY2FsIHRpbWUgc3RheXMgdGhlIHNhbWUsIGJ1dCBpbiB0aGUgdGFyZ2V0IHpvbmUuIFlvdSBzaG91bGQgcmFyZWx5IG5lZWQgdGhpcy5cbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnNldFpvbmUgPSBmdW5jdGlvbiBzZXRab25lKHpvbmUsIF90ZW1wKSB7XG4gICAgdmFyIF9yZWYyID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgICAgIF9yZWYyJGtlZXBMb2NhbFRpbWUgPSBfcmVmMi5rZWVwTG9jYWxUaW1lLFxuICAgICAgICBrZWVwTG9jYWxUaW1lID0gX3JlZjIka2VlcExvY2FsVGltZSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmMiRrZWVwTG9jYWxUaW1lLFxuICAgICAgICBfcmVmMiRrZWVwQ2FsZW5kYXJUaW0gPSBfcmVmMi5rZWVwQ2FsZW5kYXJUaW1lLFxuICAgICAgICBrZWVwQ2FsZW5kYXJUaW1lID0gX3JlZjIka2VlcENhbGVuZGFyVGltID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYyJGtlZXBDYWxlbmRhclRpbTtcblxuICAgIHpvbmUgPSBub3JtYWxpemVab25lKHpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKTtcblxuICAgIGlmICh6b25lLmVxdWFscyh0aGlzLnpvbmUpKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2UgaWYgKCF6b25lLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKHVuc3VwcG9ydGVkWm9uZSh6b25lKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBuZXdUUyA9IHRoaXMudHM7XG5cbiAgICAgIGlmIChrZWVwTG9jYWxUaW1lIHx8IGtlZXBDYWxlbmRhclRpbWUpIHtcbiAgICAgICAgdmFyIG9mZnNldEd1ZXNzID0gem9uZS5vZmZzZXQodGhpcy50cyk7XG4gICAgICAgIHZhciBhc09iaiA9IHRoaXMudG9PYmplY3QoKTtcblxuICAgICAgICB2YXIgX29ialRvVFMzID0gb2JqVG9UUyhhc09iaiwgb2Zmc2V0R3Vlc3MsIHpvbmUpO1xuXG4gICAgICAgIG5ld1RTID0gX29ialRvVFMzWzBdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2xvbmUodGhpcywge1xuICAgICAgICB0czogbmV3VFMsXG4gICAgICAgIHpvbmU6IHpvbmVcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogXCJTZXRcIiB0aGUgbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG9yIG91dHB1dENhbGVuZGFyLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRGF0ZVRpbWUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIC0gdGhlIHByb3BlcnRpZXMgdG8gc2V0XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS5yZWNvbmZpZ3VyZSh7IGxvY2FsZTogJ2VuLUdCJyB9KVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVjb25maWd1cmUgPSBmdW5jdGlvbiByZWNvbmZpZ3VyZShfdGVtcDIpIHtcbiAgICB2YXIgX3JlZjMgPSBfdGVtcDIgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAyLFxuICAgICAgICBsb2NhbGUgPSBfcmVmMy5sb2NhbGUsXG4gICAgICAgIG51bWJlcmluZ1N5c3RlbSA9IF9yZWYzLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgb3V0cHV0Q2FsZW5kYXIgPSBfcmVmMy5vdXRwdXRDYWxlbmRhcjtcblxuICAgIHZhciBsb2MgPSB0aGlzLmxvYy5jbG9uZSh7XG4gICAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICAgIG51bWJlcmluZ1N5c3RlbTogbnVtYmVyaW5nU3lzdGVtLFxuICAgICAgb3V0cHV0Q2FsZW5kYXI6IG91dHB1dENhbGVuZGFyXG4gICAgfSk7XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIHtcbiAgICAgIGxvYzogbG9jXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIGxvY2FsZS4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLlxuICAgKiBKdXN0IGEgY29udmVuaWVudCBhbGlhcyBmb3IgcmVjb25maWd1cmUoeyBsb2NhbGUgfSlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLnNldExvY2FsZSgnZW4tR0InKVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uc2V0TG9jYWxlID0gZnVuY3Rpb24gc2V0TG9jYWxlKGxvY2FsZSkge1xuICAgIHJldHVybiB0aGlzLnJlY29uZmlndXJlKHtcbiAgICAgIGxvY2FsZTogbG9jYWxlXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIHZhbHVlcyBvZiBzcGVjaWZpZWQgdW5pdHMuIFJldHVybnMgYSBuZXdseS1jb25zdHJ1Y3RlZCBEYXRlVGltZS5cbiAgICogWW91IGNhbiBvbmx5IHNldCB1bml0cyB3aXRoIHRoaXMgbWV0aG9kOyBmb3IgXCJzZXR0aW5nXCIgbWV0YWRhdGEsIHNlZSB7QGxpbmsgRGF0ZVRpbWUjcmVjb25maWd1cmV9IGFuZCB7QGxpbmsgRGF0ZVRpbWUjc2V0Wm9uZX0uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZXMgLSBhIG1hcHBpbmcgb2YgdW5pdHMgdG8gbnVtYmVyc1xuICAgKiBAZXhhbXBsZSBkdC5zZXQoeyB5ZWFyOiAyMDE3IH0pXG4gICAqIEBleGFtcGxlIGR0LnNldCh7IGhvdXI6IDgsIG1pbnV0ZTogMzAgfSlcbiAgICogQGV4YW1wbGUgZHQuc2V0KHsgd2Vla2RheTogNSB9KVxuICAgKiBAZXhhbXBsZSBkdC5zZXQoeyB5ZWFyOiAyMDA1LCBvcmRpbmFsOiAyMzQgfSlcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnNldCA9IGZ1bmN0aW9uIHNldCh2YWx1ZXMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgdmFyIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVPYmplY3QodmFsdWVzLCBub3JtYWxpemVVbml0KSxcbiAgICAgICAgc2V0dGluZ1dlZWtTdHVmZiA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLndlZWtZZWFyKSB8fCAhaXNVbmRlZmluZWQobm9ybWFsaXplZC53ZWVrTnVtYmVyKSB8fCAhaXNVbmRlZmluZWQobm9ybWFsaXplZC53ZWVrZGF5KSxcbiAgICAgICAgY29udGFpbnNPcmRpbmFsID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQub3JkaW5hbCksXG4gICAgICAgIGNvbnRhaW5zR3JlZ29yWWVhciA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLnllYXIpLFxuICAgICAgICBjb250YWluc0dyZWdvck1EID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQubW9udGgpIHx8ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLmRheSksXG4gICAgICAgIGNvbnRhaW5zR3JlZ29yID0gY29udGFpbnNHcmVnb3JZZWFyIHx8IGNvbnRhaW5zR3JlZ29yTUQsXG4gICAgICAgIGRlZmluaXRlV2Vla0RlZiA9IG5vcm1hbGl6ZWQud2Vla1llYXIgfHwgbm9ybWFsaXplZC53ZWVrTnVtYmVyO1xuXG4gICAgaWYgKChjb250YWluc0dyZWdvciB8fCBjb250YWluc09yZGluYWwpICYmIGRlZmluaXRlV2Vla0RlZikge1xuICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKFwiQ2FuJ3QgbWl4IHdlZWtZZWFyL3dlZWtOdW1iZXIgdW5pdHMgd2l0aCB5ZWFyL21vbnRoL2RheSBvciBvcmRpbmFsc1wiKTtcbiAgICB9XG5cbiAgICBpZiAoY29udGFpbnNHcmVnb3JNRCAmJiBjb250YWluc09yZGluYWwpIHtcbiAgICAgIHRocm93IG5ldyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcihcIkNhbid0IG1peCBvcmRpbmFsIGRhdGVzIHdpdGggbW9udGgvZGF5XCIpO1xuICAgIH1cblxuICAgIHZhciBtaXhlZDtcblxuICAgIGlmIChzZXR0aW5nV2Vla1N0dWZmKSB7XG4gICAgICBtaXhlZCA9IHdlZWtUb0dyZWdvcmlhbihfZXh0ZW5kcyh7fSwgZ3JlZ29yaWFuVG9XZWVrKHRoaXMuYyksIG5vcm1hbGl6ZWQpKTtcbiAgICB9IGVsc2UgaWYgKCFpc1VuZGVmaW5lZChub3JtYWxpemVkLm9yZGluYWwpKSB7XG4gICAgICBtaXhlZCA9IG9yZGluYWxUb0dyZWdvcmlhbihfZXh0ZW5kcyh7fSwgZ3JlZ29yaWFuVG9PcmRpbmFsKHRoaXMuYyksIG5vcm1hbGl6ZWQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWl4ZWQgPSBfZXh0ZW5kcyh7fSwgdGhpcy50b09iamVjdCgpLCBub3JtYWxpemVkKTsgLy8gaWYgd2UgZGlkbid0IHNldCB0aGUgZGF5IGJ1dCB3ZSBlbmRlZCB1cCBvbiBhbiBvdmVyZmxvdyBkYXRlLFxuICAgICAgLy8gdXNlIHRoZSBsYXN0IGRheSBvZiB0aGUgcmlnaHQgbW9udGhcblxuICAgICAgaWYgKGlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQuZGF5KSkge1xuICAgICAgICBtaXhlZC5kYXkgPSBNYXRoLm1pbihkYXlzSW5Nb250aChtaXhlZC55ZWFyLCBtaXhlZC5tb250aCksIG1peGVkLmRheSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIF9vYmpUb1RTNCA9IG9ialRvVFMobWl4ZWQsIHRoaXMubywgdGhpcy56b25lKSxcbiAgICAgICAgdHMgPSBfb2JqVG9UUzRbMF0sXG4gICAgICAgIG8gPSBfb2JqVG9UUzRbMV07XG5cbiAgICByZXR1cm4gY2xvbmUodGhpcywge1xuICAgICAgdHM6IHRzLFxuICAgICAgbzogb1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgYSBwZXJpb2Qgb2YgdGltZSB0byB0aGlzIERhdGVUaW1lIGFuZCByZXR1cm4gdGhlIHJlc3VsdGluZyBEYXRlVGltZVxuICAgKlxuICAgKiBBZGRpbmcgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIG9yIG1pbGxpc2Vjb25kcyBpbmNyZWFzZXMgdGhlIHRpbWVzdGFtcCBieSB0aGUgcmlnaHQgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy4gQWRkaW5nIGRheXMsIG1vbnRocywgb3IgeWVhcnMgc2hpZnRzIHRoZSBjYWxlbmRhciwgYWNjb3VudGluZyBmb3IgRFNUcyBhbmQgbGVhcCB5ZWFycyBhbG9uZyB0aGUgd2F5LiBUaHVzLCBgZHQucGx1cyh7IGhvdXJzOiAyNCB9KWAgbWF5IHJlc3VsdCBpbiBhIGRpZmZlcmVudCB0aW1lIHRoYW4gYGR0LnBsdXMoeyBkYXlzOiAxIH0pYCBpZiB0aGVyZSdzIGEgRFNUIHNoaWZ0IGluIGJldHdlZW4uXG4gICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSBUaGUgYW1vdW50IHRvIGFkZC4gRWl0aGVyIGEgTHV4b24gRHVyYXRpb24sIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgdGhlIG9iamVjdCBhcmd1bWVudCB0byBEdXJhdGlvbi5mcm9tT2JqZWN0KClcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cygxMjMpIC8vfj4gaW4gMTIzIG1pbGxpc2Vjb25kc1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgbWludXRlczogMTUgfSkgLy9+PiBpbiAxNSBtaW51dGVzXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBkYXlzOiAxIH0pIC8vfj4gdGhpcyB0aW1lIHRvbW9ycm93XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBkYXlzOiAtMSB9KSAvL34+IHRoaXMgdGltZSB5ZXN0ZXJkYXlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGhvdXJzOiAzLCBtaW51dGVzOiAxMyB9KSAvL34+IGluIDMgaHIsIDEzIG1pblxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMywgbWludXRlczogMTMgfSkpIC8vfj4gaW4gMyBociwgMTMgbWluXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wbHVzID0gZnVuY3Rpb24gcGx1cyhkdXJhdGlvbikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICB2YXIgZHVyID0gRHVyYXRpb24uZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbik7XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIGFkanVzdFRpbWUodGhpcywgZHVyKSk7XG4gIH1cbiAgLyoqXG4gICAqIFN1YnRyYWN0IGEgcGVyaW9kIG9mIHRpbWUgdG8gdGhpcyBEYXRlVGltZSBhbmQgcmV0dXJuIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWVcbiAgICogU2VlIHtAbGluayBEYXRlVGltZSNwbHVzfVxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGFtb3VudCB0byBzdWJ0cmFjdC4gRWl0aGVyIGEgTHV4b24gRHVyYXRpb24sIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgdGhlIG9iamVjdCBhcmd1bWVudCB0byBEdXJhdGlvbi5mcm9tT2JqZWN0KClcbiAgIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5taW51cyA9IGZ1bmN0aW9uIG1pbnVzKGR1cmF0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIHZhciBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKS5uZWdhdGUoKTtcbiAgICByZXR1cm4gY2xvbmUodGhpcywgYWRqdXN0VGltZSh0aGlzLCBkdXIpKTtcbiAgfVxuICAvKipcbiAgICogXCJTZXRcIiB0aGlzIERhdGVUaW1lIHRvIHRoZSBiZWdpbm5pbmcgb2YgYSB1bml0IG9mIHRpbWUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gVGhlIHVuaXQgdG8gZ28gdG8gdGhlIGJlZ2lubmluZyBvZi4gQ2FuIGJlICd5ZWFyJywgJ3F1YXJ0ZXInLCAnbW9udGgnLCAnd2VlaycsICdkYXknLCAnaG91cicsICdtaW51dGUnLCAnc2Vjb25kJywgb3IgJ21pbGxpc2Vjb25kJy5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuc3RhcnRPZignbW9udGgnKS50b0lTT0RhdGUoKTsgLy89PiAnMjAxNC0wMy0wMSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuc3RhcnRPZigneWVhcicpLnRvSVNPRGF0ZSgpOyAvLz0+ICcyMDE0LTAxLTAxJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzKS5zdGFydE9mKCd3ZWVrJykudG9JU09EYXRlKCk7IC8vPT4gJzIwMTQtMDMtMDMnLCB3ZWVrcyBhbHdheXMgc3RhcnQgb24gTW9uZGF5c1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzLCA1LCAzMCkuc3RhcnRPZignZGF5JykudG9JU09UaW1lKCk7IC8vPT4gJzAwOjAwLjAwMC0wNTowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMywgNSwgMzApLnN0YXJ0T2YoJ2hvdXInKS50b0lTT1RpbWUoKTsgLy89PiAnMDU6MDA6MDAuMDAwLTA1OjAwJ1xuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uc3RhcnRPZiA9IGZ1bmN0aW9uIHN0YXJ0T2YodW5pdCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICB2YXIgbyA9IHt9LFxuICAgICAgICBub3JtYWxpemVkVW5pdCA9IER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQodW5pdCk7XG5cbiAgICBzd2l0Y2ggKG5vcm1hbGl6ZWRVbml0KSB7XG4gICAgICBjYXNlIFwieWVhcnNcIjpcbiAgICAgICAgby5tb250aCA9IDE7XG4gICAgICAvLyBmYWxscyB0aHJvdWdoXG5cbiAgICAgIGNhc2UgXCJxdWFydGVyc1wiOlxuICAgICAgY2FzZSBcIm1vbnRoc1wiOlxuICAgICAgICBvLmRheSA9IDE7XG4gICAgICAvLyBmYWxscyB0aHJvdWdoXG5cbiAgICAgIGNhc2UgXCJ3ZWVrc1wiOlxuICAgICAgY2FzZSBcImRheXNcIjpcbiAgICAgICAgby5ob3VyID0gMDtcbiAgICAgIC8vIGZhbGxzIHRocm91Z2hcblxuICAgICAgY2FzZSBcImhvdXJzXCI6XG4gICAgICAgIG8ubWludXRlID0gMDtcbiAgICAgIC8vIGZhbGxzIHRocm91Z2hcblxuICAgICAgY2FzZSBcIm1pbnV0ZXNcIjpcbiAgICAgICAgby5zZWNvbmQgPSAwO1xuICAgICAgLy8gZmFsbHMgdGhyb3VnaFxuXG4gICAgICBjYXNlIFwic2Vjb25kc1wiOlxuICAgICAgICBvLm1pbGxpc2Vjb25kID0gMDtcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBubyBkZWZhdWx0LCBpbnZhbGlkIHVuaXRzIHRocm93IGluIG5vcm1hbGl6ZVVuaXQoKVxuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkVW5pdCA9PT0gXCJ3ZWVrc1wiKSB7XG4gICAgICBvLndlZWtkYXkgPSAxO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkVW5pdCA9PT0gXCJxdWFydGVyc1wiKSB7XG4gICAgICB2YXIgcSA9IE1hdGguY2VpbCh0aGlzLm1vbnRoIC8gMyk7XG4gICAgICBvLm1vbnRoID0gKHEgLSAxKSAqIDMgKyAxO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNldChvKTtcbiAgfVxuICAvKipcbiAgICogXCJTZXRcIiB0aGlzIERhdGVUaW1lIHRvIHRoZSBlbmQgKG1lYW5pbmcgdGhlIGxhc3QgbWlsbGlzZWNvbmQpIG9mIGEgdW5pdCBvZiB0aW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gVGhlIHVuaXQgdG8gZ28gdG8gdGhlIGVuZCBvZi4gQ2FuIGJlICd5ZWFyJywgJ3F1YXJ0ZXInLCAnbW9udGgnLCAnd2VlaycsICdkYXknLCAnaG91cicsICdtaW51dGUnLCAnc2Vjb25kJywgb3IgJ21pbGxpc2Vjb25kJy5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuZW5kT2YoJ21vbnRoJykudG9JU08oKTsgLy89PiAnMjAxNC0wMy0zMVQyMzo1OTo1OS45OTktMDU6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLmVuZE9mKCd5ZWFyJykudG9JU08oKTsgLy89PiAnMjAxNC0xMi0zMVQyMzo1OTo1OS45OTktMDU6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLmVuZE9mKCd3ZWVrJykudG9JU08oKTsgLy8gPT4gJzIwMTQtMDMtMDlUMjM6NTk6NTkuOTk5LTA1OjAwJywgd2Vla3Mgc3RhcnQgb24gTW9uZGF5c1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzLCA1LCAzMCkuZW5kT2YoJ2RheScpLnRvSVNPKCk7IC8vPT4gJzIwMTQtMDMtMDNUMjM6NTk6NTkuOTk5LTA1OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzLCA1LCAzMCkuZW5kT2YoJ2hvdXInKS50b0lTTygpOyAvLz0+ICcyMDE0LTAzLTAzVDA1OjU5OjU5Ljk5OS0wNTowMCdcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmVuZE9mID0gZnVuY3Rpb24gZW5kT2YodW5pdCkge1xuICAgIHZhciBfdGhpcyRwbHVzO1xuXG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMucGx1cygoX3RoaXMkcGx1cyA9IHt9LCBfdGhpcyRwbHVzW3VuaXRdID0gMSwgX3RoaXMkcGx1cykpLnN0YXJ0T2YodW5pdCkubWludXMoMSkgOiB0aGlzO1xuICB9IC8vIE9VVFBVVFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgZm9ybWF0dGVkIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIGZvcm1hdCBzdHJpbmcuXG4gICAqICoqWW91IG1heSBub3Qgd2FudCB0aGlzLioqIFNlZSB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvciBhIG1vcmUgZmxleGlibGUgZm9ybWF0dGluZyB0b29sLiBGb3IgYSB0YWJsZSBvZiB0b2tlbnMgYW5kIHRoZWlyIGludGVycHJldGF0aW9ucywgc2VlIFtoZXJlXShodHRwczovL21vbWVudC5naXRodWIuaW8vbHV4b24vIy9mb3JtYXR0aW5nP2lkPXRhYmxlLW9mLXRva2VucykuXG4gICAqIERlZmF1bHRzIHRvIGVuLVVTIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWQsIHJlZ2FyZGxlc3Mgb2YgdGhlIHN5c3RlbSdzIGxvY2FsZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGZtdCAtIHRoZSBmb3JtYXQgc3RyaW5nXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0cyB0byBvdmVycmlkZSB0aGUgY29uZmlndXJhdGlvbiBvcHRpb25zIG9uIHRoaXMgRGF0ZVRpbWVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoJ3l5eXkgTExMIGRkJykgLy89PiAnMjAxNyBBcHIgMjInXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnNldExvY2FsZSgnZnInKS50b0Zvcm1hdCgneXl5eSBMTEwgZGQnKSAvLz0+ICcyMDE3IGF2ci4gMjInXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvRm9ybWF0KCd5eXl5IExMTCBkZCcsIHsgbG9jYWxlOiBcImZyXCIgfSkgLy89PiAnMjAxNyBhdnIuIDIyJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0Zvcm1hdChcIkhIICdob3VycyBhbmQnIG1tICdtaW51dGVzJ1wiKSAvLz0+ICcyMCBob3VycyBhbmQgNTUgbWludXRlcydcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b0Zvcm1hdCA9IGZ1bmN0aW9uIHRvRm9ybWF0KGZtdCwgb3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gRm9ybWF0dGVyLmNyZWF0ZSh0aGlzLmxvYy5yZWRlZmF1bHRUb0VOKG9wdHMpKS5mb3JtYXREYXRlVGltZUZyb21TdHJpbmcodGhpcywgZm10KSA6IElOVkFMSUQ7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsb2NhbGl6ZWQgc3RyaW5nIHJlcHJlc2VudGluZyB0aGlzIGRhdGUuIEFjY2VwdHMgdGhlIHNhbWUgb3B0aW9ucyBhcyB0aGUgSW50bC5EYXRlVGltZUZvcm1hdCBjb25zdHJ1Y3RvciBhbmQgYW55IHByZXNldHMgZGVmaW5lZCBieSBMdXhvbiwgc3VjaCBhcyBgRGF0ZVRpbWUuREFURV9GVUxMYCBvciBgRGF0ZVRpbWUuVElNRV9TSU1QTEVgLlxuICAgKiBUaGUgZXhhY3QgYmVoYXZpb3Igb2YgdGhpcyBtZXRob2QgaXMgYnJvd3Nlci1zcGVjaWZpYywgYnV0IGluIGdlbmVyYWwgaXQgd2lsbCByZXR1cm4gYW4gYXBwcm9wcmlhdGUgcmVwcmVzZW50YXRpb25cbiAgICogb2YgdGhlIERhdGVUaW1lIGluIHRoZSBhc3NpZ25lZCBsb2NhbGUuXG4gICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGVUaW1lRm9ybWF0XG4gICAqIEBwYXJhbSBmb3JtYXRPcHRzIHtPYmplY3R9IC0gSW50bC5EYXRlVGltZUZvcm1hdCBjb25zdHJ1Y3RvciBvcHRpb25zIGFuZCBjb25maWd1cmF0aW9uIG9wdGlvbnNcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRzIHRvIG92ZXJyaWRlIHRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgb24gdGhpcyBEYXRlVGltZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZygpOyAvLz0+IDQvMjAvMjAxN1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5zZXRMb2NhbGUoJ2VuLWdiJykudG9Mb2NhbGVTdHJpbmcoKTsgLy89PiAnMjAvMDQvMjAxNydcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVTdHJpbmcoeyBsb2NhbGU6ICdlbi1nYicgfSk7IC8vPT4gJzIwLzA0LzIwMTcnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKERhdGVUaW1lLkRBVEVfRlVMTCk7IC8vPT4gJ0FwcmlsIDIwLCAyMDE3J1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyhEYXRlVGltZS5USU1FX1NJTVBMRSk7IC8vPT4gJzExOjMyIEFNJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyhEYXRlVGltZS5EQVRFVElNRV9TSE9SVCk7IC8vPT4gJzQvMjAvMjAxNywgMTE6MzIgQU0nXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKHsgd2Vla2RheTogJ2xvbmcnLCBtb250aDogJ2xvbmcnLCBkYXk6ICcyLWRpZ2l0JyB9KTsgLy89PiAnVGh1cnNkYXksIEFwcmlsIDIwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyh7IHdlZWtkYXk6ICdzaG9ydCcsIG1vbnRoOiAnc2hvcnQnLCBkYXk6ICcyLWRpZ2l0JywgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JyB9KTsgLy89PiAnVGh1LCBBcHIgMjAsIDExOjI3IEFNJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyh7IGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcsIGhvdXJDeWNsZTogJ2gyMycgfSk7IC8vPT4gJzExOjMyJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvTG9jYWxlU3RyaW5nID0gZnVuY3Rpb24gdG9Mb2NhbGVTdHJpbmcoZm9ybWF0T3B0cywgb3B0cykge1xuICAgIGlmIChmb3JtYXRPcHRzID09PSB2b2lkIDApIHtcbiAgICAgIGZvcm1hdE9wdHMgPSBEQVRFX1NIT1JUO1xuICAgIH1cblxuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gRm9ybWF0dGVyLmNyZWF0ZSh0aGlzLmxvYy5jbG9uZShvcHRzKSwgZm9ybWF0T3B0cykuZm9ybWF0RGF0ZVRpbWUodGhpcykgOiBJTlZBTElEO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGZvcm1hdCBcInBhcnRzXCIsIG1lYW5pbmcgaW5kaXZpZHVhbCB0b2tlbnMgYWxvbmcgd2l0aCBtZXRhZGF0YS4gVGhpcyBpcyBhbGxvd3MgY2FsbGVycyB0byBwb3N0LXByb2Nlc3MgaW5kaXZpZHVhbCBzZWN0aW9ucyBvZiB0aGUgZm9ybWF0dGVkIG91dHB1dC5cbiAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZVRpbWVGb3JtYXQvZm9ybWF0VG9QYXJ0c1xuICAgKiBAcGFyYW0gb3B0cyB7T2JqZWN0fSAtIEludGwuRGF0ZVRpbWVGb3JtYXQgY29uc3RydWN0b3Igb3B0aW9ucywgc2FtZSBhcyBgdG9Mb2NhbGVTdHJpbmdgLlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVBhcnRzKCk7IC8vPT4gW1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiAgIHsgdHlwZTogJ2RheScsIHZhbHVlOiAnMjUnIH0sXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+ICAgeyB0eXBlOiAnbGl0ZXJhbCcsIHZhbHVlOiAnLycgfSxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPT4gICB7IHR5cGU6ICdtb250aCcsIHZhbHVlOiAnMDUnIH0sXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+ICAgeyB0eXBlOiAnbGl0ZXJhbCcsIHZhbHVlOiAnLycgfSxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPT4gICB7IHR5cGU6ICd5ZWFyJywgdmFsdWU6ICcxOTgyJyB9XG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+IF1cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9Mb2NhbGVQYXJ0cyA9IGZ1bmN0aW9uIHRvTG9jYWxlUGFydHMob3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gRm9ybWF0dGVyLmNyZWF0ZSh0aGlzLmxvYy5jbG9uZShvcHRzKSwgb3B0cykuZm9ybWF0RGF0ZVRpbWVQYXJ0cyh0aGlzKSA6IFtdO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc01pbGxpc2Vjb25kcz1mYWxzZV0gLSBleGNsdWRlIG1pbGxpc2Vjb25kcyBmcm9tIHRoZSBmb3JtYXQgaWYgdGhleSdyZSAwXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc3VwcHJlc3NTZWNvbmRzPWZhbHNlXSAtIGV4Y2x1ZGUgc2Vjb25kcyBmcm9tIHRoZSBmb3JtYXQgaWYgdGhleSdyZSAwXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldD10cnVlXSAtIGluY2x1ZGUgdGhlIG9mZnNldCwgc3VjaCBhcyAnWicgb3IgJy0wNDowMCdcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5leHRlbmRlZFpvbmU9dHJ1ZV0gLSBhZGQgdGhlIHRpbWUgem9uZSBmb3JtYXQgZXh0ZW5zaW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5mb3JtYXQ9J2V4dGVuZGVkJ10gLSBjaG9vc2UgYmV0d2VlbiB0aGUgYmFzaWMgYW5kIGV4dGVuZGVkIGZvcm1hdFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMTk4MywgNSwgMjUpLnRvSVNPKCkgLy89PiAnMTk4Mi0wNS0yNVQwMDowMDowMC4wMDBaJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0lTTygpIC8vPT4gJzIwMTctMDQtMjJUMjA6NDc6MDUuMzM1LTA0OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0lTTyh7IGluY2x1ZGVPZmZzZXQ6IGZhbHNlIH0pIC8vPT4gJzIwMTctMDQtMjJUMjA6NDc6MDUuMzM1J1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0lTTyh7IGZvcm1hdDogJ2Jhc2ljJyB9KSAvLz0+ICcyMDE3MDQyMlQyMDQ3MDUuMzM1LTA0MDAnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9JU08gPSBmdW5jdGlvbiB0b0lTTyhfdGVtcDMpIHtcbiAgICB2YXIgX3JlZjQgPSBfdGVtcDMgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAzLFxuICAgICAgICBfcmVmNCRmb3JtYXQgPSBfcmVmNC5mb3JtYXQsXG4gICAgICAgIGZvcm1hdCA9IF9yZWY0JGZvcm1hdCA9PT0gdm9pZCAwID8gXCJleHRlbmRlZFwiIDogX3JlZjQkZm9ybWF0LFxuICAgICAgICBfcmVmNCRzdXBwcmVzc1NlY29uZHMgPSBfcmVmNC5zdXBwcmVzc1NlY29uZHMsXG4gICAgICAgIHN1cHByZXNzU2Vjb25kcyA9IF9yZWY0JHN1cHByZXNzU2Vjb25kcyA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmNCRzdXBwcmVzc1NlY29uZHMsXG4gICAgICAgIF9yZWY0JHN1cHByZXNzTWlsbGlzZSA9IF9yZWY0LnN1cHByZXNzTWlsbGlzZWNvbmRzLFxuICAgICAgICBzdXBwcmVzc01pbGxpc2Vjb25kcyA9IF9yZWY0JHN1cHByZXNzTWlsbGlzZSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmNCRzdXBwcmVzc01pbGxpc2UsXG4gICAgICAgIF9yZWY0JGluY2x1ZGVPZmZzZXQgPSBfcmVmNC5pbmNsdWRlT2Zmc2V0LFxuICAgICAgICBpbmNsdWRlT2Zmc2V0ID0gX3JlZjQkaW5jbHVkZU9mZnNldCA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWY0JGluY2x1ZGVPZmZzZXQsXG4gICAgICAgIF9yZWY0JGV4dGVuZGVkWm9uZSA9IF9yZWY0LmV4dGVuZGVkWm9uZSxcbiAgICAgICAgZXh0ZW5kZWRab25lID0gX3JlZjQkZXh0ZW5kZWRab25lID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWY0JGV4dGVuZGVkWm9uZTtcblxuICAgIGlmICghdGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgZXh0ID0gZm9ybWF0ID09PSBcImV4dGVuZGVkXCI7XG5cbiAgICB2YXIgYyA9IF90b0lTT0RhdGUodGhpcywgZXh0KTtcblxuICAgIGMgKz0gXCJUXCI7XG4gICAgYyArPSBfdG9JU09UaW1lKHRoaXMsIGV4dCwgc3VwcHJlc3NTZWNvbmRzLCBzdXBwcmVzc01pbGxpc2Vjb25kcywgaW5jbHVkZU9mZnNldCwgZXh0ZW5kZWRab25lKTtcbiAgICByZXR1cm4gYztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUncyBkYXRlIGNvbXBvbmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmZvcm1hdD0nZXh0ZW5kZWQnXSAtIGNob29zZSBiZXR3ZWVuIHRoZSBiYXNpYyBhbmQgZXh0ZW5kZWQgZm9ybWF0XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygxOTgyLCA1LCAyNSkudG9JU09EYXRlKCkgLy89PiAnMTk4Mi0wNS0yNSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDE5ODIsIDUsIDI1KS50b0lTT0RhdGUoeyBmb3JtYXQ6ICdiYXNpYycgfSkgLy89PiAnMTk4MjA1MjUnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9JU09EYXRlID0gZnVuY3Rpb24gdG9JU09EYXRlKF90ZW1wNCkge1xuICAgIHZhciBfcmVmNSA9IF90ZW1wNCA9PT0gdm9pZCAwID8ge30gOiBfdGVtcDQsXG4gICAgICAgIF9yZWY1JGZvcm1hdCA9IF9yZWY1LmZvcm1hdCxcbiAgICAgICAgZm9ybWF0ID0gX3JlZjUkZm9ybWF0ID09PSB2b2lkIDAgPyBcImV4dGVuZGVkXCIgOiBfcmVmNSRmb3JtYXQ7XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIF90b0lTT0RhdGUodGhpcywgZm9ybWF0ID09PSBcImV4dGVuZGVkXCIpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSdzIHdlZWsgZGF0ZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMTk4MiwgNSwgMjUpLnRvSVNPV2Vla0RhdGUoKSAvLz0+ICcxOTgyLVcyMS0yJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvSVNPV2Vla0RhdGUgPSBmdW5jdGlvbiB0b0lTT1dlZWtEYXRlKCkge1xuICAgIHJldHVybiB0b1RlY2hGb3JtYXQodGhpcywgXCJra2trLSdXJ1dXLWNcIik7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lJ3MgdGltZSBjb21wb25lbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc3VwcHJlc3NNaWxsaXNlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBtaWxsaXNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnN1cHByZXNzU2Vjb25kcz1mYWxzZV0gLSBleGNsdWRlIHNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVPZmZzZXQ9dHJ1ZV0gLSBpbmNsdWRlIHRoZSBvZmZzZXQsIHN1Y2ggYXMgJ1onIG9yICctMDQ6MDAnXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuZXh0ZW5kZWRab25lPXRydWVdIC0gYWRkIHRoZSB0aW1lIHpvbmUgZm9ybWF0IGV4dGVuc2lvblxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVQcmVmaXg9ZmFsc2VdIC0gaW5jbHVkZSB0aGUgYFRgIHByZWZpeFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuZm9ybWF0PSdleHRlbmRlZCddIC0gY2hvb3NlIGJldHdlZW4gdGhlIGJhc2ljIGFuZCBleHRlbmRlZCBmb3JtYXRcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkuc2V0KHsgaG91cjogNywgbWludXRlOiAzNCB9KS50b0lTT1RpbWUoKSAvLz0+ICcwNzozNDoxOS4zNjFaJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS5zZXQoeyBob3VyOiA3LCBtaW51dGU6IDM0LCBzZWNvbmRzOiAwLCBtaWxsaXNlY29uZHM6IDAgfSkudG9JU09UaW1lKHsgc3VwcHJlc3NTZWNvbmRzOiB0cnVlIH0pIC8vPT4gJzA3OjM0WidcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkuc2V0KHsgaG91cjogNywgbWludXRlOiAzNCB9KS50b0lTT1RpbWUoeyBmb3JtYXQ6ICdiYXNpYycgfSkgLy89PiAnMDczNDE5LjM2MVonXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpLnNldCh7IGhvdXI6IDcsIG1pbnV0ZTogMzQgfSkudG9JU09UaW1lKHsgaW5jbHVkZVByZWZpeDogdHJ1ZSB9KSAvLz0+ICdUMDc6MzQ6MTkuMzYxWidcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b0lTT1RpbWUgPSBmdW5jdGlvbiB0b0lTT1RpbWUoX3RlbXA1KSB7XG4gICAgdmFyIF9yZWY2ID0gX3RlbXA1ID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wNSxcbiAgICAgICAgX3JlZjYkc3VwcHJlc3NNaWxsaXNlID0gX3JlZjYuc3VwcHJlc3NNaWxsaXNlY29uZHMsXG4gICAgICAgIHN1cHByZXNzTWlsbGlzZWNvbmRzID0gX3JlZjYkc3VwcHJlc3NNaWxsaXNlID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWY2JHN1cHByZXNzTWlsbGlzZSxcbiAgICAgICAgX3JlZjYkc3VwcHJlc3NTZWNvbmRzID0gX3JlZjYuc3VwcHJlc3NTZWNvbmRzLFxuICAgICAgICBzdXBwcmVzc1NlY29uZHMgPSBfcmVmNiRzdXBwcmVzc1NlY29uZHMgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjYkc3VwcHJlc3NTZWNvbmRzLFxuICAgICAgICBfcmVmNiRpbmNsdWRlT2Zmc2V0ID0gX3JlZjYuaW5jbHVkZU9mZnNldCxcbiAgICAgICAgaW5jbHVkZU9mZnNldCA9IF9yZWY2JGluY2x1ZGVPZmZzZXQgPT09IHZvaWQgMCA/IHRydWUgOiBfcmVmNiRpbmNsdWRlT2Zmc2V0LFxuICAgICAgICBfcmVmNiRpbmNsdWRlUHJlZml4ID0gX3JlZjYuaW5jbHVkZVByZWZpeCxcbiAgICAgICAgaW5jbHVkZVByZWZpeCA9IF9yZWY2JGluY2x1ZGVQcmVmaXggPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjYkaW5jbHVkZVByZWZpeCxcbiAgICAgICAgX3JlZjYkZXh0ZW5kZWRab25lID0gX3JlZjYuZXh0ZW5kZWRab25lLFxuICAgICAgICBleHRlbmRlZFpvbmUgPSBfcmVmNiRleHRlbmRlZFpvbmUgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjYkZXh0ZW5kZWRab25lLFxuICAgICAgICBfcmVmNiRmb3JtYXQgPSBfcmVmNi5mb3JtYXQsXG4gICAgICAgIGZvcm1hdCA9IF9yZWY2JGZvcm1hdCA9PT0gdm9pZCAwID8gXCJleHRlbmRlZFwiIDogX3JlZjYkZm9ybWF0O1xuXG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBjID0gaW5jbHVkZVByZWZpeCA/IFwiVFwiIDogXCJcIjtcbiAgICByZXR1cm4gYyArIF90b0lTT1RpbWUodGhpcywgZm9ybWF0ID09PSBcImV4dGVuZGVkXCIsIHN1cHByZXNzU2Vjb25kcywgc3VwcHJlc3NNaWxsaXNlY29uZHMsIGluY2x1ZGVPZmZzZXQsIGV4dGVuZGVkWm9uZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gUkZDIDI4MjItY29tcGF0aWJsZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNCwgNywgMTMpLnRvUkZDMjgyMigpIC8vPT4gJ1N1biwgMTMgSnVsIDIwMTQgMDA6MDA6MDAgKzAwMDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDcsIDEzKS50b1JGQzI4MjIoKSAvLz0+ICdTdW4sIDEzIEp1bCAyMDE0IDAwOjAwOjAwIC0wNDAwJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvUkZDMjgyMiA9IGZ1bmN0aW9uIHRvUkZDMjgyMigpIHtcbiAgICByZXR1cm4gdG9UZWNoRm9ybWF0KHRoaXMsIFwiRUVFLCBkZCBMTEwgeXl5eSBISDptbTpzcyBaWlpcIiwgZmFsc2UpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBIVFRQIGhlYWRlcnMuIFRoZSBvdXRwdXQgaXMgYWx3YXlzIGV4cHJlc3NlZCBpbiBHTVQuXG4gICAqIFNwZWNpZmljYWxseSwgdGhlIHN0cmluZyBjb25mb3JtcyB0byBSRkMgMTEyMy5cbiAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvUHJvdG9jb2xzL3JmYzI2MTYvcmZjMjYxNi1zZWMzLmh0bWwjc2VjMy4zLjFcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTQsIDcsIDEzKS50b0hUVFAoKSAvLz0+ICdTdW4sIDEzIEp1bCAyMDE0IDAwOjAwOjAwIEdNVCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTQsIDcsIDEzLCAxOSkudG9IVFRQKCkgLy89PiAnU3VuLCAxMyBKdWwgMjAxNCAxOTowMDowMCBHTVQnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9IVFRQID0gZnVuY3Rpb24gdG9IVFRQKCkge1xuICAgIHJldHVybiB0b1RlY2hGb3JtYXQodGhpcy50b1VUQygpLCBcIkVFRSwgZGQgTExMIHl5eXkgSEg6bW06c3MgJ0dNVCdcIik7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIFNRTCBEYXRlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE0LCA3LCAxMykudG9TUUxEYXRlKCkgLy89PiAnMjAxNC0wNy0xMydcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b1NRTERhdGUgPSBmdW5jdGlvbiB0b1NRTERhdGUoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBfdG9JU09EYXRlKHRoaXMsIHRydWUpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBTUUwgVGltZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlWm9uZT1mYWxzZV0gLSBpbmNsdWRlIHRoZSB6b25lLCBzdWNoIGFzICdBbWVyaWNhL05ld19Zb3JrJy4gT3ZlcnJpZGVzIGluY2x1ZGVPZmZzZXQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldD10cnVlXSAtIGluY2x1ZGUgdGhlIG9mZnNldCwgc3VjaCBhcyAnWicgb3IgJy0wNDowMCdcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlT2Zmc2V0U3BhY2U9dHJ1ZV0gLSBpbmNsdWRlIHRoZSBzcGFjZSBiZXR3ZWVuIHRoZSB0aW1lIGFuZCB0aGUgb2Zmc2V0LCBzdWNoIGFzICcwNToxNToxNi4zNDUgLTA0OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS50b1NRTCgpIC8vPT4gJzA1OjE1OjE2LjM0NSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9TUUwoKSAvLz0+ICcwNToxNToxNi4zNDUgLTA0OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b1NRTCh7IGluY2x1ZGVPZmZzZXQ6IGZhbHNlIH0pIC8vPT4gJzA1OjE1OjE2LjM0NSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9TUUwoeyBpbmNsdWRlWm9uZTogZmFsc2UgfSkgLy89PiAnMDU6MTU6MTYuMzQ1IEFtZXJpY2EvTmV3X1lvcmsnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9TUUxUaW1lID0gZnVuY3Rpb24gdG9TUUxUaW1lKF90ZW1wNikge1xuICAgIHZhciBfcmVmNyA9IF90ZW1wNiA9PT0gdm9pZCAwID8ge30gOiBfdGVtcDYsXG4gICAgICAgIF9yZWY3JGluY2x1ZGVPZmZzZXQgPSBfcmVmNy5pbmNsdWRlT2Zmc2V0LFxuICAgICAgICBpbmNsdWRlT2Zmc2V0ID0gX3JlZjckaW5jbHVkZU9mZnNldCA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWY3JGluY2x1ZGVPZmZzZXQsXG4gICAgICAgIF9yZWY3JGluY2x1ZGVab25lID0gX3JlZjcuaW5jbHVkZVpvbmUsXG4gICAgICAgIGluY2x1ZGVab25lID0gX3JlZjckaW5jbHVkZVpvbmUgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjckaW5jbHVkZVpvbmUsXG4gICAgICAgIF9yZWY3JGluY2x1ZGVPZmZzZXRTcCA9IF9yZWY3LmluY2x1ZGVPZmZzZXRTcGFjZSxcbiAgICAgICAgaW5jbHVkZU9mZnNldFNwYWNlID0gX3JlZjckaW5jbHVkZU9mZnNldFNwID09PSB2b2lkIDAgPyB0cnVlIDogX3JlZjckaW5jbHVkZU9mZnNldFNwO1xuXG4gICAgdmFyIGZtdCA9IFwiSEg6bW06c3MuU1NTXCI7XG5cbiAgICBpZiAoaW5jbHVkZVpvbmUgfHwgaW5jbHVkZU9mZnNldCkge1xuICAgICAgaWYgKGluY2x1ZGVPZmZzZXRTcGFjZSkge1xuICAgICAgICBmbXQgKz0gXCIgXCI7XG4gICAgICB9XG5cbiAgICAgIGlmIChpbmNsdWRlWm9uZSkge1xuICAgICAgICBmbXQgKz0gXCJ6XCI7XG4gICAgICB9IGVsc2UgaWYgKGluY2x1ZGVPZmZzZXQpIHtcbiAgICAgICAgZm10ICs9IFwiWlpcIjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdG9UZWNoRm9ybWF0KHRoaXMsIGZtdCwgdHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIFNRTCBEYXRlVGltZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlWm9uZT1mYWxzZV0gLSBpbmNsdWRlIHRoZSB6b25lLCBzdWNoIGFzICdBbWVyaWNhL05ld19Zb3JrJy4gT3ZlcnJpZGVzIGluY2x1ZGVPZmZzZXQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldD10cnVlXSAtIGluY2x1ZGUgdGhlIG9mZnNldCwgc3VjaCBhcyAnWicgb3IgJy0wNDowMCdcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlT2Zmc2V0U3BhY2U9dHJ1ZV0gLSBpbmNsdWRlIHRoZSBzcGFjZSBiZXR3ZWVuIHRoZSB0aW1lIGFuZCB0aGUgb2Zmc2V0LCBzdWNoIGFzICcwNToxNToxNi4zNDUgLTA0OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNCwgNywgMTMpLnRvU1FMKCkgLy89PiAnMjAxNC0wNy0xMyAwMDowMDowMC4wMDAgWidcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgNywgMTMpLnRvU1FMKCkgLy89PiAnMjAxNC0wNy0xMyAwMDowMDowMC4wMDAgLTA0OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCA3LCAxMykudG9TUUwoeyBpbmNsdWRlT2Zmc2V0OiBmYWxzZSB9KSAvLz0+ICcyMDE0LTA3LTEzIDAwOjAwOjAwLjAwMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgNywgMTMpLnRvU1FMKHsgaW5jbHVkZVpvbmU6IHRydWUgfSkgLy89PiAnMjAxNC0wNy0xMyAwMDowMDowMC4wMDAgQW1lcmljYS9OZXdfWW9yaydcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b1NRTCA9IGZ1bmN0aW9uIHRvU1FMKG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnRvU1FMRGF0ZSgpICsgXCIgXCIgKyB0aGlzLnRvU1FMVGltZShvcHRzKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGFwcHJvcHJpYXRlIGZvciBkZWJ1Z2dpbmdcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnRvSVNPKCkgOiBJTlZBTElEO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBlcG9jaCBtaWxsaXNlY29uZHMgb2YgdGhpcyBEYXRlVGltZS4gQWxpYXMgb2Yge0BsaW5rIERhdGVUaW1lI3RvTWlsbGlzfVxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnZhbHVlT2YgPSBmdW5jdGlvbiB2YWx1ZU9mKCkge1xuICAgIHJldHVybiB0aGlzLnRvTWlsbGlzKCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGVwb2NoIG1pbGxpc2Vjb25kcyBvZiB0aGlzIERhdGVUaW1lLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvTWlsbGlzID0gZnVuY3Rpb24gdG9NaWxsaXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudHMgOiBOYU47XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGVwb2NoIHNlY29uZHMgb2YgdGhpcyBEYXRlVGltZS5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b1NlY29uZHMgPSBmdW5jdGlvbiB0b1NlY29uZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudHMgLyAxMDAwIDogTmFOO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBlcG9jaCBzZWNvbmRzIChhcyBhIHdob2xlIG51bWJlcikgb2YgdGhpcyBEYXRlVGltZS5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b1VuaXhJbnRlZ2VyID0gZnVuY3Rpb24gdG9Vbml4SW50ZWdlcigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gTWF0aC5mbG9vcih0aGlzLnRzIC8gMTAwMCkgOiBOYU47XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIEpTT04uXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgIHJldHVybiB0aGlzLnRvSVNPKCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBCU09OIHNlcmlhbGl6YWJsZSBlcXVpdmFsZW50IHRvIHRoaXMgRGF0ZVRpbWUuXG4gICAqIEByZXR1cm4ge0RhdGV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvQlNPTiA9IGZ1bmN0aW9uIHRvQlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy50b0pTRGF0ZSgpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgSmF2YVNjcmlwdCBvYmplY3Qgd2l0aCB0aGlzIERhdGVUaW1lJ3MgeWVhciwgbW9udGgsIGRheSwgYW5kIHNvIG9uLlxuICAgKiBAcGFyYW0gb3B0cyAtIG9wdGlvbnMgZm9yIGdlbmVyYXRpbmcgdGhlIG9iamVjdFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVDb25maWc9ZmFsc2VdIC0gaW5jbHVkZSBjb25maWd1cmF0aW9uIGF0dHJpYnV0ZXMgaW4gdGhlIG91dHB1dFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b09iamVjdCgpIC8vPT4geyB5ZWFyOiAyMDE3LCBtb250aDogNCwgZGF5OiAyMiwgaG91cjogMjAsIG1pbnV0ZTogNDksIHNlY29uZDogNDIsIG1pbGxpc2Vjb25kOiAyNjggfVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3Qob3B0cykge1xuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHt9O1xuXG4gICAgdmFyIGJhc2UgPSBfZXh0ZW5kcyh7fSwgdGhpcy5jKTtcblxuICAgIGlmIChvcHRzLmluY2x1ZGVDb25maWcpIHtcbiAgICAgIGJhc2Uub3V0cHV0Q2FsZW5kYXIgPSB0aGlzLm91dHB1dENhbGVuZGFyO1xuICAgICAgYmFzZS5udW1iZXJpbmdTeXN0ZW0gPSB0aGlzLmxvYy5udW1iZXJpbmdTeXN0ZW07XG4gICAgICBiYXNlLmxvY2FsZSA9IHRoaXMubG9jLmxvY2FsZTtcbiAgICB9XG5cbiAgICByZXR1cm4gYmFzZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIEphdmFTY3JpcHQgRGF0ZSBlcXVpdmFsZW50IHRvIHRoaXMgRGF0ZVRpbWUuXG4gICAqIEByZXR1cm4ge0RhdGV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvSlNEYXRlID0gZnVuY3Rpb24gdG9KU0RhdGUoKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMuaXNWYWxpZCA/IHRoaXMudHMgOiBOYU4pO1xuICB9IC8vIENPTVBBUkVcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdHdvIERhdGVUaW1lcyBhcyBhIER1cmF0aW9uLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBvdGhlckRhdGVUaW1lIC0gdGhlIERhdGVUaW1lIHRvIGNvbXBhcmUgdGhpcyBvbmUgdG9cbiAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IFt1bml0PVsnbWlsbGlzZWNvbmRzJ11dIC0gdGhlIHVuaXQgb3IgYXJyYXkgb2YgdW5pdHMgKHN1Y2ggYXMgJ2hvdXJzJyBvciAnZGF5cycpIHRvIGluY2x1ZGUgaW4gdGhlIGR1cmF0aW9uLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdGhhdCBhZmZlY3QgdGhlIGNyZWF0aW9uIG9mIHRoZSBEdXJhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2VcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIGkxID0gRGF0ZVRpbWUuZnJvbUlTTygnMTk4Mi0wNS0yNVQwOTo0NScpLFxuICAgKiAgICAgaTIgPSBEYXRlVGltZS5mcm9tSVNPKCcxOTgzLTEwLTE0VDEwOjMwJyk7XG4gICAqIGkyLmRpZmYoaTEpLnRvT2JqZWN0KCkgLy89PiB7IG1pbGxpc2Vjb25kczogNDM4MDc1MDAwMDAgfVxuICAgKiBpMi5kaWZmKGkxLCAnaG91cnMnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTIxNjguNzUgfVxuICAgKiBpMi5kaWZmKGkxLCBbJ21vbnRocycsICdkYXlzJ10pLnRvT2JqZWN0KCkgLy89PiB7IG1vbnRoczogMTYsIGRheXM6IDE5LjAzMTI1IH1cbiAgICogaTIuZGlmZihpMSwgWydtb250aHMnLCAnZGF5cycsICdob3VycyddKS50b09iamVjdCgpIC8vPT4geyBtb250aHM6IDE2LCBkYXlzOiAxOSwgaG91cnM6IDAuNzUgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGlmZiA9IGZ1bmN0aW9uIGRpZmYob3RoZXJEYXRlVGltZSwgdW5pdCwgb3B0cykge1xuICAgIGlmICh1bml0ID09PSB2b2lkIDApIHtcbiAgICAgIHVuaXQgPSBcIm1pbGxpc2Vjb25kc1wiO1xuICAgIH1cblxuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCB8fCAhb3RoZXJEYXRlVGltZS5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uaW52YWxpZChcImNyZWF0ZWQgYnkgZGlmZmluZyBhbiBpbnZhbGlkIERhdGVUaW1lXCIpO1xuICAgIH1cblxuICAgIHZhciBkdXJPcHRzID0gX2V4dGVuZHMoe1xuICAgICAgbG9jYWxlOiB0aGlzLmxvY2FsZSxcbiAgICAgIG51bWJlcmluZ1N5c3RlbTogdGhpcy5udW1iZXJpbmdTeXN0ZW1cbiAgICB9LCBvcHRzKTtcblxuICAgIHZhciB1bml0cyA9IG1heWJlQXJyYXkodW5pdCkubWFwKER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQpLFxuICAgICAgICBvdGhlcklzTGF0ZXIgPSBvdGhlckRhdGVUaW1lLnZhbHVlT2YoKSA+IHRoaXMudmFsdWVPZigpLFxuICAgICAgICBlYXJsaWVyID0gb3RoZXJJc0xhdGVyID8gdGhpcyA6IG90aGVyRGF0ZVRpbWUsXG4gICAgICAgIGxhdGVyID0gb3RoZXJJc0xhdGVyID8gb3RoZXJEYXRlVGltZSA6IHRoaXMsXG4gICAgICAgIGRpZmZlZCA9IF9kaWZmKGVhcmxpZXIsIGxhdGVyLCB1bml0cywgZHVyT3B0cyk7XG5cbiAgICByZXR1cm4gb3RoZXJJc0xhdGVyID8gZGlmZmVkLm5lZ2F0ZSgpIDogZGlmZmVkO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGlzIERhdGVUaW1lIGFuZCByaWdodCBub3cuXG4gICAqIFNlZSB7QGxpbmsgRGF0ZVRpbWUjZGlmZn1cbiAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IFt1bml0PVsnbWlsbGlzZWNvbmRzJ11dIC0gdGhlIHVuaXQgb3IgdW5pdHMgdW5pdHMgKHN1Y2ggYXMgJ2hvdXJzJyBvciAnZGF5cycpIHRvIGluY2x1ZGUgaW4gdGhlIGR1cmF0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgY3JlYXRpb24gb2YgdGhlIER1cmF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGlmZk5vdyA9IGZ1bmN0aW9uIGRpZmZOb3codW5pdCwgb3B0cykge1xuICAgIGlmICh1bml0ID09PSB2b2lkIDApIHtcbiAgICAgIHVuaXQgPSBcIm1pbGxpc2Vjb25kc1wiO1xuICAgIH1cblxuICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kaWZmKERhdGVUaW1lLm5vdygpLCB1bml0LCBvcHRzKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGFuIEludGVydmFsIHNwYW5uaW5nIGJldHdlZW4gdGhpcyBEYXRlVGltZSBhbmQgYW5vdGhlciBEYXRlVGltZVxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBvdGhlckRhdGVUaW1lIC0gdGhlIG90aGVyIGVuZCBwb2ludCBvZiB0aGUgSW50ZXJ2YWxcbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVudGlsID0gZnVuY3Rpb24gdW50aWwob3RoZXJEYXRlVGltZSkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHRoaXMsIG90aGVyRGF0ZVRpbWUpIDogdGhpcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBEYXRlVGltZSBpcyBpbiB0aGUgc2FtZSB1bml0IG9mIHRpbWUgYXMgYW5vdGhlciBEYXRlVGltZS5cbiAgICogSGlnaGVyLW9yZGVyIHVuaXRzIG11c3QgYWxzbyBiZSBpZGVudGljYWwgZm9yIHRoaXMgZnVuY3Rpb24gdG8gcmV0dXJuIGB0cnVlYC5cbiAgICogTm90ZSB0aGF0IHRpbWUgem9uZXMgYXJlICoqaWdub3JlZCoqIGluIHRoaXMgY29tcGFyaXNvbiwgd2hpY2ggY29tcGFyZXMgdGhlICoqbG9jYWwqKiBjYWxlbmRhciB0aW1lLiBVc2Uge0BsaW5rIERhdGVUaW1lI3NldFpvbmV9IHRvIGNvbnZlcnQgb25lIG9mIHRoZSBkYXRlcyBpZiBuZWVkZWQuXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IG90aGVyRGF0ZVRpbWUgLSB0aGUgb3RoZXIgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSB0aGUgdW5pdCBvZiB0aW1lIHRvIGNoZWNrIHNhbWVuZXNzIG9uXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLmhhc1NhbWUob3RoZXJEVCwgJ2RheScpOyAvL34+IHRydWUgaWYgb3RoZXJEVCBpcyBpbiB0aGUgc2FtZSBjdXJyZW50IGNhbGVuZGFyIGRheVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYXNTYW1lID0gZnVuY3Rpb24gaGFzU2FtZShvdGhlckRhdGVUaW1lLCB1bml0KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBmYWxzZTtcbiAgICB2YXIgaW5wdXRNcyA9IG90aGVyRGF0ZVRpbWUudmFsdWVPZigpO1xuICAgIHZhciBhZGp1c3RlZFRvWm9uZSA9IHRoaXMuc2V0Wm9uZShvdGhlckRhdGVUaW1lLnpvbmUsIHtcbiAgICAgIGtlZXBMb2NhbFRpbWU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gYWRqdXN0ZWRUb1pvbmUuc3RhcnRPZih1bml0KSA8PSBpbnB1dE1zICYmIGlucHV0TXMgPD0gYWRqdXN0ZWRUb1pvbmUuZW5kT2YodW5pdCk7XG4gIH1cbiAgLyoqXG4gICAqIEVxdWFsaXR5IGNoZWNrXG4gICAqIFR3byBEYXRlVGltZXMgYXJlIGVxdWFsIGlmZiB0aGV5IHJlcHJlc2VudCB0aGUgc2FtZSBtaWxsaXNlY29uZCwgaGF2ZSB0aGUgc2FtZSB6b25lIGFuZCBsb2NhdGlvbiwgYW5kIGFyZSBib3RoIHZhbGlkLlxuICAgKiBUbyBjb21wYXJlIGp1c3QgdGhlIG1pbGxpc2Vjb25kIHZhbHVlcywgdXNlIGArZHQxID09PSArZHQyYC5cbiAgICogQHBhcmFtIHtEYXRlVGltZX0gb3RoZXIgLSB0aGUgb3RoZXIgRGF0ZVRpbWVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzKG90aGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCAmJiBvdGhlci5pc1ZhbGlkICYmIHRoaXMudmFsdWVPZigpID09PSBvdGhlci52YWx1ZU9mKCkgJiYgdGhpcy56b25lLmVxdWFscyhvdGhlci56b25lKSAmJiB0aGlzLmxvYy5lcXVhbHMob3RoZXIubG9jKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIHRoaXMgdGltZSByZWxhdGl2ZSB0byBub3csIHN1Y2ggYXMgXCJpbiB0d28gZGF5c1wiLiBDYW4gb25seSBpbnRlcm5hdGlvbmFsaXplIGlmIHlvdXJcbiAgICogcGxhdGZvcm0gc3VwcG9ydHMgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQuIFJvdW5kcyBkb3duIGJ5IGRlZmF1bHQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgb3V0cHV0XG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IFtvcHRpb25zLmJhc2U9RGF0ZVRpbWUubm93KCldIC0gdGhlIERhdGVUaW1lIHRvIHVzZSBhcyB0aGUgYmFzaXMgdG8gd2hpY2ggdGhpcyB0aW1lIGlzIGNvbXBhcmVkLiBEZWZhdWx0cyB0byBub3cuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5zdHlsZT1cImxvbmdcIl0gLSB0aGUgc3R5bGUgb2YgdW5pdHMsIG11c3QgYmUgXCJsb25nXCIsIFwic2hvcnRcIiwgb3IgXCJuYXJyb3dcIlxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gb3B0aW9ucy51bml0IC0gdXNlIGEgc3BlY2lmaWMgdW5pdCBvciBhcnJheSBvZiB1bml0czsgaWYgb21pdHRlZCwgb3IgYW4gYXJyYXksIHRoZSBtZXRob2Qgd2lsbCBwaWNrIHRoZSBiZXN0IHVuaXQuIFVzZSBhbiBhcnJheSBvciBvbmUgb2YgXCJ5ZWFyc1wiLCBcInF1YXJ0ZXJzXCIsIFwibW9udGhzXCIsIFwid2Vla3NcIiwgXCJkYXlzXCIsIFwiaG91cnNcIiwgXCJtaW51dGVzXCIsIG9yIFwic2Vjb25kc1wiXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMucm91bmQ9dHJ1ZV0gLSB3aGV0aGVyIHRvIHJvdW5kIHRoZSBudW1iZXJzIGluIHRoZSBvdXRwdXQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5wYWRkaW5nPTBdIC0gcGFkZGluZyBpbiBtaWxsaXNlY29uZHMuIFRoaXMgYWxsb3dzIHlvdSB0byByb3VuZCB1cCB0aGUgcmVzdWx0IGlmIGl0IGZpdHMgaW5zaWRlIHRoZSB0aHJlc2hvbGQuIERvbid0IHVzZSBpbiBjb21iaW5hdGlvbiB3aXRoIHtyb3VuZDogZmFsc2V9IGJlY2F1c2UgdGhlIGRlY2ltYWwgb3V0cHV0IHdpbGwgaW5jbHVkZSB0aGUgcGFkZGluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubG9jYWxlIC0gb3ZlcnJpZGUgdGhlIGxvY2FsZSBvZiB0aGlzIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm51bWJlcmluZ1N5c3RlbSAtIG92ZXJyaWRlIHRoZSBudW1iZXJpbmdTeXN0ZW0gb2YgdGhpcyBEYXRlVGltZS4gVGhlIEludGwgc3lzdGVtIG1heSBjaG9vc2Ugbm90IHRvIGhvbm9yIHRoaXNcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGRheXM6IDEgfSkudG9SZWxhdGl2ZSgpIC8vPT4gXCJpbiAxIGRheVwiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnNldExvY2FsZShcImVzXCIpLnRvUmVsYXRpdmUoeyBkYXlzOiAxIH0pIC8vPT4gXCJkZW50cm8gZGUgMSBkXHUwMEVEYVwiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBkYXlzOiAxIH0pLnRvUmVsYXRpdmUoeyBsb2NhbGU6IFwiZnJcIiB9KSAvLz0+IFwiZGFucyAyMyBoZXVyZXNcIlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5taW51cyh7IGRheXM6IDIgfSkudG9SZWxhdGl2ZSgpIC8vPT4gXCIyIGRheXMgYWdvXCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkubWludXMoeyBkYXlzOiAyIH0pLnRvUmVsYXRpdmUoeyB1bml0OiBcImhvdXJzXCIgfSkgLy89PiBcIjQ4IGhvdXJzIGFnb1wiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLm1pbnVzKHsgaG91cnM6IDM2IH0pLnRvUmVsYXRpdmUoeyByb3VuZDogZmFsc2UgfSkgLy89PiBcIjEuNSBkYXlzIGFnb1wiXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvUmVsYXRpdmUgPSBmdW5jdGlvbiB0b1JlbGF0aXZlKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBudWxsO1xuICAgIHZhciBiYXNlID0gb3B0aW9ucy5iYXNlIHx8IERhdGVUaW1lLmZyb21PYmplY3Qoe30sIHtcbiAgICAgIHpvbmU6IHRoaXMuem9uZVxuICAgIH0pLFxuICAgICAgICBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nID8gdGhpcyA8IGJhc2UgPyAtb3B0aW9ucy5wYWRkaW5nIDogb3B0aW9ucy5wYWRkaW5nIDogMDtcbiAgICB2YXIgdW5pdHMgPSBbXCJ5ZWFyc1wiLCBcIm1vbnRoc1wiLCBcImRheXNcIiwgXCJob3Vyc1wiLCBcIm1pbnV0ZXNcIiwgXCJzZWNvbmRzXCJdO1xuICAgIHZhciB1bml0ID0gb3B0aW9ucy51bml0O1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy51bml0KSkge1xuICAgICAgdW5pdHMgPSBvcHRpb25zLnVuaXQ7XG4gICAgICB1bml0ID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiBkaWZmUmVsYXRpdmUoYmFzZSwgdGhpcy5wbHVzKHBhZGRpbmcpLCBfZXh0ZW5kcyh7fSwgb3B0aW9ucywge1xuICAgICAgbnVtZXJpYzogXCJhbHdheXNcIixcbiAgICAgIHVuaXRzOiB1bml0cyxcbiAgICAgIHVuaXQ6IHVuaXRcbiAgICB9KSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBkYXRlIHJlbGF0aXZlIHRvIHRvZGF5LCBzdWNoIGFzIFwieWVzdGVyZGF5XCIgb3IgXCJuZXh0IG1vbnRoXCIuXG4gICAqIE9ubHkgaW50ZXJuYXRpb25hbGl6ZXMgb24gcGxhdGZvcm1zIHRoYXQgc3VwcG9ydHMgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgb3V0cHV0XG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IFtvcHRpb25zLmJhc2U9RGF0ZVRpbWUubm93KCldIC0gdGhlIERhdGVUaW1lIHRvIHVzZSBhcyB0aGUgYmFzaXMgdG8gd2hpY2ggdGhpcyB0aW1lIGlzIGNvbXBhcmVkLiBEZWZhdWx0cyB0byBub3cuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmxvY2FsZSAtIG92ZXJyaWRlIHRoZSBsb2NhbGUgb2YgdGhpcyBEYXRlVGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy51bml0IC0gdXNlIGEgc3BlY2lmaWMgdW5pdDsgaWYgb21pdHRlZCwgdGhlIG1ldGhvZCB3aWxsIHBpY2sgdGhlIHVuaXQuIFVzZSBvbmUgb2YgXCJ5ZWFyc1wiLCBcInF1YXJ0ZXJzXCIsIFwibW9udGhzXCIsIFwid2Vla3NcIiwgb3IgXCJkYXlzXCJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubnVtYmVyaW5nU3lzdGVtIC0gb3ZlcnJpZGUgdGhlIG51bWJlcmluZ1N5c3RlbSBvZiB0aGlzIERhdGVUaW1lLiBUaGUgSW50bCBzeXN0ZW0gbWF5IGNob29zZSBub3QgdG8gaG9ub3IgdGhpc1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogMSB9KS50b1JlbGF0aXZlQ2FsZW5kYXIoKSAvLz0+IFwidG9tb3Jyb3dcIlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5zZXRMb2NhbGUoXCJlc1wiKS5wbHVzKHsgZGF5czogMSB9KS50b1JlbGF0aXZlKCkgLy89PiBcIlwibWFcdTAwRjFhbmFcIlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogMSB9KS50b1JlbGF0aXZlQ2FsZW5kYXIoeyBsb2NhbGU6IFwiZnJcIiB9KSAvLz0+IFwiZGVtYWluXCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkubWludXMoeyBkYXlzOiAyIH0pLnRvUmVsYXRpdmVDYWxlbmRhcigpIC8vPT4gXCIyIGRheXMgYWdvXCJcbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9SZWxhdGl2ZUNhbGVuZGFyID0gZnVuY3Rpb24gdG9SZWxhdGl2ZUNhbGVuZGFyKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBkaWZmUmVsYXRpdmUob3B0aW9ucy5iYXNlIHx8IERhdGVUaW1lLmZyb21PYmplY3Qoe30sIHtcbiAgICAgIHpvbmU6IHRoaXMuem9uZVxuICAgIH0pLCB0aGlzLCBfZXh0ZW5kcyh7fSwgb3B0aW9ucywge1xuICAgICAgbnVtZXJpYzogXCJhdXRvXCIsXG4gICAgICB1bml0czogW1wieWVhcnNcIiwgXCJtb250aHNcIiwgXCJkYXlzXCJdLFxuICAgICAgY2FsZW5kYXJ5OiB0cnVlXG4gICAgfSkpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG1pbiBvZiBzZXZlcmFsIGRhdGUgdGltZXNcbiAgICogQHBhcmFtIHsuLi5EYXRlVGltZX0gZGF0ZVRpbWVzIC0gdGhlIERhdGVUaW1lcyBmcm9tIHdoaWNoIHRvIGNob29zZSB0aGUgbWluaW11bVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX0gdGhlIG1pbiBEYXRlVGltZSwgb3IgdW5kZWZpbmVkIGlmIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50XG4gICAqL1xuICA7XG5cbiAgRGF0ZVRpbWUubWluID0gZnVuY3Rpb24gbWluKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBkYXRlVGltZXMgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBkYXRlVGltZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgaWYgKCFkYXRlVGltZXMuZXZlcnkoRGF0ZVRpbWUuaXNEYXRlVGltZSkpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIm1pbiByZXF1aXJlcyBhbGwgYXJndW1lbnRzIGJlIERhdGVUaW1lc1wiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYmVzdEJ5KGRhdGVUaW1lcywgZnVuY3Rpb24gKGkpIHtcbiAgICAgIHJldHVybiBpLnZhbHVlT2YoKTtcbiAgICB9LCBNYXRoLm1pbik7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbWF4IG9mIHNldmVyYWwgZGF0ZSB0aW1lc1xuICAgKiBAcGFyYW0gey4uLkRhdGVUaW1lfSBkYXRlVGltZXMgLSB0aGUgRGF0ZVRpbWVzIGZyb20gd2hpY2ggdG8gY2hvb3NlIHRoZSBtYXhpbXVtXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfSB0aGUgbWF4IERhdGVUaW1lLCBvciB1bmRlZmluZWQgaWYgY2FsbGVkIHdpdGggbm8gYXJndW1lbnRcbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5tYXggPSBmdW5jdGlvbiBtYXgoKSB7XG4gICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBkYXRlVGltZXMgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgIGRhdGVUaW1lc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgIH1cblxuICAgIGlmICghZGF0ZVRpbWVzLmV2ZXJ5KERhdGVUaW1lLmlzRGF0ZVRpbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJtYXggcmVxdWlyZXMgYWxsIGFyZ3VtZW50cyBiZSBEYXRlVGltZXNcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJlc3RCeShkYXRlVGltZXMsIGZ1bmN0aW9uIChpKSB7XG4gICAgICByZXR1cm4gaS52YWx1ZU9mKCk7XG4gICAgfSwgTWF0aC5tYXgpO1xuICB9IC8vIE1JU0NcblxuICAvKipcbiAgICogRXhwbGFpbiBob3cgYSBzdHJpbmcgd291bGQgYmUgcGFyc2VkIGJ5IGZyb21Gb3JtYXQoKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBzdHJpbmcgdG8gcGFyc2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZtdCAtIHRoZSBmb3JtYXQgdGhlIHN0cmluZyBpcyBleHBlY3RlZCB0byBiZSBpbiAoc2VlIGRlc2NyaXB0aW9uKVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIG9wdGlvbnMgdGFrZW4gYnkgZnJvbUZvcm1hdCgpXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5mcm9tRm9ybWF0RXhwbGFpbiA9IGZ1bmN0aW9uIGZyb21Gb3JtYXRFeHBsYWluKHRleHQsIGZtdCwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgX29wdGlvbnMgPSBvcHRpb25zLFxuICAgICAgICBfb3B0aW9ucyRsb2NhbGUgPSBfb3B0aW9ucy5sb2NhbGUsXG4gICAgICAgIGxvY2FsZSA9IF9vcHRpb25zJGxvY2FsZSA9PT0gdm9pZCAwID8gbnVsbCA6IF9vcHRpb25zJGxvY2FsZSxcbiAgICAgICAgX29wdGlvbnMkbnVtYmVyaW5nU3lzID0gX29wdGlvbnMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBudW1iZXJpbmdTeXN0ZW0gPSBfb3B0aW9ucyRudW1iZXJpbmdTeXMgPT09IHZvaWQgMCA/IG51bGwgOiBfb3B0aW9ucyRudW1iZXJpbmdTeXMsXG4gICAgICAgIGxvY2FsZVRvVXNlID0gTG9jYWxlLmZyb21PcHRzKHtcbiAgICAgIGxvY2FsZTogbG9jYWxlLFxuICAgICAgbnVtYmVyaW5nU3lzdGVtOiBudW1iZXJpbmdTeXN0ZW0sXG4gICAgICBkZWZhdWx0VG9FTjogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBleHBsYWluRnJvbVRva2Vucyhsb2NhbGVUb1VzZSwgdGV4dCwgZm10KTtcbiAgfVxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdXNlIGZyb21Gb3JtYXRFeHBsYWluIGluc3RlYWRcbiAgICovXG4gIDtcblxuICBEYXRlVGltZS5mcm9tU3RyaW5nRXhwbGFpbiA9IGZ1bmN0aW9uIGZyb21TdHJpbmdFeHBsYWluKHRleHQsIGZtdCwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbUZvcm1hdEV4cGxhaW4odGV4dCwgZm10LCBvcHRpb25zKTtcbiAgfSAvLyBGT1JNQVQgUFJFU0VUU1xuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlIDEwLzE0LzE5ODNcbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIDtcblxuICBfY3JlYXRlQ2xhc3MoRGF0ZVRpbWUsIFt7XG4gICAga2V5OiBcImlzVmFsaWRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmludmFsaWQgPT09IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gZXJyb3IgY29kZSBpZiB0aGlzIERhdGVUaW1lIGlzIGludmFsaWQsIG9yIG51bGwgaWYgdGhlIERhdGVUaW1lIGlzIHZhbGlkXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImludmFsaWRSZWFzb25cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmludmFsaWQgPyB0aGlzLmludmFsaWQucmVhc29uIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBleHBsYW5hdGlvbiBvZiB3aHkgdGhpcyBEYXRlVGltZSBiZWNhbWUgaW52YWxpZCwgb3IgbnVsbCBpZiB0aGUgRGF0ZVRpbWUgaXMgdmFsaWRcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiaW52YWxpZEV4cGxhbmF0aW9uXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLmV4cGxhbmF0aW9uIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsb2NhbGUgb2YgYSBEYXRlVGltZSwgc3VjaCAnZW4tR0InLiBUaGUgbG9jYWxlIGlzIHVzZWQgd2hlbiBmb3JtYXR0aW5nIHRoZSBEYXRlVGltZVxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImxvY2FsZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMubG9jLmxvY2FsZSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbnVtYmVyaW5nIHN5c3RlbSBvZiBhIERhdGVUaW1lLCBzdWNoICdiZW5nJy4gVGhlIG51bWJlcmluZyBzeXN0ZW0gaXMgdXNlZCB3aGVuIGZvcm1hdHRpbmcgdGhlIERhdGVUaW1lXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibnVtYmVyaW5nU3lzdGVtXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5sb2MubnVtYmVyaW5nU3lzdGVtIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBvdXRwdXQgY2FsZW5kYXIgb2YgYSBEYXRlVGltZSwgc3VjaCAnaXNsYW1pYycuIFRoZSBvdXRwdXQgY2FsZW5kYXIgaXMgdXNlZCB3aGVuIGZvcm1hdHRpbmcgdGhlIERhdGVUaW1lXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwib3V0cHV0Q2FsZW5kYXJcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmxvYy5vdXRwdXRDYWxlbmRhciA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGltZSB6b25lIGFzc29jaWF0ZWQgd2l0aCB0aGlzIERhdGVUaW1lLlxuICAgICAqIEB0eXBlIHtab25lfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiem9uZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3pvbmU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbmFtZSBvZiB0aGUgdGltZSB6b25lLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJ6b25lTmFtZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuem9uZS5uYW1lIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB5ZWFyXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLnllYXIgLy89PiAyMDE3XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInllYXJcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMueWVhciA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBxdWFydGVyXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLnF1YXJ0ZXIgLy89PiAyXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInF1YXJ0ZXJcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBNYXRoLmNlaWwodGhpcy5jLm1vbnRoIC8gMykgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbW9udGggKDEtMTIpLlxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS5tb250aCAvLz0+IDVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibW9udGhcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMubW9udGggOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZGF5IG9mIHRoZSBtb250aCAoMS0zMGlzaCkuXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLmRheSAvLz0+IDI1XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImRheVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuYy5kYXkgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaG91ciBvZiB0aGUgZGF5ICgwLTIzKS5cbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSwgOSkuaG91ciAvLz0+IDlcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiaG91clwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuYy5ob3VyIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1pbnV0ZSBvZiB0aGUgaG91ciAoMC01OSkuXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUsIDksIDMwKS5taW51dGUgLy89PiAzMFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJtaW51dGVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMubWludXRlIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHNlY29uZCBvZiB0aGUgbWludXRlICgwLTU5KS5cbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSwgOSwgMzAsIDUyKS5zZWNvbmQgLy89PiA1MlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJzZWNvbmRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMuc2Vjb25kIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1pbGxpc2Vjb25kIG9mIHRoZSBzZWNvbmQgKDAtOTk5KS5cbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSwgOSwgMzAsIDUyLCA2NTQpLm1pbGxpc2Vjb25kIC8vPT4gNjU0XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm1pbGxpc2Vjb25kXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLm1pbGxpc2Vjb25kIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHdlZWsgeWVhclxuICAgICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZVxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDEyLCAzMSkud2Vla1llYXIgLy89PiAyMDE1XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIndlZWtZZWFyXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gcG9zc2libHlDYWNoZWRXZWVrRGF0YSh0aGlzKS53ZWVrWWVhciA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB3ZWVrIG51bWJlciBvZiB0aGUgd2VlayB5ZWFyICgxLTUyaXNoKS5cbiAgICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkud2Vla051bWJlciAvLz0+IDIxXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIndlZWtOdW1iZXJcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBwb3NzaWJseUNhY2hlZFdlZWtEYXRhKHRoaXMpLndlZWtOdW1iZXIgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZGF5IG9mIHRoZSB3ZWVrLlxuICAgICAqIDEgaXMgTW9uZGF5IGFuZCA3IGlzIFN1bmRheVxuICAgICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZVxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDExLCAzMSkud2Vla2RheSAvLz0+IDRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwid2Vla2RheVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHBvc3NpYmx5Q2FjaGVkV2Vla0RhdGEodGhpcykud2Vla2RheSA6IE5hTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBvcmRpbmFsIChtZWFuaW5nIHRoZSBkYXkgb2YgdGhlIHllYXIpXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLm9yZGluYWwgLy89PiAxNDVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfERhdGVUaW1lfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwib3JkaW5hbFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IGdyZWdvcmlhblRvT3JkaW5hbCh0aGlzLmMpLm9yZGluYWwgOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaHVtYW4gcmVhZGFibGUgc2hvcnQgbW9udGggbmFtZSwgc3VjaCBhcyAnT2N0Jy5cbiAgICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWRcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAxMCwgMzApLm1vbnRoU2hvcnQgLy89PiBPY3RcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibW9udGhTaG9ydFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IEluZm8ubW9udGhzKFwic2hvcnRcIiwge1xuICAgICAgICBsb2NPYmo6IHRoaXMubG9jXG4gICAgICB9KVt0aGlzLm1vbnRoIC0gMV0gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGh1bWFuIHJlYWRhYmxlIGxvbmcgbW9udGggbmFtZSwgc3VjaCBhcyAnT2N0b2JlcicuXG4gICAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMTAsIDMwKS5tb250aExvbmcgLy89PiBPY3RvYmVyXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm1vbnRoTG9uZ1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IEluZm8ubW9udGhzKFwibG9uZ1wiLCB7XG4gICAgICAgIGxvY09iajogdGhpcy5sb2NcbiAgICAgIH0pW3RoaXMubW9udGggLSAxXSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaHVtYW4gcmVhZGFibGUgc2hvcnQgd2Vla2RheSwgc3VjaCBhcyAnTW9uJy5cbiAgICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWRcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAxMCwgMzApLndlZWtkYXlTaG9ydCAvLz0+IE1vblxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJ3ZWVrZGF5U2hvcnRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBJbmZvLndlZWtkYXlzKFwic2hvcnRcIiwge1xuICAgICAgICBsb2NPYmo6IHRoaXMubG9jXG4gICAgICB9KVt0aGlzLndlZWtkYXkgLSAxXSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaHVtYW4gcmVhZGFibGUgbG9uZyB3ZWVrZGF5LCBzdWNoIGFzICdNb25kYXknLlxuICAgICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDEwLCAzMCkud2Vla2RheUxvbmcgLy89PiBNb25kYXlcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwid2Vla2RheUxvbmdcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBJbmZvLndlZWtkYXlzKFwibG9uZ1wiLCB7XG4gICAgICAgIGxvY09iajogdGhpcy5sb2NcbiAgICAgIH0pW3RoaXMud2Vla2RheSAtIDFdIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBVVEMgb2Zmc2V0IG9mIHRoaXMgRGF0ZVRpbWUgaW4gbWludXRlc1xuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLm9mZnNldCAvLz0+IC0yNDBcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS5vZmZzZXQgLy89PiAwXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm9mZnNldFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/ICt0aGlzLm8gOiBOYU47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc2hvcnQgaHVtYW4gbmFtZSBmb3IgdGhlIHpvbmUncyBjdXJyZW50IG9mZnNldCwgZm9yIGV4YW1wbGUgXCJFU1RcIiBvciBcIkVEVFwiLlxuICAgICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJvZmZzZXROYW1lU2hvcnRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIGlmICh0aGlzLmlzVmFsaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuem9uZS5vZmZzZXROYW1lKHRoaXMudHMsIHtcbiAgICAgICAgICBmb3JtYXQ6IFwic2hvcnRcIixcbiAgICAgICAgICBsb2NhbGU6IHRoaXMubG9jYWxlXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbG9uZyBodW1hbiBuYW1lIGZvciB0aGUgem9uZSdzIGN1cnJlbnQgb2Zmc2V0LCBmb3IgZXhhbXBsZSBcIkVhc3Rlcm4gU3RhbmRhcmQgVGltZVwiIG9yIFwiRWFzdGVybiBEYXlsaWdodCBUaW1lXCIuXG4gICAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm9mZnNldE5hbWVMb25nXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAodGhpcy5pc1ZhbGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnpvbmUub2Zmc2V0TmFtZSh0aGlzLnRzLCB7XG4gICAgICAgICAgZm9ybWF0OiBcImxvbmdcIixcbiAgICAgICAgICBsb2NhbGU6IHRoaXMubG9jYWxlXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB3aGV0aGVyIHRoaXMgem9uZSdzIG9mZnNldCBldmVyIGNoYW5nZXMsIGFzIGluIGEgRFNULlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiaXNPZmZzZXRGaXhlZFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuem9uZS5pc1VuaXZlcnNhbCA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB3aGV0aGVyIHRoZSBEYXRlVGltZSBpcyBpbiBhIERTVC5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImlzSW5EU1RcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIGlmICh0aGlzLmlzT2Zmc2V0Rml4ZWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0ID4gdGhpcy5zZXQoe1xuICAgICAgICAgIG1vbnRoOiAxLFxuICAgICAgICAgIGRheTogMVxuICAgICAgICB9KS5vZmZzZXQgfHwgdGhpcy5vZmZzZXQgPiB0aGlzLnNldCh7XG4gICAgICAgICAgbW9udGg6IDVcbiAgICAgICAgfSkub2Zmc2V0O1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBEYXRlVGltZSBpcyBpbiBhIGxlYXAgeWVhciwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNikuaXNJbkxlYXBZZWFyIC8vPT4gdHJ1ZVxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTMpLmlzSW5MZWFwWWVhciAvLz0+IGZhbHNlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJpc0luTGVhcFllYXJcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBpc0xlYXBZZWFyKHRoaXMueWVhcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBkYXlzIGluIHRoaXMgRGF0ZVRpbWUncyBtb250aFxuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTYsIDIpLmRheXNJbk1vbnRoIC8vPT4gMjlcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE2LCAzKS5kYXlzSW5Nb250aCAvLz0+IDMxXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImRheXNJbk1vbnRoXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gZGF5c0luTW9udGgodGhpcy55ZWFyLCB0aGlzLm1vbnRoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGRheXMgaW4gdGhpcyBEYXRlVGltZSdzIHllYXJcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE2KS5kYXlzSW5ZZWFyIC8vPT4gMzY2XG4gICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxMykuZGF5c0luWWVhciAvLz0+IDM2NVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJkYXlzSW5ZZWFyXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gZGF5c0luWWVhcih0aGlzLnllYXIpIDogTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygd2Vla3MgaW4gdGhpcyBEYXRlVGltZSdzIHllYXJcbiAgICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDA0KS53ZWVrc0luV2Vla1llYXIgLy89PiA1M1xuICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTMpLndlZWtzSW5XZWVrWWVhciAvLz0+IDUyXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIndlZWtzSW5XZWVrWWVhclwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHdlZWtzSW5XZWVrWWVhcih0aGlzLndlZWtZZWFyKSA6IE5hTjtcbiAgICB9XG4gIH1dLCBbe1xuICAgIGtleTogXCJEQVRFX1NIT1JUXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gREFURV9TSE9SVDtcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0IDE0LCAxOTgzJ1xuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJEQVRFX01FRFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIERBVEVfTUVEO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdGcmksIE9jdCAxNCwgMTk4MydcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiREFURV9NRURfV0lUSF9XRUVLREFZXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gREFURV9NRURfV0lUSF9XRUVLREFZO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdPY3RvYmVyIDE0LCAxOTgzJ1xuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJEQVRFX0ZVTExcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBEQVRFX0ZVTEw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ1R1ZXNkYXksIE9jdG9iZXIgMTQsIDE5ODMnXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIkRBVEVfSFVHRVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIERBVEVfSFVHRTtcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzAgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiVElNRV9TSU1QTEVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBUSU1FX1NJTVBMRTtcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiVElNRV9XSVRIX1NFQ09ORFNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBUSU1FX1dJVEhfU0VDT05EUztcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgQU0gRURUJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIlRJTUVfV0lUSF9TSE9SVF9PRkZTRVRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBUSU1FX1dJVEhfU0hPUlRfT0ZGU0VUO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMyBBTSBFYXN0ZXJuIERheWxpZ2h0IFRpbWUnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiVElNRV9XSVRIX0xPTkdfT0ZGU0VUXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gVElNRV9XSVRIX0xPTkdfT0ZGU0VUO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMCcsIGFsd2F5cyAyNC1ob3VyLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJUSU1FXzI0X1NJTVBMRVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIFRJTUVfMjRfU0lNUExFO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMycsIGFsd2F5cyAyNC1ob3VyLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJUSU1FXzI0X1dJVEhfU0VDT05EU1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIFRJTUVfMjRfV0lUSF9TRUNPTkRTO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMyBFRFQnLCBhbHdheXMgMjQtaG91ci5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiVElNRV8yNF9XSVRIX1NIT1JUX09GRlNFVFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIFRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwOjIzIEVhc3Rlcm4gRGF5bGlnaHQgVGltZScsIGFsd2F5cyAyNC1ob3VyLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJUSU1FXzI0X1dJVEhfTE9OR19PRkZTRVRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBUSU1FXzI0X1dJVEhfTE9OR19PRkZTRVQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzEwLzE0LzE5ODMsIDk6MzAgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiREFURVRJTUVfU0hPUlRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBEQVRFVElNRV9TSE9SVDtcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMTAvMTQvMTk4MywgOTozMDozMyBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJEQVRFVElNRV9TSE9SVF9XSVRIX1NFQ09ORFNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBEQVRFVElNRV9TSE9SVF9XSVRIX1NFQ09ORFM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdCAxNCwgMTk4MywgOTozMCBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJEQVRFVElNRV9NRURcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBEQVRFVElNRV9NRUQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdCAxNCwgMTk4MywgOTozMDozMyBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJEQVRFVElNRV9NRURfV0lUSF9TRUNPTkRTXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gREFURVRJTUVfTUVEX1dJVEhfU0VDT05EUztcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnRnJpLCAxNCBPY3QgMTk4MywgOTozMCBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJEQVRFVElNRV9NRURfV0lUSF9XRUVLREFZXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gREFURVRJTUVfTUVEX1dJVEhfV0VFS0RBWTtcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0b2JlciAxNCwgMTk4MywgOTozMCBBTSBFRFQnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiREFURVRJTUVfRlVMTFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIERBVEVUSU1FX0ZVTEw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdG9iZXIgMTQsIDE5ODMsIDk6MzA6MzMgQU0gRURUJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIkRBVEVUSU1FX0ZVTExfV0lUSF9TRUNPTkRTXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gREFURVRJTUVfRlVMTF9XSVRIX1NFQ09ORFM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ0ZyaWRheSwgT2N0b2JlciAxNCwgMTk4MywgOTozMCBBTSBFYXN0ZXJuIERheWxpZ2h0IFRpbWUnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiREFURVRJTUVfSFVHRVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIERBVEVUSU1FX0hVR0U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ0ZyaWRheSwgT2N0b2JlciAxNCwgMTk4MywgOTozMDozMyBBTSBFYXN0ZXJuIERheWxpZ2h0IFRpbWUnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiREFURVRJTUVfSFVHRV9XSVRIX1NFQ09ORFNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBEQVRFVElNRV9IVUdFX1dJVEhfU0VDT05EUztcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRGF0ZVRpbWU7XG59KCk7XG5mdW5jdGlvbiBmcmllbmRseURhdGVUaW1lKGRhdGVUaW1laXNoKSB7XG4gIGlmIChEYXRlVGltZS5pc0RhdGVUaW1lKGRhdGVUaW1laXNoKSkge1xuICAgIHJldHVybiBkYXRlVGltZWlzaDtcbiAgfSBlbHNlIGlmIChkYXRlVGltZWlzaCAmJiBkYXRlVGltZWlzaC52YWx1ZU9mICYmIGlzTnVtYmVyKGRhdGVUaW1laXNoLnZhbHVlT2YoKSkpIHtcbiAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbUpTRGF0ZShkYXRlVGltZWlzaCk7XG4gIH0gZWxzZSBpZiAoZGF0ZVRpbWVpc2ggJiYgdHlwZW9mIGRhdGVUaW1laXNoID09PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIERhdGVUaW1lLmZyb21PYmplY3QoZGF0ZVRpbWVpc2gpO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIlVua25vd24gZGF0ZXRpbWUgYXJndW1lbnQ6IFwiICsgZGF0ZVRpbWVpc2ggKyBcIiwgb2YgdHlwZSBcIiArIHR5cGVvZiBkYXRlVGltZWlzaCk7XG4gIH1cbn1cblxudmFyIFZFUlNJT04gPSBcIjIuNC4wXCI7XG5cbmV4cG9ydHMuRGF0ZVRpbWUgPSBEYXRlVGltZTtcbmV4cG9ydHMuRHVyYXRpb24gPSBEdXJhdGlvbjtcbmV4cG9ydHMuRml4ZWRPZmZzZXRab25lID0gRml4ZWRPZmZzZXRab25lO1xuZXhwb3J0cy5JQU5BWm9uZSA9IElBTkFab25lO1xuZXhwb3J0cy5JbmZvID0gSW5mbztcbmV4cG9ydHMuSW50ZXJ2YWwgPSBJbnRlcnZhbDtcbmV4cG9ydHMuSW52YWxpZFpvbmUgPSBJbnZhbGlkWm9uZTtcbmV4cG9ydHMuU2V0dGluZ3MgPSBTZXR0aW5ncztcbmV4cG9ydHMuU3lzdGVtWm9uZSA9IFN5c3RlbVpvbmU7XG5leHBvcnRzLlZFUlNJT04gPSBWRVJTSU9OO1xuZXhwb3J0cy5ab25lID0gWm9uZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWx1eG9uLmpzLm1hcFxuIiwgIi8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBRdWVyeSBTZXR0aW5ncyAvL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVNldHRpbmdzIHtcbiAgICAvKiogV2hhdCB0byByZW5kZXIgJ251bGwnIGFzIGluIHRhYmxlcy4gRGVmYXVsdHMgdG8gJy0nLiAqL1xuICAgIHJlbmRlck51bGxBczogc3RyaW5nO1xuICAgIC8qKiBJZiBlbmFibGVkLCB0YXNrcyBpbiBEYXRhdmlldyB2aWV3cyB3aWxsIGF1dG9tYXRpY2FsbHkgaGF2ZSB0aGVpciBjb21wbGV0aW9uIGRhdGUgYXBwZW5kZWQgd2hlbiB0aGV5IGFyZSBjaGVja2VkLiAqL1xuICAgIHRhc2tDb21wbGV0aW9uVHJhY2tpbmc6IGJvb2xlYW47XG4gICAgLyoqIElmIGVuYWJsZWQsIGF1dG9tYXRpYyBjb21wbGV0aW9ucyB3aWxsIHVzZSBlbW9qaSBzaG9ydGhhbmQgXHUyNzA1IFlZWVktTU0tREQgaW5zdGVhZCBvZiBbY29tcGxldGlvbjo6IGRhdGVdLiAqL1xuICAgIHRhc2tDb21wbGV0aW9uVXNlRW1vamlTaG9ydGhhbmQ6IGJvb2xlYW47XG4gICAgLyoqIFRoZSBuYW1lIG9mIHRoZSBpbmxpbmUgZmllbGQgdG8gYmUgYWRkZWQgYXMgYSB0YXNrJ3MgY29tcGxldGlvbiB3aGVuIGNoZWNrZWQuIE9ubHkgdXNlZCBpZiBjb21wbGV0aW9uVHJhY2tpbmcgaXMgZW5hYmxlZCBhbmQgZW1vamlTaG9ydGhhbmQgaXMgbm90LiAqL1xuICAgIHRhc2tDb21wbGV0aW9uVGV4dDogc3RyaW5nO1xuICAgIC8qKiBEYXRlIGZvcm1hdCBvZiB0aGUgdGFzaydzIGNvbXBsZXRpb24gdGltZXN0YW1wLiBPbmx5IHVzZWQgaWYgY29tcGxldGlvblRyYWNraW5nIGlzIGVuYWJsZWQgYW5kIGVtb2ppU2hvcnRoYW5kIGlzIG5vdC4gKi9cbiAgICB0YXNrQ29tcGxldGlvbkRhdGVGb3JtYXQ6IHN0cmluZztcbiAgICAvKiogV2hldGhlciBvciBub3Qgc3VidGFza3Mgc2hvdWxkIGJlIHJlY3Vyc2l2ZWx5IGNvbXBsZXRlZCBpbiBhZGRpdGlvbiB0byB0aGVpciBwYXJlbnQgdGFzay4gKi9cbiAgICByZWN1cnNpdmVTdWJUYXNrQ29tcGxldGlvbjogYm9vbGVhbjtcbiAgICAvKiogSWYgdHJ1ZSwgcmVuZGVyIGEgbW9kYWwgd2hpY2ggc2hvd3Mgbm8gcmVzdWx0cyB3ZXJlIHJldHVybmVkLiAqL1xuICAgIHdhcm5PbkVtcHR5UmVzdWx0OiBib29sZWFuO1xuICAgIC8qKiBXaGV0aGVyIG9yIG5vdCBhdXRvbWF0aWMgdmlldyByZWZyZXNoaW5nIGlzIGVuYWJsZWQuICovXG4gICAgcmVmcmVzaEVuYWJsZWQ6IGJvb2xlYW47XG4gICAgLyoqIFRoZSBpbnRlcnZhbCB0aGF0IHZpZXdzIGFyZSByZWZyZXNoZWQsIGJ5IGRlZmF1bHQuICovXG4gICAgcmVmcmVzaEludGVydmFsOiBudW1iZXI7XG4gICAgLyoqIFRoZSBkZWZhdWx0IGZvcm1hdCB0aGF0IGRhdGVzIGFyZSByZW5kZXJlZCBpbiAodXNpbmcgbHV4b24ncyBtb21lbnQtbGlrZSBmb3JtYXR0aW5nKS4gKi9cbiAgICBkZWZhdWx0RGF0ZUZvcm1hdDogc3RyaW5nO1xuICAgIC8qKiBUaGUgZGVmYXVsdCBmb3JtYXQgdGhhdCBkYXRlLXRpbWVzIGFyZSByZW5kZXJlZCBpbiAodXNpbmcgbHV4b25zIG1vbWVudC1saWtlIGZvcm1hdHRpbmcpLiAqL1xuICAgIGRlZmF1bHREYXRlVGltZUZvcm1hdDogc3RyaW5nO1xuICAgIC8qKiBNYXhpbXVtIGRlcHRoIHRoYXQgb2JqZWN0cyB3aWxsIGJlIGV4cGFuZGVkIHdoZW4gYmVpbmcgcmVuZGVyZWQgcmVjdXJzaXZlbHkuICovXG4gICAgbWF4UmVjdXJzaXZlUmVuZGVyRGVwdGg6IG51bWJlcjtcbiAgICAvKiogVGhlIG5hbWUgb2YgdGhlIGRlZmF1bHQgSUQgZmllbGQgKCdGaWxlJykuICovXG4gICAgdGFibGVJZENvbHVtbk5hbWU6IHN0cmluZztcbiAgICAvKiogVGhlIG5hbWUgb2YgZGVmYXVsdCBJRCBmaWVsZHMgb24gZ3JvdXBlZCBkYXRhICgnR3JvdXAnKS4gKi9cbiAgICB0YWJsZUdyb3VwQ29sdW1uTmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9RVUVSWV9TRVRUSU5HUzogUXVlcnlTZXR0aW5ncyA9IHtcbiAgICByZW5kZXJOdWxsQXM6IFwiXFxcXC1cIixcbiAgICB0YXNrQ29tcGxldGlvblRyYWNraW5nOiBmYWxzZSxcbiAgICB0YXNrQ29tcGxldGlvblVzZUVtb2ppU2hvcnRoYW5kOiBmYWxzZSxcbiAgICB0YXNrQ29tcGxldGlvblRleHQ6IFwiY29tcGxldGlvblwiLFxuICAgIHRhc2tDb21wbGV0aW9uRGF0ZUZvcm1hdDogXCJ5eXl5LU1NLWRkXCIsXG4gICAgcmVjdXJzaXZlU3ViVGFza0NvbXBsZXRpb246IGZhbHNlLFxuICAgIHdhcm5PbkVtcHR5UmVzdWx0OiB0cnVlLFxuICAgIHJlZnJlc2hFbmFibGVkOiB0cnVlLFxuICAgIHJlZnJlc2hJbnRlcnZhbDogMjUwMCxcbiAgICBkZWZhdWx0RGF0ZUZvcm1hdDogXCJNTU1NIGRkLCB5eXl5XCIsXG4gICAgZGVmYXVsdERhdGVUaW1lRm9ybWF0OiBcImg6bW0gYSAtIE1NTU0gZGQsIHl5eXlcIixcbiAgICBtYXhSZWN1cnNpdmVSZW5kZXJEZXB0aDogNCxcblxuICAgIHRhYmxlSWRDb2x1bW5OYW1lOiBcIkZpbGVcIixcbiAgICB0YWJsZUdyb3VwQ29sdW1uTmFtZTogXCJHcm91cFwiLFxufTtcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBFeHBvcnQgU2V0dGluZ3MgLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5leHBvcnQgaW50ZXJmYWNlIEV4cG9ydFNldHRpbmdzIHtcbiAgICAvKiogV2hldGhlciBvciBub3QgSFRNTCBzaG91bGQgYmUgdXNlZCBmb3IgZm9ybWF0dGluZyBpbiBleHBvcnRzLiAqL1xuICAgIGFsbG93SHRtbDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfRVhQT1JUX1NFVFRJTkdTOiBFeHBvcnRTZXR0aW5ncyA9IHtcbiAgICBhbGxvd0h0bWw6IHRydWUsXG59O1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBHZW5lcmFsIERhdGF2aWV3IFNldHRpbmdzIC8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmV4cG9ydCBpbnRlcmZhY2UgRGF0YXZpZXdTZXR0aW5ncyBleHRlbmRzIFF1ZXJ5U2V0dGluZ3MsIEV4cG9ydFNldHRpbmdzIHtcbiAgICAvKiogVGhlIHByZWZpeCBmb3IgaW5saW5lIHF1ZXJpZXMgYnkgZGVmYXVsdC4gKi9cbiAgICBpbmxpbmVRdWVyeVByZWZpeDogc3RyaW5nO1xuICAgIC8qKiBUaGUgcHJlZml4IGZvciBpbmxpbmUgSlMgcXVlcmllcyBieSBkZWZhdWx0LiAqL1xuICAgIGlubGluZUpzUXVlcnlQcmVmaXg6IHN0cmluZztcbiAgICAvKiogSWYgdHJ1ZSwgaW5saW5lIHF1ZXJpZXMgYXJlIGFsc28gZXZhbHVhdGVkIGluIGZ1bGwgY29kZWJsb2Nrcy4gKi9cbiAgICBpbmxpbmVRdWVyaWVzSW5Db2RlYmxvY2tzOiBib29sZWFuO1xuICAgIC8qKiBFbmFibGUgb3IgZGlzYWJsZSBleGVjdXRpbmcgRGF0YXZpZXdKUyBxdWVyaWVzLiAqL1xuICAgIGVuYWJsZURhdGF2aWV3SnM6IGJvb2xlYW47XG4gICAgLyoqIEVuYWJsZSBvciBkaXNhYmxlIHJlZ3VsYXIgaW5saW5lIHF1ZXJpZXMuICovXG4gICAgZW5hYmxlSW5saW5lRGF0YXZpZXc6IGJvb2xlYW47XG4gICAgLyoqIEVuYWJsZSBvciBkaXNhYmxlIGV4ZWN1dGluZyBpbmxpbmUgRGF0YXZpZXdKUyBxdWVyaWVzLiAqL1xuICAgIGVuYWJsZUlubGluZURhdGF2aWV3SnM6IGJvb2xlYW47XG4gICAgLyoqIEVuYWJsZSBvciBkaXNhYmxlIHJlbmRlcmluZyBpbmxpbmUgZmllbGRzIHByZXR0aWx5LiAqL1xuICAgIHByZXR0eVJlbmRlcklubGluZUZpZWxkczogYm9vbGVhbjtcbn1cblxuLyoqIERlZmF1bHQgc2V0dGluZ3MgZm9yIGRhdGF2aWV3IG9uIGluc3RhbGwuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRGF0YXZpZXdTZXR0aW5ncyA9IHtcbiAgICAuLi5ERUZBVUxUX1FVRVJZX1NFVFRJTkdTLFxuICAgIC4uLkRFRkFVTFRfRVhQT1JUX1NFVFRJTkdTLFxuICAgIC4uLntcbiAgICAgICAgaW5saW5lUXVlcnlQcmVmaXg6IFwiPVwiLFxuICAgICAgICBpbmxpbmVKc1F1ZXJ5UHJlZml4OiBcIiQ9XCIsXG4gICAgICAgIGlubGluZVF1ZXJpZXNJbkNvZGVibG9ja3M6IHRydWUsXG4gICAgICAgIGVuYWJsZUlubGluZURhdGF2aWV3OiB0cnVlLFxuICAgICAgICBlbmFibGVEYXRhdmlld0pzOiBmYWxzZSxcbiAgICAgICAgZW5hYmxlSW5saW5lRGF0YXZpZXdKczogZmFsc2UsXG4gICAgICAgIHByZXR0eVJlbmRlcklubGluZUZpZWxkczogdHJ1ZSxcbiAgICB9LFxufTtcbiIsICIvKiogRnVuY3Rpb25hbCByZXR1cm4gdHlwZSBmb3IgZXJyb3IgaGFuZGxpbmcuICovXG5leHBvcnQgY2xhc3MgU3VjY2VzczxULCBFPiB7XG4gICAgcHVibGljIHN1Y2Nlc3NmdWw6IHRydWU7XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHVibGljIHZhbHVlOiBUKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc2Z1bCA9IHRydWU7XG4gICAgfVxuXG4gICAgcHVibGljIG1hcDxVPihmOiAoYTogVCkgPT4gVSk6IFJlc3VsdDxVLCBFPiB7XG4gICAgICAgIHJldHVybiBuZXcgU3VjY2VzcyhmKHRoaXMudmFsdWUpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZmxhdE1hcDxVPihmOiAoYTogVCkgPT4gUmVzdWx0PFUsIEU+KTogUmVzdWx0PFUsIEU+IHtcbiAgICAgICAgcmV0dXJuIGYodGhpcy52YWx1ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIG1hcEVycjxVPihmOiAoZTogRSkgPT4gVSk6IFJlc3VsdDxULCBVPiB7XG4gICAgICAgIHJldHVybiB0aGlzIGFzIGFueSBhcyBSZXN1bHQ8VCwgVT47XG4gICAgfVxuXG4gICAgcHVibGljIGJpbWFwPFQyLCBFMj4oc3VjYzogKGE6IFQpID0+IFQyLCBfZmFpbDogKGI6IEUpID0+IEUyKTogUmVzdWx0PFQyLCBFMj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAoc3VjYykgYXMgYW55O1xuICAgIH1cblxuICAgIHB1YmxpYyBvckVsc2UoX3ZhbHVlOiBUKTogVCB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBjYXN0PFU+KCk6IFJlc3VsdDxVLCBFPiB7XG4gICAgICAgIHJldHVybiB0aGlzIGFzIGFueTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb3JFbHNlVGhyb3coX21lc3NhZ2U/OiAoZTogRSkgPT4gc3RyaW5nKTogVCB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgIH1cbn1cblxuLyoqIEZ1bmN0aW9uYWwgcmV0dXJuIHR5cGUgZm9yIGVycm9yIGhhbmRsaW5nLiAqL1xuZXhwb3J0IGNsYXNzIEZhaWx1cmU8VCwgRT4ge1xuICAgIHB1YmxpYyBzdWNjZXNzZnVsOiBmYWxzZTtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwdWJsaWMgZXJyb3I6IEUpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzZnVsID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcHVibGljIG1hcDxVPihfZjogKGE6IFQpID0+IFUpOiBSZXN1bHQ8VSwgRT4ge1xuICAgICAgICByZXR1cm4gdGhpcyBhcyBhbnkgYXMgRmFpbHVyZTxVLCBFPjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZmxhdE1hcDxVPihfZjogKGE6IFQpID0+IFJlc3VsdDxVLCBFPik6IFJlc3VsdDxVLCBFPiB7XG4gICAgICAgIHJldHVybiB0aGlzIGFzIGFueSBhcyBGYWlsdXJlPFUsIEU+O1xuICAgIH1cblxuICAgIHB1YmxpYyBtYXBFcnI8VT4oZjogKGU6IEUpID0+IFUpOiBSZXN1bHQ8VCwgVT4ge1xuICAgICAgICByZXR1cm4gbmV3IEZhaWx1cmUoZih0aGlzLmVycm9yKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGJpbWFwPFQyLCBFMj4oX3N1Y2M6IChhOiBUKSA9PiBUMiwgZmFpbDogKGI6IEUpID0+IEUyKTogUmVzdWx0PFQyLCBFMj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXBFcnIoZmFpbCkgYXMgYW55O1xuICAgIH1cblxuICAgIHB1YmxpYyBvckVsc2UodmFsdWU6IFQpOiBUIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBjYXN0PFU+KCk6IFJlc3VsdDxVLCBFPiB7XG4gICAgICAgIHJldHVybiB0aGlzIGFzIGFueTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb3JFbHNlVGhyb3cobWVzc2FnZT86IChlOiBFKSA9PiBzdHJpbmcpOiBUIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UpIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKHRoaXMuZXJyb3IpKTtcbiAgICAgICAgZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJcIiArIHRoaXMuZXJyb3IpO1xuICAgIH1cbn1cblxuZXhwb3J0IHR5cGUgUmVzdWx0PFQsIEU+ID0gU3VjY2VzczxULCBFPiB8IEZhaWx1cmU8VCwgRT47XG5cbi8qKiBNb25hZGljICdSZXN1bHQnIHR5cGUgd2hpY2ggZW5jYXBzdWxhdGVzIHdoZXRoZXIgYSBwcm9jZWR1cmUgc3VjY2VlZGVkIG9yIGZhaWxlZCwgYXMgd2VsbCBhcyBpdCdzIHJldHVybiB2YWx1ZS4gKi9cbmV4cG9ydCBuYW1lc3BhY2UgUmVzdWx0IHtcbiAgICAvKiogQ29uc3RydWN0IGEgbmV3IHN1Y2Nlc3MgcmVzdWx0IHdyYXBwaW5nIHRoZSBnaXZlbiB2YWx1ZS4gKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gc3VjY2VzczxULCBFPih2YWx1ZTogVCk6IFJlc3VsdDxULCBFPiB7XG4gICAgICAgIHJldHVybiBuZXcgU3VjY2Vzcyh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqIENvbnN0cnVjdCBhIG5ldyBmYWlsdXJlIHZhbHVlIHdyYXBwaW5nIHRoZSBnaXZlbiBlcnJvci4gKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZmFpbHVyZTxULCBFPihlcnJvcjogRSk6IFJlc3VsdDxULCBFPiB7XG4gICAgICAgIHJldHVybiBuZXcgRmFpbHVyZShlcnJvcik7XG4gICAgfVxuXG4gICAgLyoqIEpvaW4gdHdvIHJlc3VsdHMgd2l0aCBhIGJpLWZ1bmN0aW9uIGFuZCByZXR1cm4gYSBuZXcgcmVzdWx0LiAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBmbGF0TWFwMjxUMSwgVDIsIE8sIEU+KFxuICAgICAgICBmaXJzdDogUmVzdWx0PFQxLCBFPixcbiAgICAgICAgc2Vjb25kOiBSZXN1bHQ8VDIsIEU+LFxuICAgICAgICBmOiAoYTogVDEsIGI6IFQyKSA9PiBSZXN1bHQ8TywgRT5cbiAgICApOiBSZXN1bHQ8TywgRT4ge1xuICAgICAgICBpZiAoZmlyc3Quc3VjY2Vzc2Z1bCkge1xuICAgICAgICAgICAgaWYgKHNlY29uZC5zdWNjZXNzZnVsKSByZXR1cm4gZihmaXJzdC52YWx1ZSwgc2Vjb25kLnZhbHVlKTtcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIGZhaWx1cmUoc2Vjb25kLmVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWlsdXJlKGZpcnN0LmVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKiBKb2luIHR3byByZXN1bHRzIHdpdGggYSBiaS1mdW5jdGlvbiBhbmQgcmV0dXJuIGEgbmV3IHJlc3VsdC4gKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gbWFwMjxUMSwgVDIsIE8sIEU+KFxuICAgICAgICBmaXJzdDogUmVzdWx0PFQxLCBFPixcbiAgICAgICAgc2Vjb25kOiBSZXN1bHQ8VDIsIEU+LFxuICAgICAgICBmOiAoYTogVDEsIGI6IFQyKSA9PiBPXG4gICAgKTogUmVzdWx0PE8sIEU+IHtcbiAgICAgICAgcmV0dXJuIGZsYXRNYXAyKGZpcnN0LCBzZWNvbmQsIChhLCBiKSA9PiBzdWNjZXNzKGYoYSwgYikpKTtcbiAgICB9XG59XG4iLCAiIWZ1bmN0aW9uKG4sdCl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sdCk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5QYXJzaW1tb249dCgpOm4uUGFyc2ltbW9uPXQoKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciB0PXt9O2Z1bmN0aW9uIHIoZSl7aWYodFtlXSlyZXR1cm4gdFtlXS5leHBvcnRzO3ZhciB1PXRbZV09e2k6ZSxsOiExLGV4cG9ydHM6e319O3JldHVybiBuW2VdLmNhbGwodS5leHBvcnRzLHUsdS5leHBvcnRzLHIpLHUubD0hMCx1LmV4cG9ydHN9cmV0dXJuIHIubT1uLHIuYz10LHIuZD1mdW5jdGlvbihuLHQsZSl7ci5vKG4sdCl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLHQse2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiEwLGdldDplfSl9LHIucj1mdW5jdGlvbihuKXtPYmplY3QuZGVmaW5lUHJvcGVydHkobixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0sci5uPWZ1bmN0aW9uKG4pe3ZhciB0PW4mJm4uX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBuLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIG59O3JldHVybiByLmQodCxcImFcIix0KSx0fSxyLm89ZnVuY3Rpb24obix0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4sdCl9LHIucD1cIlwiLHIoci5zPTApfShbZnVuY3Rpb24obix0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUobil7aWYoISh0aGlzIGluc3RhbmNlb2YgZSkpcmV0dXJuIG5ldyBlKG4pO3RoaXMuXz1ufXZhciB1PWUucHJvdG90eXBlO2Z1bmN0aW9uIG8obix0KXtmb3IodmFyIHI9MDtyPG47cisrKXQocil9ZnVuY3Rpb24gaShuLHQscil7cmV0dXJuIGZ1bmN0aW9uKG4sdCl7byh0Lmxlbmd0aCxmdW5jdGlvbihyKXtuKHRbcl0scix0KX0pfShmdW5jdGlvbihyLGUsdSl7dD1uKHQscixlLHUpfSxyKSx0fWZ1bmN0aW9uIGEobix0KXtyZXR1cm4gaShmdW5jdGlvbih0LHIsZSx1KXtyZXR1cm4gdC5jb25jYXQoW24ocixlLHUpXSl9LFtdLHQpfWZ1bmN0aW9uIGYobix0KXt2YXIgcj17djowLGJ1Zjp0fTtyZXR1cm4gbyhuLGZ1bmN0aW9uKCl7dmFyIG47cj17djpyLnY8PDF8KG49ci5idWYsblswXT4+NyksYnVmOmZ1bmN0aW9uKG4pe3ZhciB0PWkoZnVuY3Rpb24obix0LHIsZSl7cmV0dXJuIG4uY29uY2F0KHI9PT1lLmxlbmd0aC0xP0J1ZmZlci5mcm9tKFt0LDBdKS5yZWFkVUludDE2QkUoMCk6ZS5yZWFkVUludDE2QkUocikpfSxbXSxuKTtyZXR1cm4gQnVmZmVyLmZyb20oYShmdW5jdGlvbihuKXtyZXR1cm4objw8MSY2NTUzNSk+Pjh9LHQpKX0oci5idWYpfX0pLHJ9ZnVuY3Rpb24gYygpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBCdWZmZXJ9ZnVuY3Rpb24gcygpe2lmKCFjKCkpdGhyb3cgbmV3IEVycm9yKFwiQnVmZmVyIGdsb2JhbCBkb2VzIG5vdCBleGlzdDsgcGxlYXNlIHVzZSB3ZWJwYWNrIGlmIHlvdSBuZWVkIHRvIHBhcnNlIEJ1ZmZlcnMgaW4gdGhlIGJyb3dzZXIuXCIpfWZ1bmN0aW9uIGwobil7cygpO3ZhciB0PWkoZnVuY3Rpb24obix0KXtyZXR1cm4gbit0fSwwLG4pO2lmKHQlOCE9MCl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgYml0cyBbXCIrbi5qb2luKFwiLCBcIikrXCJdIGFkZCB1cCB0byBcIit0K1wiIHdoaWNoIGlzIG5vdCBhbiBldmVuIG51bWJlciBvZiBieXRlczsgdGhlIHRvdGFsIHNob3VsZCBiZSBkaXZpc2libGUgYnkgOFwiKTt2YXIgcix1PXQvOCxvPShyPWZ1bmN0aW9uKG4pe3JldHVybiBuPjQ4fSxpKGZ1bmN0aW9uKG4sdCl7cmV0dXJuIG58fChyKHQpP3Q6bil9LG51bGwsbikpO2lmKG8pdGhyb3cgbmV3IEVycm9yKG8rXCIgYml0IHJhbmdlIHJlcXVlc3RlZCBleGNlZWRzIDQ4IGJpdCAoNiBieXRlKSBOdW1iZXIgbWF4LlwiKTtyZXR1cm4gbmV3IGUoZnVuY3Rpb24odCxyKXt2YXIgZT11K3I7cmV0dXJuIGU+dC5sZW5ndGg/eChyLHUudG9TdHJpbmcoKStcIiBieXRlc1wiKTpiKGUsaShmdW5jdGlvbihuLHQpe3ZhciByPWYodCxuLmJ1Zik7cmV0dXJue2NvbGw6bi5jb2xsLmNvbmNhdChyLnYpLGJ1ZjpyLmJ1Zn19LHtjb2xsOltdLGJ1Zjp0LnNsaWNlKHIsZSl9LG4pLmNvbGwpfSl9ZnVuY3Rpb24gaChuLHQpe3JldHVybiBuZXcgZShmdW5jdGlvbihyLGUpe3JldHVybiBzKCksZSt0PnIubGVuZ3RoP3goZSx0K1wiIGJ5dGVzIGZvciBcIituKTpiKGUrdCxyLnNsaWNlKGUsZSt0KSl9KX1mdW5jdGlvbiBwKG4sdCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mKHI9dCl8fE1hdGguZmxvb3IocikhPT1yfHx0PDB8fHQ+Nil0aHJvdyBuZXcgRXJyb3IobitcIiByZXF1aXJlcyBpbnRlZ2VyIGxlbmd0aCBpbiByYW5nZSBbMCwgNl0uXCIpO3ZhciByfWZ1bmN0aW9uIGQobil7cmV0dXJuIHAoXCJ1aW50QkVcIixuKSxoKFwidWludEJFKFwiK24rXCIpXCIsbikubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnJlYWRVSW50QkUoMCxuKX0pfWZ1bmN0aW9uIHYobil7cmV0dXJuIHAoXCJ1aW50TEVcIixuKSxoKFwidWludExFKFwiK24rXCIpXCIsbikubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnJlYWRVSW50TEUoMCxuKX0pfWZ1bmN0aW9uIGcobil7cmV0dXJuIHAoXCJpbnRCRVwiLG4pLGgoXCJpbnRCRShcIituK1wiKVwiLG4pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5yZWFkSW50QkUoMCxuKX0pfWZ1bmN0aW9uIG0obil7cmV0dXJuIHAoXCJpbnRMRVwiLG4pLGgoXCJpbnRMRShcIituK1wiKVwiLG4pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5yZWFkSW50TEUoMCxuKX0pfWZ1bmN0aW9uIHkobil7cmV0dXJuIG4gaW5zdGFuY2VvZiBlfWZ1bmN0aW9uIEUobil7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09e30udG9TdHJpbmcuY2FsbChuKX1mdW5jdGlvbiB3KG4pe3JldHVybiBjKCkmJkJ1ZmZlci5pc0J1ZmZlcihuKX1mdW5jdGlvbiBiKG4sdCl7cmV0dXJue3N0YXR1czohMCxpbmRleDpuLHZhbHVlOnQsZnVydGhlc3Q6LTEsZXhwZWN0ZWQ6W119fWZ1bmN0aW9uIHgobix0KXtyZXR1cm4gRSh0KXx8KHQ9W3RdKSx7c3RhdHVzOiExLGluZGV4Oi0xLHZhbHVlOm51bGwsZnVydGhlc3Q6bixleHBlY3RlZDp0fX1mdW5jdGlvbiBCKG4sdCl7aWYoIXQpcmV0dXJuIG47aWYobi5mdXJ0aGVzdD50LmZ1cnRoZXN0KXJldHVybiBuO3ZhciByPW4uZnVydGhlc3Q9PT10LmZ1cnRoZXN0P2Z1bmN0aW9uKG4sdCl7aWYoZnVuY3Rpb24oKXtpZih2b2lkIDAhPT1lLl9zdXBwb3J0c1NldClyZXR1cm4gZS5fc3VwcG9ydHNTZXQ7dmFyIG49XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFNldDtyZXR1cm4gZS5fc3VwcG9ydHNTZXQ9bixufSgpJiZBcnJheS5mcm9tKXtmb3IodmFyIHI9bmV3IFNldChuKSx1PTA7dTx0Lmxlbmd0aDt1Kyspci5hZGQodFt1XSk7dmFyIG89QXJyYXkuZnJvbShyKTtyZXR1cm4gby5zb3J0KCksb31mb3IodmFyIGk9e30sYT0wO2E8bi5sZW5ndGg7YSsrKWlbblthXV09ITA7Zm9yKHZhciBmPTA7Zjx0Lmxlbmd0aDtmKyspaVt0W2ZdXT0hMDt2YXIgYz1bXTtmb3IodmFyIHMgaW4gaSkoe30pLmhhc093blByb3BlcnR5LmNhbGwoaSxzKSYmYy5wdXNoKHMpO3JldHVybiBjLnNvcnQoKSxjfShuLmV4cGVjdGVkLHQuZXhwZWN0ZWQpOnQuZXhwZWN0ZWQ7cmV0dXJue3N0YXR1czpuLnN0YXR1cyxpbmRleDpuLmluZGV4LHZhbHVlOm4udmFsdWUsZnVydGhlc3Q6dC5mdXJ0aGVzdCxleHBlY3RlZDpyfX12YXIgaj17fTtmdW5jdGlvbiBTKG4sdCl7aWYodyhuKSlyZXR1cm57b2Zmc2V0OnQsbGluZTotMSxjb2x1bW46LTF9O24gaW4ganx8KGpbbl09e30pO2Zvcih2YXIgcj1qW25dLGU9MCx1PTAsbz0wLGk9dDtpPj0wOyl7aWYoaSBpbiByKXtlPXJbaV0ubGluZSwwPT09byYmKG89cltpXS5saW5lU3RhcnQpO2JyZWFrfShcIlxcblwiPT09bi5jaGFyQXQoaSl8fFwiXFxyXCI9PT1uLmNoYXJBdChpKSYmXCJcXG5cIiE9PW4uY2hhckF0KGkrMSkpJiYodSsrLDA9PT1vJiYobz1pKzEpKSxpLS19dmFyIGE9ZSt1LGY9dC1vO3JldHVybiByW3RdPXtsaW5lOmEsbGluZVN0YXJ0Om99LHtvZmZzZXQ6dCxsaW5lOmErMSxjb2x1bW46ZisxfX1mdW5jdGlvbiBfKG4pe2lmKCF5KG4pKXRocm93IG5ldyBFcnJvcihcIm5vdCBhIHBhcnNlcjogXCIrbil9ZnVuY3Rpb24gTChuLHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBuP24uY2hhckF0KHQpOm5bdF19ZnVuY3Rpb24gTyhuKXtpZihcIm51bWJlclwiIT10eXBlb2Ygbil0aHJvdyBuZXcgRXJyb3IoXCJub3QgYSBudW1iZXI6IFwiK24pfWZ1bmN0aW9uIGsobil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2Ygbil0aHJvdyBuZXcgRXJyb3IoXCJub3QgYSBmdW5jdGlvbjogXCIrbil9ZnVuY3Rpb24gUChuKXtpZihcInN0cmluZ1wiIT10eXBlb2Ygbil0aHJvdyBuZXcgRXJyb3IoXCJub3QgYSBzdHJpbmc6IFwiK24pfXZhciBxPTIsQT0zLEk9OCxGPTUqSSxNPTQqSSx6PVwiICBcIjtmdW5jdGlvbiBSKG4sdCl7cmV0dXJuIG5ldyBBcnJheSh0KzEpLmpvaW4obil9ZnVuY3Rpb24gVShuLHQscil7dmFyIGU9dC1uLmxlbmd0aDtyZXR1cm4gZTw9MD9uOlIocixlKStufWZ1bmN0aW9uIFcobix0LHIsZSl7cmV0dXJue2Zyb206bi10PjA/bi10OjAsdG86bityPmU/ZTpuK3J9fWZ1bmN0aW9uIEQobix0KXt2YXIgcixlLHUsbyxmLGM9dC5pbmRleCxzPWMub2Zmc2V0LGw9MTtpZihzPT09bi5sZW5ndGgpcmV0dXJuXCJHb3QgdGhlIGVuZCBvZiB0aGUgaW5wdXRcIjtpZih3KG4pKXt2YXIgaD1zLXMlSSxwPXMtaCxkPVcoaCxGLE0rSSxuLmxlbmd0aCksdj1hKGZ1bmN0aW9uKG4pe3JldHVybiBhKGZ1bmN0aW9uKG4pe3JldHVybiBVKG4udG9TdHJpbmcoMTYpLDIsXCIwXCIpfSxuKX0sZnVuY3Rpb24obix0KXt2YXIgcj1uLmxlbmd0aCxlPVtdLHU9MDtpZihyPD10KXJldHVybltuLnNsaWNlKCldO2Zvcih2YXIgbz0wO288cjtvKyspZVt1XXx8ZS5wdXNoKFtdKSxlW3VdLnB1c2gobltvXSksKG8rMSkldD09MCYmdSsrO3JldHVybiBlfShuLnNsaWNlKGQuZnJvbSxkLnRvKS50b0pTT04oKS5kYXRhLEkpKTtvPWZ1bmN0aW9uKG4pe3JldHVybiAwPT09bi5mcm9tJiYxPT09bi50bz97ZnJvbTpuLmZyb20sdG86bi50b306e2Zyb206bi5mcm9tL0ksdG86TWF0aC5mbG9vcihuLnRvL0kpfX0oZCksZT1oL0kscj0zKnAscD49NCYmKHIrPTEpLGw9Mix1PWEoZnVuY3Rpb24obil7cmV0dXJuIG4ubGVuZ3RoPD00P24uam9pbihcIiBcIik6bi5zbGljZSgwLDQpLmpvaW4oXCIgXCIpK1wiICBcIituLnNsaWNlKDQpLmpvaW4oXCIgXCIpfSx2KSwoZj0oOCooby50bz4wP28udG8tMTpvLnRvKSkudG9TdHJpbmcoMTYpLmxlbmd0aCk8MiYmKGY9Mil9ZWxzZXt2YXIgZz1uLnNwbGl0KC9cXHJcXG58W1xcblxcclxcdTIwMjhcXHUyMDI5XS8pO3I9Yy5jb2x1bW4tMSxlPWMubGluZS0xLG89VyhlLHEsQSxnLmxlbmd0aCksdT1nLnNsaWNlKG8uZnJvbSxvLnRvKSxmPW8udG8udG9TdHJpbmcoKS5sZW5ndGh9dmFyIG09ZS1vLmZyb207cmV0dXJuIHcobikmJihmPSg4KihvLnRvPjA/by50by0xOm8udG8pKS50b1N0cmluZygxNikubGVuZ3RoKTwyJiYoZj0yKSxpKGZ1bmN0aW9uKHQsZSx1KXt2YXIgaSxhPXU9PT1tLGM9YT9cIj4gXCI6ejtyZXR1cm4gaT13KG4pP1UoKDgqKG8uZnJvbSt1KSkudG9TdHJpbmcoMTYpLGYsXCIwXCIpOlUoKG8uZnJvbSt1KzEpLnRvU3RyaW5nKCksZixcIiBcIiksW10uY29uY2F0KHQsW2MraStcIiB8IFwiK2VdLGE/W3orUihcIiBcIixmKStcIiB8IFwiK1UoXCJcIixyLFwiIFwiKStSKFwiXlwiLGwpXTpbXSl9LFtdLHUpLmpvaW4oXCJcXG5cIil9ZnVuY3Rpb24gTihuLHQpe3JldHVybltcIlxcblwiLFwiLS0gUEFSU0lORyBGQUlMRUQgXCIrUihcIi1cIiw1MCksXCJcXG5cXG5cIixEKG4sdCksXCJcXG5cXG5cIiwocj10LmV4cGVjdGVkLDE9PT1yLmxlbmd0aD9cIkV4cGVjdGVkOlxcblxcblwiK3JbMF06XCJFeHBlY3RlZCBvbmUgb2YgdGhlIGZvbGxvd2luZzogXFxuXFxuXCIrci5qb2luKFwiLCBcIikpLFwiXFxuXCJdLmpvaW4oXCJcIik7dmFyIHJ9ZnVuY3Rpb24gRyhuKXtyZXR1cm4gdm9pZCAwIT09bi5mbGFncz9uLmZsYWdzOltuLmdsb2JhbD9cImdcIjpcIlwiLG4uaWdub3JlQ2FzZT9cImlcIjpcIlwiLG4ubXVsdGlsaW5lP1wibVwiOlwiXCIsbi51bmljb2RlP1widVwiOlwiXCIsbi5zdGlja3k/XCJ5XCI6XCJcIl0uam9pbihcIlwiKX1mdW5jdGlvbiBDKCl7Zm9yKHZhciBuPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSx0PW4ubGVuZ3RoLHI9MDtyPHQ7cis9MSlfKG5bcl0pO3JldHVybiBlKGZ1bmN0aW9uKHIsZSl7Zm9yKHZhciB1LG89bmV3IEFycmF5KHQpLGk9MDtpPHQ7aSs9MSl7aWYoISh1PUIobltpXS5fKHIsZSksdSkpLnN0YXR1cylyZXR1cm4gdTtvW2ldPXUudmFsdWUsZT11LmluZGV4fXJldHVybiBCKGIoZSxvKSx1KX0pfWZ1bmN0aW9uIEooKXt2YXIgbj1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7aWYoMD09PW4ubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcInNlcU1hcCBuZWVkcyBhdCBsZWFzdCBvbmUgYXJndW1lbnRcIik7dmFyIHQ9bi5wb3AoKTtyZXR1cm4gayh0KSxDLmFwcGx5KG51bGwsbikubWFwKGZ1bmN0aW9uKG4pe3JldHVybiB0LmFwcGx5KG51bGwsbil9KX1mdW5jdGlvbiBUKCl7dmFyIG49W10uc2xpY2UuY2FsbChhcmd1bWVudHMpLHQ9bi5sZW5ndGg7aWYoMD09PXQpcmV0dXJuIFkoXCJ6ZXJvIGFsdGVybmF0ZXNcIik7Zm9yKHZhciByPTA7cjx0O3IrPTEpXyhuW3JdKTtyZXR1cm4gZShmdW5jdGlvbih0LHIpe2Zvcih2YXIgZSx1PTA7dTxuLmxlbmd0aDt1Kz0xKWlmKChlPUIoblt1XS5fKHQsciksZSkpLnN0YXR1cylyZXR1cm4gZTtyZXR1cm4gZX0pfWZ1bmN0aW9uIFYobix0KXtyZXR1cm4gSChuLHQpLm9yKFgoW10pKX1mdW5jdGlvbiBIKG4sdCl7cmV0dXJuIF8obiksXyh0KSxKKG4sdC50aGVuKG4pLm1hbnkoKSxmdW5jdGlvbihuLHQpe3JldHVybltuXS5jb25jYXQodCl9KX1mdW5jdGlvbiBLKG4pe1Aobik7dmFyIHQ9XCInXCIrbitcIidcIjtyZXR1cm4gZShmdW5jdGlvbihyLGUpe3ZhciB1PWUrbi5sZW5ndGgsbz1yLnNsaWNlKGUsdSk7cmV0dXJuIG89PT1uP2IodSxvKTp4KGUsdCl9KX1mdW5jdGlvbiBRKG4sdCl7IWZ1bmN0aW9uKG4pe2lmKCEobiBpbnN0YW5jZW9mIFJlZ0V4cCkpdGhyb3cgbmV3IEVycm9yKFwibm90IGEgcmVnZXhwOiBcIituKTtmb3IodmFyIHQ9RyhuKSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBlPXQuY2hhckF0KHIpO2lmKFwiaVwiIT09ZSYmXCJtXCIhPT1lJiZcInVcIiE9PWUmJlwic1wiIT09ZSl0aHJvdyBuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIHJlZ2V4cCBmbGFnIFwiJytlKydcIjogJytuKX19KG4pLGFyZ3VtZW50cy5sZW5ndGg+PTI/Tyh0KTp0PTA7dmFyIHI9ZnVuY3Rpb24obil7cmV0dXJuIFJlZ0V4cChcIl4oPzpcIituLnNvdXJjZStcIilcIixHKG4pKX0obiksdT1cIlwiK247cmV0dXJuIGUoZnVuY3Rpb24obixlKXt2YXIgbz1yLmV4ZWMobi5zbGljZShlKSk7aWYobyl7aWYoMDw9dCYmdDw9by5sZW5ndGgpe3ZhciBpPW9bMF0sYT1vW3RdO3JldHVybiBiKGUraS5sZW5ndGgsYSl9cmV0dXJuIHgoZSxcInZhbGlkIG1hdGNoIGdyb3VwICgwIHRvIFwiK28ubGVuZ3RoK1wiKSBpbiBcIit1KX1yZXR1cm4geChlLHUpfSl9ZnVuY3Rpb24gWChuKXtyZXR1cm4gZShmdW5jdGlvbih0LHIpe3JldHVybiBiKHIsbil9KX1mdW5jdGlvbiBZKG4pe3JldHVybiBlKGZ1bmN0aW9uKHQscil7cmV0dXJuIHgocixuKX0pfWZ1bmN0aW9uIFoobil7aWYoeShuKSlyZXR1cm4gZShmdW5jdGlvbih0LHIpe3ZhciBlPW4uXyh0LHIpO3JldHVybiBlLmluZGV4PXIsZS52YWx1ZT1cIlwiLGV9KTtpZihcInN0cmluZ1wiPT10eXBlb2YgbilyZXR1cm4gWihLKG4pKTtpZihuIGluc3RhbmNlb2YgUmVnRXhwKXJldHVybiBaKFEobikpO3Rocm93IG5ldyBFcnJvcihcIm5vdCBhIHN0cmluZywgcmVnZXhwLCBvciBwYXJzZXI6IFwiK24pfWZ1bmN0aW9uICQobil7cmV0dXJuIF8obiksZShmdW5jdGlvbih0LHIpe3ZhciBlPW4uXyh0LHIpLHU9dC5zbGljZShyLGUuaW5kZXgpO3JldHVybiBlLnN0YXR1cz94KHIsJ25vdCBcIicrdSsnXCInKTpiKHIsbnVsbCl9KX1mdW5jdGlvbiBubihuKXtyZXR1cm4gayhuKSxlKGZ1bmN0aW9uKHQscil7dmFyIGU9TCh0LHIpO3JldHVybiByPHQubGVuZ3RoJiZuKGUpP2IocisxLGUpOngocixcImEgY2hhcmFjdGVyL2J5dGUgbWF0Y2hpbmcgXCIrbil9KX1mdW5jdGlvbiB0bihuLHQpe2FyZ3VtZW50cy5sZW5ndGg8MiYmKHQ9bixuPXZvaWQgMCk7dmFyIHI9ZShmdW5jdGlvbihuLGUpe3JldHVybiByLl89dCgpLl8sci5fKG4sZSl9KTtyZXR1cm4gbj9yLmRlc2Mobik6cn1mdW5jdGlvbiBybigpe3JldHVybiBZKFwiZmFudGFzeS1sYW5kL2VtcHR5XCIpfXUucGFyc2U9ZnVuY3Rpb24obil7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIG4mJiF3KG4pKXRocm93IG5ldyBFcnJvcihcIi5wYXJzZSBtdXN0IGJlIGNhbGxlZCB3aXRoIGEgc3RyaW5nIG9yIEJ1ZmZlciBhcyBpdHMgYXJndW1lbnRcIik7dmFyIHQscj10aGlzLnNraXAoYW4pLl8obiwwKTtyZXR1cm4gdD1yLnN0YXR1cz97c3RhdHVzOiEwLHZhbHVlOnIudmFsdWV9OntzdGF0dXM6ITEsaW5kZXg6UyhuLHIuZnVydGhlc3QpLGV4cGVjdGVkOnIuZXhwZWN0ZWR9LGRlbGV0ZSBqW25dLHR9LHUudHJ5UGFyc2U9ZnVuY3Rpb24obil7dmFyIHQ9dGhpcy5wYXJzZShuKTtpZih0LnN0YXR1cylyZXR1cm4gdC52YWx1ZTt2YXIgcj1OKG4sdCksZT1uZXcgRXJyb3Iocik7dGhyb3cgZS50eXBlPVwiUGFyc2ltbW9uRXJyb3JcIixlLnJlc3VsdD10LGV9LHUuYXNzZXJ0PWZ1bmN0aW9uKG4sdCl7cmV0dXJuIHRoaXMuY2hhaW4oZnVuY3Rpb24ocil7cmV0dXJuIG4ocik/WChyKTpZKHQpfSl9LHUub3I9ZnVuY3Rpb24obil7cmV0dXJuIFQodGhpcyxuKX0sdS50cmltPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLndyYXAobixuKX0sdS53cmFwPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIEoobix0aGlzLHQsZnVuY3Rpb24obix0KXtyZXR1cm4gdH0pfSx1LnRocnU9ZnVuY3Rpb24obil7cmV0dXJuIG4odGhpcyl9LHUudGhlbj1mdW5jdGlvbihuKXtyZXR1cm4gXyhuKSxDKHRoaXMsbikubWFwKGZ1bmN0aW9uKG4pe3JldHVybiBuWzFdfSl9LHUubWFueT1mdW5jdGlvbigpe3ZhciBuPXRoaXM7cmV0dXJuIGUoZnVuY3Rpb24odCxyKXtmb3IodmFyIGU9W10sdT12b2lkIDA7Oyl7aWYoISh1PUIobi5fKHQsciksdSkpLnN0YXR1cylyZXR1cm4gQihiKHIsZSksdSk7aWYocj09PXUuaW5kZXgpdGhyb3cgbmV3IEVycm9yKFwiaW5maW5pdGUgbG9vcCBkZXRlY3RlZCBpbiAubWFueSgpIHBhcnNlciAtLS0gY2FsbGluZyAubWFueSgpIG9uIGEgcGFyc2VyIHdoaWNoIGNhbiBhY2NlcHQgemVybyBjaGFyYWN0ZXJzIGlzIHVzdWFsbHkgdGhlIGNhdXNlXCIpO3I9dS5pbmRleCxlLnB1c2godS52YWx1ZSl9fSl9LHUudGllV2l0aD1mdW5jdGlvbihuKXtyZXR1cm4gUChuKSx0aGlzLm1hcChmdW5jdGlvbih0KXtpZihmdW5jdGlvbihuKXtpZighRShuKSl0aHJvdyBuZXcgRXJyb3IoXCJub3QgYW4gYXJyYXk6IFwiK24pfSh0KSx0Lmxlbmd0aCl7UCh0WzBdKTtmb3IodmFyIHI9dFswXSxlPTE7ZTx0Lmxlbmd0aDtlKyspUCh0W2VdKSxyKz1uK3RbZV07cmV0dXJuIHJ9cmV0dXJuXCJcIn0pfSx1LnRpZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRpZVdpdGgoXCJcIil9LHUudGltZXM9ZnVuY3Rpb24obix0KXt2YXIgcj10aGlzO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPDImJih0PW4pLE8obiksTyh0KSxlKGZ1bmN0aW9uKGUsdSl7Zm9yKHZhciBvPVtdLGk9dm9pZCAwLGE9dm9pZCAwLGY9MDtmPG47Zis9MSl7aWYoYT1CKGk9ci5fKGUsdSksYSksIWkuc3RhdHVzKXJldHVybiBhO3U9aS5pbmRleCxvLnB1c2goaS52YWx1ZSl9Zm9yKDtmPHQmJihhPUIoaT1yLl8oZSx1KSxhKSxpLnN0YXR1cyk7Zis9MSl1PWkuaW5kZXgsby5wdXNoKGkudmFsdWUpO3JldHVybiBCKGIodSxvKSxhKX0pfSx1LnJlc3VsdD1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gbn0pfSx1LmF0TW9zdD1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy50aW1lcygwLG4pfSx1LmF0TGVhc3Q9ZnVuY3Rpb24obil7cmV0dXJuIEoodGhpcy50aW1lcyhuKSx0aGlzLm1hbnkoKSxmdW5jdGlvbihuLHQpe3JldHVybiBuLmNvbmNhdCh0KX0pfSx1Lm1hcD1mdW5jdGlvbihuKXtrKG4pO3ZhciB0PXRoaXM7cmV0dXJuIGUoZnVuY3Rpb24ocixlKXt2YXIgdT10Ll8ocixlKTtyZXR1cm4gdS5zdGF0dXM/QihiKHUuaW5kZXgsbih1LnZhbHVlKSksdSk6dX0pfSx1LmNvbnRyYW1hcD1mdW5jdGlvbihuKXtrKG4pO3ZhciB0PXRoaXM7cmV0dXJuIGUoZnVuY3Rpb24ocixlKXt2YXIgdT10LnBhcnNlKG4oci5zbGljZShlKSkpO3JldHVybiB1LnN0YXR1cz9iKGUrci5sZW5ndGgsdS52YWx1ZSk6dX0pfSx1LnByb21hcD1mdW5jdGlvbihuLHQpe3JldHVybiBrKG4pLGsodCksdGhpcy5jb250cmFtYXAobikubWFwKHQpfSx1LnNraXA9ZnVuY3Rpb24obil7cmV0dXJuIEModGhpcyxuKS5tYXAoZnVuY3Rpb24obil7cmV0dXJuIG5bMF19KX0sdS5tYXJrPWZ1bmN0aW9uKCl7cmV0dXJuIEooZW4sdGhpcyxlbixmdW5jdGlvbihuLHQscil7cmV0dXJue3N0YXJ0Om4sdmFsdWU6dCxlbmQ6cn19KX0sdS5ub2RlPWZ1bmN0aW9uKG4pe3JldHVybiBKKGVuLHRoaXMsZW4sZnVuY3Rpb24odCxyLGUpe3JldHVybntuYW1lOm4sdmFsdWU6cixzdGFydDp0LGVuZDplfX0pfSx1LnNlcEJ5PWZ1bmN0aW9uKG4pe3JldHVybiBWKHRoaXMsbil9LHUuc2VwQnkxPWZ1bmN0aW9uKG4pe3JldHVybiBIKHRoaXMsbil9LHUubG9va2FoZWFkPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnNraXAoWihuKSl9LHUubm90Rm9sbG93ZWRCeT1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5za2lwKCQobikpfSx1LmRlc2M9ZnVuY3Rpb24obil7RShuKXx8KG49W25dKTt2YXIgdD10aGlzO3JldHVybiBlKGZ1bmN0aW9uKHIsZSl7dmFyIHU9dC5fKHIsZSk7cmV0dXJuIHUuc3RhdHVzfHwodS5leHBlY3RlZD1uKSx1fSl9LHUuZmFsbGJhY2s9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMub3IoWChuKSl9LHUuYXA9ZnVuY3Rpb24obil7cmV0dXJuIEoobix0aGlzLGZ1bmN0aW9uKG4sdCl7cmV0dXJuIG4odCl9KX0sdS5jaGFpbj1mdW5jdGlvbihuKXt2YXIgdD10aGlzO3JldHVybiBlKGZ1bmN0aW9uKHIsZSl7dmFyIHU9dC5fKHIsZSk7cmV0dXJuIHUuc3RhdHVzP0Iobih1LnZhbHVlKS5fKHIsdS5pbmRleCksdSk6dX0pfSx1LmNvbmNhdD11Lm9yLHUuZW1wdHk9cm4sdS5vZj1YLHVbXCJmYW50YXN5LWxhbmQvYXBcIl09dS5hcCx1W1wiZmFudGFzeS1sYW5kL2NoYWluXCJdPXUuY2hhaW4sdVtcImZhbnRhc3ktbGFuZC9jb25jYXRcIl09dS5jb25jYXQsdVtcImZhbnRhc3ktbGFuZC9lbXB0eVwiXT11LmVtcHR5LHVbXCJmYW50YXN5LWxhbmQvb2ZcIl09dS5vZix1W1wiZmFudGFzeS1sYW5kL21hcFwiXT11Lm1hcDt2YXIgZW49ZShmdW5jdGlvbihuLHQpe3JldHVybiBiKHQsUyhuLHQpKX0pLHVuPWUoZnVuY3Rpb24obix0KXtyZXR1cm4gdD49bi5sZW5ndGg/eCh0LFwiYW55IGNoYXJhY3Rlci9ieXRlXCIpOmIodCsxLEwobix0KSl9KSxvbj1lKGZ1bmN0aW9uKG4sdCl7cmV0dXJuIGIobi5sZW5ndGgsbi5zbGljZSh0KSl9KSxhbj1lKGZ1bmN0aW9uKG4sdCl7cmV0dXJuIHQ8bi5sZW5ndGg/eCh0LFwiRU9GXCIpOmIodCxudWxsKX0pLGZuPVEoL1swLTldLykuZGVzYyhcImEgZGlnaXRcIiksY249USgvWzAtOV0qLykuZGVzYyhcIm9wdGlvbmFsIGRpZ2l0c1wiKSxzbj1RKC9bYS16XS9pKS5kZXNjKFwiYSBsZXR0ZXJcIiksbG49USgvW2Etel0qL2kpLmRlc2MoXCJvcHRpb25hbCBsZXR0ZXJzXCIpLGhuPVEoL1xccyovKS5kZXNjKFwib3B0aW9uYWwgd2hpdGVzcGFjZVwiKSxwbj1RKC9cXHMrLykuZGVzYyhcIndoaXRlc3BhY2VcIiksZG49SyhcIlxcclwiKSx2bj1LKFwiXFxuXCIpLGduPUsoXCJcXHJcXG5cIiksbW49VChnbix2bixkbikuZGVzYyhcIm5ld2xpbmVcIikseW49VChtbixhbik7ZS5hbGw9b24sZS5hbHQ9VCxlLmFueT11bixlLmNyPWRuLGUuY3JlYXRlTGFuZ3VhZ2U9ZnVuY3Rpb24obil7dmFyIHQ9e307Zm9yKHZhciByIGluIG4pKHt9KS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4scikmJmZ1bmN0aW9uKHIpe3Rbcl09dG4oZnVuY3Rpb24oKXtyZXR1cm4gbltyXSh0KX0pfShyKTtyZXR1cm4gdH0sZS5jcmxmPWduLGUuY3VzdG9tPWZ1bmN0aW9uKG4pe3JldHVybiBlKG4oYix4KSl9LGUuZGlnaXQ9Zm4sZS5kaWdpdHM9Y24sZS5lbXB0eT1ybixlLmVuZD15bixlLmVvZj1hbixlLmZhaWw9WSxlLmZvcm1hdEVycm9yPU4sZS5pbmRleD1lbixlLmlzUGFyc2VyPXksZS5sYXp5PXRuLGUubGV0dGVyPXNuLGUubGV0dGVycz1sbixlLmxmPXZuLGUubG9va2FoZWFkPVosZS5tYWtlRmFpbHVyZT14LGUubWFrZVN1Y2Nlc3M9YixlLm5ld2xpbmU9bW4sZS5ub25lT2Y9ZnVuY3Rpb24obil7cmV0dXJuIG5uKGZ1bmN0aW9uKHQpe3JldHVybiBuLmluZGV4T2YodCk8MH0pLmRlc2MoXCJub25lIG9mICdcIituK1wiJ1wiKX0sZS5ub3RGb2xsb3dlZEJ5PSQsZS5vZj1YLGUub25lT2Y9ZnVuY3Rpb24obil7Zm9yKHZhciB0PW4uc3BsaXQoXCJcIikscj0wO3I8dC5sZW5ndGg7cisrKXRbcl09XCInXCIrdFtyXStcIidcIjtyZXR1cm4gbm4oZnVuY3Rpb24odCl7cmV0dXJuIG4uaW5kZXhPZih0KT49MH0pLmRlc2ModCl9LGUub3B0V2hpdGVzcGFjZT1obixlLlBhcnNlcj1lLGUucmFuZ2U9ZnVuY3Rpb24obix0KXtyZXR1cm4gbm4oZnVuY3Rpb24ocil7cmV0dXJuIG48PXImJnI8PXR9KS5kZXNjKG4rXCItXCIrdCl9LGUucmVnZXg9USxlLnJlZ2V4cD1RLGUuc2VwQnk9VixlLnNlcEJ5MT1ILGUuc2VxPUMsZS5zZXFNYXA9SixlLnNlcU9iaj1mdW5jdGlvbigpe2Zvcih2YXIgbix0PXt9LHI9MCx1PShuPWFyZ3VtZW50cyxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChuKSksbz11Lmxlbmd0aCxpPTA7aTxvO2krPTEpe3ZhciBhPXVbaV07aWYoIXkoYSkpe2lmKEUoYSkmJjI9PT1hLmxlbmd0aCYmXCJzdHJpbmdcIj09dHlwZW9mIGFbMF0mJnkoYVsxXSkpe3ZhciBmPWFbMF07aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZikpdGhyb3cgbmV3IEVycm9yKFwic2VxT2JqOiBkdXBsaWNhdGUga2V5IFwiK2YpO3RbZl09ITAscisrO2NvbnRpbnVlfXRocm93IG5ldyBFcnJvcihcInNlcU9iaiBhcmd1bWVudHMgbXVzdCBiZSBwYXJzZXJzIG9yIFtzdHJpbmcsIHBhcnNlcl0gYXJyYXkgcGFpcnMuXCIpfX1pZigwPT09cil0aHJvdyBuZXcgRXJyb3IoXCJzZXFPYmogZXhwZWN0cyBhdCBsZWFzdCBvbmUgbmFtZWQgcGFyc2VyLCBmb3VuZCB6ZXJvXCIpO3JldHVybiBlKGZ1bmN0aW9uKG4sdCl7Zm9yKHZhciByLGU9e30saT0wO2k8bztpKz0xKXt2YXIgYSxmO2lmKEUodVtpXSk/KGE9dVtpXVswXSxmPXVbaV1bMV0pOihhPW51bGwsZj11W2ldKSwhKHI9QihmLl8obix0KSxyKSkuc3RhdHVzKXJldHVybiByO2EmJihlW2FdPXIudmFsdWUpLHQ9ci5pbmRleH1yZXR1cm4gQihiKHQsZSkscil9KX0sZS5zdHJpbmc9SyxlLnN1Y2NlZWQ9WCxlLnRha2VXaGlsZT1mdW5jdGlvbihuKXtyZXR1cm4gayhuKSxlKGZ1bmN0aW9uKHQscil7Zm9yKHZhciBlPXI7ZTx0Lmxlbmd0aCYmbihMKHQsZSkpOyllKys7cmV0dXJuIGIoZSx0LnNsaWNlKHIsZSkpfSl9LGUudGVzdD1ubixlLndoaXRlc3BhY2U9cG4sZVtcImZhbnRhc3ktbGFuZC9lbXB0eVwiXT1ybixlW1wiZmFudGFzeS1sYW5kL29mXCJdPVgsZS5CaW5hcnk9e2JpdFNlcTpsLGJpdFNlcU9iajpmdW5jdGlvbihuKXtzKCk7dmFyIHQ9e30scj0wLGU9YShmdW5jdGlvbihuKXtpZihFKG4pKXt2YXIgZT1uO2lmKDIhPT1lLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJbXCIrZS5qb2luKFwiLCBcIikrXCJdIHNob3VsZCBiZSBsZW5ndGggMiwgZ290IGxlbmd0aCBcIitlLmxlbmd0aCk7aWYoUChlWzBdKSxPKGVbMV0pLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGVbMF0pKXRocm93IG5ldyBFcnJvcihcImR1cGxpY2F0ZSBrZXkgaW4gYml0U2VxT2JqOiBcIitlWzBdKTtyZXR1cm4gdFtlWzBdXT0hMCxyKyssZX1yZXR1cm4gTyhuKSxbbnVsbCxuXX0sbik7aWYocjwxKXRocm93IG5ldyBFcnJvcihcImJpdFNlcU9iaiBleHBlY3RzIGF0IGxlYXN0IG9uZSBuYW1lZCBwYWlyLCBnb3QgW1wiK24uam9pbihcIiwgXCIpK1wiXVwiKTt2YXIgdT1hKGZ1bmN0aW9uKG4pe3JldHVybiBuWzBdfSxlKTtyZXR1cm4gbChhKGZ1bmN0aW9uKG4pe3JldHVybiBuWzFdfSxlKSkubWFwKGZ1bmN0aW9uKG4pe3JldHVybiBpKGZ1bmN0aW9uKG4sdCl7cmV0dXJuIG51bGwhPT10WzBdJiYoblt0WzBdXT10WzFdKSxufSx7fSxhKGZ1bmN0aW9uKHQscil7cmV0dXJuW3QsbltyXV19LHUpKX0pfSxieXRlOmZ1bmN0aW9uKG4pe2lmKHMoKSxPKG4pLG4+MjU1KXRocm93IG5ldyBFcnJvcihcIlZhbHVlIHNwZWNpZmllZCB0byBieXRlIGNvbnN0cnVjdG9yIChcIituK1wiPTB4XCIrbi50b1N0cmluZygxNikrXCIpIGlzIGxhcmdlciBpbiB2YWx1ZSB0aGFuIGEgc2luZ2xlIGJ5dGUuXCIpO3ZhciB0PShuPjE1P1wiMHhcIjpcIjB4MFwiKStuLnRvU3RyaW5nKDE2KTtyZXR1cm4gZShmdW5jdGlvbihyLGUpe3ZhciB1PUwocixlKTtyZXR1cm4gdT09PW4/YihlKzEsdSk6eChlLHQpfSl9LGJ1ZmZlcjpmdW5jdGlvbihuKXtyZXR1cm4gaChcImJ1ZmZlclwiLG4pLm1hcChmdW5jdGlvbihuKXtyZXR1cm4gQnVmZmVyLmZyb20obil9KX0sZW5jb2RlZFN0cmluZzpmdW5jdGlvbihuLHQpe3JldHVybiBoKFwic3RyaW5nXCIsdCkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvU3RyaW5nKG4pfSl9LHVpbnRCRTpkLHVpbnQ4QkU6ZCgxKSx1aW50MTZCRTpkKDIpLHVpbnQzMkJFOmQoNCksdWludExFOnYsdWludDhMRTp2KDEpLHVpbnQxNkxFOnYoMiksdWludDMyTEU6dig0KSxpbnRCRTpnLGludDhCRTpnKDEpLGludDE2QkU6ZygyKSxpbnQzMkJFOmcoNCksaW50TEU6bSxpbnQ4TEU6bSgxKSxpbnQxNkxFOm0oMiksaW50MzJMRTptKDQpLGZsb2F0QkU6aChcImZsb2F0QkVcIiw0KS5tYXAoZnVuY3Rpb24obil7cmV0dXJuIG4ucmVhZEZsb2F0QkUoMCl9KSxmbG9hdExFOmgoXCJmbG9hdExFXCIsNCkubWFwKGZ1bmN0aW9uKG4pe3JldHVybiBuLnJlYWRGbG9hdExFKDApfSksZG91YmxlQkU6aChcImRvdWJsZUJFXCIsOCkubWFwKGZ1bmN0aW9uKG4pe3JldHVybiBuLnJlYWREb3VibGVCRSgwKX0pLGRvdWJsZUxFOmgoXCJkb3VibGVMRVwiLDgpLm1hcChmdW5jdGlvbihuKXtyZXR1cm4gbi5yZWFkRG91YmxlTEUoMCl9KX0sbi5leHBvcnRzPWV9XSl9KTsiLCAibW9kdWxlLmV4cG9ydHMgPSAoKSA9PiB7XG5cdC8vIGh0dHBzOi8vbXRocy5iZS9lbW9qaVxuXHRyZXR1cm4gLyg/OlsjKjAtOV1cXHVGRTBGP1xcdTIwRTN8W1xceEE5XFx4QUVcXHUyMDNDXFx1MjA0OVxcdTIxMjJcXHUyMTM5XFx1MjE5NC1cXHUyMTk5XFx1MjFBOVxcdTIxQUFcXHUyMzFBXFx1MjMxQlxcdTIzMjhcXHUyM0NGXFx1MjNFRC1cXHUyM0VGXFx1MjNGMVxcdTIzRjJcXHUyM0Y4LVxcdTIzRkFcXHUyNEMyXFx1MjVBQVxcdTI1QUJcXHUyNUI2XFx1MjVDMFxcdTI1RkJcXHUyNUZDXFx1MjVGRVxcdTI2MDAtXFx1MjYwNFxcdTI2MEVcXHUyNjExXFx1MjYxNFxcdTI2MTVcXHUyNjE4XFx1MjYyMFxcdTI2MjJcXHUyNjIzXFx1MjYyNlxcdTI2MkFcXHUyNjJFXFx1MjYyRlxcdTI2MzgtXFx1MjYzQVxcdTI2NDBcXHUyNjQyXFx1MjY0OC1cXHUyNjUzXFx1MjY1RlxcdTI2NjBcXHUyNjYzXFx1MjY2NVxcdTI2NjZcXHUyNjY4XFx1MjY3QlxcdTI2N0VcXHUyNjdGXFx1MjY5MlxcdTI2OTQtXFx1MjY5N1xcdTI2OTlcXHUyNjlCXFx1MjY5Q1xcdTI2QTBcXHUyNkE3XFx1MjZBQVxcdTI2QjBcXHUyNkIxXFx1MjZCRFxcdTI2QkVcXHUyNkM0XFx1MjZDOFxcdTI2Q0ZcXHUyNkQxXFx1MjZEM1xcdTI2RTlcXHUyNkYwLVxcdTI2RjVcXHUyNkY3XFx1MjZGOFxcdTI2RkFcXHUyNzAyXFx1MjcwOFxcdTI3MDlcXHUyNzBGXFx1MjcxMlxcdTI3MTRcXHUyNzE2XFx1MjcxRFxcdTI3MjFcXHUyNzMzXFx1MjczNFxcdTI3NDRcXHUyNzQ3XFx1Mjc1N1xcdTI3NjNcXHUyN0ExXFx1MjkzNFxcdTI5MzVcXHUyQjA1LVxcdTJCMDdcXHUyQjFCXFx1MkIxQ1xcdTJCNTVcXHUzMDMwXFx1MzAzRFxcdTMyOTdcXHUzMjk5XVxcdUZFMEY/fFtcXHUyNjFEXFx1MjcwQ1xcdTI3MERdKD86XFx1RkUwRnxcXHVEODNDW1xcdURGRkItXFx1REZGRl0pP3xbXFx1MjcwQVxcdTI3MEJdKD86XFx1RDgzQ1tcXHVERkZCLVxcdURGRkZdKT98W1xcdTIzRTktXFx1MjNFQ1xcdTIzRjBcXHUyM0YzXFx1MjVGRFxcdTI2OTNcXHUyNkExXFx1MjZBQlxcdTI2QzVcXHUyNkNFXFx1MjZENFxcdTI2RUFcXHUyNkZEXFx1MjcwNVxcdTI3MjhcXHUyNzRDXFx1Mjc0RVxcdTI3NTMtXFx1Mjc1NVxcdTI3OTUtXFx1Mjc5N1xcdTI3QjBcXHUyN0JGXFx1MkI1MF18XFx1MjZGOSg/OlxcdUZFMEZ8XFx1RDgzQ1tcXHVERkZCLVxcdURGRkZdKT8oPzpcXHUyMDBEW1xcdTI2NDBcXHUyNjQyXVxcdUZFMEY/KT98XFx1Mjc2NFxcdUZFMEY/KD86XFx1MjAwRCg/OlxcdUQ4M0RcXHVERDI1fFxcdUQ4M0VcXHVERTc5KSk/fFxcdUQ4M0MoPzpbXFx1REMwNFxcdURENzBcXHVERDcxXFx1REQ3RVxcdUREN0ZcXHVERTAyXFx1REUzN1xcdURGMjFcXHVERjI0LVxcdURGMkNcXHVERjM2XFx1REY3RFxcdURGOTZcXHVERjk3XFx1REY5OS1cXHVERjlCXFx1REY5RVxcdURGOUZcXHVERkNEXFx1REZDRVxcdURGRDQtXFx1REZERlxcdURGRjVcXHVERkY3XVxcdUZFMEY/fFtcXHVERjg1XFx1REZDMlxcdURGQzddKD86XFx1RDgzQ1tcXHVERkZCLVxcdURGRkZdKT98W1xcdURGQzNcXHVERkM0XFx1REZDQV0oPzpcXHVEODNDW1xcdURGRkItXFx1REZGRl0pPyg/OlxcdTIwMERbXFx1MjY0MFxcdTI2NDJdXFx1RkUwRj8pP3xbXFx1REZDQlxcdURGQ0NdKD86XFx1RkUwRnxcXHVEODNDW1xcdURGRkItXFx1REZGRl0pPyg/OlxcdTIwMERbXFx1MjY0MFxcdTI2NDJdXFx1RkUwRj8pP3xbXFx1RENDRlxcdUREOEVcXHVERDkxLVxcdUREOUFcXHVERTAxXFx1REUxQVxcdURFMkZcXHVERTMyLVxcdURFMzZcXHVERTM4LVxcdURFM0FcXHVERTUwXFx1REU1MVxcdURGMDAtXFx1REYyMFxcdURGMkQtXFx1REYzNVxcdURGMzctXFx1REY3Q1xcdURGN0UtXFx1REY4NFxcdURGODYtXFx1REY5M1xcdURGQTAtXFx1REZDMVxcdURGQzVcXHVERkM2XFx1REZDOFxcdURGQzlcXHVERkNGLVxcdURGRDNcXHVERkUwLVxcdURGRjBcXHVERkY4LVxcdURGRkZdfFxcdURERTZcXHVEODNDW1xcdURERTgtXFx1RERFQ1xcdURERUVcXHVEREYxXFx1RERGMlxcdURERjRcXHVEREY2LVxcdURERkFcXHVEREZDXFx1RERGRFxcdURERkZdfFxcdURERTdcXHVEODNDW1xcdURERTZcXHVEREU3XFx1RERFOS1cXHVEREVGXFx1RERGMS1cXHVEREY0XFx1RERGNi1cXHVEREY5XFx1RERGQlxcdURERkNcXHVEREZFXFx1RERGRl18XFx1RERFOFxcdUQ4M0NbXFx1RERFNlxcdURERThcXHVEREU5XFx1RERFQi1cXHVEREVFXFx1RERGMC1cXHVEREY1XFx1RERGN1xcdURERkEtXFx1RERGRl18XFx1RERFOVxcdUQ4M0NbXFx1RERFQVxcdURERUNcXHVEREVGXFx1RERGMFxcdURERjJcXHVEREY0XFx1RERGRl18XFx1RERFQVxcdUQ4M0NbXFx1RERFNlxcdURERThcXHVEREVBXFx1RERFQ1xcdURERURcXHVEREY3LVxcdURERkFdfFxcdURERUJcXHVEODNDW1xcdURERUUtXFx1RERGMFxcdURERjJcXHVEREY0XFx1RERGN118XFx1RERFQ1xcdUQ4M0NbXFx1RERFNlxcdURERTdcXHVEREU5LVxcdURERUVcXHVEREYxLVxcdURERjNcXHVEREY1LVxcdURERkFcXHVEREZDXFx1RERGRV18XFx1RERFRFxcdUQ4M0NbXFx1RERGMFxcdURERjJcXHVEREYzXFx1RERGN1xcdURERjlcXHVEREZBXXxcXHVEREVFXFx1RDgzQ1tcXHVEREU4LVxcdURERUFcXHVEREYxLVxcdURERjRcXHVEREY2LVxcdURERjldfFxcdURERUZcXHVEODNDW1xcdURERUFcXHVEREYyXFx1RERGNFxcdURERjVdfFxcdURERjBcXHVEODNDW1xcdURERUFcXHVEREVDLVxcdURERUVcXHVEREYyXFx1RERGM1xcdURERjVcXHVEREY3XFx1RERGQ1xcdURERkVcXHVEREZGXXxcXHVEREYxXFx1RDgzQ1tcXHVEREU2LVxcdURERThcXHVEREVFXFx1RERGMFxcdURERjctXFx1RERGQlxcdURERkVdfFxcdURERjJcXHVEODNDW1xcdURERTZcXHVEREU4LVxcdURERURcXHVEREYwLVxcdURERkZdfFxcdURERjNcXHVEODNDW1xcdURERTZcXHVEREU4XFx1RERFQS1cXHVEREVDXFx1RERFRVxcdURERjFcXHVEREY0XFx1RERGNVxcdURERjdcXHVEREZBXFx1RERGRl18XFx1RERGNFxcdUQ4M0NcXHVEREYyfFxcdURERjVcXHVEODNDW1xcdURERTZcXHVEREVBLVxcdURERURcXHVEREYwLVxcdURERjNcXHVEREY3LVxcdURERjlcXHVEREZDXFx1RERGRV18XFx1RERGNlxcdUQ4M0NcXHVEREU2fFxcdURERjdcXHVEODNDW1xcdURERUFcXHVEREY0XFx1RERGOFxcdURERkFcXHVEREZDXXxcXHVEREY4XFx1RDgzQ1tcXHVEREU2LVxcdURERUFcXHVEREVDLVxcdURERjRcXHVEREY3LVxcdURERjlcXHVEREZCXFx1RERGRC1cXHVEREZGXXxcXHVEREY5XFx1RDgzQ1tcXHVEREU2XFx1RERFOFxcdURERTlcXHVEREVCLVxcdURERURcXHVEREVGLVxcdURERjRcXHVEREY3XFx1RERGOVxcdURERkJcXHVEREZDXFx1RERGRl18XFx1RERGQVxcdUQ4M0NbXFx1RERFNlxcdURERUNcXHVEREYyXFx1RERGM1xcdURERjhcXHVEREZFXFx1RERGRl18XFx1RERGQlxcdUQ4M0NbXFx1RERFNlxcdURERThcXHVEREVBXFx1RERFQ1xcdURERUVcXHVEREYzXFx1RERGQV18XFx1RERGQ1xcdUQ4M0NbXFx1RERFQlxcdURERjhdfFxcdURERkRcXHVEODNDXFx1RERGMHxcXHVEREZFXFx1RDgzQ1tcXHVEREVBXFx1RERGOV18XFx1RERGRlxcdUQ4M0NbXFx1RERFNlxcdURERjJcXHVEREZDXXxcXHVERkYzXFx1RkUwRj8oPzpcXHUyMDBEKD86XFx1MjZBN1xcdUZFMEY/fFxcdUQ4M0NcXHVERjA4KSk/fFxcdURGRjQoPzpcXHUyMDBEXFx1MjYyMFxcdUZFMEY/fFxcdURCNDBcXHVEQzY3XFx1REI0MFxcdURDNjJcXHVEQjQwKD86XFx1REM2NVxcdURCNDBcXHVEQzZFXFx1REI0MFxcdURDNjd8XFx1REM3M1xcdURCNDBcXHVEQzYzXFx1REI0MFxcdURDNzR8XFx1REM3N1xcdURCNDBcXHVEQzZDXFx1REI0MFxcdURDNzMpXFx1REI0MFxcdURDN0YpPyl8XFx1RDgzRCg/OltcXHVEQzNGXFx1RENGRFxcdURENDlcXHVERDRBXFx1REQ2RlxcdURENzBcXHVERDczXFx1REQ3Ni1cXHVERDc5XFx1REQ4N1xcdUREOEEtXFx1REQ4RFxcdUREQTVcXHVEREE4XFx1RERCMVxcdUREQjJcXHVEREJDXFx1RERDMi1cXHVEREM0XFx1REREMS1cXHVEREQzXFx1REREQy1cXHVERERFXFx1RERFMVxcdURERTNcXHVEREU4XFx1RERFRlxcdURERjNcXHVEREZBXFx1REVDQlxcdURFQ0QtXFx1REVDRlxcdURFRTAtXFx1REVFNVxcdURFRTlcXHVERUYwXFx1REVGM11cXHVGRTBGP3xbXFx1REM0MlxcdURDNDNcXHVEQzQ2LVxcdURDNTBcXHVEQzY2XFx1REM2N1xcdURDNkItXFx1REM2RFxcdURDNzJcXHVEQzc0LVxcdURDNzZcXHVEQzc4XFx1REM3Q1xcdURDODNcXHVEQzg1XFx1REM4RlxcdURDOTFcXHVEQ0FBXFx1REQ3QVxcdUREOTVcXHVERDk2XFx1REU0Q1xcdURFNEZcXHVERUMwXFx1REVDQ10oPzpcXHVEODNDW1xcdURGRkItXFx1REZGRl0pP3xbXFx1REM2RVxcdURDNzBcXHVEQzcxXFx1REM3M1xcdURDNzdcXHVEQzgxXFx1REM4MlxcdURDODZcXHVEQzg3XFx1REU0NS1cXHVERTQ3XFx1REU0QlxcdURFNERcXHVERTRFXFx1REVBM1xcdURFQjQtXFx1REVCNl0oPzpcXHVEODNDW1xcdURGRkItXFx1REZGRl0pPyg/OlxcdTIwMERbXFx1MjY0MFxcdTI2NDJdXFx1RkUwRj8pP3xbXFx1REQ3NFxcdUREOTBdKD86XFx1RkUwRnxcXHVEODNDW1xcdURGRkItXFx1REZGRl0pP3xbXFx1REMwMC1cXHVEQzA3XFx1REMwOS1cXHVEQzE0XFx1REMxNi1cXHVEQzNBXFx1REMzQy1cXHVEQzNFXFx1REM0MFxcdURDNDRcXHVEQzQ1XFx1REM1MS1cXHVEQzY1XFx1REM2QVxcdURDNzktXFx1REM3QlxcdURDN0QtXFx1REM4MFxcdURDODRcXHVEQzg4LVxcdURDOEVcXHVEQzkwXFx1REM5Mi1cXHVEQ0E5XFx1RENBQi1cXHVEQ0ZDXFx1RENGRi1cXHVERDNEXFx1REQ0Qi1cXHVERDRFXFx1REQ1MC1cXHVERDY3XFx1RERBNFxcdURERkItXFx1REUyRFxcdURFMkYtXFx1REUzNFxcdURFMzctXFx1REU0NFxcdURFNDgtXFx1REU0QVxcdURFODAtXFx1REVBMlxcdURFQTQtXFx1REVCM1xcdURFQjctXFx1REVCRlxcdURFQzEtXFx1REVDNVxcdURFRDAtXFx1REVEMlxcdURFRDUtXFx1REVEN1xcdURFREQtXFx1REVERlxcdURFRUJcXHVERUVDXFx1REVGNC1cXHVERUZDXFx1REZFMC1cXHVERkVCXFx1REZGMF18XFx1REMwOCg/OlxcdTIwMERcXHUyQjFCKT98XFx1REMxNSg/OlxcdTIwMERcXHVEODNFXFx1RERCQSk/fFxcdURDM0IoPzpcXHUyMDBEXFx1Mjc0NFxcdUZFMEY/KT98XFx1REM0MVxcdUZFMEY/KD86XFx1MjAwRFxcdUQ4M0RcXHVEREU4XFx1RkUwRj8pP3xcXHVEQzY4KD86XFx1MjAwRCg/OltcXHUyNjk1XFx1MjY5NlxcdTI3MDhdXFx1RkUwRj98XFx1Mjc2NFxcdUZFMEY/XFx1MjAwRFxcdUQ4M0QoPzpcXHVEQzhCXFx1MjAwRFxcdUQ4M0QpP1xcdURDNjh8XFx1RDgzQ1tcXHVERjNFXFx1REY3M1xcdURGN0NcXHVERjkzXFx1REZBNFxcdURGQThcXHVERkVCXFx1REZFRF18XFx1RDgzRCg/OltcXHVEQzY4XFx1REM2OV1cXHUyMDBEXFx1RDgzRCg/OlxcdURDNjYoPzpcXHUyMDBEXFx1RDgzRFxcdURDNjYpP3xcXHVEQzY3KD86XFx1MjAwRFxcdUQ4M0RbXFx1REM2NlxcdURDNjddKT8pfFtcXHVEQ0JCXFx1RENCQ1xcdUREMjdcXHVERDJDXFx1REU4MFxcdURFOTJdfFxcdURDNjYoPzpcXHUyMDBEXFx1RDgzRFxcdURDNjYpP3xcXHVEQzY3KD86XFx1MjAwRFxcdUQ4M0RbXFx1REM2NlxcdURDNjddKT8pfFxcdUQ4M0VbXFx1RERBRi1cXHVEREIzXFx1RERCQ1xcdUREQkRdKXxcXHVEODNDKD86XFx1REZGQig/OlxcdTIwMEQoPzpbXFx1MjY5NVxcdTI2OTZcXHUyNzA4XVxcdUZFMEY/fFxcdTI3NjRcXHVGRTBGP1xcdTIwMERcXHVEODNEKD86XFx1REM4QlxcdTIwMERcXHVEODNEKT9cXHVEQzY4XFx1RDgzQ1tcXHVERkZCLVxcdURGRkZdfFxcdUQ4M0NbXFx1REYzRVxcdURGNzNcXHVERjdDXFx1REY5M1xcdURGQTRcXHVERkE4XFx1REZFQlxcdURGRURdfFxcdUQ4M0RbXFx1RENCQlxcdURDQkNcXHVERDI3XFx1REQyQ1xcdURFODBcXHVERTkyXXxcXHVEODNFKD86W1xcdUREQUYtXFx1RERCM1xcdUREQkNcXHVEREJEXXxcXHVERDFEXFx1MjAwRFxcdUQ4M0RcXHVEQzY4XFx1RDgzQ1tcXHVERkZDLVxcdURGRkZdKSkpP3xcXHVERkZDKD86XFx1MjAwRCg/OltcXHUyNjk1XFx1MjY5NlxcdTI3MDhdXFx1RkUwRj98XFx1Mjc2NFxcdUZFMEY/XFx1MjAwRFxcdUQ4M0QoPzpcXHVEQzhCXFx1MjAwRFxcdUQ4M0QpP1xcdURDNjhcXHVEODNDW1xcdURGRkItXFx1REZGRl18XFx1RDgzQ1tcXHVERjNFXFx1REY3M1xcdURGN0NcXHVERjkzXFx1REZBNFxcdURGQThcXHVERkVCXFx1REZFRF18XFx1RDgzRFtcXHVEQ0JCXFx1RENCQ1xcdUREMjdcXHVERDJDXFx1REU4MFxcdURFOTJdfFxcdUQ4M0UoPzpbXFx1RERBRi1cXHVEREIzXFx1RERCQ1xcdUREQkRdfFxcdUREMURcXHUyMDBEXFx1RDgzRFxcdURDNjhcXHVEODNDW1xcdURGRkJcXHVERkZELVxcdURGRkZdKSkpP3xcXHVERkZEKD86XFx1MjAwRCg/OltcXHUyNjk1XFx1MjY5NlxcdTI3MDhdXFx1RkUwRj98XFx1Mjc2NFxcdUZFMEY/XFx1MjAwRFxcdUQ4M0QoPzpcXHVEQzhCXFx1MjAwRFxcdUQ4M0QpP1xcdURDNjhcXHVEODNDW1xcdURGRkItXFx1REZGRl18XFx1RDgzQ1tcXHVERjNFXFx1REY3M1xcdURGN0NcXHVERjkzXFx1REZBNFxcdURGQThcXHVERkVCXFx1REZFRF18XFx1RDgzRFtcXHVEQ0JCXFx1RENCQ1xcdUREMjdcXHVERDJDXFx1REU4MFxcdURFOTJdfFxcdUQ4M0UoPzpbXFx1RERBRi1cXHVEREIzXFx1RERCQ1xcdUREQkRdfFxcdUREMURcXHUyMDBEXFx1RDgzRFxcdURDNjhcXHVEODNDW1xcdURGRkJcXHVERkZDXFx1REZGRVxcdURGRkZdKSkpP3xcXHVERkZFKD86XFx1MjAwRCg/OltcXHUyNjk1XFx1MjY5NlxcdTI3MDhdXFx1RkUwRj98XFx1Mjc2NFxcdUZFMEY/XFx1MjAwRFxcdUQ4M0QoPzpcXHVEQzhCXFx1MjAwRFxcdUQ4M0QpP1xcdURDNjhcXHVEODNDW1xcdURGRkItXFx1REZGRl18XFx1RDgzQ1tcXHVERjNFXFx1REY3M1xcdURGN0NcXHVERjkzXFx1REZBNFxcdURGQThcXHVERkVCXFx1REZFRF18XFx1RDgzRFtcXHVEQ0JCXFx1RENCQ1xcdUREMjdcXHVERDJDXFx1REU4MFxcdURFOTJdfFxcdUQ4M0UoPzpbXFx1RERBRi1cXHVEREIzXFx1RERCQ1xcdUREQkRdfFxcdUREMURcXHUyMDBEXFx1RDgzRFxcdURDNjhcXHVEODNDW1xcdURGRkItXFx1REZGRFxcdURGRkZdKSkpP3xcXHVERkZGKD86XFx1MjAwRCg/OltcXHUyNjk1XFx1MjY5NlxcdTI3MDhdXFx1RkUwRj98XFx1Mjc2NFxcdUZFMEY/XFx1MjAwRFxcdUQ4M0QoPzpcXHVEQzhCXFx1MjAwRFxcdUQ4M0QpP1xcdURDNjhcXHVEODNDW1xcdURGRkItXFx1REZGRl18XFx1RDgzQ1tcXHVERjNFXFx1REY3M1xcdURGN0NcXHVERjkzXFx1REZBNFxcdURGQThcXHVERkVCXFx1REZFRF18XFx1RDgzRFtcXHVEQ0JCXFx1RENCQ1xcdUREMjdcXHVERDJDXFx1REU4MFxcdURFOTJdfFxcdUQ4M0UoPzpbXFx1RERBRi1cXHVEREIzXFx1RERCQ1xcdUREQkRdfFxcdUREMURcXHUyMDBEXFx1RDgzRFxcdURDNjhcXHVEODNDW1xcdURGRkItXFx1REZGRV0pKSk/KSk/fFxcdURDNjkoPzpcXHUyMDBEKD86W1xcdTI2OTVcXHUyNjk2XFx1MjcwOF1cXHVGRTBGP3xcXHUyNzY0XFx1RkUwRj9cXHUyMDBEXFx1RDgzRCg/OlxcdURDOEJcXHUyMDBEXFx1RDgzRCk/W1xcdURDNjhcXHVEQzY5XXxcXHVEODNDW1xcdURGM0VcXHVERjczXFx1REY3Q1xcdURGOTNcXHVERkE0XFx1REZBOFxcdURGRUJcXHVERkVEXXxcXHVEODNEKD86W1xcdURDQkJcXHVEQ0JDXFx1REQyN1xcdUREMkNcXHVERTgwXFx1REU5Ml18XFx1REM2Nig/OlxcdTIwMERcXHVEODNEXFx1REM2Nik/fFxcdURDNjcoPzpcXHUyMDBEXFx1RDgzRFtcXHVEQzY2XFx1REM2N10pP3xcXHVEQzY5XFx1MjAwRFxcdUQ4M0QoPzpcXHVEQzY2KD86XFx1MjAwRFxcdUQ4M0RcXHVEQzY2KT98XFx1REM2Nyg/OlxcdTIwMERcXHVEODNEW1xcdURDNjZcXHVEQzY3XSk/KSl8XFx1RDgzRVtcXHVEREFGLVxcdUREQjNcXHVEREJDXFx1RERCRF0pfFxcdUQ4M0MoPzpcXHVERkZCKD86XFx1MjAwRCg/OltcXHUyNjk1XFx1MjY5NlxcdTI3MDhdXFx1RkUwRj98XFx1Mjc2NFxcdUZFMEY/XFx1MjAwRFxcdUQ4M0QoPzpbXFx1REM2OFxcdURDNjldfFxcdURDOEJcXHUyMDBEXFx1RDgzRFtcXHVEQzY4XFx1REM2OV0pXFx1RDgzQ1tcXHVERkZCLVxcdURGRkZdfFxcdUQ4M0NbXFx1REYzRVxcdURGNzNcXHVERjdDXFx1REY5M1xcdURGQTRcXHVERkE4XFx1REZFQlxcdURGRURdfFxcdUQ4M0RbXFx1RENCQlxcdURDQkNcXHVERDI3XFx1REQyQ1xcdURFODBcXHVERTkyXXxcXHVEODNFKD86W1xcdUREQUYtXFx1RERCM1xcdUREQkNcXHVEREJEXXxcXHVERDFEXFx1MjAwRFxcdUQ4M0RbXFx1REM2OFxcdURDNjldXFx1RDgzQ1tcXHVERkZDLVxcdURGRkZdKSkpP3xcXHVERkZDKD86XFx1MjAwRCg/OltcXHUyNjk1XFx1MjY5NlxcdTI3MDhdXFx1RkUwRj98XFx1Mjc2NFxcdUZFMEY/XFx1MjAwRFxcdUQ4M0QoPzpbXFx1REM2OFxcdURDNjldfFxcdURDOEJcXHUyMDBEXFx1RDgzRFtcXHVEQzY4XFx1REM2OV0pXFx1RDgzQ1tcXHVERkZCLVxcdURGRkZdfFxcdUQ4M0NbXFx1REYzRVxcdURGNzNcXHVERjdDXFx1REY5M1xcdURGQTRcXHVERkE4XFx1REZFQlxcdURGRURdfFxcdUQ4M0RbXFx1RENCQlxcdURDQkNcXHVERDI3XFx1REQyQ1xcdURFODBcXHVERTkyXXxcXHVEODNFKD86W1xcdUREQUYtXFx1RERCM1xcdUREQkNcXHVEREJEXXxcXHVERDFEXFx1MjAwRFxcdUQ4M0RbXFx1REM2OFxcdURDNjldXFx1RDgzQ1tcXHVERkZCXFx1REZGRC1cXHVERkZGXSkpKT98XFx1REZGRCg/OlxcdTIwMEQoPzpbXFx1MjY5NVxcdTI2OTZcXHUyNzA4XVxcdUZFMEY/fFxcdTI3NjRcXHVGRTBGP1xcdTIwMERcXHVEODNEKD86W1xcdURDNjhcXHVEQzY5XXxcXHVEQzhCXFx1MjAwRFxcdUQ4M0RbXFx1REM2OFxcdURDNjldKVxcdUQ4M0NbXFx1REZGQi1cXHVERkZGXXxcXHVEODNDW1xcdURGM0VcXHVERjczXFx1REY3Q1xcdURGOTNcXHVERkE0XFx1REZBOFxcdURGRUJcXHVERkVEXXxcXHVEODNEW1xcdURDQkJcXHVEQ0JDXFx1REQyN1xcdUREMkNcXHVERTgwXFx1REU5Ml18XFx1RDgzRSg/OltcXHVEREFGLVxcdUREQjNcXHVEREJDXFx1RERCRF18XFx1REQxRFxcdTIwMERcXHVEODNEW1xcdURDNjhcXHVEQzY5XVxcdUQ4M0NbXFx1REZGQlxcdURGRkNcXHVERkZFXFx1REZGRl0pKSk/fFxcdURGRkUoPzpcXHUyMDBEKD86W1xcdTI2OTVcXHUyNjk2XFx1MjcwOF1cXHVGRTBGP3xcXHUyNzY0XFx1RkUwRj9cXHUyMDBEXFx1RDgzRCg/OltcXHVEQzY4XFx1REM2OV18XFx1REM4QlxcdTIwMERcXHVEODNEW1xcdURDNjhcXHVEQzY5XSlcXHVEODNDW1xcdURGRkItXFx1REZGRl18XFx1RDgzQ1tcXHVERjNFXFx1REY3M1xcdURGN0NcXHVERjkzXFx1REZBNFxcdURGQThcXHVERkVCXFx1REZFRF18XFx1RDgzRFtcXHVEQ0JCXFx1RENCQ1xcdUREMjdcXHVERDJDXFx1REU4MFxcdURFOTJdfFxcdUQ4M0UoPzpbXFx1RERBRi1cXHVEREIzXFx1RERCQ1xcdUREQkRdfFxcdUREMURcXHUyMDBEXFx1RDgzRFtcXHVEQzY4XFx1REM2OV1cXHVEODNDW1xcdURGRkItXFx1REZGRFxcdURGRkZdKSkpP3xcXHVERkZGKD86XFx1MjAwRCg/OltcXHUyNjk1XFx1MjY5NlxcdTI3MDhdXFx1RkUwRj98XFx1Mjc2NFxcdUZFMEY/XFx1MjAwRFxcdUQ4M0QoPzpbXFx1REM2OFxcdURDNjldfFxcdURDOEJcXHUyMDBEXFx1RDgzRFtcXHVEQzY4XFx1REM2OV0pXFx1RDgzQ1tcXHVERkZCLVxcdURGRkZdfFxcdUQ4M0NbXFx1REYzRVxcdURGNzNcXHVERjdDXFx1REY5M1xcdURGQTRcXHVERkE4XFx1REZFQlxcdURGRURdfFxcdUQ4M0RbXFx1RENCQlxcdURDQkNcXHVERDI3XFx1REQyQ1xcdURFODBcXHVERTkyXXxcXHVEODNFKD86W1xcdUREQUYtXFx1RERCM1xcdUREQkNcXHVEREJEXXxcXHVERDFEXFx1MjAwRFxcdUQ4M0RbXFx1REM2OFxcdURDNjldXFx1RDgzQ1tcXHVERkZCLVxcdURGRkVdKSkpPykpP3xcXHVEQzZGKD86XFx1MjAwRFtcXHUyNjQwXFx1MjY0Ml1cXHVGRTBGPyk/fFxcdURENzUoPzpcXHVGRTBGfFxcdUQ4M0NbXFx1REZGQi1cXHVERkZGXSk/KD86XFx1MjAwRFtcXHUyNjQwXFx1MjY0Ml1cXHVGRTBGPyk/fFxcdURFMkUoPzpcXHUyMDBEXFx1RDgzRFxcdURDQTgpP3xcXHVERTM1KD86XFx1MjAwRFxcdUQ4M0RcXHVEQ0FCKT98XFx1REUzNig/OlxcdTIwMERcXHVEODNDXFx1REYyQlxcdUZFMEY/KT8pfFxcdUQ4M0UoPzpbXFx1REQwQ1xcdUREMEZcXHVERDE4LVxcdUREMUZcXHVERDMwLVxcdUREMzRcXHVERDM2XFx1REQ3N1xcdUREQjVcXHVEREI2XFx1RERCQlxcdURERDJcXHVEREQzXFx1RERENVxcdURFQzMtXFx1REVDNVxcdURFRjBcXHVERUYyLVxcdURFRjZdKD86XFx1RDgzQ1tcXHVERkZCLVxcdURGRkZdKT98W1xcdUREMjZcXHVERDM1XFx1REQzNy1cXHVERDM5XFx1REQzRFxcdUREM0VcXHVEREI4XFx1RERCOVxcdUREQ0QtXFx1RERDRlxcdURERDRcXHVEREQ2LVxcdURERERdKD86XFx1RDgzQ1tcXHVERkZCLVxcdURGRkZdKT8oPzpcXHUyMDBEW1xcdTI2NDBcXHUyNjQyXVxcdUZFMEY/KT98W1xcdUREREVcXHVERERGXSg/OlxcdTIwMERbXFx1MjY0MFxcdTI2NDJdXFx1RkUwRj8pP3xbXFx1REQwRFxcdUREMEVcXHVERDEwLVxcdUREMTdcXHVERDIwLVxcdUREMjVcXHVERDI3LVxcdUREMkZcXHVERDNBXFx1REQzRi1cXHVERDQ1XFx1REQ0Ny1cXHVERDc2XFx1REQ3OC1cXHVEREI0XFx1RERCN1xcdUREQkFcXHVEREJDLVxcdUREQ0NcXHVEREQwXFx1RERFMC1cXHVEREZGXFx1REU3MC1cXHVERTc0XFx1REU3OC1cXHVERTdDXFx1REU4MC1cXHVERTg2XFx1REU5MC1cXHVERUFDXFx1REVCMC1cXHVERUJBXFx1REVDMC1cXHVERUMyXFx1REVEMC1cXHVERUQ5XFx1REVFMC1cXHVERUU3XXxcXHVERDNDKD86XFx1MjAwRFtcXHUyNjQwXFx1MjY0Ml1cXHVGRTBGP3xcXHVEODNDW1xcdURGRkItXFx1REZGRl0pP3xcXHVEREQxKD86XFx1MjAwRCg/OltcXHUyNjk1XFx1MjY5NlxcdTI3MDhdXFx1RkUwRj98XFx1RDgzQ1tcXHVERjNFXFx1REY3M1xcdURGN0NcXHVERjg0XFx1REY5M1xcdURGQTRcXHVERkE4XFx1REZFQlxcdURGRURdfFxcdUQ4M0RbXFx1RENCQlxcdURDQkNcXHVERDI3XFx1REQyQ1xcdURFODBcXHVERTkyXXxcXHVEODNFKD86W1xcdUREQUYtXFx1RERCM1xcdUREQkNcXHVEREJEXXxcXHVERDFEXFx1MjAwRFxcdUQ4M0VcXHVEREQxKSl8XFx1RDgzQyg/OlxcdURGRkIoPzpcXHUyMDBEKD86W1xcdTI2OTVcXHUyNjk2XFx1MjcwOF1cXHVGRTBGP3xcXHUyNzY0XFx1RkUwRj9cXHUyMDBEKD86XFx1RDgzRFxcdURDOEJcXHUyMDBEKT9cXHVEODNFXFx1REREMVxcdUQ4M0NbXFx1REZGQy1cXHVERkZGXXxcXHVEODNDW1xcdURGM0VcXHVERjczXFx1REY3Q1xcdURGODRcXHVERjkzXFx1REZBNFxcdURGQThcXHVERkVCXFx1REZFRF18XFx1RDgzRFtcXHVEQ0JCXFx1RENCQ1xcdUREMjdcXHVERDJDXFx1REU4MFxcdURFOTJdfFxcdUQ4M0UoPzpbXFx1RERBRi1cXHVEREIzXFx1RERCQ1xcdUREQkRdfFxcdUREMURcXHUyMDBEXFx1RDgzRVxcdURERDFcXHVEODNDW1xcdURGRkItXFx1REZGRl0pKSk/fFxcdURGRkMoPzpcXHUyMDBEKD86W1xcdTI2OTVcXHUyNjk2XFx1MjcwOF1cXHVGRTBGP3xcXHUyNzY0XFx1RkUwRj9cXHUyMDBEKD86XFx1RDgzRFxcdURDOEJcXHUyMDBEKT9cXHVEODNFXFx1REREMVxcdUQ4M0NbXFx1REZGQlxcdURGRkQtXFx1REZGRl18XFx1RDgzQ1tcXHVERjNFXFx1REY3M1xcdURGN0NcXHVERjg0XFx1REY5M1xcdURGQTRcXHVERkE4XFx1REZFQlxcdURGRURdfFxcdUQ4M0RbXFx1RENCQlxcdURDQkNcXHVERDI3XFx1REQyQ1xcdURFODBcXHVERTkyXXxcXHVEODNFKD86W1xcdUREQUYtXFx1RERCM1xcdUREQkNcXHVEREJEXXxcXHVERDFEXFx1MjAwRFxcdUQ4M0VcXHVEREQxXFx1RDgzQ1tcXHVERkZCLVxcdURGRkZdKSkpP3xcXHVERkZEKD86XFx1MjAwRCg/OltcXHUyNjk1XFx1MjY5NlxcdTI3MDhdXFx1RkUwRj98XFx1Mjc2NFxcdUZFMEY/XFx1MjAwRCg/OlxcdUQ4M0RcXHVEQzhCXFx1MjAwRCk/XFx1RDgzRVxcdURERDFcXHVEODNDW1xcdURGRkJcXHVERkZDXFx1REZGRVxcdURGRkZdfFxcdUQ4M0NbXFx1REYzRVxcdURGNzNcXHVERjdDXFx1REY4NFxcdURGOTNcXHVERkE0XFx1REZBOFxcdURGRUJcXHVERkVEXXxcXHVEODNEW1xcdURDQkJcXHVEQ0JDXFx1REQyN1xcdUREMkNcXHVERTgwXFx1REU5Ml18XFx1RDgzRSg/OltcXHVEREFGLVxcdUREQjNcXHVEREJDXFx1RERCRF18XFx1REQxRFxcdTIwMERcXHVEODNFXFx1REREMVxcdUQ4M0NbXFx1REZGQi1cXHVERkZGXSkpKT98XFx1REZGRSg/OlxcdTIwMEQoPzpbXFx1MjY5NVxcdTI2OTZcXHUyNzA4XVxcdUZFMEY/fFxcdTI3NjRcXHVGRTBGP1xcdTIwMEQoPzpcXHVEODNEXFx1REM4QlxcdTIwMEQpP1xcdUQ4M0VcXHVEREQxXFx1RDgzQ1tcXHVERkZCLVxcdURGRkRcXHVERkZGXXxcXHVEODNDW1xcdURGM0VcXHVERjczXFx1REY3Q1xcdURGODRcXHVERjkzXFx1REZBNFxcdURGQThcXHVERkVCXFx1REZFRF18XFx1RDgzRFtcXHVEQ0JCXFx1RENCQ1xcdUREMjdcXHVERDJDXFx1REU4MFxcdURFOTJdfFxcdUQ4M0UoPzpbXFx1RERBRi1cXHVEREIzXFx1RERCQ1xcdUREQkRdfFxcdUREMURcXHUyMDBEXFx1RDgzRVxcdURERDFcXHVEODNDW1xcdURGRkItXFx1REZGRl0pKSk/fFxcdURGRkYoPzpcXHUyMDBEKD86W1xcdTI2OTVcXHUyNjk2XFx1MjcwOF1cXHVGRTBGP3xcXHUyNzY0XFx1RkUwRj9cXHUyMDBEKD86XFx1RDgzRFxcdURDOEJcXHUyMDBEKT9cXHVEODNFXFx1REREMVxcdUQ4M0NbXFx1REZGQi1cXHVERkZFXXxcXHVEODNDW1xcdURGM0VcXHVERjczXFx1REY3Q1xcdURGODRcXHVERjkzXFx1REZBNFxcdURGQThcXHVERkVCXFx1REZFRF18XFx1RDgzRFtcXHVEQ0JCXFx1RENCQ1xcdUREMjdcXHVERDJDXFx1REU4MFxcdURFOTJdfFxcdUQ4M0UoPzpbXFx1RERBRi1cXHVEREIzXFx1RERCQ1xcdUREQkRdfFxcdUREMURcXHUyMDBEXFx1RDgzRVxcdURERDFcXHVEODNDW1xcdURGRkItXFx1REZGRl0pKSk/KSk/fFxcdURFRjEoPzpcXHVEODNDKD86XFx1REZGQig/OlxcdTIwMERcXHVEODNFXFx1REVGMlxcdUQ4M0NbXFx1REZGQy1cXHVERkZGXSk/fFxcdURGRkMoPzpcXHUyMDBEXFx1RDgzRVxcdURFRjJcXHVEODNDW1xcdURGRkJcXHVERkZELVxcdURGRkZdKT98XFx1REZGRCg/OlxcdTIwMERcXHVEODNFXFx1REVGMlxcdUQ4M0NbXFx1REZGQlxcdURGRkNcXHVERkZFXFx1REZGRl0pP3xcXHVERkZFKD86XFx1MjAwRFxcdUQ4M0VcXHVERUYyXFx1RDgzQ1tcXHVERkZCLVxcdURGRkRcXHVERkZGXSk/fFxcdURGRkYoPzpcXHUyMDBEXFx1RDgzRVxcdURFRjJcXHVEODNDW1xcdURGRkItXFx1REZGRV0pPykpPykpL2c7XG59O1xuIiwgImltcG9ydCB7IERhdGVUaW1lLCBEdXJhdGlvbiB9IGZyb20gXCJsdXhvblwiO1xuaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSBcImFwaS9yZXN1bHRcIjtcbmltcG9ydCAqIGFzIFAgZnJvbSBcInBhcnNpbW1vblwiO1xuaW1wb3J0IGVtb2ppUmVnZXggZnJvbSBcImVtb2ppLXJlZ2V4XCI7XG5pbXBvcnQgeyBRdWVyeVNldHRpbmdzIH0gZnJvbSBcInNldHRpbmdzXCI7XG5cbi8qKiBOb3JtYWxpemUgYSBkdXJhdGlvbiB0byBhbGwgb2YgdGhlIHByb3BlciB1bml0cy4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVEdXJhdGlvbihkdXI6IER1cmF0aW9uKSB7XG4gICAgaWYgKGR1ciA9PT0gdW5kZWZpbmVkIHx8IGR1ciA9PT0gbnVsbCkgcmV0dXJuIGR1cjtcblxuICAgIHJldHVybiBkdXIuc2hpZnRUbyhcInllYXJzXCIsIFwibW9udGhzXCIsIFwid2Vla3NcIiwgXCJkYXlzXCIsIFwiaG91cnNcIiwgXCJtaW51dGVzXCIsIFwic2Vjb25kc1wiLCBcIm1pbGxpc2Vjb25kc1wiKS5ub3JtYWxpemUoKTtcbn1cblxuLyoqIFN0cmlwIHRoZSB0aW1lIGNvbXBvbmVudHMgb2YgYSBkYXRlIHRpbWUgb2JqZWN0LiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmlwVGltZShkdDogRGF0ZVRpbWUpOiBEYXRlVGltZSB7XG4gICAgaWYgKGR0ID09PSBudWxsIHx8IGR0ID09PSB1bmRlZmluZWQpIHJldHVybiBkdDtcblxuICAgIHJldHVybiBEYXRlVGltZS5mcm9tT2JqZWN0KHtcbiAgICAgICAgeWVhcjogZHQueWVhcixcbiAgICAgICAgbW9udGg6IGR0Lm1vbnRoLFxuICAgICAgICBkYXk6IGR0LmRheSxcbiAgICB9KTtcbn1cblxuLyoqIFRyeSB0byBleHRyYWN0IGEgWVlZWU1NREQgZGF0ZSBmcm9tIGEgc3RyaW5nLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3REYXRlKHN0cjogc3RyaW5nKTogRGF0ZVRpbWUgfCB1bmRlZmluZWQge1xuICAgIGxldCBkYXRlTWF0Y2ggPSAvKFxcZHs0fSktKFxcZHsyfSktKFxcZHsyfSkvLmV4ZWMoc3RyKTtcbiAgICBpZiAoIWRhdGVNYXRjaCkgZGF0ZU1hdGNoID0gLyhcXGR7NH0pKFxcZHsyfSkoXFxkezJ9KS8uZXhlYyhzdHIpO1xuICAgIGlmIChkYXRlTWF0Y2gpIHtcbiAgICAgICAgbGV0IHllYXIgPSBOdW1iZXIucGFyc2VJbnQoZGF0ZU1hdGNoWzFdKTtcbiAgICAgICAgbGV0IG1vbnRoID0gTnVtYmVyLnBhcnNlSW50KGRhdGVNYXRjaFsyXSk7XG4gICAgICAgIGxldCBkYXkgPSBOdW1iZXIucGFyc2VJbnQoZGF0ZU1hdGNoWzNdKTtcbiAgICAgICAgcmV0dXJuIERhdGVUaW1lLmZyb21PYmplY3QoeyB5ZWFyLCBtb250aCwgZGF5IH0pO1xuICAgIH1cblxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbi8qKiBHZXQgdGhlIGZvbGRlciBjb250YWluaW5nIHRoZSBnaXZlbiBwYXRoIChpLmUuLCBsaWtlIGNvbXB1dGluZyAncGF0aC8uLicpLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFBhcmVudEZvbGRlcihwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBwYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG59XG5cbi8qKiBHZXQgdGhlIGZpbGUgbmFtZSBmb3IgdGhlIGZpbGUgcmVmZXJlbmNlZCBpbiB0aGUgZ2l2ZW4gcGF0aCwgYnkgc3RyaXBwaW5nIHRoZSBwYXJlbnQgZm9sZGVycy4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlTmFtZShwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBwYXRoLmluY2x1ZGVzKFwiL1wiKSA/IHBhdGguc3Vic3RyaW5nKHBhdGgubGFzdEluZGV4T2YoXCIvXCIpICsgMSkgOiBwYXRoO1xufVxuXG4vKiogR2V0IHRoZSBcInRpdGxlXCIgZm9yIGEgZmlsZSwgYnkgc3RyaXBwaW5nIG90aGVyIHBhcnRzIG9mIHRoZSBwYXRoIGFzIHdlbGwgYXMgdGhlIGV4dGVuc2lvbi4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlVGl0bGUocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAocGF0aC5pbmNsdWRlcyhcIi9cIikpIHBhdGggPSBwYXRoLnN1YnN0cmluZyhwYXRoLmxhc3RJbmRleE9mKFwiL1wiKSArIDEpO1xuICAgIGlmIChwYXRoLmVuZHNXaXRoKFwiLm1kXCIpKSBwYXRoID0gcGF0aC5zdWJzdHJpbmcoMCwgcGF0aC5sZW5ndGggLSAzKTtcbiAgICByZXR1cm4gcGF0aDtcbn1cblxuLyoqIEdldCB0aGUgZXh0ZW5zaW9uIG9mIGEgZmlsZSBmcm9tIHRoZSBmaWxlIHBhdGguICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXh0ZW5zaW9uKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKCFwYXRoLmluY2x1ZGVzKFwiLlwiKSkgcmV0dXJuIFwiXCI7XG4gICAgcmV0dXJuIHBhdGguc3Vic3RyaW5nKHBhdGgubGFzdEluZGV4T2YoXCIuXCIpICsgMSk7XG59XG5cbi8qKiBQYXJzZSBhbGwgc3VidGFncyBvdXQgb2YgdGhlIGdpdmVuIHRhZy4gSS5lLiwgI2hlbGxvL2kvYW0gd291bGQgeWllbGQgWyNoZWxsby9pL2FtLCAjaGVsbG8vaSwgI2hlbGxvXS4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0U3VidGFncyh0YWc6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICBsZXQgcmVzdWx0ID0gW3RhZ107XG4gICAgd2hpbGUgKHRhZy5pbmNsdWRlcyhcIi9cIikpIHtcbiAgICAgICAgdGFnID0gdGFnLnN1YnN0cmluZygwLCB0YWcubGFzdEluZGV4T2YoXCIvXCIpKTtcbiAgICAgICAgcmVzdWx0LnB1c2godGFnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKiogVHJ5IGNhbGxpbmcgdGhlIGdpdmVuIGZ1bmN0aW9uOyBvbiBmYWlsdXJlLCByZXR1cm4gdGhlIGVycm9yIG1lc3NhZ2UuICAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyeU9yUHJvcG9nYXRlPFQ+KGZ1bmM6ICgpID0+IFJlc3VsdDxULCBzdHJpbmc+KTogUmVzdWx0PFQsIHN0cmluZz4ge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBmdW5jKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIFJlc3VsdC5mYWlsdXJlKFwiXCIgKyBlcnJvciArIFwiXFxuXFxuXCIgKyBlcnJvci5zdGFjayk7XG4gICAgfVxufVxuXG4vKiogVHJ5IGFzeW5jaHJvbm91c2x5IGNhbGxpbmcgdGhlIGdpdmVuIGZ1bmN0aW9uOyBvbiBmYWlsdXJlLCByZXR1cm4gdGhlIGVycm9yIG1lc3NhZ2UuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXN5bmNUcnlPclByb3BvZ2F0ZTxUPihmdW5jOiAoKSA9PiBQcm9taXNlPFJlc3VsdDxULCBzdHJpbmc+Pik6IFByb21pc2U8UmVzdWx0PFQsIHN0cmluZz4+IHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gYXdhaXQgZnVuYygpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBSZXN1bHQuZmFpbHVyZShcIlwiICsgZXJyb3IgKyBcIlxcblxcblwiICsgZXJyb3Iuc3RhY2spO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFc2NhcGUgcmVnZXggY2hhcmFjdGVycyBpbiBhIHN0cmluZy5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L0d1aWRlL1JlZ3VsYXJfRXhwcmVzc2lvbnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVSZWdleChzdHI6IHN0cmluZykge1xuICAgIHJldHVybiBzdHIucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csIFwiXFxcXCQmXCIpO1xufVxuXG4vKiogQSBwYXJzaW1tb24gcGFyc2VyIHdoaWNoIGNhbm9uaWNhbGl6ZXMgdmFyaWFibGUgbmFtZXMgd2hpbGUgcHJvcGVybHkgcmVzcGVjdGluZyBlbW9qaS4gKi9cbmNvbnN0IFZBUl9OQU1FX0NBTk9OSUNBTElaRVI6IFAuUGFyc2VyPHN0cmluZz4gPSBQLmFsdChcbiAgICBQLnJlZ2V4KG5ldyBSZWdFeHAoZW1vamlSZWdleCgpLCBcIlwiKSksXG4gICAgUC5yZWdleCgvWzAtOVxccHtMZXR0ZXJ9Xy1dKy91KS5tYXAoc3RyID0+IHN0ci50b0xvY2FsZUxvd2VyQ2FzZSgpKSxcbiAgICBQLndoaXRlc3BhY2UubWFwKF8gPT4gXCItXCIpLFxuICAgIFAuYW55Lm1hcChfID0+IFwiXCIpXG4pXG4gICAgLm1hbnkoKVxuICAgIC5tYXAocmVzdWx0ID0+IHJlc3VsdC5qb2luKFwiXCIpKTtcblxuLyoqIENvbnZlcnQgYW4gYXJiaXRyYXJ5IHZhcmlhYmxlIG5hbWUgaW50byBzb21ldGhpbmcgSlMvcXVlcnkgZnJpZW5kbHkuICovXG5leHBvcnQgZnVuY3Rpb24gY2Fub25pY2FsaXplVmFyTmFtZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBWQVJfTkFNRV9DQU5PTklDQUxJWkVSLnRyeVBhcnNlKG5hbWUpO1xufVxuXG5jb25zdCBIRUFERVJfQ0FOT05JQ0FMSVpFUjogUC5QYXJzZXI8c3RyaW5nPiA9IFAuYWx0KFxuICAgIFAucmVnZXgobmV3IFJlZ0V4cChlbW9qaVJlZ2V4KCksIFwiXCIpKSxcbiAgICBQLnJlZ2V4KC9bMC05XFxwe0xldHRlcn1fLV0rL3UpLFxuICAgIFAud2hpdGVzcGFjZS5tYXAoXyA9PiBcIiBcIiksXG4gICAgUC5hbnkubWFwKF8gPT4gXCIgXCIpXG4pXG4gICAgLm1hbnkoKVxuICAgIC5tYXAocmVzdWx0ID0+IHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5qb2luKFwiXCIpLnNwbGl0KC9cXHMrLykuam9pbihcIiBcIikudHJpbSgpO1xuICAgIH0pO1xuXG4vKipcbiAqIE5vcm1hbGl6ZXMgdGhlIHRleHQgaW4gYSBoZWFkZXIgdG8gYmUgc29tZXRoaW5nIHRoYXQgaXMgYWN0dWFsbHkgbGlua2FibGUgdG8uIFRoaXMgbWltaWNzXG4gKiBob3cgT2JzaWRpYW4gZG9lcyBpdCdzIG5vcm1hbGl6YXRpb24sIGNvbGxhcHNpbmcgcmVwZWF0ZWQgc3BhY2VzIGFuZCBzdHJpcHBpbmcgb3V0IGNvbnRyb2wgY2hhcmFjdGVycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUhlYWRlckZvckxpbmsoaGVhZGVyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBIRUFERVJfQ0FOT05JQ0FMSVpFUi50cnlQYXJzZShoZWFkZXIpO1xufVxuXG4vKiogUmVuZGVyIGEgRGF0ZVRpbWUgaW4gYSBtaW5pbWFsIGZvcm1hdCB0byBzYXZlIHNwYWNlLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlck1pbmltYWxEYXRlKHRpbWU6IERhdGVUaW1lLCBzZXR0aW5nczogUXVlcnlTZXR0aW5ncywgbG9jYWxlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIElmIHRoZXJlIGlzIG5vIHJlbGV2YW50IHRpbWUgc3BlY2lmaWVkLCBmYWxsIGJhY2sgdG8ganVzdCByZW5kZXJpbmcgdGhlIGRhdGUuXG4gICAgaWYgKHRpbWUuc2Vjb25kID09IDAgJiYgdGltZS5taW51dGUgPT0gMCAmJiB0aW1lLmhvdXIgPT0gMCkge1xuICAgICAgICByZXR1cm4gdGltZS50b0xvY2FsKCkudG9Gb3JtYXQoc2V0dGluZ3MuZGVmYXVsdERhdGVGb3JtYXQsIHsgbG9jYWxlIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0aW1lLnRvTG9jYWwoKS50b0Zvcm1hdChzZXR0aW5ncy5kZWZhdWx0RGF0ZVRpbWVGb3JtYXQsIHsgbG9jYWxlIH0pO1xufVxuXG4vKiogUmVuZGVyIGEgZHVyYXRpb24gaW4gYSBtaW5pbWFsIGZvcm1hdCB0byBzYXZlIHNwYWNlLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlck1pbmltYWxEdXJhdGlvbihkdXI6IER1cmF0aW9uKTogc3RyaW5nIHtcbiAgICBkdXIgPSBub3JtYWxpemVEdXJhdGlvbihkdXIpO1xuXG4gICAgLy8gVE9ETzogTHV4b24gZG9lcyBub3QgaGF2ZSBtdWx0aS1saW5ndWFsL2xvY2FsZS1hd2FyZSBkdXJhdGlvbiByZW5kZXJpbmcuXG4gICAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gICAgaWYgKGR1ci55ZWFycykgcmVzdWx0ICs9IGAke2R1ci55ZWFyc30geWVhcnMsIGA7XG4gICAgaWYgKGR1ci5tb250aHMpIHJlc3VsdCArPSBgJHtkdXIubW9udGhzfSBtb250aHMsIGA7XG4gICAgaWYgKGR1ci53ZWVrcykgcmVzdWx0ICs9IGAke2R1ci53ZWVrc30gd2Vla3MsIGA7XG4gICAgaWYgKGR1ci5kYXlzKSByZXN1bHQgKz0gYCR7ZHVyLmRheXN9IGRheXMsIGA7XG4gICAgaWYgKGR1ci5ob3VycykgcmVzdWx0ICs9IGAke2R1ci5ob3Vyc30gaG91cnMsIGA7XG4gICAgaWYgKGR1ci5taW51dGVzKSByZXN1bHQgKz0gYCR7ZHVyLm1pbnV0ZXN9IG1pbnV0ZXMsIGA7XG4gICAgaWYgKGR1ci5zZWNvbmRzKSByZXN1bHQgKz0gYCR7TWF0aC5yb3VuZChkdXIuc2Vjb25kcyl9IHNlY29uZHMsIGA7XG4gICAgaWYgKGR1ci5taWxsaXNlY29uZHMpIHJlc3VsdCArPSBgJHtNYXRoLnJvdW5kKGR1ci5taWxsaXNlY29uZHMpfSBtcywgYDtcblxuICAgIGlmIChyZXN1bHQuZW5kc1dpdGgoXCIsIFwiKSkgcmVzdWx0ID0gcmVzdWx0LnN1YnN0cmluZygwLCByZXN1bHQubGVuZ3RoIC0gMik7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqIERldGVybWluZSBpZiB0d28gc2V0cyBhcmUgZXF1YWwgaW4gY29udGVudHMuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0c0VxdWFsPFQ+KGZpcnN0OiBTZXQ8VD4sIHNlY29uZDogU2V0PFQ+KTogYm9vbGVhbiB7XG4gICAgaWYgKGZpcnN0LnNpemUgIT0gc2Vjb25kLnNpemUpIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKGxldCBlbGVtIG9mIGZpcnN0KSBpZiAoIXNlY29uZC5oYXMoZWxlbSkpIHJldHVybiBmYWxzZTtcblxuICAgIHJldHVybiB0cnVlO1xufVxuIiwgImltcG9ydCB7IERhdGVUaW1lLCBEdXJhdGlvbiB9IGZyb20gXCJsdXhvblwiO1xuaW1wb3J0IHsgREVGQVVMVF9RVUVSWV9TRVRUSU5HUywgUXVlcnlTZXR0aW5ncyB9IGZyb20gXCJzZXR0aW5nc1wiO1xuaW1wb3J0IHsgZ2V0RmlsZVRpdGxlLCBub3JtYWxpemVIZWFkZXJGb3JMaW5rLCByZW5kZXJNaW5pbWFsRHVyYXRpb24gfSBmcm9tIFwidXRpbC9ub3JtYWxpemVcIjtcblxuLyoqIFNob3J0aGFuZCBmb3IgYSBtYXBwaW5nIGZyb20ga2V5cyB0byB2YWx1ZXMuICovXG5leHBvcnQgdHlwZSBEYXRhT2JqZWN0ID0geyBba2V5OiBzdHJpbmddOiBMaXRlcmFsIH07XG4vKiogVGhlIGxpdGVyYWwgdHlwZXMgc3VwcG9ydGVkIGJ5IHRoZSBxdWVyeSBlbmdpbmUuICovXG5leHBvcnQgdHlwZSBMaXRlcmFsVHlwZSA9XG4gICAgfCBcImJvb2xlYW5cIlxuICAgIHwgXCJudW1iZXJcIlxuICAgIHwgXCJzdHJpbmdcIlxuICAgIHwgXCJkYXRlXCJcbiAgICB8IFwiZHVyYXRpb25cIlxuICAgIHwgXCJsaW5rXCJcbiAgICB8IFwiYXJyYXlcIlxuICAgIHwgXCJvYmplY3RcIlxuICAgIHwgXCJmdW5jdGlvblwiXG4gICAgfCBcIm51bGxcIlxuICAgIHwgXCJodG1sXCJcbiAgICB8IFwid2lkZ2V0XCI7XG4vKiogVGhlIHJhdyB2YWx1ZXMgdGhhdCBhIGxpdGVyYWwgY2FuIHRha2Ugb24uICovXG5leHBvcnQgdHlwZSBMaXRlcmFsID1cbiAgICB8IGJvb2xlYW5cbiAgICB8IG51bWJlclxuICAgIHwgc3RyaW5nXG4gICAgfCBEYXRlVGltZVxuICAgIHwgRHVyYXRpb25cbiAgICB8IExpbmtcbiAgICB8IEFycmF5PExpdGVyYWw+XG4gICAgfCBEYXRhT2JqZWN0XG4gICAgfCBGdW5jdGlvblxuICAgIHwgbnVsbFxuICAgIHwgSFRNTEVsZW1lbnRcbiAgICB8IFdpZGdldDtcblxuLyoqIEEgZ3JvdXBpbmcgb24gYSB0eXBlIHdoaWNoIHN1cHBvcnRzIHJlY3Vyc2l2ZWx5LW5lc3RlZCBncm91cHMuICovXG5leHBvcnQgdHlwZSBHcm91cEVsZW1lbnQ8VD4gPSB7IGtleTogTGl0ZXJhbDsgcm93czogR3JvdXBpbmc8VD4gfTtcbmV4cG9ydCB0eXBlIEdyb3VwaW5nPFQ+ID0gVFtdIHwgR3JvdXBFbGVtZW50PFQ+W107XG5cbi8qKiBNYXBzIHRoZSBzdHJpbmcgdHlwZSB0byBpdCdzIGV4dGVybmFsLCBBUEktZmFjaW5nIHJlcHJlc2VudGF0aW9uLiAqL1xuZXhwb3J0IHR5cGUgTGl0ZXJhbFJlcHI8VCBleHRlbmRzIExpdGVyYWxUeXBlPiA9IFQgZXh0ZW5kcyBcImJvb2xlYW5cIlxuICAgID8gYm9vbGVhblxuICAgIDogVCBleHRlbmRzIFwibnVtYmVyXCJcbiAgICA/IG51bWJlclxuICAgIDogVCBleHRlbmRzIFwic3RyaW5nXCJcbiAgICA/IHN0cmluZ1xuICAgIDogVCBleHRlbmRzIFwiZHVyYXRpb25cIlxuICAgID8gRHVyYXRpb25cbiAgICA6IFQgZXh0ZW5kcyBcImRhdGVcIlxuICAgID8gRGF0ZVRpbWVcbiAgICA6IFQgZXh0ZW5kcyBcIm51bGxcIlxuICAgID8gbnVsbFxuICAgIDogVCBleHRlbmRzIFwibGlua1wiXG4gICAgPyBMaW5rXG4gICAgOiBUIGV4dGVuZHMgXCJhcnJheVwiXG4gICAgPyBBcnJheTxMaXRlcmFsPlxuICAgIDogVCBleHRlbmRzIFwib2JqZWN0XCJcbiAgICA/IFJlY29yZDxzdHJpbmcsIExpdGVyYWw+XG4gICAgOiBUIGV4dGVuZHMgXCJmdW5jdGlvblwiXG4gICAgPyBGdW5jdGlvblxuICAgIDogVCBleHRlbmRzIFwiaHRtbFwiXG4gICAgPyBIVE1MRWxlbWVudFxuICAgIDogVCBleHRlbmRzIFwid2lkZ2V0XCJcbiAgICA/IFdpZGdldFxuICAgIDogYW55O1xuXG4vKiogQSB3cmFwcGVkIGxpdGVyYWwgdmFsdWUgd2hpY2ggY2FuIGJlIHN3aXRjaGVkIG9uLiAqL1xuZXhwb3J0IHR5cGUgV3JhcHBlZExpdGVyYWwgPVxuICAgIHwgTGl0ZXJhbFdyYXBwZXI8XCJzdHJpbmdcIj5cbiAgICB8IExpdGVyYWxXcmFwcGVyPFwibnVtYmVyXCI+XG4gICAgfCBMaXRlcmFsV3JhcHBlcjxcImJvb2xlYW5cIj5cbiAgICB8IExpdGVyYWxXcmFwcGVyPFwiZGF0ZVwiPlxuICAgIHwgTGl0ZXJhbFdyYXBwZXI8XCJkdXJhdGlvblwiPlxuICAgIHwgTGl0ZXJhbFdyYXBwZXI8XCJsaW5rXCI+XG4gICAgfCBMaXRlcmFsV3JhcHBlcjxcImFycmF5XCI+XG4gICAgfCBMaXRlcmFsV3JhcHBlcjxcIm9iamVjdFwiPlxuICAgIHwgTGl0ZXJhbFdyYXBwZXI8XCJodG1sXCI+XG4gICAgfCBMaXRlcmFsV3JhcHBlcjxcIndpZGdldFwiPlxuICAgIHwgTGl0ZXJhbFdyYXBwZXI8XCJmdW5jdGlvblwiPlxuICAgIHwgTGl0ZXJhbFdyYXBwZXI8XCJudWxsXCI+O1xuXG5leHBvcnQgaW50ZXJmYWNlIExpdGVyYWxXcmFwcGVyPFQgZXh0ZW5kcyBMaXRlcmFsVHlwZT4ge1xuICAgIHR5cGU6IFQ7XG4gICAgdmFsdWU6IExpdGVyYWxSZXByPFQ+O1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIFZhbHVlcyB7XG4gICAgLyoqIENvbnZlcnQgYW4gYXJiaXRhcnkgdmFsdWUgaW50byBhIHJlYXNvbmFibGUsIE1hcmtkb3duLWZyaWVuZGx5IHN0cmluZyBpZiBwb3NzaWJsZS4gKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gdG9TdHJpbmcoXG4gICAgICAgIGZpZWxkOiBhbnksXG4gICAgICAgIHNldHRpbmc6IFF1ZXJ5U2V0dGluZ3MgPSBERUZBVUxUX1FVRVJZX1NFVFRJTkdTLFxuICAgICAgICByZWN1cnNpdmU6IGJvb2xlYW4gPSBmYWxzZVxuICAgICk6IHN0cmluZyB7XG4gICAgICAgIGxldCB3cmFwcGVkID0gd3JhcFZhbHVlKGZpZWxkKTtcbiAgICAgICAgaWYgKCF3cmFwcGVkKSByZXR1cm4gc2V0dGluZy5yZW5kZXJOdWxsQXM7XG5cbiAgICAgICAgc3dpdGNoICh3cmFwcGVkLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJudWxsXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHRpbmcucmVuZGVyTnVsbEFzO1xuICAgICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiB3cmFwcGVkLnZhbHVlO1xuICAgICAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIiArIHdyYXBwZWQudmFsdWU7XG4gICAgICAgICAgICBjYXNlIFwiaHRtbFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB3cmFwcGVkLnZhbHVlLm91dGVySFRNTDtcbiAgICAgICAgICAgIGNhc2UgXCJ3aWRnZXRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JhcHBlZC52YWx1ZS5tYXJrZG93bigpO1xuICAgICAgICAgICAgY2FzZSBcImxpbmtcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JhcHBlZC52YWx1ZS5tYXJrZG93bigpO1xuICAgICAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPGZ1bmN0aW9uPlwiO1xuICAgICAgICAgICAgY2FzZSBcImFycmF5XCI6XG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgaWYgKHJlY3Vyc2l2ZSkgcmVzdWx0ICs9IFwiW1wiO1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSB3cmFwcGVkLnZhbHVlLm1hcChmID0+IHRvU3RyaW5nKGYsIHNldHRpbmcsIHRydWUpKS5qb2luKFwiLCBcIik7XG4gICAgICAgICAgICAgICAgaWYgKHJlY3Vyc2l2ZSkgcmVzdWx0ICs9IFwiXVwiO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgXCJ7IFwiICtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMod3JhcHBlZC52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZSA9PiBlWzBdICsgXCI6IFwiICsgdG9TdHJpbmcoZVsxXSwgc2V0dGluZywgdHJ1ZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpICtcbiAgICAgICAgICAgICAgICAgICAgXCIgfVwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNhc2UgXCJkYXRlXCI6XG4gICAgICAgICAgICAgICAgaWYgKHdyYXBwZWQudmFsdWUuc2Vjb25kID09IDAgJiYgd3JhcHBlZC52YWx1ZS5ob3VyID09IDAgJiYgd3JhcHBlZC52YWx1ZS5taW51dGUgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JhcHBlZC52YWx1ZS50b0Zvcm1hdChzZXR0aW5nLmRlZmF1bHREYXRlRm9ybWF0KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gd3JhcHBlZC52YWx1ZS50b0Zvcm1hdChzZXR0aW5nLmRlZmF1bHREYXRlVGltZUZvcm1hdCk7XG4gICAgICAgICAgICBjYXNlIFwiZHVyYXRpb25cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVuZGVyTWluaW1hbER1cmF0aW9uKHdyYXBwZWQudmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqIFdyYXAgYSBsaXRlcmFsIHZhbHVlIHNvIHlvdSBjYW4gc3dpdGNoIG9uIGl0IGVhc2lseS4gKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gd3JhcFZhbHVlKHZhbDogTGl0ZXJhbCk6IFdyYXBwZWRMaXRlcmFsIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKGlzTnVsbCh2YWwpKSByZXR1cm4geyB0eXBlOiBcIm51bGxcIiwgdmFsdWU6IHZhbCB9O1xuICAgICAgICBlbHNlIGlmIChpc051bWJlcih2YWwpKSByZXR1cm4geyB0eXBlOiBcIm51bWJlclwiLCB2YWx1ZTogdmFsIH07XG4gICAgICAgIGVsc2UgaWYgKGlzU3RyaW5nKHZhbCkpIHJldHVybiB7IHR5cGU6IFwic3RyaW5nXCIsIHZhbHVlOiB2YWwgfTtcbiAgICAgICAgZWxzZSBpZiAoaXNCb29sZWFuKHZhbCkpIHJldHVybiB7IHR5cGU6IFwiYm9vbGVhblwiLCB2YWx1ZTogdmFsIH07XG4gICAgICAgIGVsc2UgaWYgKGlzRHVyYXRpb24odmFsKSkgcmV0dXJuIHsgdHlwZTogXCJkdXJhdGlvblwiLCB2YWx1ZTogdmFsIH07XG4gICAgICAgIGVsc2UgaWYgKGlzRGF0ZSh2YWwpKSByZXR1cm4geyB0eXBlOiBcImRhdGVcIiwgdmFsdWU6IHZhbCB9O1xuICAgICAgICBlbHNlIGlmIChpc1dpZGdldCh2YWwpKSByZXR1cm4geyB0eXBlOiBcIndpZGdldFwiLCB2YWx1ZTogdmFsIH07XG4gICAgICAgIGVsc2UgaWYgKGlzQXJyYXkodmFsKSkgcmV0dXJuIHsgdHlwZTogXCJhcnJheVwiLCB2YWx1ZTogdmFsIH07XG4gICAgICAgIGVsc2UgaWYgKGlzTGluayh2YWwpKSByZXR1cm4geyB0eXBlOiBcImxpbmtcIiwgdmFsdWU6IHZhbCB9O1xuICAgICAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHZhbCkpIHJldHVybiB7IHR5cGU6IFwiZnVuY3Rpb25cIiwgdmFsdWU6IHZhbCB9O1xuICAgICAgICBlbHNlIGlmIChpc0h0bWwodmFsKSkgcmV0dXJuIHsgdHlwZTogXCJodG1sXCIsIHZhbHVlOiB2YWwgfTtcbiAgICAgICAgZWxzZSBpZiAoaXNPYmplY3QodmFsKSkgcmV0dXJuIHsgdHlwZTogXCJvYmplY3RcIiwgdmFsdWU6IHZhbCB9O1xuICAgICAgICBlbHNlIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqIFJlY3Vyc2l2ZWx5IG1hcCBjb21wbGV4IG9iamVjdHMgYXQgdGhlIGxlYXZlcy4gKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gbWFwTGVhdmVzKHZhbDogTGl0ZXJhbCwgZnVuYzogKHQ6IExpdGVyYWwpID0+IExpdGVyYWwpOiBMaXRlcmFsIHtcbiAgICAgICAgaWYgKGlzT2JqZWN0KHZhbCkpIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQ6IERhdGFPYmplY3QgPSB7fTtcbiAgICAgICAgICAgIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh2YWwpKSByZXN1bHRba2V5XSA9IG1hcExlYXZlcyh2YWx1ZSwgZnVuYyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsKSkge1xuICAgICAgICAgICAgbGV0IHJlc3VsdDogTGl0ZXJhbFtdID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCB2YWx1ZSBvZiB2YWwpIHJlc3VsdC5wdXNoKG1hcExlYXZlcyh2YWx1ZSwgZnVuYykpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jKHZhbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogQ29tcGFyZSB0d28gYXJiaXRyYXJ5IEphdmFTY3JpcHQgdmFsdWVzLiBQcm9kdWNlcyBhIHRvdGFsIG9yZGVyaW5nIG92ZXIgQU5ZIHBvc3NpYmxlIGRhdGF2aWV3IHZhbHVlLiAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjb21wYXJlVmFsdWUodmFsMTogTGl0ZXJhbCwgdmFsMjogTGl0ZXJhbCwgbGlua05vcm1hbGl6ZXI/OiAobGluazogc3RyaW5nKSA9PiBzdHJpbmcpOiBudW1iZXIge1xuICAgICAgICAvLyBIYW5kbGUgdW5kZWZpbmVkL251bGxzIGZpcnN0LlxuICAgICAgICBpZiAodmFsMSA9PT0gdW5kZWZpbmVkKSB2YWwxID0gbnVsbDtcbiAgICAgICAgaWYgKHZhbDIgPT09IHVuZGVmaW5lZCkgdmFsMiA9IG51bGw7XG4gICAgICAgIGlmICh2YWwxID09PSBudWxsICYmIHZhbDIgPT09IG51bGwpIHJldHVybiAwO1xuICAgICAgICBlbHNlIGlmICh2YWwxID09PSBudWxsKSByZXR1cm4gLTE7XG4gICAgICAgIGVsc2UgaWYgKHZhbDIgPT09IG51bGwpIHJldHVybiAxO1xuXG4gICAgICAgIC8vIEEgbm9uLW51bGwgdmFsdWUgbm93IHdoaWNoIHdlIGNhbiB3cmFwICYgY29tcGFyZSBvbi5cbiAgICAgICAgbGV0IHdyYXAxID0gd3JhcFZhbHVlKHZhbDEpO1xuICAgICAgICBsZXQgd3JhcDIgPSB3cmFwVmFsdWUodmFsMik7XG5cbiAgICAgICAgaWYgKHdyYXAxID09PSB1bmRlZmluZWQgJiYgd3JhcDIgPT09IHVuZGVmaW5lZCkgcmV0dXJuIDA7XG4gICAgICAgIGVsc2UgaWYgKHdyYXAxID09PSB1bmRlZmluZWQpIHJldHVybiAtMTtcbiAgICAgICAgZWxzZSBpZiAod3JhcDIgPT09IHVuZGVmaW5lZCkgcmV0dXJuIDE7XG5cbiAgICAgICAgLy8gU2hvcnQtY2lyY3VpdCBvbiBkaWZmZXJlbnQgdHlwZXMgb3Igb24gcmVmZXJlbmNlIGVxdWFsaXR5LlxuICAgICAgICBpZiAod3JhcDEudHlwZSAhPSB3cmFwMi50eXBlKSByZXR1cm4gd3JhcDEudHlwZS5sb2NhbGVDb21wYXJlKHdyYXAyLnR5cGUpO1xuICAgICAgICBpZiAod3JhcDEudmFsdWUgPT09IHdyYXAyLnZhbHVlKSByZXR1cm4gMDtcblxuICAgICAgICBzd2l0Y2ggKHdyYXAxLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JhcDEudmFsdWUubG9jYWxlQ29tcGFyZSh3cmFwMi52YWx1ZSBhcyBzdHJpbmcpO1xuICAgICAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgICAgIGlmICh3cmFwMS52YWx1ZSA8ICh3cmFwMi52YWx1ZSBhcyBudW1iZXIpKSByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAod3JhcDEudmFsdWUgPT0gKHdyYXAyLnZhbHVlIGFzIG51bWJlcikpIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgY2FzZSBcIm51bGxcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgICAgICAgICAgaWYgKHdyYXAxLnZhbHVlID09IHdyYXAyLnZhbHVlKSByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICBlbHNlIHJldHVybiB3cmFwMS52YWx1ZSA/IDEgOiAtMTtcbiAgICAgICAgICAgIGNhc2UgXCJsaW5rXCI6XG4gICAgICAgICAgICAgICAgbGV0IGxpbmsxID0gd3JhcDEudmFsdWU7XG4gICAgICAgICAgICAgICAgbGV0IGxpbmsyID0gd3JhcDIudmFsdWUgYXMgTGluaztcbiAgICAgICAgICAgICAgICBsZXQgbm9ybWFsaXplID0gbGlua05vcm1hbGl6ZXIgPz8gKCh4OiBzdHJpbmcpID0+IHgpO1xuXG4gICAgICAgICAgICAgICAgLy8gV2UgY2FuJ3QgY29tcGFyZSBieSBmaWxlIG5hbWUgb3IgZGlzcGxheSwgc2luY2UgdGhhdCB3b3VsZCBicmVhayBsaW5rIGVxdWFsaXR5LiBDb21wYXJlIGJ5IHBhdGguXG4gICAgICAgICAgICAgICAgbGV0IHBhdGhDb21wYXJlID0gbm9ybWFsaXplKGxpbmsxLnBhdGgpLmxvY2FsZUNvbXBhcmUobm9ybWFsaXplKGxpbmsyLnBhdGgpKTtcbiAgICAgICAgICAgICAgICBpZiAocGF0aENvbXBhcmUgIT0gMCkgcmV0dXJuIHBhdGhDb21wYXJlO1xuXG4gICAgICAgICAgICAgICAgLy8gVGhlbiBjb21wYXJlIGJ5IHR5cGUuXG4gICAgICAgICAgICAgICAgbGV0IHR5cGVDb21wYXJlID0gbGluazEudHlwZS5sb2NhbGVDb21wYXJlKGxpbmsyLnR5cGUpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlQ29tcGFyZSAhPSAwKSByZXR1cm4gdHlwZUNvbXBhcmU7XG5cbiAgICAgICAgICAgICAgICAvLyBUaGVuIGNvbXBhcmUgYnkgc3VicGF0aCBleGlzdGVuY2UuXG4gICAgICAgICAgICAgICAgaWYgKGxpbmsxLnN1YnBhdGggJiYgIWxpbmsyLnN1YnBhdGgpIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIGlmICghbGluazEuc3VicGF0aCAmJiBsaW5rMi5zdWJwYXRoKSByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgaWYgKCFsaW5rMS5zdWJwYXRoICYmICFsaW5rMi5zdWJwYXRoKSByZXR1cm4gMDtcblxuICAgICAgICAgICAgICAgIC8vIFNpbmNlIGJvdGggaGF2ZSBhIHN1YnBhdGgsIGNvbXBhcmUgYnkgc3VicGF0aC5cbiAgICAgICAgICAgICAgICByZXR1cm4gKGxpbmsxLnN1YnBhdGggPz8gXCJcIikubG9jYWxlQ29tcGFyZShsaW5rMi5zdWJwYXRoID8/IFwiXCIpO1xuICAgICAgICAgICAgY2FzZSBcImRhdGVcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JhcDEudmFsdWUgPCAod3JhcDIudmFsdWUgYXMgRGF0ZVRpbWUpXG4gICAgICAgICAgICAgICAgICAgID8gLTFcbiAgICAgICAgICAgICAgICAgICAgOiB3cmFwMS52YWx1ZS5lcXVhbHMod3JhcDIudmFsdWUgYXMgRGF0ZVRpbWUpXG4gICAgICAgICAgICAgICAgICAgID8gMFxuICAgICAgICAgICAgICAgICAgICA6IDE7XG4gICAgICAgICAgICBjYXNlIFwiZHVyYXRpb25cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JhcDEudmFsdWUgPCAod3JhcDIudmFsdWUgYXMgRHVyYXRpb24pXG4gICAgICAgICAgICAgICAgICAgID8gLTFcbiAgICAgICAgICAgICAgICAgICAgOiB3cmFwMS52YWx1ZS5lcXVhbHMod3JhcDIudmFsdWUgYXMgRHVyYXRpb24pXG4gICAgICAgICAgICAgICAgICAgID8gMFxuICAgICAgICAgICAgICAgICAgICA6IDE7XG4gICAgICAgICAgICBjYXNlIFwiYXJyYXlcIjpcbiAgICAgICAgICAgICAgICBsZXQgZjEgPSB3cmFwMS52YWx1ZTtcbiAgICAgICAgICAgICAgICBsZXQgZjIgPSB3cmFwMi52YWx1ZSBhcyBhbnlbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgTWF0aC5taW4oZjEubGVuZ3RoLCBmMi5sZW5ndGgpOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb21wID0gY29tcGFyZVZhbHVlKGYxW2luZGV4XSwgZjJbaW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXAgIT0gMCkgcmV0dXJuIGNvbXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmMS5sZW5ndGggLSBmMi5sZW5ndGg7XG4gICAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICAgICAgbGV0IG8xID0gd3JhcDEudmFsdWU7XG4gICAgICAgICAgICAgICAgbGV0IG8yID0gd3JhcDIudmFsdWUgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcbiAgICAgICAgICAgICAgICBsZXQgazEgPSBBcnJheS5mcm9tKE9iamVjdC5rZXlzKG8xKSk7XG4gICAgICAgICAgICAgICAgbGV0IGsyID0gQXJyYXkuZnJvbShPYmplY3Qua2V5cyhvMikpO1xuICAgICAgICAgICAgICAgIGsxLnNvcnQoKTtcbiAgICAgICAgICAgICAgICBrMi5zb3J0KCk7XG5cbiAgICAgICAgICAgICAgICBsZXQga2V5Q29tcGFyZSA9IGNvbXBhcmVWYWx1ZShrMSwgazIpO1xuICAgICAgICAgICAgICAgIGlmIChrZXlDb21wYXJlICE9IDApIHJldHVybiBrZXlDb21wYXJlO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQga2V5IG9mIGsxKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb21wID0gY29tcGFyZVZhbHVlKG8xW2tleV0sIG8yW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29tcCAhPSAwKSByZXR1cm4gY29tcDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIGNhc2UgXCJ3aWRnZXRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJodG1sXCI6XG4gICAgICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKiBGaW5kIHRoZSBjb3JyZXNwb25kaW5nIERhdGF2ZWl3IHR5cGUgZm9yIGFuIGFyYml0cmFyeSB2YWx1ZS4gKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gdHlwZU9mKHZhbDogYW55KTogTGl0ZXJhbFR5cGUgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gd3JhcFZhbHVlKHZhbCk/LnR5cGU7XG4gICAgfVxuXG4gICAgLyoqIERldGVybWluZSBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgXCJ0cnV0aHlcIiAoaS5lLiwgaXMgbm9uLW51bGwgYW5kIGhhcyBkYXRhIGluIGl0KS4gKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gaXNUcnV0aHkoZmllbGQ6IExpdGVyYWwpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IHdyYXBwZWQgPSB3cmFwVmFsdWUoZmllbGQpO1xuICAgICAgICBpZiAoIXdyYXBwZWQpIHJldHVybiBmYWxzZTtcblxuICAgICAgICBzd2l0Y2ggKHdyYXBwZWQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB3cmFwcGVkLnZhbHVlICE9IDA7XG4gICAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyYXBwZWQudmFsdWUubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyYXBwZWQudmFsdWU7XG4gICAgICAgICAgICBjYXNlIFwibGlua1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiAhIXdyYXBwZWQudmFsdWUucGF0aDtcbiAgICAgICAgICAgIGNhc2UgXCJkYXRlXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyYXBwZWQudmFsdWUudG9NaWxsaXMoKSAhPSAwO1xuICAgICAgICAgICAgY2FzZSBcImR1cmF0aW9uXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyYXBwZWQudmFsdWUuYXMoXCJzZWNvbmRzXCIpICE9IDA7XG4gICAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHdyYXBwZWQudmFsdWUpLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICBjYXNlIFwiYXJyYXlcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JhcHBlZC52YWx1ZS5sZW5ndGggPiAwO1xuICAgICAgICAgICAgY2FzZSBcIm51bGxcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBjYXNlIFwiaHRtbFwiOlxuICAgICAgICAgICAgY2FzZSBcIndpZGdldFwiOlxuICAgICAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogRGVlcCBjb3B5IGEgZmllbGQuICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGRlZXBDb3B5PFQgZXh0ZW5kcyBMaXRlcmFsPihmaWVsZDogVCk6IFQge1xuICAgICAgICBpZiAoZmllbGQgPT09IG51bGwgfHwgZmllbGQgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGZpZWxkO1xuXG4gICAgICAgIGlmIChWYWx1ZXMuaXNBcnJheShmaWVsZCkpIHtcbiAgICAgICAgICAgIHJldHVybiAoW10gYXMgTGl0ZXJhbFtdKS5jb25jYXQoZmllbGQubWFwKHYgPT4gZGVlcENvcHkodikpKSBhcyBUO1xuICAgICAgICB9IGVsc2UgaWYgKFZhbHVlcy5pc09iamVjdChmaWVsZCkpIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIExpdGVyYWw+ID0ge307XG4gICAgICAgICAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZmllbGQpKSByZXN1bHRba2V5XSA9IGRlZXBDb3B5KHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQgYXMgVDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmaWVsZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc1N0cmluZyh2YWw6IGFueSk6IHZhbCBpcyBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbCA9PSBcInN0cmluZ1wiO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc051bWJlcih2YWw6IGFueSk6IHZhbCBpcyBudW1iZXIge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbCA9PSBcIm51bWJlclwiO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc0RhdGUodmFsOiBhbnkpOiB2YWwgaXMgRGF0ZVRpbWUge1xuICAgICAgICByZXR1cm4gdmFsIGluc3RhbmNlb2YgRGF0ZVRpbWU7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGlzRHVyYXRpb24odmFsOiBhbnkpOiB2YWwgaXMgRHVyYXRpb24ge1xuICAgICAgICByZXR1cm4gdmFsIGluc3RhbmNlb2YgRHVyYXRpb247XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGlzTnVsbCh2YWw6IGFueSk6IHZhbCBpcyBudWxsIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gaXNBcnJheSh2YWw6IGFueSk6IHZhbCBpcyBhbnlbXSB7XG4gICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHZhbCk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGlzQm9vbGVhbih2YWw6IGFueSk6IHZhbCBpcyBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09IFwiYm9vbGVhblwiO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc0xpbmsodmFsOiBhbnkpOiB2YWwgaXMgTGluayB7XG4gICAgICAgIHJldHVybiB2YWwgaW5zdGFuY2VvZiBMaW5rO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc1dpZGdldCh2YWw6IGFueSk6IHZhbCBpcyBXaWRnZXQge1xuICAgICAgICByZXR1cm4gdmFsIGluc3RhbmNlb2YgV2lkZ2V0O1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc0h0bWwodmFsOiBhbnkpOiB2YWwgaXMgSFRNTEVsZW1lbnQge1xuICAgICAgICBpZiAodHlwZW9mIEhUTUxFbGVtZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogQ2hlY2tzIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBhbiBvYmplY3QgKGFuZCBub3QgYW55IG90aGVyIGRhdGF2aWV3LXJlY29nbml6ZWQgb2JqZWN0LWxpa2UgdHlwZSkuICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KHZhbDogYW55KTogdmFsIGlzIFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdHlwZW9mIHZhbCA9PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAhaXNIdG1sKHZhbCkgJiZcbiAgICAgICAgICAgICFpc1dpZGdldCh2YWwpICYmXG4gICAgICAgICAgICAhaXNBcnJheSh2YWwpICYmXG4gICAgICAgICAgICAhaXNEdXJhdGlvbih2YWwpICYmXG4gICAgICAgICAgICAhaXNEYXRlKHZhbCkgJiZcbiAgICAgICAgICAgICFpc0xpbmsodmFsKSAmJlxuICAgICAgICAgICAgdmFsICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICFpc051bGwodmFsKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbDogYW55KTogdmFsIGlzIEZ1bmN0aW9uIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT0gXCJmdW5jdGlvblwiO1xuICAgIH1cbn1cblxuLy8vLy8vLy8vLy8vLy8vXG4vLyBHcm91cGluZ3MgLy9cbi8vLy8vLy8vLy8vLy8vL1xuXG5leHBvcnQgbmFtZXNwYWNlIEdyb3VwaW5ncyB7XG4gICAgLyoqIERldGVybWluZXMgaWYgdGhlIGdpdmVuIGdyb3VwIGVudHJ5IGlzIGEgc3RhbmRhbG9uZSB2YWx1ZSwgb3IgYSBncm91cGluZyBvZiBzdWItZW50cmllcy4gKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gaXNFbGVtZW50R3JvdXA8VD4oZW50cnk6IFQgfCBHcm91cEVsZW1lbnQ8VD4pOiBlbnRyeSBpcyBHcm91cEVsZW1lbnQ8VD4ge1xuICAgICAgICByZXR1cm4gVmFsdWVzLmlzT2JqZWN0KGVudHJ5KSAmJiBPYmplY3Qua2V5cyhlbnRyeSkubGVuZ3RoID09IDIgJiYgXCJrZXlcIiBpbiBlbnRyeSAmJiBcInJvd3NcIiBpbiBlbnRyeTtcbiAgICB9XG5cbiAgICAvKiogRGV0ZXJtaW5lcyBpZiB0aGUgZ2l2ZW4gYXJyYXkgaXMgYSBncm91cGluZyBhcnJheS4gKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gaXNHcm91cGluZzxUPihlbnRyeTogR3JvdXBpbmc8VD4pOiBlbnRyeSBpcyBHcm91cEVsZW1lbnQ8VD5bXSB7XG4gICAgICAgIGZvciAobGV0IGVsZW1lbnQgb2YgZW50cnkpIGlmICghaXNFbGVtZW50R3JvdXAoZWxlbWVudCkpIHJldHVybiBmYWxzZTtcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKiogQ291bnQgdGhlIHRvdGFsIG51bWJlciBvZiBlbGVtZW50cyBpbiBhIHJlY3Vyc2l2ZSBncm91cGluZy4gKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY291bnQ8VD4oZWxlbWVudHM6IEdyb3VwaW5nPFQ+KTogbnVtYmVyIHtcbiAgICAgICAgaWYgKGlzR3JvdXBpbmcoZWxlbWVudHMpKSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IHN1Ymdyb3VwIG9mIGVsZW1lbnRzKSByZXN1bHQgKz0gY291bnQoc3ViZ3JvdXAucm93cyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8vLy8vLy8vL1xuLy8gTElOSyAvL1xuLy8vLy8vLy8vL1xuXG4vKiogVGhlIE9ic2lkaWFuICdsaW5rJywgdXNlZCBmb3IgdW5pcXVlbHkgZGVzY3JpYmluZyBhIGZpbGUsIGhlYWRlciwgb3IgYmxvY2suICovXG5leHBvcnQgY2xhc3MgTGluayB7XG4gICAgLyoqIFRoZSBmaWxlIHBhdGggdGhpcyBsaW5rIHBvaW50cyB0by4gKi9cbiAgICBwdWJsaWMgcGF0aDogc3RyaW5nO1xuICAgIC8qKiBUaGUgZGlzcGxheSBuYW1lIGFzc29jaWF0ZWQgd2l0aCB0aGUgbGluay4gKi9cbiAgICBwdWJsaWMgZGlzcGxheT86IHN0cmluZztcbiAgICAvKiogVGhlIGJsb2NrIElEIG9yIGhlYWRlciB0aGlzIGxpbmsgcG9pbnRzIHRvIHdpdGhpbiBhIGZpbGUsIGlmIHJlbGV2YW50LiAqL1xuICAgIHB1YmxpYyBzdWJwYXRoPzogc3RyaW5nO1xuICAgIC8qKiBJcyB0aGlzIGxpbmsgYW4gZW1iZWRkZWQgbGluayAoISk/ICovXG4gICAgcHVibGljIGVtYmVkOiBib29sZWFuO1xuICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIGxpbmssIHdoaWNoIGRldGVybWluZXMgd2hhdCAnc3VicGF0aCcgcmVmZXJzIHRvLCBpZiBhbnl0aGluZy4gKi9cbiAgICBwdWJsaWMgdHlwZTogXCJmaWxlXCIgfCBcImhlYWRlclwiIHwgXCJibG9ja1wiO1xuXG4gICAgLyoqIENyZWF0ZSBhIGxpbmsgdG8gYSBzcGVjaWZpYyBmaWxlLiAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZmlsZShwYXRoOiBzdHJpbmcsIGVtYmVkOiBib29sZWFuID0gZmFsc2UsIGRpc3BsYXk/OiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMaW5rKHtcbiAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICBlbWJlZCxcbiAgICAgICAgICAgIGRpc3BsYXksXG4gICAgICAgICAgICBzdWJwYXRoOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB0eXBlOiBcImZpbGVcIixcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBpbmZlcihsaW5rcGF0aDogc3RyaW5nLCBlbWJlZDogYm9vbGVhbiA9IGZhbHNlLCBkaXNwbGF5Pzogc3RyaW5nKSB7XG4gICAgICAgIGlmIChsaW5rcGF0aC5pbmNsdWRlcyhcIiNeXCIpKSB7XG4gICAgICAgICAgICBsZXQgc3BsaXQgPSBsaW5rcGF0aC5zcGxpdChcIiNeXCIpO1xuICAgICAgICAgICAgcmV0dXJuIExpbmsuYmxvY2soc3BsaXRbMF0sIHNwbGl0WzFdLCBlbWJlZCwgZGlzcGxheSk7XG4gICAgICAgIH0gZWxzZSBpZiAobGlua3BhdGguaW5jbHVkZXMoXCIjXCIpKSB7XG4gICAgICAgICAgICBsZXQgc3BsaXQgPSBsaW5rcGF0aC5zcGxpdChcIiNcIik7XG4gICAgICAgICAgICByZXR1cm4gTGluay5oZWFkZXIoc3BsaXRbMF0sIHNwbGl0WzFdLCBlbWJlZCwgZGlzcGxheSk7XG4gICAgICAgIH0gZWxzZSByZXR1cm4gTGluay5maWxlKGxpbmtwYXRoLCBlbWJlZCwgZGlzcGxheSk7XG4gICAgfVxuXG4gICAgLyoqIENyZWF0ZSBhIGxpbmsgdG8gYSBzcGVjaWZpYyBmaWxlIGFuZCBoZWFkZXIgaW4gdGhhdCBmaWxlLiAqL1xuICAgIHB1YmxpYyBzdGF0aWMgaGVhZGVyKHBhdGg6IHN0cmluZywgaGVhZGVyOiBzdHJpbmcsIGVtYmVkPzogYm9vbGVhbiwgZGlzcGxheT86IHN0cmluZykge1xuICAgICAgICAvLyBIZWFkZXJzIG5lZWQgdG8gYmUgbm9ybWFsaXplZCB0byBhbHBoYS1udW1lcmljICYgd2l0aCBleHRyYSBzcGFjaW5nIHJlbW92ZWQuXG4gICAgICAgIHJldHVybiBuZXcgTGluayh7XG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgZW1iZWQsXG4gICAgICAgICAgICBkaXNwbGF5LFxuICAgICAgICAgICAgc3VicGF0aDogbm9ybWFsaXplSGVhZGVyRm9yTGluayhoZWFkZXIpLFxuICAgICAgICAgICAgdHlwZTogXCJoZWFkZXJcIixcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqIENyZWF0ZSBhIGxpbmsgdG8gYSBzcGVjaWZpYyBmaWxlIGFuZCBibG9jayBpbiB0aGF0IGZpbGUuICovXG4gICAgcHVibGljIHN0YXRpYyBibG9jayhwYXRoOiBzdHJpbmcsIGJsb2NrSWQ6IHN0cmluZywgZW1iZWQ/OiBib29sZWFuLCBkaXNwbGF5Pzogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBuZXcgTGluayh7XG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgZW1iZWQsXG4gICAgICAgICAgICBkaXNwbGF5LFxuICAgICAgICAgICAgc3VicGF0aDogYmxvY2tJZCxcbiAgICAgICAgICAgIHR5cGU6IFwiYmxvY2tcIixcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBmcm9tT2JqZWN0KG9iamVjdDogUmVjb3JkPHN0cmluZywgYW55Pikge1xuICAgICAgICByZXR1cm4gbmV3IExpbmsob2JqZWN0KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKGZpZWxkczogUGFydGlhbDxMaW5rPikge1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGZpZWxkcyk7XG4gICAgfVxuXG4gICAgLyoqIENoZWNrcyBmb3IgbGluayBlcXVhbGl0eSAoaS5lLiwgdGhhdCB0aGUgbGlua3MgYXJlIHBvaW50aW5nIHRvIHRoZSBzYW1lIGV4YWN0IGxvY2F0aW9uKS4gKi9cbiAgICBwdWJsaWMgZXF1YWxzKG90aGVyOiBMaW5rKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChvdGhlciA9PSB1bmRlZmluZWQgfHwgb3RoZXIgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnBhdGggPT0gb3RoZXIucGF0aCAmJiB0aGlzLnR5cGUgPT0gb3RoZXIudHlwZSAmJiB0aGlzLnN1YnBhdGggPT0gb3RoZXIuc3VicGF0aDtcbiAgICB9XG5cbiAgICAvKiogQ29udmVydCB0aGlzIGxpbmsgdG8gaXQncyBtYXJrZG93biByZXByZXNlbnRhdGlvbi4gKi9cbiAgICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFya2Rvd24oKTtcbiAgICB9XG5cbiAgICAvKiogQ29udmVydCB0aGlzIGxpbmsgdG8gYSByYXcgb2JqZWN0IHdoaWNoIGlzIHNlcmlhbGl6YXRpb24tZnJpZW5kbHkuICovXG4gICAgcHVibGljIHRvT2JqZWN0KCk6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICAgICAgICByZXR1cm4geyBwYXRoOiB0aGlzLnBhdGgsIHR5cGU6IHRoaXMudHlwZSwgc3VicGF0aDogdGhpcy5zdWJwYXRoLCBkaXNwbGF5OiB0aGlzLmRpc3BsYXksIGVtYmVkOiB0aGlzLmVtYmVkIH07XG4gICAgfVxuXG4gICAgLyoqIFVwZGF0ZSB0aGlzIGxpbmsgd2l0aCBhIG5ldyBwYXRoLiAqL1xuICAgIC8vQHRzLWlnbm9yZTsgZXJyb3IgYXBwZWFyZWQgYWZ0ZXIgdXBkYXRpbmcgT2JzaWRpYW4gdG8gMC4xNS40OyBpdCBhbHNvIHVwZGF0ZWQgb3RoZXIgcGFja2FnZXMgYnV0IGRpZG4ndCBzYXkgd2hpY2hcbiAgICBwdWJsaWMgd2l0aFBhdGgocGF0aDogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBuZXcgTGluayhPYmplY3QuYXNzaWduKHt9LCB0aGlzLCB7IHBhdGggfSkpO1xuICAgIH1cblxuICAgIC8qKiBSZXR1cm4gYSBuZXcgbGluayB3aGljaCBwb2ludHMgdG8gdGhlIHNhbWUgbG9jYXRpb24gYnV0IHdpdGggYSBuZXcgZGlzcGxheSB2YWx1ZS4gKi9cbiAgICBwdWJsaWMgd2l0aERpc3BsYXkoZGlzcGxheT86IHN0cmluZykge1xuICAgICAgICByZXR1cm4gbmV3IExpbmsoT2JqZWN0LmFzc2lnbih7fSwgdGhpcywgeyBkaXNwbGF5IH0pKTtcbiAgICB9XG5cbiAgICAvKiogQ29udmVydCBhIGZpbGUgbGluayBpbnRvIGEgbGluayB0byBhIHNwZWNpZmljIGhlYWRlci4gKi9cbiAgICBwdWJsaWMgd2l0aEhlYWRlcihoZWFkZXI6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gTGluay5oZWFkZXIodGhpcy5wYXRoLCBoZWFkZXIsIHRoaXMuZW1iZWQsIHRoaXMuZGlzcGxheSk7XG4gICAgfVxuXG4gICAgLyoqIENvbnZlcnQgYW55IGxpbmsgaW50byBhIGxpbmsgdG8gaXRzIGZpbGUuICovXG4gICAgcHVibGljIHRvRmlsZSgpIHtcbiAgICAgICAgcmV0dXJuIExpbmsuZmlsZSh0aGlzLnBhdGgsIHRoaXMuZW1iZWQsIHRoaXMuZGlzcGxheSk7XG4gICAgfVxuXG4gICAgLyoqIENvbnZlcnQgdGhpcyBsaW5rIGludG8gYW4gZW1iZWRkZWQgbGluay4gKi9cbiAgICBwdWJsaWMgdG9FbWJlZCgpOiBMaW5rIHtcbiAgICAgICAgaWYgKHRoaXMuZW1iZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGxpbmsgPSBuZXcgTGluayh0aGlzKTtcbiAgICAgICAgICAgIGxpbmsuZW1iZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGxpbms7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogQ29udmVydCB0aGlzIGxpbmsgaW50byBhIG5vbi1lbWJlZGRlZCBsaW5rLiAqL1xuICAgIHB1YmxpYyBmcm9tRW1iZWQoKTogTGluayB7XG4gICAgICAgIGlmICghdGhpcy5lbWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgbGluayA9IG5ldyBMaW5rKHRoaXMpO1xuICAgICAgICAgICAgbGluay5lbWJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIGxpbms7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogQ29udmVydCB0aGlzIGxpbmsgdG8gbWFya2Rvd24gc28gaXQgY2FuIGJlIHJlbmRlcmVkLiAqL1xuICAgIHB1YmxpYyBtYXJrZG93bigpOiBzdHJpbmcge1xuICAgICAgICBsZXQgcmVzdWx0ID0gKHRoaXMuZW1iZWQgPyBcIiFcIiA6IFwiXCIpICsgXCJbW1wiICsgdGhpcy5vYnNpZGlhbkxpbmsoKTtcblxuICAgICAgICBpZiAodGhpcy5kaXNwbGF5KSB7XG4gICAgICAgICAgICByZXN1bHQgKz0gXCJ8XCIgKyB0aGlzLmRpc3BsYXk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgKz0gXCJ8XCIgKyBnZXRGaWxlVGl0bGUodGhpcy5wYXRoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT0gXCJoZWFkZXJcIiB8fCB0aGlzLnR5cGUgPT0gXCJibG9ja1wiKSByZXN1bHQgKz0gXCIgPiBcIiArIHRoaXMuc3VicGF0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3VsdCArPSBcIl1dXCI7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqIENvbnZlcnQgdGhlIGlubmVyIHBhcnQgb2YgdGhlIGxpbmsgdG8gc29tZXRoaW5nIHRoYXQgT2JzaWRpYW4gY2FuIG9wZW4gLyB1bmRlcnN0YW5kLiAqL1xuICAgIHB1YmxpYyBvYnNpZGlhbkxpbmsoKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgZXNjYXBlZCA9IHRoaXMucGF0aC5yZXBsYWNlKFwifFwiLCBcIlxcXFx8XCIpO1xuICAgICAgICBpZiAodGhpcy50eXBlID09IFwiaGVhZGVyXCIpIHJldHVybiBlc2NhcGVkICsgXCIjXCIgKyB0aGlzLnN1YnBhdGg/LnJlcGxhY2UoXCJ8XCIsIFwiXFxcXHxcIik7XG4gICAgICAgIGlmICh0aGlzLnR5cGUgPT0gXCJibG9ja1wiKSByZXR1cm4gZXNjYXBlZCArIFwiI15cIiArIHRoaXMuc3VicGF0aD8ucmVwbGFjZShcInxcIiwgXCJcXFxcfFwiKTtcbiAgICAgICAgZWxzZSByZXR1cm4gZXNjYXBlZDtcbiAgICB9XG5cbiAgICAvKiogVGhlIHN0cmlwcGVkIG5hbWUgb2YgdGhlIGZpbGUgdGhpcyBsaW5rIHBvaW50cyB0by4gKi9cbiAgICBwdWJsaWMgZmlsZU5hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGdldEZpbGVUaXRsZSh0aGlzLnBhdGgpLnJlcGxhY2UoXCIubWRcIiwgXCJcIik7XG4gICAgfVxufVxuXG4vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0lER0VUIEJBU0UgLy9cbi8vLy8vLy8vLy8vLy8vLy8vXG5cbi8qKlxuICogQSB0cml2aWFsIGJhc2UgY2xhc3Mgd2hpY2gganVzdCBkZWZpbmVzIHRoZSAnJHdpZGdldCcgaWRlbnRpZmllciB0eXBlLiBTdWJ0eXBlcyBvZlxuICogd2lkZ2V0IGFyZSByZXNwb25zaWJsZSBmb3IgYWRkaW5nIHdoYXRldmVyIG1ldGFkYXRhIGlzIHJlbGV2YW50LiBJZiB5b3Ugd2FudCB5b3VyIHdpZGdldFxuICogdG8gaGF2ZSByZW5kZXJpbmcgZnVuY3Rpb25hbGl0eSAod2hpY2ggeW91IHByb2JhYmx5IGRvKSwgeW91IHNob3VsZCBleHRlbmQgYFJlbmRlcldpZGdldGAuXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBXaWRnZXQge1xuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwdWJsaWMgJHdpZGdldDogc3RyaW5nKSB7fVxuXG4gICAgLyoqXG4gICAgICogQXR0ZW1wdCB0byByZW5kZXIgdGhpcyB3aWRnZXQgaW4gbWFya2Rvd24sIGlmIHBvc3NpYmxlOyBpZiBtYXJrZG93biBpcyBub3QgcG9zc2libGUsXG4gICAgICogdGhlbiB0aGlzIHdpbGwgYXR0ZW1wdCB0byByZW5kZXIgYXMgSFRNTC4gTm90ZSB0aGF0IG1hbnkgd2lkZ2V0cyBoYXZlIGludGVyYWN0aXZlXG4gICAgICogY29tcG9uZW50cyBvciBkaWZmaWN1bHQgZnVuY3Rpb25hbCBjb21wb25lbnRzIGFuZCB0aGUgYG1hcmtkb3duYCBmdW5jdGlvbiBjYW4gc2ltcGx5XG4gICAgICogcmV0dXJuIGEgcGxhY2Vob2xkZXIgaW4gdGhpcyBjYXNlIChzdWNoIGFzIGA8ZnVuY3Rpb24+YCBvciBgPHRhc2stbGlzdD5gKS5cbiAgICAgKi9cbiAgICBwdWJsaWMgYWJzdHJhY3QgbWFya2Rvd24oKTogc3RyaW5nO1xufVxuXG4vKiogQSB0cml2aWFsIHdpZGdldCB3aGljaCByZW5kZXJzIGEgKGtleSwgdmFsdWUpIHBhaXIsIGFuZCBhbGxvd3MgYWNjZXNzaW5nIHRoZSBrZXkgYW5kIHZhbHVlLiAqL1xuZXhwb3J0IGNsYXNzIExpc3RQYWlyV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0IHtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHVibGljIGtleTogTGl0ZXJhbCwgcHVibGljIHZhbHVlOiBMaXRlcmFsKSB7XG4gICAgICAgIHN1cGVyKFwiZGF0YXZpZXc6bGlzdC1wYWlyXCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvdmVycmlkZSBtYXJrZG93bigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYCR7VmFsdWVzLnRvU3RyaW5nKHRoaXMua2V5KX06ICR7VmFsdWVzLnRvU3RyaW5nKHRoaXMudmFsdWUpfWA7XG4gICAgfVxufVxuXG4vKiogQSBzaW1wbGUgd2lkZ2V0IHdoaWNoIHJlbmRlcnMgYW4gZXh0ZXJuYWwgbGluay4gKi9cbmV4cG9ydCBjbGFzcyBFeHRlcm5hbExpbmtXaWRnZXQgZXh0ZW5kcyBXaWRnZXQge1xuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwdWJsaWMgdXJsOiBzdHJpbmcsIHB1YmxpYyBkaXNwbGF5Pzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFwiZGF0YXZpZXc6ZXh0ZXJuYWwtbGlua1wiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb3ZlcnJpZGUgbWFya2Rvd24oKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGBbJHt0aGlzLmRpc3BsYXkgPz8gdGhpcy51cmx9XSgke3RoaXMudXJsfSlgO1xuICAgIH1cbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBXaWRnZXRzIHtcbiAgICAvKiogQ3JlYXRlIGEgbGlzdCBwYWlyIHdpZGdldCBtYXRjaGluZyB0aGUgZ2l2ZW4ga2V5IGFuZCB2YWx1ZS4gKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gbGlzdFBhaXIoa2V5OiBMaXRlcmFsLCB2YWx1ZTogTGl0ZXJhbCk6IExpc3RQYWlyV2lkZ2V0IHtcbiAgICAgICAgcmV0dXJuIG5ldyBMaXN0UGFpcldpZGdldChrZXksIHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKiogQ3JlYXRlIGFuIGV4dGVybmFsIGxpbmsgd2lkZ2V0IHdoaWNoIHJlbmRlcnMgYW4gZXh0ZXJuYWwgT2JzaWRpYW4gbGluay4gKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZXh0ZXJuYWxMaW5rKHVybDogc3RyaW5nLCBkaXNwbGF5Pzogc3RyaW5nKTogRXh0ZXJuYWxMaW5rV2lkZ2V0IHtcbiAgICAgICAgcmV0dXJuIG5ldyBFeHRlcm5hbExpbmtXaWRnZXQodXJsLCBkaXNwbGF5KTtcbiAgICB9XG5cbiAgICAvKiogQ2hlY2tzIGlmIHRoZSBnaXZlbiB3aWRnZXQgaXMgYSBsaXN0IHBhaXIgd2lkZ2V0LiAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBpc0xpc3RQYWlyKHdpZGdldDogV2lkZ2V0KTogd2lkZ2V0IGlzIExpc3RQYWlyV2lkZ2V0IHtcbiAgICAgICAgcmV0dXJuIHdpZGdldC4kd2lkZ2V0ID09PSBcImRhdGF2aWV3Omxpc3QtcGFpclwiO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc0V4dGVybmFsTGluayh3aWRnZXQ6IFdpZGdldCk6IHdpZGdldCBpcyBFeHRlcm5hbExpbmtXaWRnZXQge1xuICAgICAgICByZXR1cm4gd2lkZ2V0LiR3aWRnZXQgPT09IFwiZGF0YXZpZXc6ZXh0ZXJuYWwtbGlua1wiO1xuICAgIH1cblxuICAgIC8qKiBEZXRlcm1pbmVzIGlmIHRoZSBnaXZlbiB3aWRnZXQgaXMgYW55IGtpbmQgb2YgYnVpbHQtaW4gd2lkZ2V0IHdpdGggc3BlY2lhbCByZW5kZXJpbmcgaGFuZGxpbmcuICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGlzQnVpbHRpbih3aWRnZXQ6IFdpZGdldCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gaXNMaXN0UGFpcih3aWRnZXQpIHx8IGlzRXh0ZXJuYWxMaW5rKHdpZGdldCk7XG4gICAgfVxufVxuIiwgIi8qKiBEZWZpbmVzIHRoZSBBU1QgZm9yIGEgZmllbGQgd2hpY2ggY2FuIGJlIGV2YWx1YXRlZC4gKi9cbmltcG9ydCB7IExpdGVyYWwgfSBmcm9tIFwiZGF0YS1tb2RlbC92YWx1ZVwiO1xuXG4vKiogQ29tcGFyaXNvbiBvcGVyYXRvcnMgd2hpY2ggeWllbGQgdHJ1ZS9mYWxzZS4gKi9cbmV4cG9ydCB0eXBlIENvbXBhcmVPcCA9IFwiPlwiIHwgXCI+PVwiIHwgXCI8PVwiIHwgXCI8XCIgfCBcIj1cIiB8IFwiIT1cIjtcbi8qKiBBcml0aG1ldGljIG9wZXJhdG9ycyB3aGljaCB5aWVsZCBudW1iZXJzIGFuZCBvdGhlciB2YWx1ZXMuICovXG5leHBvcnQgdHlwZSBBcml0aG1ldGljT3AgPSBcIitcIiB8IFwiLVwiIHwgXCIqXCIgfCBcIi9cIiB8IFwiJVwiIHwgXCImXCIgfCBcInxcIjtcbi8qKiBBbGwgdmFsaWQgYmluYXJ5IG9wZXJhdG9ycy4gKi9cbmV4cG9ydCB0eXBlIEJpbmFyeU9wID0gQ29tcGFyZU9wIHwgQXJpdGhtZXRpY09wO1xuLyoqIEEgKHBvdGVudGlhbGx5IGNvbXB1dGVkKSBmaWVsZCB0byBzZWxlY3Qgb3IgY29tcGFyZSBhZ2FpbnN0LiAqL1xuZXhwb3J0IHR5cGUgRmllbGQgPVxuICAgIHwgQmluYXJ5T3BGaWVsZFxuICAgIHwgVmFyaWFibGVGaWVsZFxuICAgIHwgTGl0ZXJhbEZpZWxkXG4gICAgfCBGdW5jdGlvbkZpZWxkXG4gICAgfCBJbmRleEZpZWxkXG4gICAgfCBOZWdhdGVkRmllbGRcbiAgICB8IExhbWJkYUZpZWxkXG4gICAgfCBPYmplY3RGaWVsZFxuICAgIHwgTGlzdEZpZWxkO1xuXG4vKiogTGl0ZXJhbCByZXByZXNlbnRhdGlvbiBvZiBzb21lIGZpZWxkIHR5cGUuICovXG5leHBvcnQgaW50ZXJmYWNlIExpdGVyYWxGaWVsZCB7XG4gICAgdHlwZTogXCJsaXRlcmFsXCI7XG4gICAgdmFsdWU6IExpdGVyYWw7XG59XG5cbi8qKiBBIHZhcmlhYmxlIGZpZWxkIGZvciBhIHZhcmlhYmxlIHdpdGggYSBnaXZlbiBuYW1lLiAqL1xuZXhwb3J0IGludGVyZmFjZSBWYXJpYWJsZUZpZWxkIHtcbiAgICB0eXBlOiBcInZhcmlhYmxlXCI7XG4gICAgbmFtZTogc3RyaW5nO1xufVxuXG4vKiogQSBsaXN0LCB3aGljaCBpcyBhbiBvcmRlcmVkIGNvbGxlY3Rpb24gb2YgZmllbGRzLiAqL1xuZXhwb3J0IGludGVyZmFjZSBMaXN0RmllbGQge1xuICAgIHR5cGU6IFwibGlzdFwiO1xuICAgIHZhbHVlczogRmllbGRbXTtcbn1cblxuLyoqIEFuIG9iamVjdCwgd2hpY2ggaXMgYSBtYXBwaW5nIG9mIG5hbWUgdG8gZmllbGQuICovXG5leHBvcnQgaW50ZXJmYWNlIE9iamVjdEZpZWxkIHtcbiAgICB0eXBlOiBcIm9iamVjdFwiO1xuICAgIHZhbHVlczogUmVjb3JkPHN0cmluZywgRmllbGQ+O1xufVxuXG4vKiogQSBiaW5hcnkgb3BlcmF0b3IgZmllbGQgd2hpY2ggY29tYmluZXMgdHdvIHN1Ym5vZGVzIHNvbWVob3cuICovXG5leHBvcnQgaW50ZXJmYWNlIEJpbmFyeU9wRmllbGQge1xuICAgIHR5cGU6IFwiYmluYXJ5b3BcIjtcbiAgICBsZWZ0OiBGaWVsZDtcbiAgICByaWdodDogRmllbGQ7XG4gICAgb3A6IEJpbmFyeU9wO1xufVxuXG4vKiogQSBmdW5jdGlvbiBmaWVsZCB3aGljaCBjYWxscyBhIGZ1bmN0aW9uIG9uIDAgb3IgbW9yZSBhcmd1bWVudHMuICovXG5leHBvcnQgaW50ZXJmYWNlIEZ1bmN0aW9uRmllbGQge1xuICAgIHR5cGU6IFwiZnVuY3Rpb25cIjtcbiAgICAvKiogRWl0aGVyIHRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbiBiZWluZyBjYWxsZWQsIG9yIGEgRnVuY3Rpb24gb2JqZWN0LiAqL1xuICAgIGZ1bmM6IEZpZWxkO1xuICAgIC8qKiBUaGUgYXJndW1lbnRzIGJlaW5nIHBhc3NlZCB0byB0aGUgZnVuY3Rpb24uICovXG4gICAgYXJndW1lbnRzOiBGaWVsZFtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExhbWJkYUZpZWxkIHtcbiAgICB0eXBlOiBcImxhbWJkYVwiO1xuICAgIC8qKiBBbiBvcmRlcmVkIGxpc3Qgb2YgbmFtZWQgYXJndW1lbnRzLiAqL1xuICAgIGFyZ3VtZW50czogc3RyaW5nW107XG4gICAgLyoqIFRoZSBmaWVsZCB3aGljaCBzaG91bGQgYmUgZXZhbHVhdGVkIHdpdGggdGhlIGFyZ3VtZW50cyBpbiBjb250ZXh0LiAqL1xuICAgIHZhbHVlOiBGaWVsZDtcbn1cblxuLyoqIEEgZmllbGQgd2hpY2ggaW5kZXhlcyBhIHZhcmlhYmxlIGludG8gYW5vdGhlciB2YXJpYWJsZS4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSW5kZXhGaWVsZCB7XG4gICAgdHlwZTogXCJpbmRleFwiO1xuICAgIC8qKiBUaGUgZmllbGQgdG8gaW5kZXggaW50by4gKi9cbiAgICBvYmplY3Q6IEZpZWxkO1xuICAgIC8qKiBUaGUgaW5kZXguICovXG4gICAgaW5kZXg6IEZpZWxkO1xufVxuXG4vKiogQSBmaWVsZCB3aGljaCBuZWdhdGVzIHRoZSB2YWx1ZSBvZiB0aGUgb3JpZ2luYWwgZmllbGQuICovXG5leHBvcnQgaW50ZXJmYWNlIE5lZ2F0ZWRGaWVsZCB7XG4gICAgdHlwZTogXCJuZWdhdGVkXCI7XG4gICAgLyoqIFRoZSBjaGlsZCBmaWVsZCB0byBuZWdhdGVkLiAqL1xuICAgIGNoaWxkOiBGaWVsZDtcbn1cblxuLyoqIFV0aWxpdHkgbWV0aG9kcyBmb3IgY3JlYXRpbmcgJiBjb21wYXJpbmcgZmllbGRzLiAqL1xuZXhwb3J0IG5hbWVzcGFjZSBGaWVsZHMge1xuICAgIGV4cG9ydCBmdW5jdGlvbiB2YXJpYWJsZShuYW1lOiBzdHJpbmcpOiBWYXJpYWJsZUZpZWxkIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJ2YXJpYWJsZVwiLCBuYW1lIH07XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGxpdGVyYWwodmFsdWU6IExpdGVyYWwpOiBMaXRlcmFsRmllbGQge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcImxpdGVyYWxcIiwgdmFsdWUgfTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gYmluYXJ5T3AobGVmdDogRmllbGQsIG9wOiBCaW5hcnlPcCwgcmlnaHQ6IEZpZWxkKTogRmllbGQge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcImJpbmFyeW9wXCIsIGxlZnQsIG9wLCByaWdodCB9IGFzIEJpbmFyeU9wRmllbGQ7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGluZGV4KG9iajogRmllbGQsIGluZGV4OiBGaWVsZCk6IEluZGV4RmllbGQge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcImluZGV4XCIsIG9iamVjdDogb2JqLCBpbmRleCB9O1xuICAgIH1cblxuICAgIC8qKiBDb252ZXJ0cyBhIHN0cmluZyBpbiBkb3Qtbm90YXRpb24tZm9ybWF0IGludG8gYSB2YXJpYWJsZSB3aGljaCBpbmRleGVzLiAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBpbmRleFZhcmlhYmxlKG5hbWU6IHN0cmluZyk6IEZpZWxkIHtcbiAgICAgICAgbGV0IHBhcnRzID0gbmFtZS5zcGxpdChcIi5cIik7XG4gICAgICAgIGxldCByZXN1bHQ6IEZpZWxkID0gRmllbGRzLnZhcmlhYmxlKHBhcnRzWzBdKTtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8IHBhcnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgcmVzdWx0ID0gRmllbGRzLmluZGV4KHJlc3VsdCwgRmllbGRzLmxpdGVyYWwocGFydHNbaW5kZXhdKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBsYW1iZGEoYXJnczogc3RyaW5nW10sIHZhbHVlOiBGaWVsZCk6IExhbWJkYUZpZWxkIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJsYW1iZGFcIiwgYXJndW1lbnRzOiBhcmdzLCB2YWx1ZSB9O1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBmdW5jKGZ1bmM6IEZpZWxkLCBhcmdzOiBGaWVsZFtdKTogRnVuY3Rpb25GaWVsZCB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwiZnVuY3Rpb25cIiwgZnVuYywgYXJndW1lbnRzOiBhcmdzIH07XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGxpc3QodmFsdWVzOiBGaWVsZFtdKTogTGlzdEZpZWxkIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJsaXN0XCIsIHZhbHVlcyB9O1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBvYmplY3QodmFsdWVzOiBSZWNvcmQ8c3RyaW5nLCBGaWVsZD4pOiBPYmplY3RGaWVsZCB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwib2JqZWN0XCIsIHZhbHVlcyB9O1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBuZWdhdGUoY2hpbGQ6IEZpZWxkKTogTmVnYXRlZEZpZWxkIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJuZWdhdGVkXCIsIGNoaWxkIH07XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGlzQ29tcGFyZU9wKG9wOiBCaW5hcnlPcCk6IG9wIGlzIENvbXBhcmVPcCB7XG4gICAgICAgIHJldHVybiBvcCA9PSBcIjw9XCIgfHwgb3AgPT0gXCI8XCIgfHwgb3AgPT0gXCI+XCIgfHwgb3AgPT0gXCI+PVwiIHx8IG9wID09IFwiIT1cIiB8fCBvcCA9PSBcIj1cIjtcbiAgICB9XG5cbiAgICBleHBvcnQgY29uc3QgTlVMTCA9IEZpZWxkcy5saXRlcmFsKG51bGwpO1xufVxuIiwgIi8qKiBBU1QgaW1wbGVtZW50YXRpb24gZm9yIHF1ZXJpZXMgb3ZlciBkYXRhIHNvdXJjZXMuICovXG5cbi8qKiBUaGUgc291cmNlIG9mIGZpbGVzIGZvciBhIHF1ZXJ5LiAqL1xuZXhwb3J0IHR5cGUgU291cmNlID0gVGFnU291cmNlIHwgQ3N2U291cmNlIHwgRm9sZGVyU291cmNlIHwgTGlua1NvdXJjZSB8IEVtcHR5U291cmNlIHwgTmVnYXRlZFNvdXJjZSB8IEJpbmFyeU9wU291cmNlO1xuLyoqIFZhbGlkIG9wZXJhdGlvbnMgZm9yIGNvbWJpbmluZyBzb3VyY2VzLiAqL1xuZXhwb3J0IHR5cGUgU291cmNlT3AgPSBcIiZcIiB8IFwifFwiO1xuXG4vKiogQSB0YWcgYXMgYSBzb3VyY2Ugb2YgZGF0YS4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGFnU291cmNlIHtcbiAgICB0eXBlOiBcInRhZ1wiO1xuICAgIC8qKiBUaGUgdGFnIHRvIHNvdXJjZSBmcm9tLiAqL1xuICAgIHRhZzogc3RyaW5nO1xufVxuXG4vKiogQSBjc3YgYXMgYSBzb3VyY2Ugb2YgZGF0YS4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ3N2U291cmNlIHtcbiAgICB0eXBlOiBcImNzdlwiO1xuICAgIC8qKiBUaGUgcGF0aCB0byB0aGUgQ1NWIGZpbGUuICovXG4gICAgcGF0aDogc3RyaW5nO1xufVxuXG4vKiogQSBmb2xkZXIgcHJlZml4IGFzIGEgc291cmNlIG9mIGRhdGEuICovXG5leHBvcnQgaW50ZXJmYWNlIEZvbGRlclNvdXJjZSB7XG4gICAgdHlwZTogXCJmb2xkZXJcIjtcbiAgICAvKiogVGhlIGZvbGRlciBwcmVmaXggdG8gc291cmNlIGZyb20uICovXG4gICAgZm9sZGVyOiBzdHJpbmc7XG59XG5cbi8qKiBFaXRoZXIgaW5jb21pbmcgb3Igb3V0Z29pbmcgbGlua3MgdG8gYSBnaXZlbiBmaWxlLiAqL1xuZXhwb3J0IGludGVyZmFjZSBMaW5rU291cmNlIHtcbiAgICB0eXBlOiBcImxpbmtcIjtcbiAgICAvKiogVGhlIGZpbGUgdG8gbG9vayBmb3IgbGlua3MgdG8vZnJvbS4gICovXG4gICAgZmlsZTogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIFRoZSBkaXJlY3Rpb24gdG8gbG9vayAtIGlmIGluY29taW5nLCB0aGVuIGFsbCBmaWxlcyBsaW5raW5nIHRvIHRoZSB0YXJnZXQgZmlsZS4gSWYgb3V0Z29pbmcsIHRoZW4gYWxsIGZpbGVzXG4gICAgICogd2hpY2ggdGhlIGZpbGUgbGlua3MgdG8uXG4gICAgICovXG4gICAgZGlyZWN0aW9uOiBcImluY29taW5nXCIgfCBcIm91dGdvaW5nXCI7XG59XG5cbi8qKiBBIHNvdXJjZSB3aGljaCBpcyBldmVyeXRoaW5nIEVYQ0VQVCB0aGUgZmlsZXMgcmV0dXJuZWQgYnkgdGhlIGdpdmVuIHNvdXJjZS4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTmVnYXRlZFNvdXJjZSB7XG4gICAgdHlwZTogXCJuZWdhdGVcIjtcbiAgICAvKiogVGhlIHNvdXJjZSB0byBuZWdhdGUuICovXG4gICAgY2hpbGQ6IFNvdXJjZTtcbn1cblxuLyoqIEEgc291cmNlIHdoaWNoIHlpZWxkcyBub3RoaW5nLiAqL1xuZXhwb3J0IGludGVyZmFjZSBFbXB0eVNvdXJjZSB7XG4gICAgdHlwZTogXCJlbXB0eVwiO1xufVxuXG4vKiogQSBzb3VyY2UgbWFkZSBieSBjb21iaW5pbmcgc3Vic291cmNlcyB3aXRoIGEgbG9naWNhbCBvcGVyYXRvcnMuICovXG5leHBvcnQgaW50ZXJmYWNlIEJpbmFyeU9wU291cmNlIHtcbiAgICB0eXBlOiBcImJpbmFyeW9wXCI7XG4gICAgb3A6IFNvdXJjZU9wO1xuICAgIGxlZnQ6IFNvdXJjZTtcbiAgICByaWdodDogU291cmNlO1xufVxuXG4vKiogVXRpbGl0eSBmdW5jdGlvbnMgZm9yIGNyZWF0aW5nIGFuZCBtYW5pcHVsYXRpbmcgc291cmNlcy4gKi9cbmV4cG9ydCBuYW1lc3BhY2UgU291cmNlcyB7XG4gICAgLyoqIENyZWF0ZSBhIHNvdXJjZSB3aGljaCBzZWFyY2hlcyBmcm9tIGEgdGFnLiAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiB0YWcodGFnOiBzdHJpbmcpOiBUYWdTb3VyY2Uge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcInRhZ1wiLCB0YWcgfTtcbiAgICB9XG5cbiAgICAvKiogQ3JlYXRlIGEgc291cmNlIHdoaWNoIGZldGNoZXMgZnJvbSBhIENTViBmaWxlLiAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjc3YocGF0aDogc3RyaW5nKTogQ3N2U291cmNlIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJjc3ZcIiwgcGF0aCB9O1xuICAgIH1cblxuICAgIC8qKiBDcmVhdGUgYSBzb3VyY2Ugd2hpY2ggc2VhcmNoZXMgZm9yIGZpbGVzIHVuZGVyIGEgZm9sZGVyIHByZWZpeC4gKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZm9sZGVyKHByZWZpeDogc3RyaW5nKTogRm9sZGVyU291cmNlIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJmb2xkZXJcIiwgZm9sZGVyOiBwcmVmaXggfTtcbiAgICB9XG5cbiAgICAvKiogQ3JlYXRlIGEgc291cmNlIHdoaWNoIHNlYXJjaGVzIGZvciBmaWxlcyB3aGljaCBsaW5rIHRvL2Zyb20gYSBnaXZlbiBmaWxlLiAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBsaW5rKGZpbGU6IHN0cmluZywgaW5jb21pbmc6IGJvb2xlYW4pOiBMaW5rU291cmNlIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJsaW5rXCIsIGZpbGUsIGRpcmVjdGlvbjogaW5jb21pbmcgPyBcImluY29taW5nXCIgOiBcIm91dGdvaW5nXCIgfTtcbiAgICB9XG5cbiAgICAvKiogQ3JlYXRlIGEgc291cmNlIHdoaWNoIGpvaW5zIHR3byBzb3VyY2VzIGJ5IGEgbG9naWNhbCBvcGVyYXRvciAoYW5kL29yKS4gKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gYmluYXJ5T3AobGVmdDogU291cmNlLCBvcDogU291cmNlT3AsIHJpZ2h0OiBTb3VyY2UpOiBTb3VyY2Uge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcImJpbmFyeW9wXCIsIGxlZnQsIG9wLCByaWdodCB9O1xuICAgIH1cblxuICAgIC8qKiBDcmVhdGUgYSBzb3VyY2Ugd2hpY2ggdGFrZXMgdGhlIGludGVyc2VjdGlvbiBvZiB0d28gc291cmNlcy4gKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gYW5kKGxlZnQ6IFNvdXJjZSwgcmlnaHQ6IFNvdXJjZSk6IFNvdXJjZSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwiYmluYXJ5b3BcIiwgbGVmdCwgb3A6IFwiJlwiLCByaWdodCB9O1xuICAgIH1cblxuICAgIC8qKiBDcmVhdGUgYSBzb3VyY2Ugd2hpY2ggdGFrZXMgdGhlIHVuaW9uIG9mIHR3byBzb3VyY2VzLiAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBvcihsZWZ0OiBTb3VyY2UsIHJpZ2h0OiBTb3VyY2UpOiBTb3VyY2Uge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcImJpbmFyeW9wXCIsIGxlZnQsIG9wOiBcInxcIiwgcmlnaHQgfTtcbiAgICB9XG5cbiAgICAvKiogQ3JlYXRlIGEgc291cmNlIHdoaWNoIG5lZ2F0ZXMgdGhlIHVuZGVybHlpbmcgc291cmNlLiAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBuZWdhdGUoY2hpbGQ6IFNvdXJjZSk6IE5lZ2F0ZWRTb3VyY2Uge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcIm5lZ2F0ZVwiLCBjaGlsZCB9O1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBlbXB0eSgpOiBFbXB0eVNvdXJjZSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwiZW1wdHlcIiB9O1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBEYXRlVGltZSwgRHVyYXRpb24gfSBmcm9tIFwibHV4b25cIjtcbmltcG9ydCB7IExpdGVyYWwsIExpbmsgfSBmcm9tIFwiZGF0YS1tb2RlbC92YWx1ZVwiO1xuaW1wb3J0ICogYXMgUCBmcm9tIFwicGFyc2ltbW9uXCI7XG5pbXBvcnQgeyBCaW5hcnlPcCwgRmllbGQsIEZpZWxkcywgTGFtYmRhRmllbGQsIExpc3RGaWVsZCwgTGl0ZXJhbEZpZWxkLCBPYmplY3RGaWVsZCwgVmFyaWFibGVGaWVsZCB9IGZyb20gXCIuL2ZpZWxkXCI7XG5pbXBvcnQgeyBGb2xkZXJTb3VyY2UsIE5lZ2F0ZWRTb3VyY2UsIFNvdXJjZSwgU291cmNlT3AsIFNvdXJjZXMsIFRhZ1NvdXJjZSwgQ3N2U291cmNlIH0gZnJvbSBcImRhdGEtaW5kZXgvc291cmNlXCI7XG5pbXBvcnQgeyBub3JtYWxpemVEdXJhdGlvbiB9IGZyb20gXCJ1dGlsL25vcm1hbGl6ZVwiO1xuaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSBcImFwaS9yZXN1bHRcIjtcbmltcG9ydCBlbW9qaVJlZ2V4IGZyb20gXCJlbW9qaS1yZWdleFwiO1xuXG4vKiogRW1vamkgcmVnZXggd2l0aG91dCBhbnkgYWRkaXRpb25hbCBmbGFncy4gKi9cbmNvbnN0IEVNT0pJX1JFR0VYID0gbmV3IFJlZ0V4cChlbW9qaVJlZ2V4KCksIFwiXCIpO1xuXG4vKiogUHJvdmlkZXMgYSBsb29rdXAgdGFibGUgZm9yIHVuaXQgZHVyYXRpb25zIG9mIHRoZSBnaXZlbiB0eXBlLiAqL1xuZXhwb3J0IGNvbnN0IERVUkFUSU9OX1RZUEVTID0ge1xuICAgIHllYXI6IER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMSB9KSxcbiAgICB5ZWFyczogRHVyYXRpb24uZnJvbU9iamVjdCh7IHllYXJzOiAxIH0pLFxuICAgIHlyOiBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDEgfSksXG4gICAgeXJzOiBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDEgfSksXG5cbiAgICBtb250aDogRHVyYXRpb24uZnJvbU9iamVjdCh7IG1vbnRoczogMSB9KSxcbiAgICBtb250aHM6IER1cmF0aW9uLmZyb21PYmplY3QoeyBtb250aHM6IDEgfSksXG4gICAgbW86IER1cmF0aW9uLmZyb21PYmplY3QoeyBtb250aHM6IDEgfSksXG4gICAgbW9zOiBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgbW9udGhzOiAxIH0pLFxuXG4gICAgd2VlazogRHVyYXRpb24uZnJvbU9iamVjdCh7IHdlZWtzOiAxIH0pLFxuICAgIHdlZWtzOiBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgd2Vla3M6IDEgfSksXG4gICAgd2s6IER1cmF0aW9uLmZyb21PYmplY3QoeyB3ZWVrczogMSB9KSxcbiAgICB3a3M6IER1cmF0aW9uLmZyb21PYmplY3QoeyB3ZWVrczogMSB9KSxcbiAgICB3OiBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgd2Vla3M6IDEgfSksXG5cbiAgICBkYXk6IER1cmF0aW9uLmZyb21PYmplY3QoeyBkYXlzOiAxIH0pLFxuICAgIGRheXM6IER1cmF0aW9uLmZyb21PYmplY3QoeyBkYXlzOiAxIH0pLFxuICAgIGQ6IER1cmF0aW9uLmZyb21PYmplY3QoeyBkYXlzOiAxIH0pLFxuXG4gICAgaG91cjogRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxIH0pLFxuICAgIGhvdXJzOiBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDEgfSksXG4gICAgaHI6IER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMSB9KSxcbiAgICBocnM6IER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMSB9KSxcbiAgICBoOiBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDEgfSksXG5cbiAgICBtaW51dGU6IER1cmF0aW9uLmZyb21PYmplY3QoeyBtaW51dGVzOiAxIH0pLFxuICAgIG1pbnV0ZXM6IER1cmF0aW9uLmZyb21PYmplY3QoeyBtaW51dGVzOiAxIH0pLFxuICAgIG1pbjogRHVyYXRpb24uZnJvbU9iamVjdCh7IG1pbnV0ZXM6IDEgfSksXG4gICAgbWluczogRHVyYXRpb24uZnJvbU9iamVjdCh7IG1pbnV0ZXM6IDEgfSksXG4gICAgbTogRHVyYXRpb24uZnJvbU9iamVjdCh7IG1pbnV0ZXM6IDEgfSksXG5cbiAgICBzZWNvbmQ6IER1cmF0aW9uLmZyb21PYmplY3QoeyBzZWNvbmRzOiAxIH0pLFxuICAgIHNlY29uZHM6IER1cmF0aW9uLmZyb21PYmplY3QoeyBzZWNvbmRzOiAxIH0pLFxuICAgIHNlYzogRHVyYXRpb24uZnJvbU9iamVjdCh7IHNlY29uZHM6IDEgfSksXG4gICAgc2VjczogRHVyYXRpb24uZnJvbU9iamVjdCh7IHNlY29uZHM6IDEgfSksXG4gICAgczogRHVyYXRpb24uZnJvbU9iamVjdCh7IHNlY29uZHM6IDEgfSksXG59O1xuXG4vKiogU2hvcnRoYW5kIGZvciBjb21tb24gZGF0ZXMgKHJlbGF0aXZlIHRvIHJpZ2h0IG5vdykuICovXG5leHBvcnQgY29uc3QgREFURV9TSE9SVEhBTkRTID0ge1xuICAgIG5vdzogKCkgPT4gRGF0ZVRpbWUubG9jYWwoKSxcbiAgICB0b2RheTogKCkgPT4gRGF0ZVRpbWUubG9jYWwoKS5zdGFydE9mKFwiZGF5XCIpLFxuICAgIHllc3RlcmRheTogKCkgPT5cbiAgICAgICAgRGF0ZVRpbWUubG9jYWwoKVxuICAgICAgICAgICAgLnN0YXJ0T2YoXCJkYXlcIilcbiAgICAgICAgICAgIC5taW51cyhEdXJhdGlvbi5mcm9tT2JqZWN0KHsgZGF5czogMSB9KSksXG4gICAgdG9tb3Jyb3c6ICgpID0+XG4gICAgICAgIERhdGVUaW1lLmxvY2FsKClcbiAgICAgICAgICAgIC5zdGFydE9mKFwiZGF5XCIpXG4gICAgICAgICAgICAucGx1cyhEdXJhdGlvbi5mcm9tT2JqZWN0KHsgZGF5czogMSB9KSksXG4gICAgc293OiAoKSA9PiBEYXRlVGltZS5sb2NhbCgpLnN0YXJ0T2YoXCJ3ZWVrXCIpLFxuICAgIFwic3RhcnQtb2Ytd2Vla1wiOiAoKSA9PiBEYXRlVGltZS5sb2NhbCgpLnN0YXJ0T2YoXCJ3ZWVrXCIpLFxuICAgIGVvdzogKCkgPT4gRGF0ZVRpbWUubG9jYWwoKS5lbmRPZihcIndlZWtcIiksXG4gICAgXCJlbmQtb2Ytd2Vla1wiOiAoKSA9PiBEYXRlVGltZS5sb2NhbCgpLmVuZE9mKFwid2Vla1wiKSxcbiAgICBzb3k6ICgpID0+IERhdGVUaW1lLmxvY2FsKCkuc3RhcnRPZihcInllYXJcIiksXG4gICAgXCJzdGFydC1vZi15ZWFyXCI6ICgpID0+IERhdGVUaW1lLmxvY2FsKCkuc3RhcnRPZihcInllYXJcIiksXG4gICAgZW95OiAoKSA9PiBEYXRlVGltZS5sb2NhbCgpLmVuZE9mKFwieWVhclwiKSxcbiAgICBcImVuZC1vZi15ZWFyXCI6ICgpID0+IERhdGVUaW1lLmxvY2FsKCkuZW5kT2YoXCJ5ZWFyXCIpLFxuICAgIHNvbTogKCkgPT4gRGF0ZVRpbWUubG9jYWwoKS5zdGFydE9mKFwibW9udGhcIiksXG4gICAgXCJzdGFydC1vZi1tb250aFwiOiAoKSA9PiBEYXRlVGltZS5sb2NhbCgpLnN0YXJ0T2YoXCJtb250aFwiKSxcbiAgICBlb206ICgpID0+IERhdGVUaW1lLmxvY2FsKCkuZW5kT2YoXCJtb250aFwiKSxcbiAgICBcImVuZC1vZi1tb250aFwiOiAoKSA9PiBEYXRlVGltZS5sb2NhbCgpLmVuZE9mKFwibW9udGhcIiksXG59O1xuXG4vKipcbiAqIEtleXdvcmRzIHdoaWNoIGNhbm5vdCBiZSB1c2VkIGFzIHZhcmlhYmxlcyBkaXJlY3RseS4gVXNlIGByb3cuPHRoaW5nPmAgaWYgaXQgaXMgYSB2YXJpYWJsZSB5b3UgaGF2ZSBkZWZpbmVkIGFuZCB3YW50XG4gKiB0byBhY2Nlc3MuXG4gKi9cbmV4cG9ydCBjb25zdCBLRVlXT1JEUyA9IFtcIkZST01cIiwgXCJXSEVSRVwiLCBcIkxJTUlUXCIsIFwiR1JPVVBcIiwgXCJGTEFUVEVOXCJdO1xuXG4vLy8vLy8vLy8vLy8vLy9cbi8vIFV0aWxpdGllcyAvL1xuLy8vLy8vLy8vLy8vLy8vXG5cbi8qKiBTcGxpdCBvbiB1bmVzY2FwZWQgcGlwZXMgaW4gYW4gaW5uZXIgbGluay4gKi9cbmZ1bmN0aW9uIHNwbGl0T25VbmVzY2FwZWRQaXBlKGxpbms6IHN0cmluZyk6IFtzdHJpbmcsIHN0cmluZyB8IHVuZGVmaW5lZF0ge1xuICAgIGxldCBwaXBlID0gLTE7XG4gICAgd2hpbGUgKChwaXBlID0gbGluay5pbmRleE9mKFwifFwiLCBwaXBlICsgMSkpID49IDApIHtcbiAgICAgICAgaWYgKHBpcGUgPiAwICYmIGxpbmtbcGlwZSAtIDFdID09IFwiXFxcXFwiKSBjb250aW51ZTtcbiAgICAgICAgcmV0dXJuIFtsaW5rLnN1YnN0cmluZygwLCBwaXBlKS5yZXBsYWNlKC9cXFxcXFx8L2csIFwifFwiKSwgbGluay5zdWJzdHJpbmcocGlwZSArIDEpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gW2xpbmsucmVwbGFjZSgvXFxcXFxcfC9nLCBcInxcIiksIHVuZGVmaW5lZF07XG59XG5cbi8qKiBBdHRlbXB0IHRvIHBhcnNlIHRoZSBpbnNpZGUgb2YgYSBsaW5rIHRvIHB1bGwgb3V0IGRpc3BsYXkgbmFtZSwgc3VicGF0aCwgZXRjLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSW5uZXJMaW5rKHJhd2xpbms6IHN0cmluZyk6IExpbmsge1xuICAgIGxldCBbbGluaywgZGlzcGxheV0gPSBzcGxpdE9uVW5lc2NhcGVkUGlwZShyYXdsaW5rKTtcbiAgICByZXR1cm4gTGluay5pbmZlcihsaW5rLCBmYWxzZSwgZGlzcGxheSk7XG59XG5cbi8qKiBDcmVhdGUgYSBsZWZ0LWFzc29jaWF0aXZlIGJpbmFyeSBwYXJzZXIgd2hpY2ggcGFyc2VzIHRoZSBnaXZlbiBzdWItZWxlbWVudCBhbmQgc2VwYXJhdG9yLiBIYW5kbGVzIHdoaXRlc3BhY2UuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQmluYXJ5UGFyc2VyPFQsIFU+KFxuICAgIGNoaWxkOiBQLlBhcnNlcjxUPixcbiAgICBzZXA6IFAuUGFyc2VyPFU+LFxuICAgIGNvbWJpbmU6IChhOiBULCBiOiBVLCBjOiBUKSA9PiBUXG4pOiBQLlBhcnNlcjxUPiB7XG4gICAgcmV0dXJuIFAuc2VxTWFwKGNoaWxkLCBQLnNlcShQLm9wdFdoaXRlc3BhY2UsIHNlcCwgUC5vcHRXaGl0ZXNwYWNlLCBjaGlsZCkubWFueSgpLCAoZmlyc3QsIHJlc3QpID0+IHtcbiAgICAgICAgaWYgKHJlc3QubGVuZ3RoID09IDApIHJldHVybiBmaXJzdDtcblxuICAgICAgICBsZXQgbm9kZSA9IGNvbWJpbmUoZmlyc3QsIHJlc3RbMF1bMV0sIHJlc3RbMF1bM10pO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgcmVzdC5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIG5vZGUgPSBjb21iaW5lKG5vZGUsIHJlc3RbaW5kZXhdWzFdLCByZXN0W2luZGV4XVszXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbk9wdDxUPihiYXNlOiBQLlBhcnNlcjxUPiwgLi4uZnVuY3M6ICgocjogVCkgPT4gUC5QYXJzZXI8VD4pW10pOiBQLlBhcnNlcjxUPiB7XG4gICAgcmV0dXJuIFAuY3VzdG9tKChzdWNjZXNzLCBmYWlsdXJlKSA9PiB7XG4gICAgICAgIHJldHVybiAoaW5wdXQsIGkpID0+IHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSAoYmFzZSBhcyBhbnkpLl8oaW5wdXQsIGkpO1xuICAgICAgICAgICAgaWYgKCFyZXN1bHQuc3RhdHVzKSByZXR1cm4gcmVzdWx0O1xuXG4gICAgICAgICAgICBmb3IgKGxldCBmdW5jIG9mIGZ1bmNzKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSAoZnVuYyhyZXN1bHQudmFsdWUgYXMgVCkgYXMgYW55KS5fKGlucHV0LCByZXN1bHQuaW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmICghbmV4dC5zdGF0dXMpIHJldHVybiByZXN1bHQ7XG5cbiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXh0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgIH0pO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIEV4cHJlc3Npb24gUGFyc2luZyAvL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmV4cG9ydCB0eXBlIFBvc3RmaXhGcmFnbWVudCA9XG4gICAgfCB7IHR5cGU6IFwiZG90XCI7IGZpZWxkOiBzdHJpbmcgfVxuICAgIHwgeyB0eXBlOiBcImluZGV4XCI7IGZpZWxkOiBGaWVsZCB9XG4gICAgfCB7IHR5cGU6IFwiZnVuY3Rpb25cIjsgZmllbGRzOiBGaWVsZFtdIH07XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXhwcmVzc2lvbkxhbmd1YWdlIHtcbiAgICBudW1iZXI6IG51bWJlcjtcbiAgICBzdHJpbmc6IHN0cmluZztcbiAgICBlc2NhcGVDaGFyYWN0ZXI6IHN0cmluZztcbiAgICBib29sOiBib29sZWFuO1xuICAgIHRhZzogc3RyaW5nO1xuICAgIGlkZW50aWZpZXI6IHN0cmluZztcbiAgICBsaW5rOiBMaW5rO1xuICAgIGVtYmVkTGluazogTGluaztcbiAgICByb290RGF0ZTogRGF0ZVRpbWU7XG4gICAgZGF0ZVNob3J0aGFuZDoga2V5b2YgdHlwZW9mIERBVEVfU0hPUlRIQU5EUztcbiAgICBkYXRlOiBEYXRlVGltZTtcbiAgICBkYXRlUGx1czogRGF0ZVRpbWU7XG4gICAgZHVyYXRpb25UeXBlOiBrZXlvZiB0eXBlb2YgRFVSQVRJT05fVFlQRVM7XG4gICAgZHVyYXRpb246IER1cmF0aW9uO1xuICAgIHJhd051bGw6IHN0cmluZztcblxuICAgIGJpbmFyeVBsdXNNaW51czogQmluYXJ5T3A7XG4gICAgYmluYXJ5TXVsRGl2OiBCaW5hcnlPcDtcbiAgICBiaW5hcnlDb21wYXJlT3A6IEJpbmFyeU9wO1xuICAgIGJpbmFyeUJvb2xlYW5PcDogQmluYXJ5T3A7XG5cbiAgICAvLyBTb3VyY2UtcmVsYXRlZCBwYXJzZXJzLlxuICAgIHRhZ1NvdXJjZTogVGFnU291cmNlO1xuICAgIGNzdlNvdXJjZTogQ3N2U291cmNlO1xuICAgIGZvbGRlclNvdXJjZTogRm9sZGVyU291cmNlO1xuICAgIHBhcmVuc1NvdXJjZTogU291cmNlO1xuICAgIGF0b21Tb3VyY2U6IFNvdXJjZTtcbiAgICBsaW5rSW5jb21pbmdTb3VyY2U6IFNvdXJjZTtcbiAgICBsaW5rT3V0Z29pbmdTb3VyY2U6IFNvdXJjZTtcbiAgICBuZWdhdGVTb3VyY2U6IE5lZ2F0ZWRTb3VyY2U7XG4gICAgYmluYXJ5T3BTb3VyY2U6IFNvdXJjZTtcbiAgICBzb3VyY2U6IFNvdXJjZTtcblxuICAgIC8vIEZpZWxkLXJlbGF0ZWQgcGFyc2Vycy5cbiAgICB2YXJpYWJsZUZpZWxkOiBWYXJpYWJsZUZpZWxkO1xuICAgIG51bWJlckZpZWxkOiBMaXRlcmFsRmllbGQ7XG4gICAgYm9vbEZpZWxkOiBMaXRlcmFsRmllbGQ7XG4gICAgc3RyaW5nRmllbGQ6IExpdGVyYWxGaWVsZDtcbiAgICBkYXRlRmllbGQ6IExpdGVyYWxGaWVsZDtcbiAgICBkdXJhdGlvbkZpZWxkOiBMaXRlcmFsRmllbGQ7XG4gICAgbGlua0ZpZWxkOiBMaXRlcmFsRmllbGQ7XG4gICAgbnVsbEZpZWxkOiBMaXRlcmFsRmllbGQ7XG5cbiAgICBsaXN0RmllbGQ6IExpc3RGaWVsZDtcbiAgICBvYmplY3RGaWVsZDogT2JqZWN0RmllbGQ7XG5cbiAgICBhdG9tSW5saW5lRmllbGQ6IExpdGVyYWw7XG4gICAgaW5saW5lRmllbGRMaXN0OiBMaXRlcmFsW107XG4gICAgaW5saW5lRmllbGQ6IExpdGVyYWw7XG5cbiAgICBuZWdhdGVkRmllbGQ6IEZpZWxkO1xuICAgIGF0b21GaWVsZDogRmllbGQ7XG4gICAgaW5kZXhGaWVsZDogRmllbGQ7XG4gICAgbGFtYmRhRmllbGQ6IExhbWJkYUZpZWxkO1xuXG4gICAgLy8gUG9zdGZpeCBwYXJzZXJzIGZvciBmdW5jdGlvbiBjYWxscyAmIHRoZSBsaWtlLlxuICAgIGRvdFBvc3RmaXg6IFBvc3RmaXhGcmFnbWVudDtcbiAgICBpbmRleFBvc3RmaXg6IFBvc3RmaXhGcmFnbWVudDtcbiAgICBmdW5jdGlvblBvc3RmaXg6IFBvc3RmaXhGcmFnbWVudDtcblxuICAgIC8vIEJpbmFyeSBvcCBwYXJzZXJzLlxuICAgIGJpbmFyeU11bERpdkZpZWxkOiBGaWVsZDtcbiAgICBiaW5hcnlQbHVzTWludXNGaWVsZDogRmllbGQ7XG4gICAgYmluYXJ5Q29tcGFyZUZpZWxkOiBGaWVsZDtcbiAgICBiaW5hcnlCb29sZWFuRmllbGQ6IEZpZWxkO1xuICAgIGJpbmFyeU9wRmllbGQ6IEZpZWxkO1xuICAgIHBhcmVuc0ZpZWxkOiBGaWVsZDtcbiAgICBmaWVsZDogRmllbGQ7XG59XG5cbmV4cG9ydCBjb25zdCBFWFBSRVNTSU9OID0gUC5jcmVhdGVMYW5ndWFnZTxFeHByZXNzaW9uTGFuZ3VhZ2U+KHtcbiAgICAvLyBBIGZsb2F0aW5nIHBvaW50IG51bWJlcjsgdGhlIGRlY2ltYWwgcG9pbnQgaXMgb3B0aW9uYWwuXG4gICAgbnVtYmVyOiBxID0+XG4gICAgICAgIFAucmVnZXhwKC8tP1swLTldKyhcXC5bMC05XSspPy8pXG4gICAgICAgICAgICAubWFwKHN0ciA9PiBOdW1iZXIucGFyc2VGbG9hdChzdHIpKVxuICAgICAgICAgICAgLmRlc2MoXCJudW1iZXJcIiksXG5cbiAgICAvLyBBIHF1b3RlLXN1cnJvdW5kZWQgc3RyaW5nIHdoaWNoIHN1cHBvcnRzIGVzY2FwZSBjaGFyYWN0ZXJzICgnXFwnKS5cbiAgICBzdHJpbmc6IHEgPT5cbiAgICAgICAgUC5zdHJpbmcoJ1wiJylcbiAgICAgICAgICAgIC50aGVuKFxuICAgICAgICAgICAgICAgIFAuYWx0KHEuZXNjYXBlQ2hhcmFjdGVyLCBQLm5vbmVPZignXCJcXFxcJykpXG4gICAgICAgICAgICAgICAgICAgIC5hdExlYXN0KDApXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoY2hhcnMgPT4gY2hhcnMuam9pbihcIlwiKSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5za2lwKFAuc3RyaW5nKCdcIicpKVxuICAgICAgICAgICAgLmRlc2MoXCJzdHJpbmdcIiksXG5cbiAgICBlc2NhcGVDaGFyYWN0ZXI6IF8gPT5cbiAgICAgICAgUC5zdHJpbmcoXCJcXFxcXCIpXG4gICAgICAgICAgICAudGhlbihQLmFueSlcbiAgICAgICAgICAgIC5tYXAoZXNjYXBlZCA9PiB7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgYXJlIGVzY2FwaW5nIGEgYmFja3NsYXNoIG9yIGEgcXVvdGUsIHBhc3MgaW4gb24gaW4gZXNjYXBlZCBmb3JtXG4gICAgICAgICAgICAgICAgaWYgKGVzY2FwZWQgPT09ICdcIicpIHJldHVybiAnXCInO1xuICAgICAgICAgICAgICAgIGlmIChlc2NhcGVkID09PSBcIlxcXFxcIikgcmV0dXJuIFwiXFxcXFwiO1xuICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIFwiXFxcXFwiICsgZXNjYXBlZDtcbiAgICAgICAgICAgIH0pLFxuXG4gICAgLy8gQSBib29sZWFuIHRydWUvZmFsc2UgdmFsdWUuXG4gICAgYm9vbDogXyA9PlxuICAgICAgICBQLnJlZ2V4cCgvdHJ1ZXxmYWxzZXxUcnVlfEZhbHNlLylcbiAgICAgICAgICAgIC5tYXAoc3RyID0+IHN0ci50b0xvd2VyQ2FzZSgpID09IFwidHJ1ZVwiKVxuICAgICAgICAgICAgLmRlc2MoXCJib29sZWFuICgndHJ1ZScgb3IgJ2ZhbHNlJylcIiksXG5cbiAgICAvLyBBIHRhZyBvZiB0aGUgZm9ybSAnI3N0dWZmL2hlbGxvLXRoZXJlJy5cbiAgICB0YWc6IF8gPT5cbiAgICAgICAgUC5zZXFNYXAoXG4gICAgICAgICAgICBQLnN0cmluZyhcIiNcIiksXG4gICAgICAgICAgICBQLmFsdChQLnJlZ2V4cCgvW1xccHtMZXR0ZXJ9MC05Xy8tXS91KS5kZXNjKFwidGV4dFwiKSwgUC5yZWdleHAoRU1PSklfUkVHRVgpLmRlc2MoXCJ0ZXh0XCIpKS5tYW55KCksXG4gICAgICAgICAgICAoc3RhcnQsIHJlc3QpID0+IHN0YXJ0ICsgcmVzdC5qb2luKFwiXCIpXG4gICAgICAgICkuZGVzYyhcInRhZyAoJyNoZWxsby9zdHVmZicpXCIpLFxuXG4gICAgLy8gQSB2YXJpYWJsZSBpZGVudGlmaWVyLCB3aGljaCBpcyBhbHBoYW51bWVyaWMgYW5kIG11c3Qgc3RhcnQgd2l0aCBhIGxldHRlciBvci4uLiBlbW9qaS5cbiAgICBpZGVudGlmaWVyOiBfID0+XG4gICAgICAgIFAuc2VxTWFwKFxuICAgICAgICAgICAgUC5hbHQoUC5yZWdleHAoL1xccHtMZXR0ZXJ9L3UpLCBQLnJlZ2V4cChFTU9KSV9SRUdFWCkuZGVzYyhcInRleHRcIikpLFxuICAgICAgICAgICAgUC5hbHQoUC5yZWdleHAoL1swLTlcXHB7TGV0dGVyfV8tXS91KSwgUC5yZWdleHAoRU1PSklfUkVHRVgpLmRlc2MoXCJ0ZXh0XCIpKS5tYW55KCksXG4gICAgICAgICAgICAoZmlyc3QsIHJlc3QpID0+IGZpcnN0ICsgcmVzdC5qb2luKFwiXCIpXG4gICAgICAgICkuZGVzYyhcInZhcmlhYmxlIGlkZW50aWZpZXJcIiksXG5cbiAgICAvLyBBbiBPYnNpZGlhbiBsaW5rIG9mIHRoZSBmb3JtIFtbPGxpbms+XV0uXG4gICAgbGluazogXyA9PlxuICAgICAgICBQLnJlZ2V4cCgvXFxbXFxbKFteXFxbXFxdXSo/KVxcXVxcXS91LCAxKVxuICAgICAgICAgICAgLm1hcChsaW5rSW5uZXIgPT4gcGFyc2VJbm5lckxpbmsobGlua0lubmVyKSlcbiAgICAgICAgICAgIC5kZXNjKFwiZmlsZSBsaW5rXCIpLFxuXG4gICAgLy8gQW4gZW1iZWRkYWJsZSBsaW5rIHdoaWNoIGNhbiBzdGFydCB3aXRoICchJy4gVGhpcyBvdmVybGFwcyB3aXRoIHRoZSBub3JtYWwgbmVnYXRpb24gb3BlcmF0b3IsIHNvIGl0IGlzIG9ubHlcbiAgICAvLyBwcm92aWRlZCBmb3IgbWV0YWRhdGEgcGFyc2luZy5cbiAgICBlbWJlZExpbms6IHEgPT5cbiAgICAgICAgUC5zZXFNYXAoUC5zdHJpbmcoXCIhXCIpLmF0TW9zdCgxKSwgcS5saW5rLCAocCwgbCkgPT4ge1xuICAgICAgICAgICAgaWYgKHAubGVuZ3RoID4gMCkgbC5lbWJlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gbDtcbiAgICAgICAgfSkuZGVzYyhcImZpbGUgbGlua1wiKSxcblxuICAgIC8vIEJpbmFyeSBwbHVzIG9yIG1pbnVzIG9wZXJhdG9yLlxuICAgIGJpbmFyeVBsdXNNaW51czogXyA9PlxuICAgICAgICBQLnJlZ2V4cCgvXFwrfC0vKVxuICAgICAgICAgICAgLm1hcChzdHIgPT4gc3RyIGFzIEJpbmFyeU9wKVxuICAgICAgICAgICAgLmRlc2MoXCInKycgb3IgJy0nXCIpLFxuXG4gICAgLy8gQmluYXJ5IHRpbWVzIG9yIGRpdmlkZSBvcGVyYXRvci5cbiAgICBiaW5hcnlNdWxEaXY6IF8gPT5cbiAgICAgICAgUC5yZWdleHAoL1xcKnxcXC98JS8pXG4gICAgICAgICAgICAubWFwKHN0ciA9PiBzdHIgYXMgQmluYXJ5T3ApXG4gICAgICAgICAgICAuZGVzYyhcIicqJyBvciAnLycgb3IgJyUnXCIpLFxuXG4gICAgLy8gQmluYXJ5IGNvbXBhcmlzb24gb3BlcmF0b3IuXG4gICAgYmluYXJ5Q29tcGFyZU9wOiBfID0+XG4gICAgICAgIFAucmVnZXhwKC8+PXw8PXwhPXw+fDx8PS8pXG4gICAgICAgICAgICAubWFwKHN0ciA9PiBzdHIgYXMgQmluYXJ5T3ApXG4gICAgICAgICAgICAuZGVzYyhcIic+PScgb3IgJzw9JyBvciAnIT0nIG9yICc9JyBvciAnPicgb3IgJzwnXCIpLFxuXG4gICAgLy8gQmluYXJ5IGJvb2xlYW4gY29tYmluYXRpb24gb3BlcmF0b3IuXG4gICAgYmluYXJ5Qm9vbGVhbk9wOiBfID0+XG4gICAgICAgIFAucmVnZXhwKC9hbmR8b3J8JnxcXHwvaSlcbiAgICAgICAgICAgIC5tYXAoc3RyID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc3RyLnRvTG93ZXJDYXNlKCkgPT0gXCJhbmRcIikgcmV0dXJuIFwiJlwiO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0ci50b0xvd2VyQ2FzZSgpID09IFwib3JcIikgcmV0dXJuIFwifFwiO1xuICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIHN0ciBhcyBCaW5hcnlPcDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZGVzYyhcIidhbmQnIG9yICdvcidcIiksXG5cbiAgICAvLyBBIGRhdGUgd2hpY2ggY2FuIGJlIFlZWVktTU1bLUREVEhIOm1tOnNzXS5cbiAgICByb290RGF0ZTogXyA9PlxuICAgICAgICBQLnNlcU1hcChQLnJlZ2V4cCgvXFxkezR9LyksIFAuc3RyaW5nKFwiLVwiKSwgUC5yZWdleHAoL1xcZHsyfS8pLCAoeWVhciwgXywgbW9udGgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBEYXRlVGltZS5mcm9tT2JqZWN0KHsgeWVhcjogTnVtYmVyLnBhcnNlSW50KHllYXIpLCBtb250aDogTnVtYmVyLnBhcnNlSW50KG1vbnRoKSB9KTtcbiAgICAgICAgfSkuZGVzYyhcImRhdGUgaW4gZm9ybWF0IFlZWVktTU1bLUREVEhILU1NLVNTLk1TXVwiKSxcbiAgICBkYXRlU2hvcnRoYW5kOiBfID0+XG4gICAgICAgIFAuYWx0KFxuICAgICAgICAgICAgLi4uT2JqZWN0LmtleXMoREFURV9TSE9SVEhBTkRTKVxuICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmxlbmd0aCAtIGEubGVuZ3RoKVxuICAgICAgICAgICAgICAgIC5tYXAoUC5zdHJpbmcpXG4gICAgICAgICkgYXMgUC5QYXJzZXI8a2V5b2YgdHlwZW9mIERBVEVfU0hPUlRIQU5EUz4sXG4gICAgZGF0ZTogcSA9PlxuICAgICAgICBjaGFpbk9wdDxEYXRlVGltZT4oXG4gICAgICAgICAgICBxLnJvb3REYXRlLFxuICAgICAgICAgICAgKHltOiBEYXRlVGltZSkgPT5cbiAgICAgICAgICAgICAgICBQLnNlcU1hcChQLnN0cmluZyhcIi1cIiksIFAucmVnZXhwKC9cXGR7Mn0vKSwgKF8sIGRheSkgPT4geW0uc2V0KHsgZGF5OiBOdW1iZXIucGFyc2VJbnQoZGF5KSB9KSksXG4gICAgICAgICAgICAoeW1kOiBEYXRlVGltZSkgPT5cbiAgICAgICAgICAgICAgICBQLnNlcU1hcChQLnN0cmluZyhcIlRcIiksIFAucmVnZXhwKC9cXGR7Mn0vKSwgKF8sIGhvdXIpID0+IHltZC5zZXQoeyBob3VyOiBOdW1iZXIucGFyc2VJbnQoaG91cikgfSkpLFxuICAgICAgICAgICAgKHltZGg6IERhdGVUaW1lKSA9PlxuICAgICAgICAgICAgICAgIFAuc2VxTWFwKFAuc3RyaW5nKFwiOlwiKSwgUC5yZWdleHAoL1xcZHsyfS8pLCAoXywgbWludXRlKSA9PlxuICAgICAgICAgICAgICAgICAgICB5bWRoLnNldCh7IG1pbnV0ZTogTnVtYmVyLnBhcnNlSW50KG1pbnV0ZSkgfSlcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgKHltZGhtOiBEYXRlVGltZSkgPT5cbiAgICAgICAgICAgICAgICBQLnNlcU1hcChQLnN0cmluZyhcIjpcIiksIFAucmVnZXhwKC9cXGR7Mn0vKSwgKF8sIHNlY29uZCkgPT5cbiAgICAgICAgICAgICAgICAgICAgeW1kaG0uc2V0KHsgc2Vjb25kOiBOdW1iZXIucGFyc2VJbnQoc2Vjb25kKSB9KVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAoeW1kaG1zOiBEYXRlVGltZSkgPT5cbiAgICAgICAgICAgICAgICBQLmFsdChcbiAgICAgICAgICAgICAgICAgICAgUC5zZXFNYXAoUC5zdHJpbmcoXCIuXCIpLCBQLnJlZ2V4cCgvXFxkezN9LyksIChfLCBtaWxsaXNlY29uZCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHltZGhtcy5zZXQoeyBtaWxsaXNlY29uZDogTnVtYmVyLnBhcnNlSW50KG1pbGxpc2Vjb25kKSB9KVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBQLnN1Y2NlZWQoeW1kaG1zKSAvLyBwYXNzXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIChkdDogRGF0ZVRpbWUpID0+XG4gICAgICAgICAgICAgICAgUC5hbHQoXG4gICAgICAgICAgICAgICAgICAgIFAuc2VxTWFwKFAuc3RyaW5nKFwiK1wiKS5vcihQLnN0cmluZyhcIi1cIikpLCBQLnJlZ2V4cCgvXFxkezEsMn0oOlxcZHsyfSk/LyksIChwbSwgaHIpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICBkdC5zZXRab25lKFwiVVRDXCIgKyBwbSArIGhyLCB7IGtlZXBMb2NhbFRpbWU6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgUC5zZXFNYXAoUC5zdHJpbmcoXCJaXCIpLCAoKSA9PiBkdC5zZXRab25lKFwidXRjXCIsIHsga2VlcExvY2FsVGltZTogdHJ1ZSB9KSksXG4gICAgICAgICAgICAgICAgICAgIFAuc2VxTWFwKFAuc3RyaW5nKFwiW1wiKSwgUC5yZWdleHAoL1swLTlBLVphLXorLVxcL10rL3UpLCBQLnN0cmluZyhcIl1cIiksIChfYSwgem9uZSwgX2IpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICBkdC5zZXRab25lKHpvbmUsIHsga2VlcExvY2FsVGltZTogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICApXG4gICAgICAgICAgICAuYXNzZXJ0KChkdDogRGF0ZVRpbWUpID0+IGR0LmlzVmFsaWQsIFwidmFsaWQgZGF0ZVwiKVxuICAgICAgICAgICAgLmRlc2MoXCJkYXRlIGluIGZvcm1hdCBZWVlZLU1NWy1ERFRISC1NTS1TUy5NU11cIiksXG5cbiAgICAvLyBBIGRhdGUsIHBsdXMgdmFyaW91cyBzaG9ydGhhbmQgdGltZXMgb2YgZGF5IGl0IGNvdWxkIGJlLlxuICAgIGRhdGVQbHVzOiBxID0+XG4gICAgICAgIFAuYWx0PERhdGVUaW1lPihcbiAgICAgICAgICAgIHEuZGF0ZVNob3J0aGFuZC5tYXAoZCA9PiBEQVRFX1NIT1JUSEFORFNbZF0oKSksXG4gICAgICAgICAgICBxLmRhdGVcbiAgICAgICAgKS5kZXNjKFwiZGF0ZSBpbiBmb3JtYXQgWVlZWS1NTVstRERUSEgtTU0tU1MuTVNdIG9yIGluIHNob3J0aGFuZFwiKSxcblxuICAgIC8vIEEgZHVyYXRpb24gb2YgdGltZS5cbiAgICBkdXJhdGlvblR5cGU6IF8gPT5cbiAgICAgICAgUC5hbHQoXG4gICAgICAgICAgICAuLi5PYmplY3Qua2V5cyhEVVJBVElPTl9UWVBFUylcbiAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYi5sZW5ndGggLSBhLmxlbmd0aClcbiAgICAgICAgICAgICAgICAubWFwKFAuc3RyaW5nKVxuICAgICAgICApIGFzIFAuUGFyc2VyPGtleW9mIHR5cGVvZiBEVVJBVElPTl9UWVBFUz4sXG4gICAgZHVyYXRpb246IHEgPT5cbiAgICAgICAgUC5zZXFNYXAocS5udW1iZXIsIFAub3B0V2hpdGVzcGFjZSwgcS5kdXJhdGlvblR5cGUsIChjb3VudCwgXywgdCkgPT4gRFVSQVRJT05fVFlQRVNbdF0ubWFwVW5pdHMoeCA9PiB4ICogY291bnQpKVxuICAgICAgICAgICAgLnNlcEJ5MShQLnN0cmluZyhcIixcIikudHJpbShQLm9wdFdoaXRlc3BhY2UpLm9yKFAub3B0V2hpdGVzcGFjZSkpXG4gICAgICAgICAgICAubWFwKGR1cmF0aW9ucyA9PiBkdXJhdGlvbnMucmVkdWNlKChwLCBjKSA9PiBwLnBsdXMoYykpKVxuICAgICAgICAgICAgLmRlc2MoXCJkdXJhdGlvbiBsaWtlIDRocjJtaW5cIiksXG5cbiAgICAvLyBBIHJhdyBudWxsIHZhbHVlLlxuICAgIHJhd051bGw6IF8gPT4gUC5zdHJpbmcoXCJudWxsXCIpLFxuXG4gICAgLy8gU291cmNlIHBhcnNpbmcuXG4gICAgdGFnU291cmNlOiBxID0+IHEudGFnLm1hcCh0YWcgPT4gU291cmNlcy50YWcodGFnKSksXG4gICAgY3N2U291cmNlOiBxID0+XG4gICAgICAgIFAuc2VxTWFwKFAuc3RyaW5nKFwiY3N2KFwiKS5za2lwKFAub3B0V2hpdGVzcGFjZSksIHEuc3RyaW5nLCBQLnN0cmluZyhcIilcIiksIChfMSwgcGF0aCwgXzIpID0+IFNvdXJjZXMuY3N2KHBhdGgpKSxcbiAgICBsaW5rSW5jb21pbmdTb3VyY2U6IHEgPT4gcS5saW5rLm1hcChsaW5rID0+IFNvdXJjZXMubGluayhsaW5rLnBhdGgsIHRydWUpKSxcbiAgICBsaW5rT3V0Z29pbmdTb3VyY2U6IHEgPT5cbiAgICAgICAgUC5zZXFNYXAoUC5zdHJpbmcoXCJvdXRnb2luZyhcIikuc2tpcChQLm9wdFdoaXRlc3BhY2UpLCBxLmxpbmssIFAuc3RyaW5nKFwiKVwiKSwgKF8xLCBsaW5rLCBfMikgPT5cbiAgICAgICAgICAgIFNvdXJjZXMubGluayhsaW5rLnBhdGgsIGZhbHNlKVxuICAgICAgICApLFxuICAgIGZvbGRlclNvdXJjZTogcSA9PiBxLnN0cmluZy5tYXAoc3RyID0+IFNvdXJjZXMuZm9sZGVyKHN0cikpLFxuICAgIHBhcmVuc1NvdXJjZTogcSA9PlxuICAgICAgICBQLnNlcU1hcChcbiAgICAgICAgICAgIFAuc3RyaW5nKFwiKFwiKSxcbiAgICAgICAgICAgIFAub3B0V2hpdGVzcGFjZSxcbiAgICAgICAgICAgIHEuc291cmNlLFxuICAgICAgICAgICAgUC5vcHRXaGl0ZXNwYWNlLFxuICAgICAgICAgICAgUC5zdHJpbmcoXCIpXCIpLFxuICAgICAgICAgICAgKF8xLCBfMiwgZmllbGQsIF8zLCBfNCkgPT4gZmllbGRcbiAgICAgICAgKSxcbiAgICBuZWdhdGVTb3VyY2U6IHEgPT5cbiAgICAgICAgUC5zZXFNYXAoUC5hbHQoUC5zdHJpbmcoXCItXCIpLCBQLnN0cmluZyhcIiFcIikpLCBxLmF0b21Tb3VyY2UsIChfLCBzb3VyY2UpID0+IFNvdXJjZXMubmVnYXRlKHNvdXJjZSkpLFxuICAgIGF0b21Tb3VyY2U6IHEgPT5cbiAgICAgICAgUC5hbHQ8U291cmNlPihcbiAgICAgICAgICAgIHEucGFyZW5zU291cmNlLFxuICAgICAgICAgICAgcS5uZWdhdGVTb3VyY2UsXG4gICAgICAgICAgICBxLmxpbmtPdXRnb2luZ1NvdXJjZSxcbiAgICAgICAgICAgIHEubGlua0luY29taW5nU291cmNlLFxuICAgICAgICAgICAgcS5mb2xkZXJTb3VyY2UsXG4gICAgICAgICAgICBxLnRhZ1NvdXJjZSxcbiAgICAgICAgICAgIHEuY3N2U291cmNlXG4gICAgICAgICksXG4gICAgYmluYXJ5T3BTb3VyY2U6IHEgPT5cbiAgICAgICAgY3JlYXRlQmluYXJ5UGFyc2VyKFxuICAgICAgICAgICAgcS5hdG9tU291cmNlLFxuICAgICAgICAgICAgcS5iaW5hcnlCb29sZWFuT3AubWFwKHMgPT4gcyBhcyBTb3VyY2VPcCksXG4gICAgICAgICAgICBTb3VyY2VzLmJpbmFyeU9wXG4gICAgICAgICksXG4gICAgc291cmNlOiBxID0+IHEuYmluYXJ5T3BTb3VyY2UsXG5cbiAgICAvLyBGaWVsZCBwYXJzaW5nLlxuICAgIHZhcmlhYmxlRmllbGQ6IHEgPT5cbiAgICAgICAgcS5pZGVudGlmaWVyXG4gICAgICAgICAgICAuY2hhaW4ociA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKEtFWVdPUkRTLmluY2x1ZGVzKHIudG9VcHBlckNhc2UoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFAuZmFpbChcIlZhcmlhYmxlIGZpZWxkcyBjYW5ub3QgYmUgYSBrZXl3b3JkIChcIiArIEtFWVdPUkRTLmpvaW4oXCIgb3IgXCIpICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQLnN1Y2NlZWQoRmllbGRzLnZhcmlhYmxlKHIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmRlc2MoXCJ2YXJpYWJsZVwiKSxcbiAgICBudW1iZXJGaWVsZDogcSA9PiBxLm51bWJlci5tYXAodmFsID0+IEZpZWxkcy5saXRlcmFsKHZhbCkpLmRlc2MoXCJudW1iZXJcIiksXG4gICAgc3RyaW5nRmllbGQ6IHEgPT4gcS5zdHJpbmcubWFwKHZhbCA9PiBGaWVsZHMubGl0ZXJhbCh2YWwpKS5kZXNjKFwic3RyaW5nXCIpLFxuICAgIGJvb2xGaWVsZDogcSA9PiBxLmJvb2wubWFwKHZhbCA9PiBGaWVsZHMubGl0ZXJhbCh2YWwpKS5kZXNjKFwiYm9vbGVhblwiKSxcbiAgICBkYXRlRmllbGQ6IHEgPT5cbiAgICAgICAgUC5zZXFNYXAoXG4gICAgICAgICAgICBQLnN0cmluZyhcImRhdGUoXCIpLFxuICAgICAgICAgICAgUC5vcHRXaGl0ZXNwYWNlLFxuICAgICAgICAgICAgcS5kYXRlUGx1cyxcbiAgICAgICAgICAgIFAub3B0V2hpdGVzcGFjZSxcbiAgICAgICAgICAgIFAuc3RyaW5nKFwiKVwiKSxcbiAgICAgICAgICAgIChwcmVmaXgsIF8xLCBkYXRlLCBfMiwgcG9zdGZpeCkgPT4gRmllbGRzLmxpdGVyYWwoZGF0ZSlcbiAgICAgICAgKS5kZXNjKFwiZGF0ZVwiKSxcbiAgICBkdXJhdGlvbkZpZWxkOiBxID0+XG4gICAgICAgIFAuc2VxTWFwKFxuICAgICAgICAgICAgUC5zdHJpbmcoXCJkdXIoXCIpLFxuICAgICAgICAgICAgUC5vcHRXaGl0ZXNwYWNlLFxuICAgICAgICAgICAgcS5kdXJhdGlvbixcbiAgICAgICAgICAgIFAub3B0V2hpdGVzcGFjZSxcbiAgICAgICAgICAgIFAuc3RyaW5nKFwiKVwiKSxcbiAgICAgICAgICAgIChwcmVmaXgsIF8xLCBkdXIsIF8yLCBwb3N0Zml4KSA9PiBGaWVsZHMubGl0ZXJhbChkdXIpXG4gICAgICAgICkuZGVzYyhcImR1cmF0aW9uXCIpLFxuICAgIG51bGxGaWVsZDogcSA9PiBxLnJhd051bGwubWFwKF8gPT4gRmllbGRzLk5VTEwpLFxuICAgIGxpbmtGaWVsZDogcSA9PiBxLmxpbmsubWFwKGYgPT4gRmllbGRzLmxpdGVyYWwoZikpLFxuICAgIGxpc3RGaWVsZDogcSA9PlxuICAgICAgICBxLmZpZWxkXG4gICAgICAgICAgICAuc2VwQnkoUC5zdHJpbmcoXCIsXCIpLnRyaW0oUC5vcHRXaGl0ZXNwYWNlKSlcbiAgICAgICAgICAgIC53cmFwKFAuc3RyaW5nKFwiW1wiKS5za2lwKFAub3B0V2hpdGVzcGFjZSksIFAub3B0V2hpdGVzcGFjZS50aGVuKFAuc3RyaW5nKFwiXVwiKSkpXG4gICAgICAgICAgICAubWFwKGwgPT4gRmllbGRzLmxpc3QobCkpXG4gICAgICAgICAgICAuZGVzYyhcImxpc3QgKCdbMSwgMiwgM10nKVwiKSxcbiAgICBvYmplY3RGaWVsZDogcSA9PlxuICAgICAgICBQLnNlcU1hcChxLmlkZW50aWZpZXIub3IocS5zdHJpbmcpLCBQLnN0cmluZyhcIjpcIikudHJpbShQLm9wdFdoaXRlc3BhY2UpLCBxLmZpZWxkLCAobmFtZSwgX3NlcCwgdmFsdWUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7IG5hbWUsIHZhbHVlIH07XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuc2VwQnkoUC5zdHJpbmcoXCIsXCIpLnRyaW0oUC5vcHRXaGl0ZXNwYWNlKSlcbiAgICAgICAgICAgIC53cmFwKFAuc3RyaW5nKFwie1wiKS5za2lwKFAub3B0V2hpdGVzcGFjZSksIFAub3B0V2hpdGVzcGFjZS50aGVuKFAuc3RyaW5nKFwifVwiKSkpXG4gICAgICAgICAgICAubWFwKHZhbHMgPT4ge1xuICAgICAgICAgICAgICAgIGxldCByZXM6IFJlY29yZDxzdHJpbmcsIEZpZWxkPiA9IHt9O1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGVudHJ5IG9mIHZhbHMpIHJlc1tlbnRyeS5uYW1lXSA9IGVudHJ5LnZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBGaWVsZHMub2JqZWN0KHJlcyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmRlc2MoXCJvYmplY3QgKCd7IGE6IDEsIGI6IDIgfScpXCIpLFxuXG4gICAgYXRvbUlubGluZUZpZWxkOiBxID0+XG4gICAgICAgIFAuYWx0KFxuICAgICAgICAgICAgcS5kYXRlLFxuICAgICAgICAgICAgcS5kdXJhdGlvbi5tYXAoZCA9PiBub3JtYWxpemVEdXJhdGlvbihkKSksXG4gICAgICAgICAgICBxLnN0cmluZyxcbiAgICAgICAgICAgIHEudGFnLFxuICAgICAgICAgICAgcS5lbWJlZExpbmssXG4gICAgICAgICAgICBxLmJvb2wsXG4gICAgICAgICAgICBxLm51bWJlcixcbiAgICAgICAgICAgIHEucmF3TnVsbFxuICAgICAgICApLFxuICAgIGlubGluZUZpZWxkTGlzdDogcSA9PiBxLmF0b21JbmxpbmVGaWVsZC5zZXBCeShQLnN0cmluZyhcIixcIikudHJpbShQLm9wdFdoaXRlc3BhY2UpLmxvb2thaGVhZChxLmF0b21JbmxpbmVGaWVsZCkpLFxuICAgIGlubGluZUZpZWxkOiBxID0+XG4gICAgICAgIFAuYWx0KFxuICAgICAgICAgICAgUC5zZXFNYXAocS5hdG9tSW5saW5lRmllbGQsIFAuc3RyaW5nKFwiLFwiKS50cmltKFAub3B0V2hpdGVzcGFjZSksIHEuaW5saW5lRmllbGRMaXN0LCAoZiwgX3MsIGwpID0+XG4gICAgICAgICAgICAgICAgW2ZdLmNvbmNhdChsKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHEuYXRvbUlubGluZUZpZWxkXG4gICAgICAgICksXG5cbiAgICBhdG9tRmllbGQ6IHEgPT5cbiAgICAgICAgUC5hbHQoXG4gICAgICAgICAgICAvLyBQbGFjZSBlbWJlZCBsaW5rcyBhYm92ZSBuZWdhdGVkIGZpZWxkcyBhcyB0aGV5IGFyZSB0aGUgc3BlY2lhbCBwYXJzZXIgY2FzZSAnIVtbdGhpbmddXScgYW5kIGFyZSBnZW5lcmFsbHkgdW5hbWJpZ2lvdXMuXG4gICAgICAgICAgICBxLmVtYmVkTGluay5tYXAobCA9PiBGaWVsZHMubGl0ZXJhbChsKSksXG4gICAgICAgICAgICBxLm5lZ2F0ZWRGaWVsZCxcbiAgICAgICAgICAgIHEubGlua0ZpZWxkLFxuICAgICAgICAgICAgcS5saXN0RmllbGQsXG4gICAgICAgICAgICBxLm9iamVjdEZpZWxkLFxuICAgICAgICAgICAgcS5sYW1iZGFGaWVsZCxcbiAgICAgICAgICAgIHEucGFyZW5zRmllbGQsXG4gICAgICAgICAgICBxLmJvb2xGaWVsZCxcbiAgICAgICAgICAgIHEubnVtYmVyRmllbGQsXG4gICAgICAgICAgICBxLnN0cmluZ0ZpZWxkLFxuICAgICAgICAgICAgcS5kYXRlRmllbGQsXG4gICAgICAgICAgICBxLmR1cmF0aW9uRmllbGQsXG4gICAgICAgICAgICBxLm51bGxGaWVsZCxcbiAgICAgICAgICAgIHEudmFyaWFibGVGaWVsZFxuICAgICAgICApLFxuICAgIGluZGV4RmllbGQ6IHEgPT5cbiAgICAgICAgUC5zZXFNYXAocS5hdG9tRmllbGQsIFAuYWx0KHEuZG90UG9zdGZpeCwgcS5pbmRleFBvc3RmaXgsIHEuZnVuY3Rpb25Qb3N0Zml4KS5tYW55KCksIChvYmosIHBvc3RmaXhlcykgPT4ge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IG9iajtcbiAgICAgICAgICAgIGZvciAobGV0IHBvc3Qgb2YgcG9zdGZpeGVzKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwb3N0LnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRvdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gRmllbGRzLmluZGV4KHJlc3VsdCwgRmllbGRzLmxpdGVyYWwocG9zdC5maWVsZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbmRleFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gRmllbGRzLmluZGV4KHJlc3VsdCwgcG9zdC5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBGaWVsZHMuZnVuYyhyZXN1bHQsIHBvc3QuZmllbGRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSksXG4gICAgbmVnYXRlZEZpZWxkOiBxID0+IFAuc2VxTWFwKFAuc3RyaW5nKFwiIVwiKSwgcS5pbmRleEZpZWxkLCAoXywgZmllbGQpID0+IEZpZWxkcy5uZWdhdGUoZmllbGQpKS5kZXNjKFwibmVnYXRlZCBmaWVsZFwiKSxcbiAgICBwYXJlbnNGaWVsZDogcSA9PlxuICAgICAgICBQLnNlcU1hcChcbiAgICAgICAgICAgIFAuc3RyaW5nKFwiKFwiKSxcbiAgICAgICAgICAgIFAub3B0V2hpdGVzcGFjZSxcbiAgICAgICAgICAgIHEuZmllbGQsXG4gICAgICAgICAgICBQLm9wdFdoaXRlc3BhY2UsXG4gICAgICAgICAgICBQLnN0cmluZyhcIilcIiksXG4gICAgICAgICAgICAoXzEsIF8yLCBmaWVsZCwgXzMsIF80KSA9PiBmaWVsZFxuICAgICAgICApLFxuICAgIGxhbWJkYUZpZWxkOiBxID0+XG4gICAgICAgIFAuc2VxTWFwKFxuICAgICAgICAgICAgcS5pZGVudGlmaWVyXG4gICAgICAgICAgICAgICAgLnNlcEJ5KFAuc3RyaW5nKFwiLFwiKS50cmltKFAub3B0V2hpdGVzcGFjZSkpXG4gICAgICAgICAgICAgICAgLndyYXAoUC5zdHJpbmcoXCIoXCIpLnRyaW0oUC5vcHRXaGl0ZXNwYWNlKSwgUC5zdHJpbmcoXCIpXCIpLnRyaW0oUC5vcHRXaGl0ZXNwYWNlKSksXG4gICAgICAgICAgICBQLnN0cmluZyhcIj0+XCIpLnRyaW0oUC5vcHRXaGl0ZXNwYWNlKSxcbiAgICAgICAgICAgIHEuZmllbGQsXG4gICAgICAgICAgICAoaWRlbnQsIF9pZ25vcmUsIHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJsYW1iZGFcIiwgYXJndW1lbnRzOiBpZGVudCwgdmFsdWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKSxcblxuICAgIGRvdFBvc3RmaXg6IHEgPT5cbiAgICAgICAgUC5zZXFNYXAoUC5zdHJpbmcoXCIuXCIpLCBxLmlkZW50aWZpZXIsIChfLCBmaWVsZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJkb3RcIiwgZmllbGQ6IGZpZWxkIH07XG4gICAgICAgIH0pLFxuICAgIGluZGV4UG9zdGZpeDogcSA9PlxuICAgICAgICBQLnNlcU1hcChQLnN0cmluZyhcIltcIiksIFAub3B0V2hpdGVzcGFjZSwgcS5maWVsZCwgUC5vcHRXaGl0ZXNwYWNlLCBQLnN0cmluZyhcIl1cIiksIChfLCBfMiwgZmllbGQsIF8zLCBfNCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJpbmRleFwiLCBmaWVsZCB9O1xuICAgICAgICB9KSxcbiAgICBmdW5jdGlvblBvc3RmaXg6IHEgPT5cbiAgICAgICAgUC5zZXFNYXAoXG4gICAgICAgICAgICBQLnN0cmluZyhcIihcIiksXG4gICAgICAgICAgICBQLm9wdFdoaXRlc3BhY2UsXG4gICAgICAgICAgICBxLmZpZWxkLnNlcEJ5KFAuc3RyaW5nKFwiLFwiKS50cmltKFAub3B0V2hpdGVzcGFjZSkpLFxuICAgICAgICAgICAgUC5vcHRXaGl0ZXNwYWNlLFxuICAgICAgICAgICAgUC5zdHJpbmcoXCIpXCIpLFxuICAgICAgICAgICAgKF8sIF8xLCBmaWVsZHMsIF8yLCBfMykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IFwiZnVuY3Rpb25cIiwgZmllbGRzIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICksXG5cbiAgICAvLyBUaGUgcHJlY2VkZW5jZSBoaWVyYXJjaHkgb2Ygb3BlcmF0b3JzIC0gbXVsdGlwbHkvZGl2aWRlLCBhZGQvc3VidHJhY3QsIGNvbXBhcmUsIGFuZCB0aGVuIGJvb2xlYW4gb3BlcmF0aW9ucy5cbiAgICBiaW5hcnlNdWxEaXZGaWVsZDogcSA9PiBjcmVhdGVCaW5hcnlQYXJzZXIocS5pbmRleEZpZWxkLCBxLmJpbmFyeU11bERpdiwgRmllbGRzLmJpbmFyeU9wKSxcbiAgICBiaW5hcnlQbHVzTWludXNGaWVsZDogcSA9PiBjcmVhdGVCaW5hcnlQYXJzZXIocS5iaW5hcnlNdWxEaXZGaWVsZCwgcS5iaW5hcnlQbHVzTWludXMsIEZpZWxkcy5iaW5hcnlPcCksXG4gICAgYmluYXJ5Q29tcGFyZUZpZWxkOiBxID0+IGNyZWF0ZUJpbmFyeVBhcnNlcihxLmJpbmFyeVBsdXNNaW51c0ZpZWxkLCBxLmJpbmFyeUNvbXBhcmVPcCwgRmllbGRzLmJpbmFyeU9wKSxcbiAgICBiaW5hcnlCb29sZWFuRmllbGQ6IHEgPT4gY3JlYXRlQmluYXJ5UGFyc2VyKHEuYmluYXJ5Q29tcGFyZUZpZWxkLCBxLmJpbmFyeUJvb2xlYW5PcCwgRmllbGRzLmJpbmFyeU9wKSxcbiAgICBiaW5hcnlPcEZpZWxkOiBxID0+IHEuYmluYXJ5Qm9vbGVhbkZpZWxkLFxuXG4gICAgZmllbGQ6IHEgPT4gcS5iaW5hcnlPcEZpZWxkLFxufSk7XG5cbi8qKlxuICogQXR0ZW1wdCB0byBwYXJzZSBhIGZpZWxkIGZyb20gdGhlIGdpdmVuIHRleHQsIHJldHVybmluZyBhIHN0cmluZyBlcnJvciBpZiB0aGVcbiAqIHBhcnNlIGZhaWxlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRmllbGQodGV4dDogc3RyaW5nKTogUmVzdWx0PEZpZWxkLCBzdHJpbmc+IHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gUmVzdWx0LnN1Y2Nlc3MoRVhQUkVTU0lPTi5maWVsZC50cnlQYXJzZSh0ZXh0KSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIFJlc3VsdC5mYWlsdXJlKFwiXCIgKyBlcnJvcik7XG4gICAgfVxufVxuIiwgIi8qKiBQcm92aWRlcyBhbiBBU1QgZm9yIGNvbXBsZXggcXVlcmllcy4gKi9cbmltcG9ydCB7IFNvdXJjZSB9IGZyb20gXCJkYXRhLWluZGV4L3NvdXJjZVwiO1xuaW1wb3J0IHsgRmllbGQgfSBmcm9tIFwiZXhwcmVzc2lvbi9maWVsZFwiO1xuXG4vKiogVGhlIHN1cHBvcnRlZCBxdWVyeSB0eXBlcyAoY29ycmVzcG9uZGluZyB0byB2aWV3IHR5cGVzKS4gKi9cbmV4cG9ydCB0eXBlIFF1ZXJ5VHlwZSA9IFwibGlzdFwiIHwgXCJ0YWJsZVwiIHwgXCJ0YXNrXCIgfCBcImNhbGVuZGFyXCI7XG5cbi8qKiBGaWVsZHMgdXNlZCBpbiB0aGUgcXVlcnkgcG9ydGlvbi4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTmFtZWRGaWVsZCB7XG4gICAgLyoqIFRoZSBlZmZlY3RpdmUgbmFtZSBvZiB0aGlzIGZpZWxkLiAqL1xuICAgIG5hbWU6IHN0cmluZztcbiAgICAvKiogVGhlIHZhbHVlIG9mIHRoaXMgZmllbGQuICovXG4gICAgZmllbGQ6IEZpZWxkO1xufVxuXG4vKiogQSBxdWVyeSBzb3J0IGJ5IGZpZWxkLCBmb3IgZGV0ZXJtaW5pbmcgc29ydCBvcmRlci4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlTb3J0Qnkge1xuICAgIC8qKiBUaGUgZmllbGQgdG8gc29ydCBvbi4gKi9cbiAgICBmaWVsZDogRmllbGQ7XG4gICAgLyoqIFRoZSBkaXJlY3Rpb24gdG8gc29ydCBpbi4gKi9cbiAgICBkaXJlY3Rpb246IFwiYXNjZW5kaW5nXCIgfCBcImRlc2NlbmRpbmdcIjtcbn1cblxuLyoqIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBxdWlja2x5IGNyZWF0aW5nIGZpZWxkcy4gKi9cbmV4cG9ydCBuYW1lc3BhY2UgUXVlcnlGaWVsZHMge1xuICAgIGV4cG9ydCBmdW5jdGlvbiBuYW1lZChuYW1lOiBzdHJpbmcsIGZpZWxkOiBGaWVsZCk6IE5hbWVkRmllbGQge1xuICAgICAgICByZXR1cm4geyBuYW1lLCBmaWVsZCB9IGFzIE5hbWVkRmllbGQ7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHNvcnRCeShmaWVsZDogRmllbGQsIGRpcjogXCJhc2NlbmRpbmdcIiB8IFwiZGVzY2VuZGluZ1wiKTogUXVlcnlTb3J0Qnkge1xuICAgICAgICByZXR1cm4geyBmaWVsZCwgZGlyZWN0aW9uOiBkaXIgfTtcbiAgICB9XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFF1ZXJ5IERlZmluaXRpb24gLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuLyoqIEEgcXVlcnkgd2hpY2ggc2hvdWxkIHJlbmRlciBhIGxpc3Qgb2YgZWxlbWVudHMuICovXG5leHBvcnQgaW50ZXJmYWNlIExpc3RRdWVyeSB7XG4gICAgdHlwZTogXCJsaXN0XCI7XG4gICAgLyoqIFdoYXQgc2hvdWxkIGJlIHJlbmRlcmVkIGluIHRoZSBsaXN0LiAqL1xuICAgIGZvcm1hdD86IEZpZWxkO1xuICAgIC8qKiBJZiB0cnVlLCBzaG93IHRoZSBkZWZhdWx0IERJIGZpZWxkOyBvdGhlcndpc2UsIGRvbid0LiAqL1xuICAgIHNob3dJZDogYm9vbGVhbjtcbn1cblxuLyoqIEEgcXVlcnkgd2hpY2ggcmVuZGVycyBhIHRhYmxlIG9mIGVsZW1lbnRzLiAqL1xuZXhwb3J0IGludGVyZmFjZSBUYWJsZVF1ZXJ5IHtcbiAgICB0eXBlOiBcInRhYmxlXCI7XG4gICAgLyoqIFRoZSBmaWVsZHMgKGNvbXB1dGVkIG9yIG90aGVyd2lzZSkgdG8gc2VsZWN0LiAqL1xuICAgIGZpZWxkczogTmFtZWRGaWVsZFtdO1xuICAgIC8qKiBJZiB0cnVlLCBzaG93IHRoZSBkZWZhdWx0IElEIGZpZWxkOyBvdGhlcndpc2UsIGRvbid0LiAqL1xuICAgIHNob3dJZDogYm9vbGVhbjtcbn1cblxuLyoqIEEgcXVlcnkgd2hpY2ggcmVuZGVycyBhIGNvbGxlY3Rpb24gb2YgdGFza3MuICovXG5leHBvcnQgaW50ZXJmYWNlIFRhc2tRdWVyeSB7XG4gICAgdHlwZTogXCJ0YXNrXCI7XG59XG5cbi8qKiBBIHF1ZXJ5IHdoaWNoIHJlbmRlcnMgYSBjb2xsZWN0aW9uIG9mIG5vdGVzIGluIGEgY2FsZW5kYXIgdmlldy4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsZW5kYXJRdWVyeSB7XG4gICAgdHlwZTogXCJjYWxlbmRhclwiO1xuICAgIC8qKiBUaGUgZGF0ZSBmaWVsZCB0aGF0IHdlJ2xsIGJlIGdyb3VwaW5nIG5vdGVzIGJ5IGZvciB0aGUgY2FsZW5kYXIgdmlldyAqL1xuICAgIGZpZWxkOiBOYW1lZEZpZWxkO1xufVxuXG5leHBvcnQgdHlwZSBRdWVyeUhlYWRlciA9IExpc3RRdWVyeSB8IFRhYmxlUXVlcnkgfCBUYXNrUXVlcnkgfCBDYWxlbmRhclF1ZXJ5O1xuXG4vKiogQSBzdGVwIHdoaWNoIG9ubHkgcmV0YWlucyByb3dzIHdob3NlICdjbGF1c2UnIGZpZWxkIGlzIHRydXRoeS4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgV2hlcmVTdGVwIHtcbiAgICB0eXBlOiBcIndoZXJlXCI7XG4gICAgY2xhdXNlOiBGaWVsZDtcbn1cblxuLyoqIEEgc3RlcCB3aGljaCBzb3J0cyBhbGwgY3VycmVudCByb3dzIGJ5IHRoZSBnaXZlbiBsaXN0IG9mIHNvcnRzLiAqL1xuZXhwb3J0IGludGVyZmFjZSBTb3J0QnlTdGVwIHtcbiAgICB0eXBlOiBcInNvcnRcIjtcbiAgICBmaWVsZHM6IFF1ZXJ5U29ydEJ5W107XG59XG5cbi8qKiBBIHN0ZXAgd2hpY2ggdHJ1bmNhdGVzIHRoZSBudW1iZXIgb2Ygcm93cyB0byB0aGUgZ2l2ZW4gYW1vdW50LiAqL1xuZXhwb3J0IGludGVyZmFjZSBMaW1pdFN0ZXAge1xuICAgIHR5cGU6IFwibGltaXRcIjtcbiAgICBhbW91bnQ6IEZpZWxkO1xufVxuXG4vKiogQSBzdGVwIHdoaWNoIGZsYXR0ZW5zIHJvd3MgaW50byBtdWx0aXBsZSBjaGlsZCByb3dzLiAqL1xuZXhwb3J0IGludGVyZmFjZSBGbGF0dGVuU3RlcCB7XG4gICAgdHlwZTogXCJmbGF0dGVuXCI7XG4gICAgZmllbGQ6IE5hbWVkRmllbGQ7XG59XG5cbi8qKiBBIHN0ZXAgd2hpY2ggZ3JvdXBzIHJvd3MgaW50byBncm91cHMgYnkgdGhlIGdpdmVuIGZpZWxkLiAqL1xuZXhwb3J0IGludGVyZmFjZSBHcm91cFN0ZXAge1xuICAgIHR5cGU6IFwiZ3JvdXBcIjtcbiAgICBmaWVsZDogTmFtZWRGaWVsZDtcbn1cblxuLyoqIEEgdmlydHVhbCBzdGVwIHdoaWNoIGV4dHJhY3RzIGFuIGFycmF5IG9mIHZhbHVlcyBmcm9tIGVhY2ggcm93LiAqL1xuZXhwb3J0IGludGVyZmFjZSBFeHRyYWN0U3RlcCB7XG4gICAgdHlwZTogXCJleHRyYWN0XCI7XG4gICAgZmllbGRzOiBSZWNvcmQ8c3RyaW5nLCBGaWVsZD47XG59XG5cbmV4cG9ydCB0eXBlIFF1ZXJ5T3BlcmF0aW9uID0gV2hlcmVTdGVwIHwgU29ydEJ5U3RlcCB8IExpbWl0U3RlcCB8IEZsYXR0ZW5TdGVwIHwgR3JvdXBTdGVwIHwgRXh0cmFjdFN0ZXA7XG5cbi8qKlxuICogQSBxdWVyeSBvdmVyIHRoZSBPYnNpZGlhbiBkYXRhYmFzZS4gUXVlcmllcyBoYXZlIGEgc3BlY2lmaWMgYW5kIGRldGVybWluaXN0aWMgZXhlY3V0aW9uIG9yZGVyOlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5IHtcbiAgICAvKiogVGhlIHZpZXcgdHlwZSB0byByZW5kZXIgdGhpcyBxdWVyeSBpbi4gKi9cbiAgICBoZWFkZXI6IFF1ZXJ5SGVhZGVyO1xuICAgIC8qKiBUaGUgc291cmNlIHRoYXQgZmlsZSBjYW5kaWRhdGVzIHdpbGwgY29tZSBmcm9tLiAqL1xuICAgIHNvdXJjZTogU291cmNlO1xuICAgIC8qKiBUaGUgb3BlcmF0aW9ucyB0byBhcHBseSB0byB0aGUgZGF0YSB0byBwcm9kdWNlIHRoZSBmaW5hbCByZXN1bHQgdGhhdCB3aWxsIGJlIHJlbmRlcmVkLiAqL1xuICAgIG9wZXJhdGlvbnM6IFF1ZXJ5T3BlcmF0aW9uW107XG59XG4iLCAiaW1wb3J0IHsgRVhQUkVTU0lPTiB9IGZyb20gXCJleHByZXNzaW9uL3BhcnNlXCI7XG5pbXBvcnQgKiBhcyBQIGZyb20gXCJwYXJzaW1tb25cIjtcbmltcG9ydCB7XG4gICAgRmxhdHRlblN0ZXAsXG4gICAgR3JvdXBTdGVwLFxuICAgIExpbWl0U3RlcCxcbiAgICBOYW1lZEZpZWxkLFxuICAgIFF1ZXJ5LFxuICAgIFF1ZXJ5RmllbGRzLFxuICAgIFF1ZXJ5SGVhZGVyLFxuICAgIFF1ZXJ5T3BlcmF0aW9uLFxuICAgIFF1ZXJ5U29ydEJ5LFxuICAgIFF1ZXJ5VHlwZSxcbiAgICBTb3J0QnlTdGVwLFxuICAgIFdoZXJlU3RlcCxcbn0gZnJvbSBcIi4vcXVlcnlcIjtcbmltcG9ydCB7IFNvdXJjZSwgU291cmNlcyB9IGZyb20gXCJkYXRhLWluZGV4L3NvdXJjZVwiO1xuaW1wb3J0IHsgREVGQVVMVF9RVUVSWV9TRVRUSU5HUyB9IGZyb20gXCJzZXR0aW5nc1wiO1xuaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSBcImFwaS9yZXN1bHRcIjtcblxuLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gUXVlcnkgUGFyc2luZyAvL1xuLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4vKiogVHlwaW5ncyBmb3IgdGhlIG91dHB1dHMgb2YgYWxsIG9mIHRoZSBwYXJzZXIgY29tYmluYXRvcnMuICovXG5pbnRlcmZhY2UgUXVlcnlMYW5ndWFnZVR5cGVzIHtcbiAgICBxdWVyeVR5cGU6IFF1ZXJ5VHlwZTtcblxuICAgIGV4cGxpY2l0TmFtZWRGaWVsZDogTmFtZWRGaWVsZDtcbiAgICBuYW1lZEZpZWxkOiBOYW1lZEZpZWxkO1xuICAgIHNvcnRGaWVsZDogUXVlcnlTb3J0Qnk7XG5cbiAgICAvLyBFbnRpcmUgY2xhdXNlcyBpbiBxdWVyaWVzLlxuICAgIGhlYWRlckNsYXVzZTogUXVlcnlIZWFkZXI7XG4gICAgZnJvbUNsYXVzZTogU291cmNlO1xuICAgIHdoZXJlQ2xhdXNlOiBXaGVyZVN0ZXA7XG4gICAgc29ydEJ5Q2xhdXNlOiBTb3J0QnlTdGVwO1xuICAgIGxpbWl0Q2xhdXNlOiBMaW1pdFN0ZXA7XG4gICAgZmxhdHRlbkNsYXVzZTogRmxhdHRlblN0ZXA7XG4gICAgZ3JvdXBCeUNsYXVzZTogR3JvdXBTdGVwO1xuICAgIGNsYXVzZTogUXVlcnlPcGVyYXRpb247XG4gICAgcXVlcnk6IFF1ZXJ5O1xufVxuXG4vKiogUmV0dXJuIGEgbmV3IHBhcnNlciB3aGljaCBleGVjdXRlcyB0aGUgdW5kZXJseWluZyBwYXJzZXIgYW5kIHJldHVybnMgaXQncyByYXcgc3RyaW5nIHJlcHJlc2VudGF0aW9uLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhcHR1cmVSYXc8VD4oYmFzZTogUC5QYXJzZXI8VD4pOiBQLlBhcnNlcjxbVCwgc3RyaW5nXT4ge1xuICAgIHJldHVybiBQLmN1c3RvbSgoc3VjY2VzcywgZmFpbHVyZSkgPT4ge1xuICAgICAgICByZXR1cm4gKGlucHV0LCBpKSA9PiB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gKGJhc2UgYXMgYW55KS5fKGlucHV0LCBpKTtcbiAgICAgICAgICAgIGlmICghcmVzdWx0LnN0YXR1cykgcmV0dXJuIHJlc3VsdDtcblxuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHJlc3VsdCwgeyB2YWx1ZTogW3Jlc3VsdC52YWx1ZSwgaW5wdXQuc3Vic3RyaW5nKGksIHJlc3VsdC5pbmRleCldIH0pO1xuICAgICAgICB9O1xuICAgIH0pO1xufVxuXG4vKiogU3RyaXAgbmV3bGluZXMgYW5kIGV4Y2VzcyB3aGl0ZXNwYWNlIG91dCBvZiB0ZXh0LiAqL1xuZnVuY3Rpb24gc3RyaXBOZXdsaW5lcyh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0ZXh0XG4gICAgICAgIC5zcGxpdCgvW1xcclxcbl0rLylcbiAgICAgICAgLm1hcCh0ID0+IHQudHJpbSgpKVxuICAgICAgICAuam9pbihcIlwiKTtcbn1cblxuLyoqIEEgcGFyc2ltbW9uLXBvd2VyZWQgcGFyc2VyLWNvbWJpbmF0b3IgaW1wbGVtZW50YXRpb24gb2YgdGhlIHF1ZXJ5IGxhbmd1YWdlLiAqL1xuZXhwb3J0IGNvbnN0IFFVRVJZX0xBTkdVQUdFID0gUC5jcmVhdGVMYW5ndWFnZTxRdWVyeUxhbmd1YWdlVHlwZXM+KHtcbiAgICAvLyBTaW1wbGUgYXRvbSBwYXJzaW5nLCBsaWtlIHdvcmRzLCBpZGVudGlmaWVycywgbnVtYmVycy5cbiAgICBxdWVyeVR5cGU6IHEgPT5cbiAgICAgICAgUC5hbHQ8c3RyaW5nPihQLnJlZ2V4cCgvVEFCTEV8TElTVHxUQVNLfENBTEVOREFSL2kpKVxuICAgICAgICAgICAgLm1hcChzdHIgPT4gc3RyLnRvTG93ZXJDYXNlKCkgYXMgUXVlcnlUeXBlKVxuICAgICAgICAgICAgLmRlc2MoXCJxdWVyeSB0eXBlICgnVEFCTEUnLCAnTElTVCcsICdUQVNLJywgb3IgJ0NBTEVOREFSJylcIiksXG4gICAgZXhwbGljaXROYW1lZEZpZWxkOiBxID0+XG4gICAgICAgIFAuc2VxTWFwKFxuICAgICAgICAgICAgRVhQUkVTU0lPTi5maWVsZC5za2lwKFAud2hpdGVzcGFjZSksXG4gICAgICAgICAgICBQLnJlZ2V4cCgvQVMvaSkuc2tpcChQLndoaXRlc3BhY2UpLFxuICAgICAgICAgICAgRVhQUkVTU0lPTi5pZGVudGlmaWVyLm9yKEVYUFJFU1NJT04uc3RyaW5nKSxcbiAgICAgICAgICAgIChmaWVsZCwgX2FzLCBpZGVudCkgPT4gUXVlcnlGaWVsZHMubmFtZWQoaWRlbnQsIGZpZWxkKVxuICAgICAgICApLFxuICAgIG5hbWVkRmllbGQ6IHEgPT5cbiAgICAgICAgUC5hbHQ8TmFtZWRGaWVsZD4oXG4gICAgICAgICAgICBxLmV4cGxpY2l0TmFtZWRGaWVsZCxcbiAgICAgICAgICAgIGNhcHR1cmVSYXcoRVhQUkVTU0lPTi5maWVsZCkubWFwKChbdmFsdWUsIHRleHRdKSA9PiBRdWVyeUZpZWxkcy5uYW1lZChzdHJpcE5ld2xpbmVzKHRleHQpLCB2YWx1ZSkpXG4gICAgICAgICksXG4gICAgc29ydEZpZWxkOiBxID0+XG4gICAgICAgIFAuc2VxTWFwKFxuICAgICAgICAgICAgRVhQUkVTU0lPTi5maWVsZC5za2lwKFAub3B0V2hpdGVzcGFjZSksXG4gICAgICAgICAgICBQLnJlZ2V4cCgvQVNDRU5ESU5HfERFU0NFTkRJTkd8QVNDfERFU0MvaSkuYXRNb3N0KDEpLFxuICAgICAgICAgICAgKGZpZWxkLCBkaXIpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZGlyZWN0aW9uID0gZGlyLmxlbmd0aCA9PSAwID8gXCJhc2NlbmRpbmdcIiA6IGRpclswXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT0gXCJkZXNjXCIpIGRpcmVjdGlvbiA9IFwiZGVzY2VuZGluZ1wiO1xuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT0gXCJhc2NcIikgZGlyZWN0aW9uID0gXCJhc2NlbmRpbmdcIjtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogZmllbGQsXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uIGFzIFwiYXNjZW5kaW5nXCIgfCBcImRlc2NlbmRpbmdcIixcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICApLFxuXG4gICAgaGVhZGVyQ2xhdXNlOiBxID0+XG4gICAgICAgIHEucXVlcnlUeXBlXG4gICAgICAgICAgICAuc2tpcChQLndoaXRlc3BhY2UpXG4gICAgICAgICAgICAuY2hhaW4ocXR5cGUgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocXR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRhYmxlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUC5zZXFNYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUC5yZWdleHAoL1dJVEhPVVRcXHMrSUQvaSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNraXAoUC5vcHRXaGl0ZXNwYWNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXRNb3N0KDEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuc2VwQnkocS5uYW1lZEZpZWxkLCBQLnN0cmluZyhcIixcIikudHJpbShQLm9wdFdoaXRlc3BhY2UpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAod2l0aG91dElkLCBmaWVsZHMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJ0YWJsZVwiLCBmaWVsZHMsIHNob3dJZDogd2l0aG91dElkLmxlbmd0aCA9PSAwIH0gYXMgUXVlcnlIZWFkZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxpc3RcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQLnNlcU1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQLnJlZ2V4cCgvV0lUSE9VVFxccytJRC9pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2tpcChQLm9wdFdoaXRlc3BhY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdE1vc3QoMSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRVhQUkVTU0lPTi5maWVsZC5hdE1vc3QoMSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHdpdGhvdXRJZCwgZm9ybWF0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImxpc3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0Lmxlbmd0aCA9PSAxID8gZm9ybWF0WzBdIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0lkOiB3aXRob3V0SWQubGVuZ3RoID09IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gYXMgUXVlcnlIZWFkZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRhc2tcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQLnN1Y2NlZWQoeyB0eXBlOiBcInRhc2tcIiB9IGFzIFF1ZXJ5SGVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNhbGVuZGFyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUC5zZXFNYXAocS5uYW1lZEZpZWxkLCBmaWVsZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJjYWxlbmRhclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93SWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gYXMgUXVlcnlIZWFkZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQLmZhaWwoYFVucmVjb2duaXplZCBxdWVyeSB0eXBlICcke3F0eXBlfSdgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmRlc2MoXCJUQUJMRSBvciBMSVNUIG9yIFRBU0sgb3IgQ0FMRU5EQVJcIiksXG4gICAgZnJvbUNsYXVzZTogcSA9PiBQLnNlcU1hcChQLnJlZ2V4cCgvRlJPTS9pKSwgUC53aGl0ZXNwYWNlLCBFWFBSRVNTSU9OLnNvdXJjZSwgKF8xLCBfMiwgc291cmNlKSA9PiBzb3VyY2UpLFxuICAgIHdoZXJlQ2xhdXNlOiBxID0+XG4gICAgICAgIFAuc2VxTWFwKFAucmVnZXhwKC9XSEVSRS9pKSwgUC53aGl0ZXNwYWNlLCBFWFBSRVNTSU9OLmZpZWxkLCAod2hlcmUsIF8sIGZpZWxkKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4geyB0eXBlOiBcIndoZXJlXCIsIGNsYXVzZTogZmllbGQgfSBhcyBXaGVyZVN0ZXA7XG4gICAgICAgIH0pLmRlc2MoXCJXSEVSRSA8ZXhwcmVzc2lvbj5cIiksXG4gICAgc29ydEJ5Q2xhdXNlOiBxID0+XG4gICAgICAgIFAuc2VxTWFwKFxuICAgICAgICAgICAgUC5yZWdleHAoL1NPUlQvaSksXG4gICAgICAgICAgICBQLndoaXRlc3BhY2UsXG4gICAgICAgICAgICBxLnNvcnRGaWVsZC5zZXBCeTEoUC5zdHJpbmcoXCIsXCIpLnRyaW0oUC5vcHRXaGl0ZXNwYWNlKSksXG4gICAgICAgICAgICAoc29ydCwgXzEsIGZpZWxkcykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IFwic29ydFwiLCBmaWVsZHMgfSBhcyBTb3J0QnlTdGVwO1xuICAgICAgICAgICAgfVxuICAgICAgICApLmRlc2MoXCJTT1JUIGZpZWxkIFtBU0MvREVTQ11cIiksXG4gICAgbGltaXRDbGF1c2U6IHEgPT5cbiAgICAgICAgUC5zZXFNYXAoUC5yZWdleHAoL0xJTUlUL2kpLCBQLndoaXRlc3BhY2UsIEVYUFJFU1NJT04uZmllbGQsIChsaW1pdCwgXzEsIGZpZWxkKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4geyB0eXBlOiBcImxpbWl0XCIsIGFtb3VudDogZmllbGQgfSBhcyBMaW1pdFN0ZXA7XG4gICAgICAgIH0pLmRlc2MoXCJMSU1JVCA8dmFsdWU+XCIpLFxuICAgIGZsYXR0ZW5DbGF1c2U6IHEgPT5cbiAgICAgICAgUC5zZXFNYXAoUC5yZWdleHAoL0ZMQVRURU4vaSkuc2tpcChQLndoaXRlc3BhY2UpLCBxLm5hbWVkRmllbGQsIChfLCBmaWVsZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJmbGF0dGVuXCIsIGZpZWxkIH0gYXMgRmxhdHRlblN0ZXA7XG4gICAgICAgIH0pLmRlc2MoXCJGTEFUVEVOIDx2YWx1ZT4gW0FTIDxuYW1lPl1cIiksXG4gICAgZ3JvdXBCeUNsYXVzZTogcSA9PlxuICAgICAgICBQLnNlcU1hcChQLnJlZ2V4cCgvR1JPVVAgQlkvaSkuc2tpcChQLndoaXRlc3BhY2UpLCBxLm5hbWVkRmllbGQsIChfLCBmaWVsZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJncm91cFwiLCBmaWVsZCB9IGFzIEdyb3VwU3RlcDtcbiAgICAgICAgfSkuZGVzYyhcIkdST1VQIEJZIDx2YWx1ZT4gW0FTIDxuYW1lPl1cIiksXG4gICAgLy8gRnVsbCBxdWVyeSBwYXJzaW5nLlxuICAgIGNsYXVzZTogcSA9PiBQLmFsdChxLmZyb21DbGF1c2UsIHEud2hlcmVDbGF1c2UsIHEuc29ydEJ5Q2xhdXNlLCBxLmxpbWl0Q2xhdXNlLCBxLmdyb3VwQnlDbGF1c2UsIHEuZmxhdHRlbkNsYXVzZSksXG4gICAgcXVlcnk6IHEgPT5cbiAgICAgICAgUC5zZXFNYXAoXG4gICAgICAgICAgICBxLmhlYWRlckNsYXVzZS50cmltKFAub3B0V2hpdGVzcGFjZSksXG4gICAgICAgICAgICBxLmZyb21DbGF1c2UudHJpbShQLm9wdFdoaXRlc3BhY2UpLmF0TW9zdCgxKSxcbiAgICAgICAgICAgIHEuY2xhdXNlLnRyaW0oUC5vcHRXaGl0ZXNwYWNlKS5tYW55KCksXG4gICAgICAgICAgICAoaGVhZGVyLCBmcm9tLCBjbGF1c2VzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IGZyb20ubGVuZ3RoID09IDAgPyBTb3VyY2VzLmZvbGRlcihcIlwiKSA6IGZyb21bMF0sXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbnM6IGNsYXVzZXMsXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiBERUZBVUxUX1FVRVJZX1NFVFRJTkdTLFxuICAgICAgICAgICAgICAgIH0gYXMgUXVlcnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICksXG59KTtcblxuLyoqXG4gKiBBdHRlbXB0IHRvIHBhcnNlIGEgcXVlcnkgZnJvbSB0aGUgZ2l2ZW4gcXVlcnkgdGV4dCwgcmV0dXJuaW5nIGEgc3RyaW5nIGVycm9yXG4gKiBpZiB0aGUgcGFyc2UgZmFpbGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VRdWVyeSh0ZXh0OiBzdHJpbmcpOiBSZXN1bHQ8UXVlcnksIHN0cmluZz4ge1xuICAgIHRyeSB7XG4gICAgICAgIGxldCBxdWVyeSA9IFFVRVJZX0xBTkdVQUdFLnF1ZXJ5LnRyeVBhcnNlKHRleHQpO1xuICAgICAgICByZXR1cm4gUmVzdWx0LnN1Y2Nlc3MocXVlcnkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBSZXN1bHQuZmFpbHVyZShcIlwiICsgZXJyb3IpO1xuICAgIH1cbn1cbiIsICIvLyBCYXNpYyBBUEkgdHlwZS5cbmV4cG9ydCB0eXBlIHsgRGF0YXZpZXdBcGkgfSBmcm9tIFwiYXBpL3BsdWdpbi1hcGlcIjtcblxuLy8gQ29yZSBEYXRhdmlldyB0eXBlcy5cbmV4cG9ydCB0eXBlIHsgRGF0ZVRpbWUsIER1cmF0aW9uIH0gZnJvbSBcImx1eG9uXCI7XG5leHBvcnQgdHlwZSB7XG4gICAgTGluayxcbiAgICBEYXRhT2JqZWN0LFxuICAgIExpdGVyYWxUeXBlLFxuICAgIExpdGVyYWwsXG4gICAgTGl0ZXJhbFJlcHIsXG4gICAgV3JhcHBlZExpdGVyYWwsXG4gICAgTGl0ZXJhbFdyYXBwZXIsXG4gICAgV2lkZ2V0LFxufSBmcm9tIFwiZGF0YS1tb2RlbC92YWx1ZVwiO1xuXG5leHBvcnQgdHlwZSB7IFJlc3VsdCwgU3VjY2VzcywgRmFpbHVyZSB9IGZyb20gXCJhcGkvcmVzdWx0XCI7XG5leHBvcnQgdHlwZSB7IERhdGFBcnJheSB9IGZyb20gXCJhcGkvZGF0YS1hcnJheVwiO1xuXG4vLyBEYXRhdmlldyBJbmRleC5cbmV4cG9ydCB0eXBlIHsgTGlzdEl0ZW0sIFBhZ2VNZXRhZGF0YSB9IGZyb20gXCJkYXRhLW1vZGVsL21hcmtkb3duXCI7XG5leHBvcnQgdHlwZSB7IEZ1bGxJbmRleCwgUHJlZml4SW5kZXgsIEluZGV4TWFwIH0gZnJvbSBcImRhdGEtaW5kZXgvaW5kZXhcIjtcblxuLy8gU2VyaWFsaXplZCB0eXBlcyB3aGljaCBkZXNjcmliZSBhbGwgb3V0cHV0cyBvZiBzZXJpYWxpemF0aW9uLlxuZXhwb3J0IHR5cGUgeyBTTWFya2Rvd25QYWdlLCBTTGlzdEVudHJ5LCBTVGFzayB9IGZyb20gXCJkYXRhLW1vZGVsL3NlcmlhbGl6ZWQvbWFya2Rvd25cIjtcblxuLy8gVXNlZnVsIHV0aWxpdGllcyBmb3IgZGlyZWN0bHkgdXNpbmcgZGF0YXZpZXcgcGFyc2Vycy5cbmV4cG9ydCB7IERVUkFUSU9OX1RZUEVTLCBEQVRFX1NIT1JUSEFORFMsIEtFWVdPUkRTLCBFeHByZXNzaW9uTGFuZ3VhZ2UsIEVYUFJFU1NJT04sIHBhcnNlRmllbGQgfSBmcm9tIFwiZXhwcmVzc2lvbi9wYXJzZVwiO1xuZXhwb3J0IHsgUVVFUllfTEFOR1VBR0UgfSBmcm9tIFwicXVlcnkvcGFyc2VcIjtcbmV4cG9ydCB7IFF1ZXJ5IH0gZnJvbSBcInF1ZXJ5L3F1ZXJ5XCI7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBJbXBsZW1lbnRhdGlvbiAvL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuaW1wb3J0IHR5cGUgeyBEYXRhdmlld0FwaSB9IGZyb20gXCJhcGkvcGx1Z2luLWFwaVwiO1xuXG5pbXBvcnQgXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgeyBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuLy8gVXRpbGl0eSBmdW5jdGlvbnMuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBEYXRhdmlldyBBUEkgZnJvbSB0aGUgYXBwIGlmIHByb3ZpZGVkOyBpZiBub3QsIGl0IGlzIGluZmVycmVkIGZyb20gdGhlIGdsb2JhbCBBUEkgb2JqZWN0IGluc3RhbGxlZFxuICogb24gdGhlIHdpbmRvdy5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldEFQSSA9IChhcHA/OiBBcHApOiBEYXRhdmlld0FwaSB8IHVuZGVmaW5lZCA9PiB7XG4gICAgaWYgKGFwcCkgcmV0dXJuIGFwcC5wbHVnaW5zLnBsdWdpbnMuZGF0YXZpZXc/LmFwaTtcbiAgICBlbHNlIHJldHVybiB3aW5kb3cuRGF0YXZpZXdBUEk7XG59O1xuXG4vKiogRGV0ZXJtaW5lIGlmIERhdGF2aWV3IGlzIGVuYWJsZWQgaW4gdGhlIGdpdmVuIGFwcGxpY2F0aW9uLiAqL1xuZXhwb3J0IGNvbnN0IGlzUGx1Z2luRW5hYmxlZCA9IChhcHA6IEFwcCkgPT4gYXBwLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKFwiZGF0YXZpZXdcIik7XG4iLCAiaW1wb3J0IHsgUGx1Z2luLCBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBDbGlwYm9hcmRDb21tYW5kIH0gZnJvbSAnc3JjL2NvbW1hbmQvY2xpcGJvYXJkLWNvbW1hbmQnO1xuaW1wb3J0IHsgQ3VycmVudEZpbGVDb21tYW5kIH0gZnJvbSAnc3JjL2NvbW1hbmQvY3VycmVudC1maWxlLWNvbW1hbmQnO1xuaW1wb3J0IHsgRGF0YXZpZXdDb21tYW5kIH0gZnJvbSAnc3JjL2NvbW1hbmQvZGF0YXZpZXctY29tbWFuZCc7XG5pbXBvcnQgeyBQcmVzZW50YXRpb25Db21tYW5kIH0gZnJvbSAnc3JjL2NvbW1hbmQvcHJlc2VudGF0aW9uLWNvbW1hbmQnO1xuaW1wb3J0IHsgU2VhcmNoQ29tbWFuZCB9IGZyb20gJ3NyYy9jb21tYW5kL3NlYXJjaC1jb21tYW5kJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlsZUNvb2tlclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBGaWxlQ29va2VyUGx1Z2luU2V0dGluZ3M7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdG5ldyBDdXJyZW50RmlsZUNvbW1hbmQodGhpcykucmVnaXN0KCk7XG5cdFx0bmV3IENsaXBib2FyZENvbW1hbmQodGhpcykucmVnaXN0KCk7XG5cdFx0bmV3IERhdGF2aWV3Q29tbWFuZCh0aGlzKS5yZWdpc3QoKTtcblx0XHRuZXcgU2VhcmNoQ29tbWFuZCh0aGlzKS5yZWdpc3QoKTtcblx0XHRuZXcgUHJlc2VudGF0aW9uQ29tbWFuZCh0aGlzKS5yZWdpc3QoKTtcblxuXHRcdC8vIFRoaXMgYWRkcyBhIHNldHRpbmdzIHRhYiBzbyB0aGUgdXNlciBjYW4gY29uZmlndXJlIHZhcmlvdXMgYXNwZWN0cyBvZiB0aGUgcGx1Z2luXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBGaWxlQ29va2VyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBGaWxlQ29va2VyUGx1Z2luU2V0dGluZ3MgPSB7XG5cdGZsb21vQVBJOiAnJyxcblx0bGltaXQ6ICczMDAnXG59XG5cbmludGVyZmFjZSBGaWxlQ29va2VyUGx1Z2luU2V0dGluZ3Mge1xuXHRmbG9tb0FQSTogc3RyaW5nO1xuXHRsaW1pdDogc3RyaW5nO1xufVxuXG5jbGFzcyBGaWxlQ29va2VyU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IEZpbGVDb29rZXJQbHVnaW47XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdTZXR0aW5ncyBmb3IgRmlsZSBDb29rZXIhJyB9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0xpbWl0Jylcblx0XHRcdC5zZXREZXNjKCdjb25maWcgYmF0Y2ggZmlsZSBsaW1pdCcpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdFbnRlciBiYXRjaCBmaWxlIGxpbWl0Jylcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxpbWl0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubGltaXQgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnZmxvbW9BUEknKVxuXHRcdFx0LnNldERlc2MoJ2NvbmZpZyBmbG9tbyBBUEkgdG8gc3luYyBub3RlcycpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdFbnRlciBmbG9tbyBBUEknKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZmxvbW9BUEkpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5mbG9tb0FQSSA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cdH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRBYnN0cmFjdEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IERlbGV0ZUNvbmZpcm1Nb2RhbCB9IGZyb20gXCJzcmMvbW9kYWwvZGVsZXRlLWNvbmZpcm0tbW9kYWxcIjtcbmltcG9ydCB7IEFjdGlvbiwgQWN0aW9uTW9kZWwgfSBmcm9tIFwiLi9hY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIERlbGV0ZUFjdGlvbiBpbXBsZW1lbnRzIEFjdGlvbiB7XG5cbiAgICBhcHA6IEFwcDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIH1cblxuICAgIGFjdChhY3Rpb25Nb2RlbHM6IEFjdGlvbk1vZGVsW10pIHtcbiAgICAgICAgaWYgKGFjdGlvbk1vZGVscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsZXQgZmlsZXMgPSBhY3Rpb25Nb2RlbHMubWFwKG1vZGVsID0+IG1vZGVsLmZpbGUpO1xuICAgICAgICAgICAgbmV3IERlbGV0ZUNvbmZpcm1Nb2RhbCh0aGlzLmFwcCwgZmlsZXMpLm9wZW4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBGaWxlcyBGb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vKipcbiAqIFx1MDBBMFx1NUYzOVx1N0E5N1x1Nzg2RVx1OEJBNFx1ODk4MVx1NTIyMFx1OTY2NFx1NzY4NFx1NjU4N1x1NEVGNlxuICovXG5leHBvcnQgY2xhc3MgRGVsZXRlQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMucmVzdWx0QXJyPSByZXN1bHRBcnI7XG4gICAgfVxuXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiQ29uZmlybSBEZWxldGU/XCIgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMucmVzdWx0QXJyLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIk5vIGZpbGVzIGZvdW5kIVwiIH0pO1xuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2xvc2VcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0QXJyLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogaW5mby5wYXRoIH0pO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNvbmZpcm1cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdEFyci5mb3JFYWNoKGluZm8gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC52YXVsdC50cmFzaChpbmZvLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJEZWxldGUgU3VjY2VzcyFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDYW5jZWxcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRGVsZXRlIENhbmNlbGVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIG9uQ2xvc2UoKSB7XG4gICAgLy8gICAgIGxldCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAvLyAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgLy8gfVxufVxuIiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBFZGl0UHJvcGVydGllc01vZGFsIH0gZnJvbSBcInNyYy9tb2RhbC9lZGl0LXByb3BlcnRpZXMtbW9kYWxcIjtcbmltcG9ydCB7IEFjdGlvbiwgQWN0aW9uTW9kZWwgfSBmcm9tIFwiLi9hY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIEVkaXRQcm9wZXJ0aWVzQWN0aW9uIGltcGxlbWVudHMgQWN0aW9uIHtcblxuICAgIGFwcDogQXBwO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgfVxuXG4gICAgYWN0KGFjdGlvbk1vZGVsczogQWN0aW9uTW9kZWxbXSkge1xuICAgICAgICBpZiAoYWN0aW9uTW9kZWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGxldCBmaWxlcyA9IGFjdGlvbk1vZGVscy5tYXAobW9kZWwgPT4gbW9kZWwuZmlsZSk7XG4gICAgICAgICAgICBuZXcgRWRpdFByb3BlcnRpZXNNb2RhbCh0aGlzLmFwcCwgZmlsZXMpLm9wZW4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBGaWxlcyBGb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZywgVEFic3RyYWN0RmlsZSwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8qKlxuICogXHUwMEEwXHU1RjM5XHU3QTk3XHU3RjE2XHU4RjkxUHJvcGVydGllc1x1NUM1RVx1NjAyN1xuICovXG5leHBvcnQgY2xhc3MgRWRpdFByb3BlcnRpZXNNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICByZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXTtcbiAgICBrZXk6IFN0cmluZztcbiAgICB2YWw6IFN0cmluZztcbiAgICBvdmVycmlkZUZsYWc6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5yZXN1bHRBcnIgPSByZXN1bHRBcnI7XG4gICAgICAgIGxldCB0bXBGbGFnID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJvdmVycmlkZUZsYWdcIik7XG4gICAgICAgIGlmICh0bXBGbGFnICYmIFwidHJ1ZVwiID09IHRtcEZsYWcpIHtcbiAgICAgICAgICAgIHRoaXMub3ZlcnJpZGVGbGFnID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkVkaXQgUHJvcGVydGllc1wiIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLnJlc3VsdEFyci5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogXCJObyBmaWxlcyBmb3VuZCFcIiB9KTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNsb3NlXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdEFyci5mb3JFYWNoKGluZm8gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGluZm8ucGF0aCB9KTtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodHh0KSA9PlxuICAgICAgICAgICAgICAgICAgICB0eHQuc2V0UGxhY2Vob2xkZXIoXCJQcm9wZXJ0aWVzIEtleVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmtleSA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKS5hZGRUZXh0KCh0eHQpID0+XG4gICAgICAgICAgICAgICAgICAgIHR4dC5zZXRQbGFjZWhvbGRlcihcIlByb3BlcnRpZXMgVmFsdWVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWwgPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICkuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMub3ZlcnJpZGVGbGFnKTtcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlLnNldFRvb2x0aXAoXCJPdmVycmlkZSBpZiBleGlzdHMhXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGUub25DaGFuZ2UoKHZhbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJvdmVycmlkZUZsYWdcIiwgdmFsICsgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm92ZXJyaWRlRmxhZyA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNvbmZpcm1cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmtleSA9PSBudWxsIHx8IHRoaXMua2V5LnRyaW0oKSA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJLZXkgY291bGQgbm90IGJlIGVtcHR5IVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWwgPT0gbnVsbCB8fCB0aGlzLnZhbC50cmltKCkgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiVmFsdWUgY291bGQgbm90IGJlIGVtcHR5IVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJlc3VsdEFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5mbyA9IHRoaXMucmVzdWx0QXJyW2ldIGFzIFRGaWxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0b2RvIDogXHU2NTJGXHU2MzAxXHU2REZCXHU1MkEwXHUzMDAxXHU1MjIwXHU5NjY0XHU1MzU1XHU0RTJBXHU2ODA3XHU3QjdFXHU1MDNDXHVGRjBDYWxpYXNcdTUwM0NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGluZm8sIChwcm9wcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IF9rID0gX3RoaXMua2V5LnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBfdiA9IF90aGlzLnZhbC50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2sgPT09ICd0YWdzJyB8fCBfayA9PT0gJ2FsaWFzJyB8fCBfayA9PT0gJ2Nzc2NsYXNzZXMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTFBXHU1MDNDXHU2ODA3XHU3QjdFXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IF92YWxzID0gX3Yuc3BsaXQoJywnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTVDNUVcdTYwMjdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXByb3BzW19rXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wc1tfa10gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCEocHJvcHNbX2tdIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzW19rXSA9IHByb3BzW19rXS5zcGxpdCgnLCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdmFscy5mb3JFYWNoKF90ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGl0ID0gX3QudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXQuaW5kZXhPZignLScpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgX3R2ID0gaXQuc3Vic3RyaW5nKDEsIGl0Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaWR4ID0gLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BzW19rXS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wc1tfa11baV0gPT09IF90dikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHggPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgcHJvcHNbX2tdW2lkeF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wc1tfa10ucHVzaChpdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTUzNTVcdTUwM0NcdTY4MDdcdTdCN0VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3YgPT09ICctJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTUyMjBcdTk2NjRcdTVDNUVcdTYwMjdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHByb3BzW19rXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLm92ZXJyaWRlRmxhZyB8fCAhcHJvcHNbX2tdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzW19rXSA9IF92O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJNb2RpZnkgUHJvcGVydHkgU3VjY2VzcyFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDYW5jZWxcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTW9kaWZ5IFByb3BlcnR5IENhbmNlbGVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRBYnN0cmFjdEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IE1vdmVDb25maXJtTW9kYWwgfSBmcm9tIFwiLi4vbW9kYWwvbW92ZS1jb25maXJtLW1vZGFsXCI7XG5pbXBvcnQgeyBNb3ZlSW5mbyB9IGZyb20gXCIuLi9tb2RhbC9tb3ZlLWluZm9cIjtcbmltcG9ydCB7IEFjdGlvbiwgQWN0aW9uTW9kZWwgfSBmcm9tIFwiLi9hY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIE1vdmVBY3Rpb24gaW1wbGVtZW50cyBBY3Rpb24ge1xuXG4gICAgYXBwOiBBcHA7XG4gICAgdGFyZ2V0UGF0aDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRhcmdldFBhdGg6IHN0cmluZykge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy50YXJnZXRQYXRoID0gdGFyZ2V0UGF0aDtcbiAgICB9XG5cbiAgICBhY3QoYWN0aW9uTW9kZWxzOiBBY3Rpb25Nb2RlbFtdKSB7XG5cbiAgICAgICAgY29uc3QgbW92ZUluZm9zOiBNb3ZlSW5mb1tdID0gW107XG5cbiAgICAgICAgaWYgKGFjdGlvbk1vZGVscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBhY3Rpb25Nb2RlbHMuZm9yRWFjaChtb2RlbCA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGZmID0gbW9kZWwuZmlsZTtcbiAgICAgICAgICAgICAgICBtb3ZlSW5mb3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZUZpbGU6IGZmLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXREaXI6IHRoaXMudGFyZ2V0UGF0aFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgbmV3IE1vdmVDb25maXJtTW9kYWwodGhpcy5hcHAsIG1vdmVJbmZvcykub3BlbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIEZpbGVzIEZvdW5kIVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxufSIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UsIFNldHRpbmcsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgTW92ZUluZm8gfSBmcm9tICdzcmMvbW9kYWwvbW92ZS1pbmZvJztcblxuLyoqXG4gKiBcdTAwQTBcdTVGMzlcdTdBOTdcdTc4NkVcdThCQTRcdTg5ODFcdTc5RkJcdTUyQTgvXHU2MkY3XHU4RDFEXHU3Njg0XHU2NTg3XHU0RUY2XG4gKi9cbmV4cG9ydCBjbGFzcyBNb3ZlQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIG1vdmVJbmZvczogTW92ZUluZm9bXTtcbiAgICBjb3B5RmxhZzogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBtb3ZlSW5mb3M6IE1vdmVJbmZvW10pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5tb3ZlSW5mb3MgPSBtb3ZlSW5mb3M7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiQ29uZmlybSBNb3ZlL0NvcHk/XCIgfSk7XG5cbiAgICAgICAgdGhpcy5tb3ZlSW5mb3MuZm9yRWFjaChpbmZvID0+IHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGluZm8uc291cmNlRmlsZS5wYXRoICsgXCIgLT4gXCIgKyBpbmZvLnRhcmdldERpciArIFwiL1wiICsgaW5mby5zb3VyY2VGaWxlLm5hbWUgfSk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLnNldFRvb2x0aXAoXCJDb3B5IGluc3RlYWQhXCIpO1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5vbkNoYW5nZSgodmFsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29weUZsYWcgPSB2YWw7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgIGJ0bi5zZXRCdXR0b25UZXh0KFwiQ29uZmlybVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29weUZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm1vdmVJbmZvcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5mbyA9IHRoaXMubW92ZUluZm9zW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNvcHkoKGluZm8uc291cmNlRmlsZSBhcyBURmlsZSksIGluZm8udGFyZ2V0RGlyICsgXCIvXCIgKyBpbmZvLnNvdXJjZUZpbGUubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDb3B5IFN1Y2Nlc3MhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm1vdmVJbmZvcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5mbyA9IHRoaXMubW92ZUluZm9zW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoaW5mby5zb3VyY2VGaWxlLCBpbmZvLnRhcmdldERpciArIFwiL1wiICsgaW5mby5zb3VyY2VGaWxlLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTW92ZSBTdWNjZXNzIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2FuY2VsXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTW92ZSBDYW5jZWxlZCFcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBSZW5hbWVNb2RhbCB9IGZyb20gXCJzcmMvbW9kYWwvcmVuYW1lLW1vZGFsXCI7XG5pbXBvcnQgeyBBY3Rpb24sIEFjdGlvbk1vZGVsIH0gZnJvbSBcIi4vYWN0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBSZW5hbWVBY3Rpb24gaW1wbGVtZW50cyBBY3Rpb24ge1xuXG4gICAgYXBwOiBBcHA7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB9XG5cbiAgICBhY3QoYWN0aW9uTW9kZWxzOiBBY3Rpb25Nb2RlbFtdKSB7XG4gICAgICAgIGlmIChhY3Rpb25Nb2RlbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbGV0IGZpbGVzID0gYWN0aW9uTW9kZWxzLm1hcChtb2RlbCA9PiBtb2RlbC5maWxlKTtcbiAgICAgICAgICAgIG5ldyBSZW5hbWVNb2RhbCh0aGlzLmFwcCwgZmlsZXMpLm9wZW4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBGaWxlcyBGb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZywgVEFic3RyYWN0RmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFJlbmFtZUNvbmZpcm1Nb2RhbCB9IGZyb20gJy4vcmVuYW1lLWNvbmZpcm0tbW9kYWwnO1xuXG4vKipcbiAqIFx1MDBBMFx1OTFDRFx1NTQ3RFx1NTQwRFx1OEJCRVx1N0Y2RVx1NUYzOVx1N0E5N1xuICovXG5leHBvcnQgY2xhc3MgUmVuYW1lTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW107XG4gICAgcHJlZml4OiBTdHJpbmc7XG4gICAgc3VmZml4OiBTdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5yZXN1bHRBcnIgPSByZXN1bHRBcnI7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiUmVuYW1lIEZpbGVzXCIgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMucmVzdWx0QXJyLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIk5vIGZpbGVzIGZvdW5kIVwiIH0pO1xuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2xvc2VcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0QXJyLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogaW5mby5wYXRoIH0pO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0eHQpID0+XG4gICAgICAgICAgICAgICAgICAgIHR4dC5zZXRQbGFjZWhvbGRlcihcIlByZWZpeFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZWZpeCA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKS5hZGRUZXh0KCh0eHQpID0+XG4gICAgICAgICAgICAgICAgICAgIHR4dC5zZXRQbGFjZWhvbGRlcihcIlN1ZmZpeFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN1ZmZpeCA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNvbmZpcm1cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodGhpcy5wcmVmaXggPT0gbnVsbCB8fCB0aGlzLnByZWZpeC50cmltKCkgPT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAodGhpcy5zdWZmaXggPT0gbnVsbCB8fCB0aGlzLnN1ZmZpeC50cmltKCkgPT0gXCJcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlByZWZpeCBhbmQgU3VmZml4IGNvdWxkIG5vdCBiZSBhbGwgZW1wdHkhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUmVuYW1lQ29uZmlybU1vZGFsKHRoaXMuYXBwLCB0aGlzLnJlc3VsdEFyciwgdGhpcy5wcmVmaXgsIHRoaXMuc3VmZml4KS5vcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDYW5jZWxcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiUmVuYW1lIENhbmNlbGVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IGhhc01hcmtkb3duU3VmZml4IGZyb20gJ3NyYy91dGlscy9maWxlLXR5cGUtdXRpbCc7XG5cbi8qKlxuICogXHUwMEEwXHU5MUNEXHU1NDdEXHU1NDBEXHU3ODZFXHU4QkE0XHU1RjM5XHU3QTk3XG4gKi9cbmV4cG9ydCBjbGFzcyBSZW5hbWVDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW107XG4gICAgcHJlZml4OiBTdHJpbmc7XG4gICAgc3VmZml4OiBTdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10sIHByZWZpeDogU3RyaW5nLCBzdWZmaXg6IFN0cmluZykge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnJlc3VsdEFyciA9IHJlc3VsdEFycjtcbiAgICAgICAgdGhpcy5wcmVmaXggPSBwcmVmaXg7XG4gICAgICAgIHRoaXMuc3VmZml4ID0gc3VmZml4O1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIlJlbmFtZSBGaWxlc1wiIH0pO1xuXG4gICAgICAgIHRoaXMucmVzdWx0QXJyLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICBsZXQgbmFtZSA9IHRoaXMubmV3TmFtZShpbmZvLm5hbWUpO1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogaW5mby5uYW1lICsgXCItPlwiICsgbmFtZSB9KTtcbiAgICAgICAgfSlcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ29uZmlybVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh0aGlzLnByZWZpeCA9PSBudWxsIHx8IHRoaXMucHJlZml4LnRyaW0oKSA9PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICh0aGlzLnN1ZmZpeCA9PSBudWxsIHx8IHRoaXMuc3VmZml4LnRyaW0oKSA9PSBcIlwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJQcmVmaXggYW5kIFN1ZmZpeCBjb3VsZCBub3QgYmUgYWxsIGVtcHR5IVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucmVzdWx0QXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZm8gPSB0aGlzLnJlc3VsdEFycltpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IHRoaXMubmV3TmFtZShpbmZvLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoaW5mbywgaW5mby5wYXJlbnQucGF0aCArIFwiL1wiICsgbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiUmVuYW1lIFN1Y2Nlc3MhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDYW5jZWxcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJSZW5hbWUgQ2FuY2VsZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICB9XG5cbiAgICBuZXdOYW1lKG5hbWU6IFN0cmluZyk6IFN0cmluZyB7XG4gICAgICAgIGxldCB0TmFtZSA9IG5hbWUgKyBcIlwiO1xuICAgICAgICBsZXQgc3VmID0gXCJcIjtcbiAgICAgICAgaWYgKGhhc01hcmtkb3duU3VmZml4KHROYW1lKSkge1xuICAgICAgICAgICAgdE5hbWUgPSB0TmFtZS5yZXBsYWNlKFwiLm1kXCIsIFwiXCIpO1xuICAgICAgICAgICAgc3VmID0gXCIubWRcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcmVmaXggJiYgdGhpcy5wcmVmaXgudHJpbSgpICE9IFwiXCIpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZWZpeC5zdGFydHNXaXRoKFwiLVwiKSkge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gdGhpcy5wcmVmaXguc3Vic3RyaW5nKDEsIHRoaXMucHJlZml4Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgaWYgKHROYW1lLnN0YXJ0c1dpdGgodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdE5hbWUgPSB0TmFtZS5zdWJzdHJpbmcodC5sZW5ndGgsIHROYW1lLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0TmFtZSA9IHRoaXMucHJlZml4ICsgdE5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3VmZml4ICYmIHRoaXMuc3VmZml4LnRyaW0oKSAhPSBcIlwiKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdWZmaXguc3RhcnRzV2l0aChcIi1cIikpIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IHRoaXMuc3VmZml4LnN1YnN0cmluZygxLCB0aGlzLnN1ZmZpeC5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIGlmICh0TmFtZS5lbmRzV2l0aCh0KSkge1xuICAgICAgICAgICAgICAgICAgICB0TmFtZSA9IHROYW1lLnN1YnN0cmluZygwLCB0TmFtZS5sZW5ndGggLSB0Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0TmFtZSA9IHROYW1lICsgdGhpcy5zdWZmaXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHROYW1lICsgc3VmO1xuICAgIH1cbn0iLCAiXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBoYXNNYXJrZG93blN1ZmZpeChzdHI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBzdHIuZW5kc1dpdGgoXCIubWRcIilcbiAgICAgICAgfHwgc3RyLmVuZHNXaXRoKFwiLk1EXCIpXG4gICAgICAgIHx8IHN0ci5lbmRzV2l0aChcIi5NZFwiKVxuICAgICAgICB8fCBzdHIuZW5kc1dpdGgoXCIubURcIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNDYW52YXNTdWZmaXgoc3RyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gc3RyLmVuZHNXaXRoKFwiLmNhbnZhc1wiKTtcbn0iLCAiaW1wb3J0IEZpbGVDb29rZXJQbHVnaW4gZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgU3luY0Zsb21vQ29uZmlybU1vZGFsIH0gZnJvbSBcInNyYy9tb2RhbC9zeW5jLWZsb21vLWNvbmZpcm0tbW9kYWxcIjtcbmltcG9ydCB7IEFjdGlvbiwgQWN0aW9uTW9kZWwgfSBmcm9tIFwiLi9hY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIFN5bmNGbG9tb0FjdGlvbiBpbXBsZW1lbnRzIEFjdGlvbiB7XG5cbiAgICBwbHVnaW46IEZpbGVDb29rZXJQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IEZpbGVDb29rZXJQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgYWN0KGFjdGlvbk1vZGVsczogQWN0aW9uTW9kZWxbXSkge1xuICAgICAgICBsZXQgZmxvbW9BUEkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mbG9tb0FQSTtcbiAgICAgICAgaWYgKCFmbG9tb0FQSSB8fCBmbG9tb0FQSS50cmltKCkgPT0gXCJcIikge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIlBsZWFzZSBjb25maWcgZmxvbW9BUEkgZmlyc3QhXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhY3Rpb25Nb2RlbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbmV3IFN5bmNGbG9tb0NvbmZpcm1Nb2RhbCh0aGlzLnBsdWdpbiwgYWN0aW9uTW9kZWxzKS5vcGVuKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gRmlsZXMgRm91bmQhXCIpO1xuICAgICAgICB9XG4gICAgfVxufSIsICJpbXBvcnQgRmlsZUNvb2tlclBsdWdpbiBmcm9tICdtYWluJztcbmltcG9ydCB7IE1vZGFsLCBOb3RpY2UsIFNldHRpbmcsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IGZldGNoIGZyb20gJ25vZGUtZmV0Y2gnO1xuaW1wb3J0IHsgQWN0aW9uTW9kZWwgfSBmcm9tICdzcmMvYWN0aW9uL2FjdGlvbic7XG5cbi8qKlxuICogXHUwMEEwXHU1RjM5XHU3QTk3XHU3ODZFXHU4QkE0XHU4OTgxXHU1NDBDXHU2QjY1XHU1MjMwZmxvbW9cdTc2ODRcdTY1ODdcdTRFRjZcbiAqL1xuZXhwb3J0IGNsYXNzIFN5bmNGbG9tb0NvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBhY3Rpb25Nb2RlbHM6IEFjdGlvbk1vZGVsW107XG4gICAgcGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luLCBhY3Rpb25Nb2RlbHM6IEFjdGlvbk1vZGVsW10pIHtcbiAgICAgICAgc3VwZXIocGx1Z2luLmFwcCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmFjdGlvbk1vZGVscyA9IGFjdGlvbk1vZGVscztcbiAgICB9XG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJDb25maXJtIFN5bmMgdG8gZmxvbW8/XCIgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMuYWN0aW9uTW9kZWxzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIk5vIGZpbGVzIGZvdW5kIVwiIH0pO1xuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2xvc2VcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uTW9kZWxzLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGluZm8uZmlsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGluZm8uZmlsZS5wYXRoIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IFwiU3luYyBTZWxlY3Rpb25cIiB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ29uZmlybVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hY3Rpb25Nb2RlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZm8gPSB0aGlzLmFjdGlvbk1vZGVsc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmZvLmZpbGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoKGluZm8uZmlsZSBhcyBURmlsZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udCA9IGluZm8uY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdUQ4M0RcdURDNDdcdUZFMEYgY29uc3QgcmVzcG9uc2U6IFJlc3BvbnNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5wbHVnaW4uc2V0dGluZ3MuZmxvbW9BUEksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBTeW5jIHRvIGZsb21vIEVycm9yISR7cmVzcG9uc2UudGV4dH1bJHtyZXNwb25zZS5zdGF0dXN9XWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJTeW5jIHRvIGZsb21vIFN1Y2Nlc3MhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2FuY2VsXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlN5bmMgdG8gZmxvbW8gQ2FuY2VsZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgSXRlbVZpZXcsIFN1Z2dlc3RNb2RhbCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBBZGRUb0NhbnZhc0FjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vYWRkLXRvLWNhbnZhcy1hY3Rpb24nO1xuaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tICdzcmMvcmVhZGVyL3JlYWRhYmxlJztcblxuLyoqXG4gKiBcdTkwMDlcdTYyRTlDYW52YXNcdTVGMzlcdTdBOTcsXG4gKi9cbmV4cG9ydCBjbGFzcyBDaG9vc2VDYW52YXNNb2RhbCBleHRlbmRzIFN1Z2dlc3RNb2RhbDxzdHJpbmc+IHtcblxuXHR0eXBlOiBzdHJpbmc7XG5cdHJlYWRhYmxlOiBSZWFkYWJsZTtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcmVhZGFibGU6IFJlYWRhYmxlKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnJlYWRhYmxlID0gcmVhZGFibGU7XG5cdH1cblxuXHQvLyBSZXR1cm5zIGFsbCBhdmFpbGFibGUgc3VnZ2VzdGlvbnMuXG5cdGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG5cdFx0Y29uc3QgYWJzdHJhY3RGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCk7XG5cdFx0Y29uc3QgZmlsZXM6IHN0cmluZ1tdID0gW107XG5cdFx0Y29uc3QgbG93ZXJDYXNlSW5wdXRTdHIgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuXHRcdGFic3RyYWN0RmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4ge1xuXHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5jb250YWlucyhsb3dlckNhc2VJbnB1dFN0cikgJiYgZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoXCIuY2FudmFzXCIpKSB7XG5cdFx0XHRcdGZpbGVzLnB1c2goZmlsZS5wYXRoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRpZiAoZmlsZXMubGVuZ3RoID09IDApIHtcblx0XHRcdGlmIChxdWVyeS5lbmRzV2l0aChcIi5jYW52YXNcIikpIHtcblx0XHRcdFx0ZmlsZXMucHVzaChxdWVyeSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmaWxlcy5wdXNoKHF1ZXJ5ICsgXCIuY2FudmFzXCIpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gZmlsZXM7XG5cdH1cblxuXHQvLyBSZW5kZXJzIGVhY2ggc3VnZ2VzdGlvbiBpdGVtLlxuXHRyZW5kZXJTdWdnZXN0aW9uKGZpbGVQYXRoOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCkge1xuXHRcdGVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogZmlsZVBhdGggfSk7XG5cdH1cblxuXHQvLyBQZXJmb3JtIGFjdGlvbiBvbiB0aGUgc2VsZWN0ZWQgc3VnZ2VzdGlvbi5cblx0b25DaG9vc2VTdWdnZXN0aW9uKGZpbGU6IHN0cmluZywgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCkge1xuXHRcdGxldCBhY3Rpb24gPSBuZXcgQWRkVG9DYW52YXNBY3Rpb24odGhpcy5hcHAsIGZpbGUpO1xuXHRcdHRoaXMucmVhZGFibGUucmVhZChhY3Rpb24pO1xuXHR9XG59IiwgImltcG9ydCB7IEFwcCwgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBBZGRUb0NhbnZhc0NvbmZpcm1Nb2RhbCB9IGZyb20gXCJzcmMvbW9kYWwvYWRkLXRvLWNhbnZhcy1jb25maXJtLW1vZGFsXCI7XG5pbXBvcnQgeyBBY3Rpb24sIEFjdGlvbk1vZGVsIH0gZnJvbSBcIi4vYWN0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBBZGRUb0NhbnZhc0FjdGlvbiBpbXBsZW1lbnRzIEFjdGlvbiB7XG5cbiAgICBhcHA6IEFwcDtcbiAgICB0YXJnZXRGaWxlUGF0aDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRhcmdldEZpbGVQYXRoPzogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnRhcmdldEZpbGVQYXRoID0gdGFyZ2V0RmlsZVBhdGg7XG4gICAgfVxuXG4gICAgYXN5bmMgYWN0KGFjdGlvbk1vZGVsczogQWN0aW9uTW9kZWxbXSkge1xuXG4gICAgICAgIGlmIChhY3Rpb25Nb2RlbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbmV3IEFkZFRvQ2FudmFzQ29uZmlybU1vZGFsKHRoaXMuYXBwLCBhY3Rpb25Nb2RlbHMsIHRoaXMudGFyZ2V0RmlsZVBhdGgpLm9wZW4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBGaWxlcyBGb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCAiaW1wb3J0IHsgQXBwLCBJdGVtVmlldywgTW9kYWwsIE5vdGljZSwgcmVxdWlyZUFwaVZlcnNpb24sIFNldHRpbmcsIFRBYnN0cmFjdEZpbGUsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQWN0aW9uTW9kZWwgfSBmcm9tICdzcmMvYWN0aW9uL2FjdGlvbic7XG5cbmNvbnN0IHdpZHRoID0gNDAwO1xuY29uc3QgaGVpZ2h0ID0gNDAwO1xuY29uc3QgYmV0d2VlbiA9IDQwO1xuXG4vKipcbiAqIFx1MDBBMFx1NUYzOVx1N0E5N1x1Nzg2RVx1OEJBNFx1ODk4MVx1NkRGQlx1NTJBMFx1NTIzMENhbnZhc1x1NzY4NFx1NjU4N1x1NEVGNlxuICovXG5leHBvcnQgY2xhc3MgQWRkVG9DYW52YXNDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgdGFyZ2V0RmlsZVBhdGg6IHN0cmluZztcbiAgICBhY3Rpb25Nb2RlbHM6IEFjdGlvbk1vZGVsW107XG5cbiAgICBpbmNsdWRlUmVzbG92ZWRMaW5rc0ZsYWc6IGJvb2xlYW47XG4gICAgc3BsaXRCeUxpbmVGbGFnOiBib29sZWFuO1xuICAgIC8vIFx1NjU4N1x1NEVGNlx1NTIxN1x1ODg2OFxuICAgIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdO1xuICAgIC8vIFx1OTAwOVx1NEUyRFx1NzY4NFx1NTE4NVx1NUJCOVxuICAgIGNvbnQ6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBhY3Rpb25Nb2RlbHM6IEFjdGlvbk1vZGVsW10sIHRhcmdldEZpbGVQYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy50YXJnZXRGaWxlUGF0aCA9IHRhcmdldEZpbGVQYXRoO1xuICAgICAgICBpZiAoYWN0aW9uTW9kZWxzLmxlbmd0aCA9PSAxICYmIGFjdGlvbk1vZGVsc1swXS5jb250ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvbnQgPSBhY3Rpb25Nb2RlbHNbMF0uY29udGVudFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHJlc3VsdEFyciA9IGFjdGlvbk1vZGVscy5tYXAobW9kZWwgPT4gbW9kZWwuZmlsZSk7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdEFyciA9IHJlc3VsdEFycjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgaWYgKHRoaXMuY29udCkge1xuICAgICAgICAgICAgdGhpcy5hZGRDb250ZW50KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFkZEZpbGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYWRkQ29udGVudCgpIHtcblxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiQ29uZmlybSBBZGQgdG8gQ2FudmFzP1wiIH0pO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IFwiQWRkIGNvbnQgYmVsb3cgdG8gQ2FudmFzIC0+IFwiICsgdGhpcy50YXJnZXRGaWxlUGF0aCArIFwiICFcIiB9KTtcblxuICAgICAgICBsZXQgbGluZXMgPSB0aGlzLmNvbnQuc3BsaXQoL1xccj9cXG4vKTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbGluZXMpIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gbGluZXNba2V5XTtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGxpbmUgfSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5zZXRUb29sdGlwKFwiU3BsaXQgYnkgbGluZSFcIik7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKCh2YWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGxpdEJ5TGluZUZsYWcgPSB2YWw7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgIGJ0bi5zZXRCdXR0b25UZXh0KFwiQ29uZmlybVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW52YXNWaWV3ID0gYXdhaXQgdGhpcy5nZXRDYW52YXMoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbnZhc1ZpZXc/LmdldFZpZXdUeXBlKCkgPT09IFwiY2FudmFzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBjYW52YXNWaWV3Py5jYW52YXM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zcGxpdEJ5TGluZUZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmVzID0gdGhpcy5jb250LnNwbGl0KC9cXHI/XFxuLyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpZHggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBsaW5lcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmUgPSBsaW5lc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVUZXh0Tm9kZShjYW52YXMsIGxpbmUsIGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHgrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlVGV4dE5vZGUoY2FudmFzLCB0aGlzLmNvbnQsIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMucmVxdWVzdFNhdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJBZGQgdG8gQ2FudmFzIFN1Y2Nlc3MhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKHRoaXMudGFyZ2V0RmlsZVBhdGggKyBcIiBpcyBub3QgYSBDYW52YXMhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDYW5jZWxcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJBZGQgdG8gQ2FudmFzIENhbmNlbGVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZ2V0Q2FudmFzKCkge1xuICAgICAgICBsZXQgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1RjUzXHU1MjREXHU2RDNCXHU1MkE4XHU2NTg3XHU2ODYzXHU0RTBFXHU3NkVFXHU2ODA3XHU2NTg3XHU2ODYzXHU0RTBEXHU1NDBDXHVGRjBDXHU1MjE5XHU1QzFEXHU4QkQ1XHU2MjUzXHU1RjAwXHU3NkVFXHU2ODA3XHU2NTg3XHU2ODYzXG4gICAgICAgIGlmIChhY3RpdmVGaWxlID09IG51bGwgfHwgdGhpcy50YXJnZXRGaWxlUGF0aCAhPSBhY3RpdmVGaWxlLnBhdGgpIHtcbiAgICAgICAgICAgIGxldCB0YXJnZXRGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMudGFyZ2V0RmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKHRhcmdldEZpbGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY2FuIG5vdCBmaW5kIFwiICsgdGhpcy50YXJnZXRGaWxlUGF0aCk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0RmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZSh0aGlzLnRhcmdldEZpbGVQYXRoLCBcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjI1M1x1NUYwMFx1NzY4NFx1NEUwRFx1NjYyRlx1NzZFRVx1NjgwN1x1NjU4N1x1NEVGNlx1RkYwQ1x1NTIxOVx1NUMxRFx1OEJENVx1NTcyOFx1NjVCMFx1N0E5N1x1NTNFM1x1NjI1M1x1NUYwMFx1RkYxQlx1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOVx1NjI1M1x1NUYwMFx1NEVGQlx1NEY1NVx1NjU4N1x1NEVGNlx1RkYwQ1x1NTIxOVx1NTcyOFx1NUY1M1x1NTI0RFx1N0E5N1x1NTNFM1x1NjI1M1x1NUYwMFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoYWN0aXZlRmlsZSAhPSBudWxsKS5vcGVuRmlsZSh0YXJnZXRGaWxlIGFzIFRGaWxlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENvbmRpdGlvbnMgdG8gY2hlY2tcbiAgICAgICAgY29uc3QgY2FudmFzVmlldyA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShJdGVtVmlldyk7XG4gICAgICAgIHJldHVybiBjYW52YXNWaWV3O1xuICAgIH1cblxuICAgIHByaXZhdGUgYWRkRmlsZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkNvbmZpcm0gQWRkIHRvIENhbnZhcz9cIiB9KTtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIkFkZCBhbGwgZmlsZXMgYmVsb3cgdG8gQ2FudmFzIC0+IFwiICsgdGhpcy50YXJnZXRGaWxlUGF0aCArIFwiICFcIiB9KTtcbiAgICAgICAgdGhpcy5yZXN1bHRBcnIuZm9yRWFjaChpbmZvID0+IHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGluZm8ucGF0aCB9KTtcbiAgICAgICAgfSlcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcbiAgICAgICAgICAgICAgICB0b2dnbGUuc2V0VG9vbHRpcChcIkluY2x1ZGUgcmVzb2x2ZWQgbGlua3MhXCIpO1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5vbkNoYW5nZSgodmFsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5jbHVkZVJlc2xvdmVkTGlua3NGbGFnID0gdmFsO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICBidG4uc2V0QnV0dG9uVGV4dChcIkNvbmZpcm1cIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhdGhOb2RlTWFwID0gbmV3IE1hcCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW52YXNWaWV3ID0gYXdhaXQgdGhpcy5nZXRDYW52YXMoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbnZhc1ZpZXc/LmdldFZpZXdUeXBlKCkgPT09IFwiY2FudmFzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBjYW52YXNWaWV3Py5jYW52YXM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaWR4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLnJlc3VsdEFycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmlsZSA9IHRoaXMucmVzdWx0QXJyW2tleV0gYXMgVEZpbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wQ2hpbGROb2RlID0gdGhpcy5jcmVhdGVGaWxlTm9kZShjYW52YXMsIGZpbGUsIGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeCsrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmluY2x1ZGVSZXNsb3ZlZExpbmtzRmxhZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1NDBDXHU2NUY2XHU2REZCXHU1MkEwXHU1MTg1XHU5ODc1XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoTm9kZU1hcC5zZXQoZmlsZS5wYXRoLCB0ZW1wQ2hpbGROb2RlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmtPYmogPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLnJlc29sdmVkTGlua3NbZmlsZS5wYXRoXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGlubmVyRmlsZVBhdGggaW4gbGlua09iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleGlzdEZpbGVOb2RlID0gcGF0aE5vZGVNYXAuZ2V0KGlubmVyRmlsZVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGlzdEZpbGVOb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlRWRnZSh0ZW1wQ2hpbGROb2RlLCBleGlzdEZpbGVOb2RlLCBjYW52YXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGlubmVyRmlsZVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzb2x2ZWRGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGlubmVyRmlsZVBhdGgpIGFzIFRGaWxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNvbHZlZEZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5uZXJDaGlsZE5vZGUgPSB0aGlzLmNyZWF0ZUZpbGVOb2RlKGNhbnZhcywgcmVzb2x2ZWRGaWxlLCBpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHgrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aE5vZGVNYXAuc2V0KGlubmVyRmlsZVBhdGgsIGlubmVyQ2hpbGROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVFZGdlKHRlbXBDaGlsZE5vZGUsIGlubmVyQ2hpbGROb2RlLCBjYW52YXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMucmVxdWVzdFNhdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJBZGQgdG8gQ2FudmFzIFN1Y2Nlc3MhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKHRoaXMudGFyZ2V0RmlsZVBhdGggKyBcIiBpcyBub3QgYSBDYW52YXMhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDYW5jZWxcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJBZGQgdG8gQ2FudmFzIENhbmNlbGVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlVGV4dE5vZGUoY2FudmFzOiBhbnksIGNvbnQ6IHN0cmluZywgaWR4OiBudW1iZXIpIHtcblxuICAgICAgICBsZXQgdGVtcENoaWxkTm9kZTtcbiAgICAgICAgdGVtcENoaWxkTm9kZSA9IGNhbnZhcy5jcmVhdGVUZXh0Tm9kZSh7XG4gICAgICAgICAgICB0ZXh0OiBjb250LFxuICAgICAgICAgICAgcG9zOiB7XG4gICAgICAgICAgICAgICAgeDogYmV0d2VlbiArICgod2lkdGggKyBiZXR3ZWVuKSAqIGlkeCksXG4gICAgICAgICAgICAgICAgeTogYmV0d2VlbixcbiAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzaXplOiB7XG4gICAgICAgICAgICAgICAgeDogYmV0d2VlbixcbiAgICAgICAgICAgICAgICB5OiBiZXR3ZWVuLFxuICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGhlaWdodFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNhdmU6IHRydWUsXG4gICAgICAgICAgICBmb2N1czogZmFsc2UsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNhbnZhcy5kZXNlbGVjdEFsbCgpO1xuICAgICAgICBjYW52YXMuYWRkTm9kZSh0ZW1wQ2hpbGROb2RlKTtcbiAgICAgICAgcmV0dXJuIHRlbXBDaGlsZE5vZGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVGaWxlTm9kZShjYW52YXM6IGFueSwgZmlsZTogVEZpbGUsIGlkeDogbnVtYmVyKSB7XG5cbiAgICAgICAgbGV0IHRlbXBDaGlsZE5vZGU7XG4gICAgICAgIGlmICghcmVxdWlyZUFwaVZlcnNpb24oXCIxLjEuMTBcIikpIHtcbiAgICAgICAgICAgIHRlbXBDaGlsZE5vZGUgPSBjYW52YXMuY3JlYXRlRmlsZU5vZGUoZmlsZSwgXCJcIiwgeyB4OiBiZXR3ZWVuICsgKCh3aWR0aCArIGJldHdlZW4pICogaWR4KSwgeTogYmV0d2VlbiwgaGVpZ2h0OiBoZWlnaHQsIHdpZHRoOiB3aWR0aCB9LCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRlbXBDaGlsZE5vZGUgPSBjYW52YXMuY3JlYXRlRmlsZU5vZGUoe1xuICAgICAgICAgICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgICAgICAgICAgcG9zOiB7XG4gICAgICAgICAgICAgICAgICAgIHg6IGJldHdlZW4gKyAoKHdpZHRoICsgYmV0d2VlbikgKiBpZHgpLFxuICAgICAgICAgICAgICAgICAgICB5OiBiZXR3ZWVuLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzaXplOiB7XG4gICAgICAgICAgICAgICAgICAgIHg6IGJldHdlZW4sXG4gICAgICAgICAgICAgICAgICAgIHk6IGJldHdlZW4sXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNhdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZm9jdXM6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2FudmFzLmRlc2VsZWN0QWxsKCk7XG4gICAgICAgIGNhbnZhcy5hZGROb2RlKHRlbXBDaGlsZE5vZGUpO1xuICAgICAgICByZXR1cm4gdGVtcENoaWxkTm9kZTtcbiAgICB9XG5cbiAgICByYW5kb20oZTogbnVtYmVyKSB7XG4gICAgICAgIGxldCB0ID0gW107XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZTsgbisrKSB7XG4gICAgICAgICAgICB0LnB1c2goKDE2ICogTWF0aC5yYW5kb20oKSB8IDApLnRvU3RyaW5nKDE2KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQuam9pbihcIlwiKVxuICAgIH1cblxuICAgIGNyZWF0ZUVkZ2Uobm9kZTE6IGFueSwgbm9kZTI6IGFueSwgY2FudmFzOiBhbnkpIHtcblxuICAgICAgICBjb25zdCBlZGdlID0gY2FudmFzLmVkZ2VzLmdldChjYW52YXMuZ2V0RGF0YSgpLmVkZ2VzLmZpcnN0KCk/LmlkKTtcblxuICAgICAgICBpZiAoZWRnZSkge1xuICAgICAgICAgICAgY29uc3QgdGVtcEVkZ2UgPSBuZXcgZWRnZS5jb25zdHJ1Y3RvcihjYW52YXMsIHRoaXMucmFuZG9tKDE2KSwgeyBzaWRlOiBcInJpZ2h0XCIsIG5vZGU6IG5vZGUxIH0sIHsgc2lkZTogXCJsZWZ0XCIsIG5vZGU6IG5vZGUyIH0pXG4gICAgICAgICAgICBjYW52YXMuYWRkRWRnZSh0ZW1wRWRnZSk7XG4gICAgICAgICAgICB0ZW1wRWRnZS5hdHRhY2goKTtcbiAgICAgICAgICAgIHRlbXBFZGdlLnJlbmRlcigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJZb3Ugc2hvdWxkIGhhdmUgYXQgbGVhc3Qgb25lIGVkZ2UgaW4gdGhlIGNhbnZhcyB0byB1c2UgdGhpcyBmZWF0dXJlIVwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIFN1Z2dlc3RNb2RhbCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBNZXJnZUFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vbWVyZ2UtYWN0aW9uJztcbmltcG9ydCB7IFJlYWRhYmxlIH0gZnJvbSAnc3JjL3JlYWRlci9yZWFkYWJsZSc7XG5pbXBvcnQgaGFzTWFya2Rvd25TdWZmaXggZnJvbSAnc3JjL3V0aWxzL2ZpbGUtdHlwZS11dGlsJztcblxuLyoqXG4gKiBcdTkwMDlcdTYyRTlcdTY1ODdcdTY4NjNcdTVGMzlcdTdBOTdcbiAqL1xuZXhwb3J0IGNsYXNzIENob29zZUZpbGVNb2RhbCBleHRlbmRzIFN1Z2dlc3RNb2RhbDxzdHJpbmc+IHtcblxuXHR0eXBlOiBzdHJpbmc7XG5cdHJlYWRhYmxlOiBSZWFkYWJsZTtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcmVhZGFibGU6IFJlYWRhYmxlKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnJlYWRhYmxlID0gcmVhZGFibGU7XG5cdH1cblxuXHQvLyBSZXR1cm5zIGFsbCBhdmFpbGFibGUgc3VnZ2VzdGlvbnMuXG5cdGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG5cdFx0Y29uc3QgYWJzdHJhY3RGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCk7XG5cdFx0Y29uc3QgZmlsZXM6IHN0cmluZ1tdID0gW107XG5cdFx0Y29uc3QgbG93ZXJDYXNlSW5wdXRTdHIgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuXHRcdGFic3RyYWN0RmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4ge1xuXHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5jb250YWlucyhsb3dlckNhc2VJbnB1dFN0cikpIHtcblx0XHRcdFx0ZmlsZXMucHVzaChmaWxlLnBhdGgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGlmIChmaWxlcy5sZW5ndGggPT0gMCkge1xuXHRcdFx0aWYgKGhhc01hcmtkb3duU3VmZml4KHF1ZXJ5KSkge1xuXHRcdFx0XHRmaWxlcy5wdXNoKHF1ZXJ5KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZpbGVzLnB1c2gocXVlcnkgKyBcIi5tZFwiKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGZpbGVzO1xuXHR9XG5cblx0Ly8gUmVuZGVycyBlYWNoIHN1Z2dlc3Rpb24gaXRlbS5cblx0cmVuZGVyU3VnZ2VzdGlvbihmaWxlUGF0aDogc3RyaW5nLCBlbDogSFRNTEVsZW1lbnQpIHtcblx0XHRlbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGZpbGVQYXRoIH0pO1xuXHR9XG5cblx0Ly8gUGVyZm9ybSBhY3Rpb24gb24gdGhlIHNlbGVjdGVkIHN1Z2dlc3Rpb24uXG5cdG9uQ2hvb3NlU3VnZ2VzdGlvbihmaWxlOiBzdHJpbmcsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpIHtcblx0XHRsZXQgYWN0aW9uID0gbmV3IE1lcmdlQWN0aW9uKHRoaXMuYXBwLCBmaWxlKTtcblx0XHR0aGlzLnJlYWRhYmxlLnJlYWQoYWN0aW9uKTtcblx0fVxufSIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgVEFic3RyYWN0RmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgTWVyZ2VDb25maXJtTW9kYWwgfSBmcm9tIFwic3JjL21vZGFsL21lcmdlLWNvbmZpcm0tbW9kYWxcIjtcbmltcG9ydCB7IEFjdGlvbiwgQWN0aW9uTW9kZWwgfSBmcm9tIFwiLi9hY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIE1lcmdlQWN0aW9uIGltcGxlbWVudHMgQWN0aW9uIHtcblxuICAgIGFwcDogQXBwO1xuICAgIHRhcmdldEZpbGVQYXRoOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgdGFyZ2V0RmlsZVBhdGg6IHN0cmluZykge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy50YXJnZXRGaWxlUGF0aCA9IHRhcmdldEZpbGVQYXRoO1xuICAgIH1cblxuICAgIGFzeW5jIGFjdChhY3Rpb25Nb2RlbHM6IEFjdGlvbk1vZGVsW10pIHtcblxuICAgICAgICBpZiAoYWN0aW9uTW9kZWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGxldCBmaWxlcyA9IGFjdGlvbk1vZGVscy5tYXAobW9kZWwgPT4gbW9kZWwuZmlsZSk7XG4gICAgICAgICAgICBuZXcgTWVyZ2VDb25maXJtTW9kYWwodGhpcy5hcHAsIGZpbGVzLCB0aGlzLnRhcmdldEZpbGVQYXRoKS5vcGVuKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gRmlsZXMgRm91bmQhXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZywgVEFic3RyYWN0RmlsZSwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgaGFzTWFya2Rvd25TdWZmaXggZnJvbSAnc3JjL3V0aWxzL2ZpbGUtdHlwZS11dGlsJztcbmltcG9ydCB7IGdldExpbmVicmVhayB9IGZyb20gJ3NyYy91dGlscy9saW5lLWJyZWFrLXV0aWwnO1xuXG4vKipcbiAqIFx1MDBBMFx1NUYzOVx1N0E5N1x1Nzg2RVx1OEJBNFx1ODk4MVx1NTQwOFx1NUU3Nlx1NzY4NFx1NjU4N1x1NEVGNlxuICovXG5leHBvcnQgY2xhc3MgTWVyZ2VDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgdGFyZ2V0RmlsZVBhdGg6IHN0cmluZztcbiAgICByZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXTtcbiAgICBsaW5lQnJlYWs6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCByZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXSwgdGFyZ2V0RmlsZVBhdGg6IHN0cmluZykge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnRhcmdldEZpbGVQYXRoID0gdGFyZ2V0RmlsZVBhdGg7XG4gICAgICAgIHRoaXMucmVzdWx0QXJyID0gcmVzdWx0QXJyO1xuICAgICAgICB0aGlzLmxpbmVCcmVhayA9IGdldExpbmVicmVhaygpO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkNvbmZpcm0gTWVyZ2U/XCIgfSk7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogXCJNZXJnZSBhbGwgZmlsZXMgYmVsb3cgLT4gXCIgKyB0aGlzLnRhcmdldEZpbGVQYXRoICsgXCIgIVwiIH0pO1xuICAgICAgICB0aGlzLnJlc3VsdEFyci5mb3JFYWNoKGluZm8gPT4ge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogaW5mby5wYXRoIH0pO1xuICAgICAgICB9KVxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICBidG4uc2V0QnV0dG9uVGV4dChcIkNvbmZpcm1cIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXRGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMudGFyZ2V0RmlsZVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldEZpbGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUodGhpcy50YXJnZXRGaWxlUGF0aCwgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLnJlc3VsdEFycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmZvID0gdGhpcy5yZXN1bHRBcnJba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzTWFya2Rvd25TdWZmaXgoaW5mby5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoKGluZm8gYXMgVEZpbGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udCA9IHRoaXMuY2xlYXJZYW1sKGNvbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ID0gdGhpcy5kZW1vdGVIZWFkZXIoY29udCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnQgPSBcIiMgXCIgKyBpbmZvLm5hbWUuc3Vic3RyaW5nKDAsIGluZm8ubmFtZS5sZW5ndGggLSAzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyB0aGlzLmxpbmVCcmVhayArIGNvbnQgKyB0aGlzLmxpbmVCcmVhayArIHRoaXMubGluZUJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hcHBlbmQoKHRhcmdldEZpbGUgYXMgVEZpbGUpLCBjb250KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udCA9IGAhW1ske2luZm8ubmFtZX1dXSR7dGhpcy5saW5lQnJlYWt9JHt0aGlzLmxpbmVCcmVha31gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hcHBlbmQoKHRhcmdldEZpbGUgYXMgVEZpbGUpLCBjb250KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTWVyZ2UgU3VjY2VzcyFcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNhbmNlbFwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk1lcmdlIENhbmNlbGVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIGNsZWFyWWFtbChjb250OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBpZiAoY29udC5zdGFydHNXaXRoKFwiLS0tXCIpKSB7XG4gICAgICAgICAgICBsZXQgbGluZXMgPSBjb250LnNwbGl0KHRoaXMubGluZUJyZWFrKTtcbiAgICAgICAgICAgIGxldCByZXN1bHRzID0gXCJcIjtcbiAgICAgICAgICAgIGxldCBhcHBlbmRGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IGlkeCBpbiBsaW5lcykge1xuICAgICAgICAgICAgICAgIGlmIChsaW5lc1tpZHhdID09IFwiLS0tXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kRmxhZyA9ICFhcHBlbmRGbGFnO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFwcGVuZEZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMgKyBsaW5lc1tpZHhdICsgdGhpcy5saW5lQnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gY29udDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlbW90ZUhlYWRlcihjb250OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgcmVnID0gLyMgL2c7XG4gICAgICAgIHJldHVybiBjb250LnJlcGxhY2UocmVnLCBcIiMjIFwiKTtcbiAgICB9XG59XG4iLCAiXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGluZWJyZWFrKCk6IHN0cmluZyB7XG4gICAgbGV0IG9zcyA9IFtcIldpbmRvd3NcIiwgXCJNYWNcIiwgXCJMaW51eFwiXTtcbiAgICBsZXQgbGluZUJyZWFrcyA9IFtcIlxcclxcblwiLCBcIlxcblwiLCBcIlxcblwiXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9zcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgb3MgPSBvc3NbaV07XG4gICAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2Yob3MpICE9IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gbGluZUJyZWFrc1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gXCJcXG5cIjtcbn0iLCAiaW1wb3J0IHsgQXBwLCBTdWdnZXN0TW9kYWwsIFRBYnN0cmFjdEZpbGUsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL2FjdGlvbic7XG5pbXBvcnQgeyBNb3ZlQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9tb3ZlLWFjdGlvbic7XG5pbXBvcnQgeyBSZWFkYWJsZSB9IGZyb20gJ3NyYy9yZWFkZXIvcmVhZGFibGUnO1xuXG4vKipcbiAqIFx1OTAwOVx1NjJFOVx1NzZFRVx1NUY1NVx1NUYzOVx1N0E5N1xuICovXG5leHBvcnQgY2xhc3MgQ2hvb3NlRm9sZGVyTW9kYWwgZXh0ZW5kcyBTdWdnZXN0TW9kYWw8VEFic3RyYWN0RmlsZT4ge1xuXG5cdHR5cGU6IHN0cmluZztcblx0cmVhZGFibGU6IFJlYWRhYmxlO1xuXHRhY3Rpb25GdW5jOiAocGF0aDogc3RyaW5nKSA9PiBBY3Rpb247XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHJlYWRhYmxlOiBSZWFkYWJsZSwgYWN0aW9uRnVuYzogKHBhdGg6IHN0cmluZykgPT4gQWN0aW9uKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnJlYWRhYmxlID0gcmVhZGFibGU7XG5cdFx0dGhpcy5hY3Rpb25GdW5jID0gYWN0aW9uRnVuYztcblx0fVxuXG5cdC8vIFJldHVybnMgYWxsIGF2YWlsYWJsZSBzdWdnZXN0aW9ucy5cblx0Z2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IFRBYnN0cmFjdEZpbGVbXSB7XG5cdFx0Y29uc3QgYWJzdHJhY3RGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCk7XG5cdFx0Y29uc3QgZm9sZGVyczogVEFic3RyYWN0RmlsZVtdID0gW107XG5cdFx0Y29uc3QgbG93ZXJDYXNlSW5wdXRTdHIgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuXHRcdGFic3RyYWN0RmlsZXMuZm9yRWFjaCgoZm9sZGVyKSA9PiB7XG5cdFx0XHRpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlciAmJiBmb2xkZXIucGF0aC50b0xvd2VyQ2FzZSgpLmNvbnRhaW5zKGxvd2VyQ2FzZUlucHV0U3RyKSkge1xuXHRcdFx0XHRmb2xkZXJzLnB1c2goZm9sZGVyKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRyZXR1cm4gZm9sZGVycztcblx0fVxuXG5cdC8vIFJlbmRlcnMgZWFjaCBzdWdnZXN0aW9uIGl0ZW0uXG5cdHJlbmRlclN1Z2dlc3Rpb24oZm9sZGVyOiBUQWJzdHJhY3RGaWxlLCBlbDogSFRNTEVsZW1lbnQpIHtcblx0XHRlbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGZvbGRlci5wYXRoIH0pO1xuXHRcdC8vIGVsLmNyZWF0ZUVsKFwic21hbGxcIiwgeyB0ZXh0OiBmb2xkZXIucGF0aCB9KTtcblx0fVxuXG5cdC8vIFBlcmZvcm0gYWN0aW9uIG9uIHRoZSBzZWxlY3RlZCBzdWdnZXN0aW9uLlxuXHRvbkNob29zZVN1Z2dlc3Rpb24oZm9sZGVyOiBUQWJzdHJhY3RGaWxlLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KSB7XG5cdFx0bGV0IGFjdGlvbiA9IHRoaXMuYWN0aW9uRnVuYyhmb2xkZXIucGF0aCk7XG5cdFx0dGhpcy5yZWFkYWJsZS5yZWFkKGFjdGlvbik7XG5cdH1cbn0iLCAiaW1wb3J0IEZpbGVDb29rZXJQbHVnaW4gZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwic3JjL2FjdGlvbi9hY3Rpb25cIjtcbmltcG9ydCBoYXNNYXJrZG93blN1ZmZpeCwgeyBoYXNDYW52YXNTdWZmaXggfSBmcm9tIFwic3JjL3V0aWxzL2ZpbGUtdHlwZS11dGlsXCI7XG5pbXBvcnQgeyBSZWFkSW5mbyB9IGZyb20gXCIuL3JlYWQtaW5mb1wiO1xuaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tIFwiLi9yZWFkYWJsZVwiO1xuXG5cbmV4cG9ydCBjbGFzcyBDbGlwYm9hcmRSZWFkZXIgaW1wbGVtZW50cyBSZWFkYWJsZSB7XG5cbiAgICBwbHVnaW46IEZpbGVDb29rZXJQbHVnaW47XG4gICAgYXBwOiBBcHA7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IEZpbGVDb29rZXJQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuYXBwID0gcGx1Z2luLmFwcDtcbiAgICB9XG5cbiAgICByZWFkKGFjdGlvbjogQWN0aW9uKTogdm9pZCB7XG4gICAgICAgIGxldCByZWFkSW5mbyA9IG5ldyBSZWFkSW5mbyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5saW1pdCk7XG5cbiAgICAgICAgbGV0IHByb21pc2VTdHIgPSBuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWRUZXh0KCk7XG5cbiAgICAgICAgcHJvbWlzZVN0ci50aGVuKHN0ciA9PiB7XG4gICAgICAgICAgICBsZXQgbGluZXMgPSBzdHIuc3BsaXQoL1xccj9cXG4vKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGluZXMuZm9yRWFjaChsaW5lID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGYgPSBsaW5lO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZi5zdGFydHNXaXRoKFwiW1tcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBmLnN1YnN0cmluZygyLCBmLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGYuZW5kc1dpdGgoXCJdXVwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGYuc3Vic3RyaW5nKDAsIGYubGVuZ3RoIC0gMik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNNYXJrZG93blN1ZmZpeChmKSAmJiAhaGFzQ2FudmFzU3VmZml4KGYpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmID0gZiArIFwiLm1kXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IGZmID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGYpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmYgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZEluZm8uYWRkRmlsZShmZik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNhbiBub3QgZmluZCBmaWxlIDpcIiArIGYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYWN0aW9uLmFjdChyZWFkSW5mby5nZXRNb2RlbHMoKSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5jYXRjaChlID0+IHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDbGlwYm9hcmQgRmlsZSBDb250ZW50IEVycm9yIVwiICsgZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxufSIsICJpbXBvcnQgeyBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cblxuZXhwb3J0IGludGVyZmFjZSBBY3Rpb24ge1xuXG4gICAgYWN0KGFjdGlvbk1vZGVsczogQWN0aW9uTW9kZWxbXSk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBBY3Rpb25Nb2RlbCB7XG4gICAgZmlsZTogVEFic3RyYWN0RmlsZTtcbiAgICBjb250ZW50OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihmaWxlPzogVEFic3RyYWN0RmlsZSwgY29udGVudD86IHN0cmluZykge1xuICAgICAgICB0aGlzLmZpbGUgPSBmaWxlO1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgVEFic3RyYWN0RmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQWN0aW9uTW9kZWwgfSBmcm9tIFwic3JjL2FjdGlvbi9hY3Rpb25cIjtcblxuLyoqXG4gKiBcdThCRkJcdTUzRDZcdTc2ODRcdTRGRTFcdTYwNkZcbiAqL1xuZXhwb3J0IGNsYXNzIFJlYWRJbmZvIHtcblxuICAgIGxpbWl0OiBudW1iZXI7XG4gICAgYWN0aW9uTW9kZWxzOiBBY3Rpb25Nb2RlbFtdO1xuXG4gICAgY29uc3RydWN0b3IobGltaXQ6IHN0cmluZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5saW1pdCA9IGxpbWl0IGFzIHVua25vd24gYXMgbnVtYmVyO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJsaW1pdCBbXCIgKyB0aGlzLmxpbWl0ICsgXCJdIG11c3QgYmUgYSBudW1iZXIhXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aW9uTW9kZWxzID0gW107XG4gICAgfVxuXG4gICAgYWRkRmlsZShmaWxlOiBUQWJzdHJhY3RGaWxlKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGlvbk1vZGVscy5sZW5ndGggPj0gdGhpcy5saW1pdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTG9hZCBtb3JlIHRoYW4gXCIgKyB0aGlzLmxpbWl0ICsgXCIgZmlsZXMhXCIpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBtb2RlbCA9IG5ldyBBY3Rpb25Nb2RlbChmaWxlKTtcbiAgICAgICAgdGhpcy5hY3Rpb25Nb2RlbHMucHVzaChtb2RlbCk7XG4gICAgfVxuXG4gICAgYWRkQ29udGVudChjb250OiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aW9uTW9kZWxzLmxlbmd0aCA+PSB0aGlzLmxpbWl0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJMb2FkIG1vcmUgdGhhbiBcIiArIHRoaXMubGltaXQgKyBcIiBmaWxlcyFcIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG1vZGVsID0gbmV3IEFjdGlvbk1vZGVsKG51bGwsIGNvbnQpO1xuICAgICAgICB0aGlzLmFjdGlvbk1vZGVscy5wdXNoKG1vZGVsKTtcbiAgICB9XG5cbiAgICBnZXRNb2RlbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGlvbk1vZGVscztcbiAgICB9XG59IiwgImltcG9ydCBGaWxlQ29va2VyUGx1Z2luIGZyb20gXCJtYWluXCI7XG5pbXBvcnQgeyBBcHAsIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQWN0aW9uLCBBY3Rpb25Nb2RlbCB9IGZyb20gXCJzcmMvYWN0aW9uL2FjdGlvblwiO1xuaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tIFwiLi9yZWFkYWJsZVwiO1xuXG5cbmV4cG9ydCBjbGFzcyBDbGlwYm9hcmRDb250ZW50UmVhZGVyIGltcGxlbWVudHMgUmVhZGFibGUge1xuXG4gICAgcGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luO1xuICAgIGFwcDogQXBwO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmFwcCA9IHBsdWdpbi5hcHA7XG4gICAgfVxuXG4gICAgcmVhZChhY3Rpb246IEFjdGlvbik6IHZvaWQge1xuXG4gICAgICAgIGxldCBwcm9taXNlU3RyID0gbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpO1xuXG4gICAgICAgIHByb21pc2VTdHIudGhlbihzdHIgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBsZXQgYWN0aW9uTW9kZWxzID0gW107XG4gICAgICAgICAgICAgICAgbGV0IG1vZGVsID0gbmV3IEFjdGlvbk1vZGVsKG51bGwsIHN0cik7XG4gICAgICAgICAgICAgICAgYWN0aW9uTW9kZWxzLnB1c2gobW9kZWwpO1xuICAgICAgICAgICAgICAgIGFjdGlvbi5hY3QoYWN0aW9uTW9kZWxzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGUubWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmNhdGNoKGUgPT4ge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkNsaXBib2FyZCBDb250ZW50IEVycm9yIVwiICsgZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxufSIsICJpbXBvcnQgRmlsZUNvb2tlclBsdWdpbiBmcm9tICdtYWluJztcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vYWN0aW9uJztcbmltcG9ydCB7IEFkZFRvQ2FudmFzQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9hZGQtdG8tY2FudmFzLWFjdGlvbic7XG5pbXBvcnQgeyBEZWxldGVBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL2RlbGV0ZS1hY3Rpb24nO1xuaW1wb3J0IHsgRWRpdFByb3BlcnRpZXNBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL2VkaXQtcHJvcGVydGllcy1hY3Rpb24nO1xuaW1wb3J0IHsgTW92ZUFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vbW92ZS1hY3Rpb24nO1xuaW1wb3J0IHsgUmVuYW1lQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9yZW5hbWUtYWN0aW9uJztcbmltcG9ydCB7IFN5bmNGbG9tb0FjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vc3luYy1mbG9tby1hY3Rpb24nO1xuaW1wb3J0IHsgQ2hvb3NlQ2FudmFzTW9kYWwgfSBmcm9tICdzcmMvbW9kYWwvY2hvb3NlLWNhbnZhcy1tb2RhbCc7XG5pbXBvcnQgeyBDaG9vc2VGaWxlTW9kYWwgfSBmcm9tICdzcmMvbW9kYWwvY2hvb3NlLWZpbGUtbW9kYWwnO1xuaW1wb3J0IHsgQ2hvb3NlRm9sZGVyTW9kYWwgfSBmcm9tICdzcmMvbW9kYWwvY2hvb3NlLWZvbGRlci1tb2RhbCc7XG5pbXBvcnQgeyBDbGlwYm9hcmRSZWFkZXIgfSBmcm9tICdzcmMvcmVhZGVyL2NsaXBib2FyZC1yZWFkZXInO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gJy4vY29tbWFuZCc7XG5pbXBvcnQgeyBDbGlwYm9hcmRDb250ZW50UmVhZGVyIH0gZnJvbSAnc3JjL3JlYWRlci9jbGlwYm9hcmQtY29udGVudC1yZWFkZXInO1xuXG5leHBvcnQgY2xhc3MgQ2xpcGJvYXJkQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuXG4gICAgcGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIHJlZ2lzdCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZWdpc3RNb3ZlRmlsZSgpO1xuICAgICAgICB0aGlzLnJlZ2lzdFN5bmNGbG9tbygpO1xuICAgICAgICB0aGlzLnJlZ2lzdE1lcmdlRmlsZSgpO1xuICAgICAgICB0aGlzLnJlZ2lzdERlbGV0ZUZpbGUoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RFZGl0UHJvcCgpO1xuICAgICAgICB0aGlzLnJlZ2lzdFJlbmFtZUZpbGUoKTtcbiAgICAgICAgLy8gQ2FudmFzXG4gICAgICAgIHRoaXMucmVnaXN0QWRkRmlsZTJDYW52YXMoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RBZGRDb250VG9DYW52YXMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdFJlbmFtZUZpbGUoKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdyZW5hbWUtZmlsZXMtaW4tY2xpcGJvYXJkJyxcbiAgICAgICAgICAgIG5hbWU6ICdSZW5hbWUgZmlsZXMgaW4gY2xpcGJvYXJkIC4uLicsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBDbGlwYm9hcmRSZWFkZXIodGhpcy5wbHVnaW4pLnJlYWQobmV3IFJlbmFtZUFjdGlvbih0aGlzLnBsdWdpbi5hcHApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRWRpdCBQcm9wZXJ0aWVzIFxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9saWp5emUvb2JzaWRpYW4tc3RhdGUtc3dpdGNoZXIvYmxvYi9kMGE4MDA4MWIwZmNjMWI4OTllZWQyZTNkN2U4MzRjMmQ1NzAzODc1L3NyYy91dGlsLnRzI0w0MlxuICAgICAqL1xuICAgIHByaXZhdGUgcmVnaXN0RWRpdFByb3AoKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdlZGl0LWZyb250LW1hdHRlci1pbi1jbGlwYm9hcmQtZmlsZXMnLFxuICAgICAgICAgICAgbmFtZTogJ0VkaXQgUHJvcGVydGllcyBpbiBjbGlwYm9hcmQgZmlsZXMgLi4uJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IENsaXBib2FyZFJlYWRlcih0aGlzLnBsdWdpbikucmVhZChuZXcgRWRpdFByb3BlcnRpZXNBY3Rpb24odGhpcy5wbHVnaW4uYXBwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0RGVsZXRlRmlsZSgpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2RlbGV0ZS1maWxlcy1pbi1jbGlwYm9hcmQnLFxuICAgICAgICAgICAgbmFtZTogJ0RlbGV0ZSBmaWxlcyBpbiBjbGlwYm9hcmQhJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IENsaXBib2FyZFJlYWRlcih0aGlzLnBsdWdpbikucmVhZChuZXcgRGVsZXRlQWN0aW9uKHRoaXMucGx1Z2luLmFwcCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdE1lcmdlRmlsZSgpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ21lcmdlLWZpbGVzLWluLWNsaXBib2FyZC10bycsXG4gICAgICAgICAgICBuYW1lOiAnTWVyZ2UgZmlsZXMgaW4gY2xpcGJvYXJkIHRvIC4uLicsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBDaG9vc2VGaWxlTW9kYWwodGhpcy5wbHVnaW4uYXBwLCBuZXcgQ2xpcGJvYXJkUmVhZGVyKHRoaXMucGx1Z2luKSkub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdFN5bmNGbG9tbygpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ3N5bmMtZmlsZXMtaW4tY2xpcGJvYXJkLXRvLWZsb21vJyxcbiAgICAgICAgICAgIG5hbWU6ICdTeW5jIGZpbGVzIGluIGNsaXBib2FyZCB0byBmbG9tbyAuLi4nLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgQ2xpcGJvYXJkUmVhZGVyKHRoaXMucGx1Z2luKS5yZWFkKG5ldyBTeW5jRmxvbW9BY3Rpb24odGhpcy5wbHVnaW4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RNb3ZlRmlsZSgpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ21vdmUtZmlsZXMtaW4tY2xpcGJvYXJkLXRvJyxcbiAgICAgICAgICAgIG5hbWU6ICdNb3ZlIGZpbGVzIGluIGNsaXBib2FyZCB0byAuLi4nLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgYWN0aW9uRnVuYyA9IChwYXRoOiBzdHJpbmcpOiBBY3Rpb24gPT4geyByZXR1cm4gbmV3IE1vdmVBY3Rpb24odGhpcy5wbHVnaW4uYXBwLCBwYXRoKTsgfTtcbiAgICAgICAgICAgICAgICBuZXcgQ2hvb3NlRm9sZGVyTW9kYWwodGhpcy5wbHVnaW4uYXBwLCBuZXcgQ2xpcGJvYXJkUmVhZGVyKHRoaXMucGx1Z2luKSwgYWN0aW9uRnVuYykub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdEFkZENvbnRUb0NhbnZhcygpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJBZGQtY29udGVudC10b1wiLFxuICAgICAgICAgICAgbmFtZTogXCJBZGQgY29udGVudCBpbiBjbGlwYm9hcmQgdG8gY2FudmFzIC4uLlwiLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgQ2hvb3NlQ2FudmFzTW9kYWwodGhpcy5wbHVnaW4uYXBwLCBuZXcgQ2xpcGJvYXJkQ29udGVudFJlYWRlcih0aGlzLnBsdWdpbikpLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RBZGRGaWxlMkNhbnZhcygpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJhZGQtZmlsZXMtaW4tY2xpcGJvYXJkLXRvLWNhbnZhc1wiLFxuICAgICAgICAgICAgbmFtZTogXCJBZGQgZmlsZXMgaW4gY2xpcGJvYXJkIHRvIHRhcmdldCBjYW52YXMgLi4uXCIsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBDaG9vc2VDYW52YXNNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIG5ldyBDbGlwYm9hcmRSZWFkZXIodGhpcy5wbHVnaW4sKSkub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBDcmVhdGVDb25maXJtTW9kYWwgfSBmcm9tIFwic3JjL21vZGFsL2NyZWF0ZS1jb25maXJtLW1vZGFsXCI7XG5pbXBvcnQgeyBNb3ZlSW5mbyB9IGZyb20gXCIuLi9tb2RhbC9tb3ZlLWluZm9cIjtcbmltcG9ydCB7IEFjdGlvbiwgQWN0aW9uTW9kZWwgfSBmcm9tIFwiLi9hY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIENyZWF0ZUFjdGlvbiBpbXBsZW1lbnRzIEFjdGlvbiB7XG5cbiAgICBhcHA6IEFwcDtcbiAgICB0YXJnZXRQYXRoOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgdGFyZ2V0UGF0aDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnRhcmdldFBhdGggPSB0YXJnZXRQYXRoO1xuICAgIH1cblxuICAgIGFjdChhY3Rpb25Nb2RlbHM6IEFjdGlvbk1vZGVsW10pIHtcblxuICAgICAgICBjb25zdCBtb3ZlSW5mb3M6IE1vdmVJbmZvW10gPSBbXTtcblxuICAgICAgICBpZiAoYWN0aW9uTW9kZWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGFjdGlvbk1vZGVscy5mb3JFYWNoKG1vZGVsID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZmYgPSBtb2RlbC5maWxlO1xuICAgICAgICAgICAgICAgIG1vdmVJbmZvcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlRmlsZTogZmYsXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldERpcjogdGhpcy50YXJnZXRQYXRoXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBuZXcgQ3JlYXRlQ29uZmlybU1vZGFsKHRoaXMuYXBwLCBtb3ZlSW5mb3MpLm9wZW4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBGaWxlcyBGb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IE1vdmVJbmZvIH0gZnJvbSAnc3JjL21vZGFsL21vdmUtaW5mbyc7XG5cbi8qKlxuICogXHUwMEEwXHU1RjM5XHU3QTk3XHU3ODZFXHU4QkE0XHU4OTgxXHU1MjFCXHU1RUZBXHU3Njg0XHU2NTg3XHU0RUY2XG4gKi9cbmV4cG9ydCBjbGFzcyBDcmVhdGVDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgbW92ZUluZm9zOiBNb3ZlSW5mb1tdO1xuICAgIGNvcHlGbGFnOiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG1vdmVJbmZvczogTW92ZUluZm9bXSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLm1vdmVJbmZvcyA9IG1vdmVJbmZvcztcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJDb25maXJtIENyZWF0ZT9cIiB9KTtcblxuICAgICAgICB0aGlzLm1vdmVJbmZvcy5mb3JFYWNoKGluZm8gPT4ge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogaW5mby50YXJnZXREaXIgKyBcIi9cIiArIGluZm8uc291cmNlRmlsZS5uYW1lIH0pO1xuICAgICAgICB9KVxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICBidG4uc2V0QnV0dG9uVGV4dChcIkNvbmZpcm1cIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMubW92ZUluZm9zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZm8gPSB0aGlzLm1vdmVJbmZvc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShpbmZvLnRhcmdldERpciArIFwiL1wiICsgaW5mby5zb3VyY2VGaWxlLm5hbWUsIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkNyZWF0ZSBTdWNjZXNzIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2FuY2VsXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYXRlIENhbmNlbGVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cbn0iLCAiaW1wb3J0IEZpbGVDb29rZXJQbHVnaW4gZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlLCBURmlsZSwgVEZvbGRlciwgVmF1bHQgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCJzcmMvYWN0aW9uL2FjdGlvblwiO1xuaW1wb3J0IGhhc01hcmtkb3duU3VmZml4IGZyb20gXCJzcmMvdXRpbHMvZmlsZS10eXBlLXV0aWxcIjtcbmltcG9ydCB7IFJlYWRJbmZvIH0gZnJvbSBcIi4vcmVhZC1pbmZvXCI7XG5pbXBvcnQgeyBSZWFkYWJsZSB9IGZyb20gXCIuL3JlYWRhYmxlXCI7XG5cbmV4cG9ydCBlbnVtIFJlYWRUeXBlIHtcbiAgICBMSU5LUywgVU5fUkVTT0xWRURfTElOS1MsIENPTlRFTlQsIFNFTEVDVElPTlxufVxuXG5leHBvcnQgY2xhc3MgQ3VycmVudEZpbGVSZWFkZXIgaW1wbGVtZW50cyBSZWFkYWJsZSB7XG5cbiAgICBwbHVnaW46IEZpbGVDb29rZXJQbHVnaW47XG4gICAgYXBwOiBBcHA7XG4gICAgcmVhZFR5cGU6IFJlYWRUeXBlID0gUmVhZFR5cGUuTElOS1M7XG4gICAgc2VsZWN0aW9uOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IEZpbGVDb29rZXJQbHVnaW4sIHJlYWRUeXBlPzogUmVhZFR5cGUsIHNlbGVjdGlvbj86IHN0cmluZykge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5hcHAgPSBwbHVnaW4uYXBwO1xuICAgICAgICB0aGlzLnJlYWRUeXBlID0gcmVhZFR5cGU7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uID0gc2VsZWN0aW9uO1xuICAgIH1cblxuICAgIHJlYWQoYWN0aW9uOiBBY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgbGV0IHJlYWRJbmZvID0gbmV3IFJlYWRJbmZvKHRoaXMucGx1Z2luLnNldHRpbmdzLmxpbWl0KTtcblxuICAgICAgICBsZXQgY3VycmVudEZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXG4gICAgICAgIGlmIChjdXJyZW50RmlsZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gYWN0aXZlIGZpbGUhXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGN1cnJlbnRGaWxlUGF0aCA9IGN1cnJlbnRGaWxlLnBhdGg7XG5cbiAgICAgICAgbGV0IHBhdGhzID0gW107XG4gICAgICAgIGlmICh0aGlzLnJlYWRUeXBlID09IFJlYWRUeXBlLkNPTlRFTlQpIHtcbiAgICAgICAgICAgIHBhdGhzLnB1c2goY3VycmVudEZpbGVQYXRoKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlYWRUeXBlID09IFJlYWRUeXBlLlVOX1JFU09MVkVEX0xJTktTKSB7XG4gICAgICAgICAgICBsZXQgbGlua09iaiA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUudW5yZXNvbHZlZExpbmtzW2N1cnJlbnRGaWxlUGF0aF07XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gbGlua09iaikge1xuICAgICAgICAgICAgICAgIHBhdGhzLnB1c2goa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBsaW5rT2JqID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5yZXNvbHZlZExpbmtzW2N1cnJlbnRGaWxlUGF0aF07XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gbGlua09iaikge1xuICAgICAgICAgICAgICAgIHBhdGhzLnB1c2goa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkVHlwZSA9PSBSZWFkVHlwZS5VTl9SRVNPTFZFRF9MSU5LUykge1xuICAgICAgICAgICAgICAgIC8vIFx1NjcyQVx1ODlFM1x1Njc5MFx1NzY4NFx1OTRGRVx1NjNBNVx1RkYwQ1x1NTIxQlx1NUVGQVx1ODY1QVx1NjJERlx1NjU4N1x1NEVGNlx1NUJGOVx1OEM2MVxuICAgICAgICAgICAgICAgIHBhdGhzLmZvckVhY2gocGF0aCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmZiA9IG5ldyBWaXJ0dWFsRmlsZShwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVhZEluZm8uYWRkRmlsZShmZik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZWFkVHlwZSA9PSBSZWFkVHlwZS5TRUxFQ1RJT04pIHtcbiAgICAgICAgICAgICAgICAvLyBcdTU0MENcdTZCNjVcdTUxODVcdTVCQjlcbiAgICAgICAgICAgICAgICByZWFkSW5mby5hZGRDb250ZW50KHRoaXMuc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGF0aHMuZm9yRWFjaChwYXRoID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZmID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmYgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZEluZm8uYWRkRmlsZShmZik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWN0aW9uLmFjdChyZWFkSW5mby5nZXRNb2RlbHMoKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoZS5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTVCOUVcdTk2NDVcdTY1ODdcdTRFRjZcdUZGMENcdTVDMzFcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTg2NUFcdTY1ODdcdTRFRjZcbiAqIFx1N0VEM1x1Njc4NFx1NTQ4Q1RBYnN0cmFjdEZpbGVcdTRFMDBcdTgxRjRcdUZGMENcdTY1QjlcdTRGQkZcdTdFREZcdTRFMDBcdTY0Q0RcdTRGNUNcbiAqL1xuY2xhc3MgVmlydHVhbEZpbGUge1xuXG4gICAgdmF1bHQ6IFZhdWx0O1xuICAgIHBhdGg6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgcGFyZW50OiBURm9sZGVyO1xuXG4gICAgY29uc3RydWN0b3IocGF0aDogc3RyaW5nKSB7XG4gICAgICAgIGxldCBpZHggPSBwYXRoLmxhc3RJbmRleE9mKFwiL1wiKTtcbiAgICAgICAgaWYgKCFoYXNNYXJrZG93blN1ZmZpeChwYXRoKSkge1xuICAgICAgICAgICAgcGF0aCA9IHBhdGggKyBcIi5tZFwiO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gcGF0aC5zdWJzdHJpbmcoaWR4LCBwYXRoLmxlbmd0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBwYXRoO1xuICAgICAgICB9XG4gICAgfVxufSIsICJpbXBvcnQgRmlsZUNvb2tlclBsdWdpbiBmcm9tICdtYWluJztcbmltcG9ydCB7IEVkaXRvciwgTWFya2Rvd25WaWV3IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9hY3Rpb24nO1xuaW1wb3J0IHsgQ3JlYXRlQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9jcmVhdGUtYWN0aW9uJztcbmltcG9ydCB7IERlbGV0ZUFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vZGVsZXRlLWFjdGlvbic7XG5pbXBvcnQgeyBFZGl0UHJvcGVydGllc0FjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vZWRpdC1wcm9wZXJ0aWVzLWFjdGlvbic7XG5pbXBvcnQgeyBNb3ZlQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9tb3ZlLWFjdGlvbic7XG5pbXBvcnQgeyBSZW5hbWVBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL3JlbmFtZS1hY3Rpb24nO1xuaW1wb3J0IHsgU3luY0Zsb21vQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9zeW5jLWZsb21vLWFjdGlvbic7XG5pbXBvcnQgeyBDaG9vc2VDYW52YXNNb2RhbCB9IGZyb20gJ3NyYy9tb2RhbC9jaG9vc2UtY2FudmFzLW1vZGFsJztcbmltcG9ydCB7IENob29zZUZpbGVNb2RhbCB9IGZyb20gJ3NyYy9tb2RhbC9jaG9vc2UtZmlsZS1tb2RhbCc7XG5pbXBvcnQgeyBDaG9vc2VGb2xkZXJNb2RhbCB9IGZyb20gJ3NyYy9tb2RhbC9jaG9vc2UtZm9sZGVyLW1vZGFsJztcbmltcG9ydCB7IEN1cnJlbnRGaWxlUmVhZGVyLCBSZWFkVHlwZSB9IGZyb20gJ3NyYy9yZWFkZXIvY3VycmVudC1maWxlLXJlYWRlcic7XG5pbXBvcnQgeyBDb21tYW5kIH0gZnJvbSAnLi9jb21tYW5kJztcbmltcG9ydCB7IEFkZFRvQ2FudmFzQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9hZGQtdG8tY2FudmFzLWFjdGlvbic7XG5cbmV4cG9ydCBjbGFzcyBDdXJyZW50RmlsZUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcblxuICAgIHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICByZWdpc3QoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVnaXN0TW92ZUZpbGUoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RTeW5jQ29udGVudFRvRmxvbW8oKTtcbiAgICAgICAgdGhpcy5yZWdpc3RTeW5jU2VsZWN0aW9uVG9GbG9tbygpO1xuICAgICAgICB0aGlzLnJlZ2lzdFN5bmNGaWxlVG9GbG9tbygpO1xuICAgICAgICB0aGlzLnJlZ2lzdENyZWF0ZUZpbGUoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RNZXJnZUZpbGUoKTtcbiAgICAgICAgdGhpcy5yZWdpc3REZWxldGVGaWxlKCk7XG4gICAgICAgIHRoaXMucmVnaXN0RWRpdFByb3AoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RSZW5hbWVGaWxlKCk7XG4gICAgICAgIC8vIENhbnZhc1xuICAgICAgICB0aGlzLnJlZ2lzdEFkZEZpbGUyQ2FudmFzKCk7XG4gICAgICAgIHRoaXMucmVnaXN0QWRkU2VsZWN0aW9uVG9DYW52YXMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdFJlbmFtZUZpbGUoKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwicmVuYW1lLWluLWN1cnJlbnQtZmlsZS1saW5rc1wiLFxuICAgICAgICAgICAgbmFtZTogXCJSZW5hbWUgaW4gY3VycmVudCBmaWxlIGxpbmtzIC4uLlwiLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgQ3VycmVudEZpbGVSZWFkZXIodGhpcy5wbHVnaW4pLnJlYWQobmV3IFJlbmFtZUFjdGlvbih0aGlzLnBsdWdpbi5hcHApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRWRpdCBQcm9wZXJ0aWVzXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2xpanl6ZS9vYnNpZGlhbi1zdGF0ZS1zd2l0Y2hlci9ibG9iL2QwYTgwMDgxYjBmY2MxYjg5OWVlZDJlM2Q3ZTgzNGMyZDU3MDM4NzUvc3JjL3V0aWwudHMjTDQyXG4gICAgICovXG4gICAgcHJpdmF0ZSByZWdpc3RFZGl0UHJvcCgpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJlZGl0LWZyb250LW1hdHRlci1pbi1jdXJyZW50LWZpbGUtbGlua3NcIixcbiAgICAgICAgICAgIG5hbWU6IFwiRWRpdCBQcm9wZXJ0aWVzIGluIGN1cnJlbnQgZmlsZSBsaW5rcyAuLi5cIixcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IEN1cnJlbnRGaWxlUmVhZGVyKHRoaXMucGx1Z2luKS5yZWFkKG5ldyBFZGl0UHJvcGVydGllc0FjdGlvbih0aGlzLnBsdWdpbi5hcHApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3REZWxldGVGaWxlKCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcImRlbGV0ZS1saW5rcy1pbi1jdXJyZW50LWZpbGVcIixcbiAgICAgICAgICAgIG5hbWU6IFwiRGVsZXRlIGxpbmstZmlsZXMgaW4gY3VycmVudCBmaWxlIVwiLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgQ3VycmVudEZpbGVSZWFkZXIodGhpcy5wbHVnaW4pLnJlYWQobmV3IERlbGV0ZUFjdGlvbih0aGlzLnBsdWdpbi5hcHApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RNZXJnZUZpbGUoKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwibWVyZ2UtbGlua3MtdG9cIixcbiAgICAgICAgICAgIG5hbWU6IFwiTWVyZ2UgbGlua3MgaW4gY3VycmVudCBmaWxlIHRvIC4uLlwiLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgQ2hvb3NlRmlsZU1vZGFsKHRoaXMucGx1Z2luLmFwcCwgbmV3IEN1cnJlbnRGaWxlUmVhZGVyKHRoaXMucGx1Z2luKSkub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdENyZWF0ZUZpbGUoKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwiY3JlYXRlLWxpbmtzXCIsXG4gICAgICAgICAgICBuYW1lOiBcIkNyZWF0ZSBsaW5rcyBpbiBjdXJyZW50IGZpbGUgLi4uXCIsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBhY3Rpb25GdW5jID0gKHBhdGg6IHN0cmluZyk6IEFjdGlvbiA9PiB7IHJldHVybiBuZXcgQ3JlYXRlQWN0aW9uKHRoaXMucGx1Z2luLmFwcCwgcGF0aCk7IH07XG4gICAgICAgICAgICAgICAgbmV3IENob29zZUZvbGRlck1vZGFsKHRoaXMucGx1Z2luLmFwcCwgbmV3IEN1cnJlbnRGaWxlUmVhZGVyKHRoaXMucGx1Z2luLCBSZWFkVHlwZS5VTl9SRVNPTFZFRF9MSU5LUyksIGFjdGlvbkZ1bmMpLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RTeW5jRmlsZVRvRmxvbW8oKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwic3luYy1saW5rcy10b1wiLFxuICAgICAgICAgICAgbmFtZTogXCJTeW5jIGxpbmtzIGluIGN1cnJlbnQgZmlsZSB0byBmbG9tbyAuLi5cIixcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IEN1cnJlbnRGaWxlUmVhZGVyKHRoaXMucGx1Z2luKS5yZWFkKG5ldyBTeW5jRmxvbW9BY3Rpb24odGhpcy5wbHVnaW4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RTeW5jQ29udGVudFRvRmxvbW8oKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwic3luYy1jb250ZW50LXRvXCIsXG4gICAgICAgICAgICBuYW1lOiBcIlN5bmMgY29udGVudCBpbiBjdXJyZW50IGZpbGUgdG8gZmxvbW8gLi4uXCIsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBDdXJyZW50RmlsZVJlYWRlcih0aGlzLnBsdWdpbiwgUmVhZFR5cGUuQ09OVEVOVCkucmVhZChuZXcgU3luY0Zsb21vQWN0aW9uKHRoaXMucGx1Z2luKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0U3luY1NlbGVjdGlvblRvRmxvbW8oKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwic3luYy1zZWxlY3Rpb24tdG9cIixcbiAgICAgICAgICAgIG5hbWU6IFwiU3luYyBzZWxlY3Rpb24gaW4gY3VycmVudCBmaWxlIHRvIGZsb21vIC4uLlwiLFxuICAgICAgICAgICAgZWRpdG9yQ2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGVja2luZykge1xuICAgICAgICAgICAgICAgICAgICBuZXcgQ3VycmVudEZpbGVSZWFkZXIodGhpcy5wbHVnaW4sIFJlYWRUeXBlLlNFTEVDVElPTiwgZWRpdG9yLmdldFNlbGVjdGlvbigpKS5yZWFkKG5ldyBTeW5jRmxvbW9BY3Rpb24odGhpcy5wbHVnaW4pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVkaXRvci5nZXRTZWxlY3Rpb24oKSAhPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdEFkZFNlbGVjdGlvblRvQ2FudmFzKCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcIkFkZC1zZWxlY3Rpb24tdG9cIixcbiAgICAgICAgICAgIG5hbWU6IFwiQWRkIHNlbGVjdGlvbiBpbiBjdXJyZW50IGZpbGUgdG8gY2FudmFzIC4uLlwiLFxuICAgICAgICAgICAgZWRpdG9yQ2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGVja2luZykge1xuICAgICAgICAgICAgICAgICAgICBuZXcgQ2hvb3NlQ2FudmFzTW9kYWwodGhpcy5wbHVnaW4uYXBwLCBuZXcgQ3VycmVudEZpbGVSZWFkZXIodGhpcy5wbHVnaW4sIFJlYWRUeXBlLlNFTEVDVElPTiwgZWRpdG9yLmdldFNlbGVjdGlvbigpKSkub3BlbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZWRpdG9yLmdldFNlbGVjdGlvbigpICE9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0TW92ZUZpbGUoKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwibW92ZS1saW5rcy10b1wiLFxuICAgICAgICAgICAgbmFtZTogXCJNb3ZlIGxpbmtzIGluIGN1cnJlbnQgZmlsZSB0byAuLi5cIixcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGFjdGlvbkZ1bmMgPSAocGF0aDogc3RyaW5nKTogQWN0aW9uID0+IHsgcmV0dXJuIG5ldyBNb3ZlQWN0aW9uKHRoaXMucGx1Z2luLmFwcCwgcGF0aCk7IH07XG4gICAgICAgICAgICAgICAgbmV3IENob29zZUZvbGRlck1vZGFsKHRoaXMucGx1Z2luLmFwcCwgbmV3IEN1cnJlbnRGaWxlUmVhZGVyKHRoaXMucGx1Z2luKSwgYWN0aW9uRnVuYykub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdEFkZEZpbGUyQ2FudmFzKCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcImFkZC1saW5rcy10by1jYW52YXNcIixcbiAgICAgICAgICAgIG5hbWU6IFwiQWRkIGxpbmtzIGluIGN1cnJlbnQgZmlsZSB0byB0YXJnZXQgY2FudmFzIC4uLlwiLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgQ2hvb3NlQ2FudmFzTW9kYWwodGhpcy5wbHVnaW4uYXBwLCBuZXcgQ3VycmVudEZpbGVSZWFkZXIodGhpcy5wbHVnaW4pKS5vcGVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxufSIsICJpbXBvcnQgRmlsZUNvb2tlclBsdWdpbiBmcm9tICdtYWluJztcbmltcG9ydCB7IEVkaXRvciwgTWFya2Rvd25WaWV3IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgRGF0YXZpZXdBcGksIGdldEFQSSB9IGZyb20gJ29ic2lkaWFuLWRhdGF2aWV3JztcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vYWN0aW9uJztcbmltcG9ydCB7IENvcHlBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL2NvcHktYWN0aW9uJztcbmltcG9ydCB7IERlbGV0ZUFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vZGVsZXRlLWFjdGlvbic7XG5pbXBvcnQgeyBFZGl0UHJvcGVydGllc0FjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vZWRpdC1wcm9wZXJ0aWVzLWFjdGlvbic7XG5pbXBvcnQgeyBNb3ZlQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9tb3ZlLWFjdGlvbic7XG5pbXBvcnQgeyBSZW5hbWVBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL3JlbmFtZS1hY3Rpb24nO1xuaW1wb3J0IHsgU3luY0Zsb21vQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9zeW5jLWZsb21vLWFjdGlvbic7XG5pbXBvcnQgeyBDaG9vc2VDYW52YXNNb2RhbCB9IGZyb20gJ3NyYy9tb2RhbC9jaG9vc2UtY2FudmFzLW1vZGFsJztcbmltcG9ydCB7IENob29zZUZpbGVNb2RhbCB9IGZyb20gJ3NyYy9tb2RhbC9jaG9vc2UtZmlsZS1tb2RhbCc7XG5pbXBvcnQgeyBDaG9vc2VGb2xkZXJNb2RhbCB9IGZyb20gJ3NyYy9tb2RhbC9jaG9vc2UtZm9sZGVyLW1vZGFsJztcbmltcG9ydCB7IERhdGF2aWV3UmVhZGVyIH0gZnJvbSAnc3JjL3JlYWRlci9kYXRhdmlldy1yZWFkZXInO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gJy4vY29tbWFuZCc7XG5cbmV4cG9ydCBjbGFzcyBEYXRhdmlld0NvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcblxuICAgIHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICByZWdpc3QoKTogdm9pZCB7XG4gICAgICAgIGxldCBkYXRhdmlld0FwaSA9IGdldEFQSSgpO1xuXG4gICAgICAgIHRoaXMucmVnaXN0TW92ZUZpbGUoZGF0YXZpZXdBcGkpO1xuICAgICAgICB0aGlzLnJlZ2lzdFN5bmNGbG9tbyhkYXRhdmlld0FwaSk7XG4gICAgICAgIHRoaXMucmVnaXN0TWVyZ2VGaWxlKGRhdGF2aWV3QXBpKTtcbiAgICAgICAgdGhpcy5yZWdpc3REZWxldGVGaWxlKGRhdGF2aWV3QXBpKTtcbiAgICAgICAgdGhpcy5yZWdpc3RDb3B5TGlua3MoZGF0YXZpZXdBcGkpO1xuICAgICAgICB0aGlzLnJlZ2lzdEVkaXRQcm9wKGRhdGF2aWV3QXBpKTtcblxuICAgICAgICAvLyBSZW5hbWUgRmlsZXNcbiAgICAgICAgdGhpcy5yZWdpc3RSZW5hbWVGaWxlKGRhdGF2aWV3QXBpKTtcbiAgICAgICAgLy8gQ2FudmFzXG4gICAgICAgIHRoaXMucmVnaXN0QWRkRmlsZTJDYW52YXMoZGF0YXZpZXdBcGkpO1xuICAgICAgICB0aGlzLnJlZ2lzdEFkZFRhc2syQ2FudmFzKGRhdGF2aWV3QXBpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdFJlbmFtZUZpbGUoZGF0YXZpZXdBcGk6IERhdGF2aWV3QXBpKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwicmVuYW1lLWluLWRhdGF2aWV3LXJlc3VsdHNcIixcbiAgICAgICAgICAgIG5hbWU6IFwiUmVuYW1lIGluIGRhdGF2aWV3IHJlc3VsdHMgLi4uXCIsXG4gICAgICAgICAgICBlZGl0b3JDaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4sIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRhdmlld1JlYWRlcih0aGlzLnBsdWdpbiwgZWRpdG9yLmdldFNlbGVjdGlvbigpKS5yZWFkKG5ldyBSZW5hbWVBY3Rpb24odGhpcy5wbHVnaW4uYXBwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhdmlld0FwaSAhPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFZGl0IFByb3BlcnRpZXMgXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2xpanl6ZS9vYnNpZGlhbi1zdGF0ZS1zd2l0Y2hlci9ibG9iL2QwYTgwMDgxYjBmY2MxYjg5OWVlZDJlM2Q3ZTgzNGMyZDU3MDM4NzUvc3JjL3V0aWwudHMjTDQyXG4gICAgICogQHBhcmFtIGRhdGF2aWV3QXBpICAgICAgICBcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlZ2lzdEVkaXRQcm9wKGRhdGF2aWV3QXBpOiBEYXRhdmlld0FwaSkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcImVkaXQtZnJvbnQtbWF0dGVyLWluLWRhdGF2aWV3LXJlc3VsdHNcIixcbiAgICAgICAgICAgIG5hbWU6IFwiRWRpdCBQcm9wZXJ0aWVzIGluIGRhdGF2aWV3IHJlc3VsdHMgLi4uXCIsXG4gICAgICAgICAgICBlZGl0b3JDaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4sIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRhdmlld1JlYWRlcih0aGlzLnBsdWdpbiwgZWRpdG9yLmdldFNlbGVjdGlvbigpKS5yZWFkKG5ldyBFZGl0UHJvcGVydGllc0FjdGlvbih0aGlzLnBsdWdpbi5hcHApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGF2aWV3QXBpICE9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0Q29weUxpbmtzKGRhdGF2aWV3QXBpOiBEYXRhdmlld0FwaSkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnY29weS1kYXRhdmlldy1yZXN1bHQtbGlua3MnLFxuICAgICAgICAgICAgbmFtZTogJ0NvcHkgZGF0YXZpZXcgcmVzdWx0IGxpbmtzIScsXG4gICAgICAgICAgICBlZGl0b3JDaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4sIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRhdmlld1JlYWRlcih0aGlzLnBsdWdpbiwgZWRpdG9yLmdldFNlbGVjdGlvbigpKS5yZWFkKG5ldyBDb3B5QWN0aW9uKHRoaXMucGx1Z2luLmFwcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YXZpZXdBcGkgIT0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3REZWxldGVGaWxlKGRhdGF2aWV3QXBpOiBEYXRhdmlld0FwaSkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnZGVsZXRlLWRhdGF2aWV3LXJlc3VsdHMnLFxuICAgICAgICAgICAgbmFtZTogJ0RlbGV0ZSBkYXRhdmlldyBxdWVyeSByZXN1bHRzIScsXG4gICAgICAgICAgICBlZGl0b3JDaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4sIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRhdmlld1JlYWRlcih0aGlzLnBsdWdpbiwgZWRpdG9yLmdldFNlbGVjdGlvbigpKS5yZWFkKG5ldyBEZWxldGVBY3Rpb24odGhpcy5wbHVnaW4uYXBwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhdmlld0FwaSAhPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdE1lcmdlRmlsZShkYXRhdmlld0FwaTogRGF0YXZpZXdBcGkpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ21lcmdlLWRhdGF2aWV3LXJlc3VsdHMtdG8nLFxuICAgICAgICAgICAgbmFtZTogJ01lcmdlIGRhdGF2aWV3IHF1ZXJ5IHJlc3VsdHMgdG8gLi4uJyxcbiAgICAgICAgICAgIGVkaXRvckNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbiwgZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IENob29zZUZpbGVNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIG5ldyBEYXRhdmlld1JlYWRlcih0aGlzLnBsdWdpbiwgZWRpdG9yLmdldFNlbGVjdGlvbigpKSkub3BlbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YXZpZXdBcGkgIT0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RTeW5jRmxvbW8oZGF0YXZpZXdBcGk6IERhdGF2aWV3QXBpKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdzeW5jLWRhdGF2aWV3LXJlc3VsdHMtdG8nLFxuICAgICAgICAgICAgbmFtZTogJ1N5bmMgZGF0YXZpZXcgcXVlcnkgcmVzdWx0cyB0byBmbG9tbyAuLi4nLFxuICAgICAgICAgICAgZWRpdG9yQ2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGVja2luZykge1xuICAgICAgICAgICAgICAgICAgICBuZXcgRGF0YXZpZXdSZWFkZXIodGhpcy5wbHVnaW4sIGVkaXRvci5nZXRTZWxlY3Rpb24oKSkucmVhZChuZXcgU3luY0Zsb21vQWN0aW9uKHRoaXMucGx1Z2luKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhdmlld0FwaSAhPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdE1vdmVGaWxlKGRhdGF2aWV3QXBpOiBEYXRhdmlld0FwaSkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnbW92ZS1kYXRhdmlldy1yZXN1bHRzLXRvJyxcbiAgICAgICAgICAgIG5hbWU6ICdNb3ZlIGRhdGF2aWV3IHF1ZXJ5IHJlc3VsdHMgdG8gLi4uJyxcbiAgICAgICAgICAgIGVkaXRvckNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbiwgZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGlvbkZ1bmMgPSAocGF0aDogc3RyaW5nKTogQWN0aW9uID0+IHsgcmV0dXJuIG5ldyBNb3ZlQWN0aW9uKHRoaXMucGx1Z2luLmFwcCwgcGF0aCk7IH07XG4gICAgICAgICAgICAgICAgICAgIG5ldyBDaG9vc2VGb2xkZXJNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIG5ldyBEYXRhdmlld1JlYWRlcih0aGlzLnBsdWdpbiwgZWRpdG9yLmdldFNlbGVjdGlvbigpKSwgYWN0aW9uRnVuYykub3BlbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YXZpZXdBcGkgIT0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RBZGRGaWxlMkNhbnZhcyhkYXRhdmlld0FwaTogRGF0YXZpZXdBcGkpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2FkZC1kYXRhdmlldy1yZXN1bHRzLXRvLWNhbnZhcycsXG4gICAgICAgICAgICBuYW1lOiAnQWRkIGRhdGF2aWV3IHF1ZXJ5IHJlc3VsdHMgdG8gY2FudmFzLi4uJyxcbiAgICAgICAgICAgIGVkaXRvckNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbiwgZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IENob29zZUNhbnZhc01vZGFsKHRoaXMucGx1Z2luLmFwcCwgbmV3IERhdGF2aWV3UmVhZGVyKHRoaXMucGx1Z2luLCBlZGl0b3IuZ2V0U2VsZWN0aW9uKCkpKS5vcGVuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhdmlld0FwaSAhPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdEFkZFRhc2syQ2FudmFzKGRhdGF2aWV3QXBpOiBEYXRhdmlld0FwaSkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnYWRkLWRhdGF2aWV3LXRhc2stdG8tY2FudmFzJyxcbiAgICAgICAgICAgIG5hbWU6ICdBZGQgZGF0YXZpZXcgdGFzayB0byBjYW52YXMuLi4nLFxuICAgICAgICAgICAgZWRpdG9yQ2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGVja2luZykge1xuICAgICAgICAgICAgICAgICAgICBuZXcgQ2hvb3NlQ2FudmFzTW9kYWwodGhpcy5wbHVnaW4uYXBwLCBuZXcgRGF0YXZpZXdSZWFkZXIodGhpcy5wbHVnaW4sIGVkaXRvci5nZXRTZWxlY3Rpb24oKSwgdHJ1ZSkpLm9wZW4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGF2aWV3QXBpICE9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRBYnN0cmFjdEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IENvcHlUb0NsaXBib2FyZENvbmZpcm1Nb2RhbCB9IGZyb20gXCJzcmMvbW9kYWwvY29weS10by1jbGlwYm9hcmQtY29uZmlybS1tb2RhbFwiO1xuaW1wb3J0IHsgQWN0aW9uLCBBY3Rpb25Nb2RlbCB9IGZyb20gXCIuL2FjdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgQ29weUFjdGlvbiBpbXBsZW1lbnRzIEFjdGlvbiB7XG5cbiAgICBhcHA6IEFwcDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIH1cblxuICAgIGFjdChhY3Rpb25Nb2RlbHM6IEFjdGlvbk1vZGVsW10pIHtcblxuICAgICAgICBpZiAoYWN0aW9uTW9kZWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGxldCBmaWxlcyA9IGFjdGlvbk1vZGVscy5tYXAobW9kZWwgPT4gbW9kZWwuZmlsZSk7XG4gICAgICAgICAgICBuZXcgQ29weVRvQ2xpcGJvYXJkQ29uZmlybU1vZGFsKHRoaXMuYXBwLCBmaWxlcykub3BlbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIEZpbGVzIEZvdW5kIVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxufSIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UsIFNldHRpbmcsIFRBYnN0cmFjdEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgaGFzTWFya2Rvd25TdWZmaXggZnJvbSAnc3JjL3V0aWxzL2ZpbGUtdHlwZS11dGlsJztcbmltcG9ydCB7IGdldExpbmVicmVhayB9IGZyb20gJ3NyYy91dGlscy9saW5lLWJyZWFrLXV0aWwnO1xuXG4vKipcbiAqIFx1MDBBMFx1NUYzOVx1N0E5N1x1Nzg2RVx1OEJBNFx1NjJGN1x1OEQxRFx1NTIzMFx1NTI2QVx1OEQzNFx1Njc3Rlx1NzY4NFx1NjU4N1x1NEVGNlxuICovXG5leHBvcnQgY2xhc3MgQ29weVRvQ2xpcGJvYXJkQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdO1xuICAgIG5hbWVPbmx5RmxhZzogYm9vbGVhbjtcbiAgICBsaW5lQnJlYWs6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCByZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnJlc3VsdEFyciA9IHJlc3VsdEFycjtcbiAgICAgICAgdGhpcy5saW5lQnJlYWsgPSBnZXRMaW5lYnJlYWsoKTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJDb25maXJtIGNvcHkgdG8gY2xpcGJvYXJkP1wiIH0pO1xuXG4gICAgICAgIGxldCBodG1sU3RyID0gdGhpcy5wcmVwYXJlSFRNTFN0cigpO1xuICAgICAgICBsZXQgZWwgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIik7XG4gICAgICAgIGVsLmlubmVySFRNTCA9IGh0bWxTdHI7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLnNldFRvb2x0aXAoXCJDb3B5IG5hbWUgb25seSFcIik7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKCh2YWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lT25seUZsYWcgPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgIGh0bWxTdHIgPSB0aGlzLnByZXBhcmVIVE1MU3RyKCk7XG4gICAgICAgICAgICAgICAgICAgIGVsLmlubmVySFRNTCA9IGh0bWxTdHI7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgIGJ0bi5zZXRCdXR0b25UZXh0KFwiQ29uZmlybVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IHRoaXMucHJlcGFyZVN0cigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoc3RyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDb3B5IGxpbmtzIHN1Y2Nlc3MhXCIpXG4gICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNhbmNlbFwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkNvcHkgdG8gQ2xpcGJvYXJkIENhbmNlbGVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIHByZXBhcmVTdHIoKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHN0ciA9IFwiXCI7XG4gICAgICAgIGlmICh0aGlzLm5hbWVPbmx5RmxhZykge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRBcnIuZm9yRWFjaChmZiA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IG5hbWUgPSBmZi5uYW1lO1xuICAgICAgICAgICAgICAgIGlmIChoYXNNYXJrZG93blN1ZmZpeChuYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHJpbmcoMCwgbmFtZS5sYXN0SW5kZXhPZihcIi5cIikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdHIgKz0gXCJbW1wiICsgbmFtZSArIFwiXV1cIiArIHRoaXMubGluZUJyZWFrO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0QXJyLmZvckVhY2goZmYgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBuYW1lID0gZmYubmFtZTtcbiAgICAgICAgICAgICAgICBpZiAoaGFzTWFya2Rvd25TdWZmaXgobmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyaW5nKDAsIG5hbWUubGFzdEluZGV4T2YoXCIuXCIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RyICs9IFwiW1tcIiArIGZmLnBhdGggKyBcInxcIiArIG5hbWUgKyBcIl1dXCIgKyB0aGlzLmxpbmVCcmVhaztcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG5cbiAgICBwcmVwYXJlSFRNTFN0cigpOiBzdHJpbmcge1xuICAgICAgICBsZXQgc3RyID0gXCJcIjtcbiAgICAgICAgaWYgKHRoaXMubmFtZU9ubHlGbGFnKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdEFyci5mb3JFYWNoKGZmID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IGZmLm5hbWU7XG4gICAgICAgICAgICAgICAgaWYgKGhhc01hcmtkb3duU3VmZml4KG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cmluZygwLCBuYW1lLmxhc3RJbmRleE9mKFwiLlwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0ciArPSBcIltbXCIgKyBuYW1lICsgXCJdXTxicj5cIjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdEFyci5mb3JFYWNoKGZmID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IGZmLm5hbWU7XG4gICAgICAgICAgICAgICAgaWYgKGhhc01hcmtkb3duU3VmZml4KG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cmluZygwLCBuYW1lLmxhc3RJbmRleE9mKFwiLlwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0ciArPSBcIltbXCIgKyBmZi5wYXRoICsgXCJ8XCIgKyBuYW1lICsgXCJdXTxicj5cIjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBBY3Rpb24sIEFjdGlvbk1vZGVsIH0gZnJvbSBcInNyYy9hY3Rpb24vYWN0aW9uXCI7XG5pbXBvcnQgeyBSZWFkYWJsZSB9IGZyb20gXCIuL3JlYWRhYmxlXCI7XG5pbXBvcnQgeyBnZXRBUEkgfSBmcm9tIFwib2JzaWRpYW4tZGF0YXZpZXdcIjtcbmltcG9ydCB7IFJlYWRJbmZvIH0gZnJvbSBcIi4vcmVhZC1pbmZvXCI7XG5pbXBvcnQgRmlsZUNvb2tlclBsdWdpbiBmcm9tIFwibWFpblwiO1xuaW1wb3J0IHsgZ2V0TGluZWJyZWFrIH0gZnJvbSBcInNyYy91dGlscy9saW5lLWJyZWFrLXV0aWxcIjtcblxuZXhwb3J0IGNsYXNzIERhdGF2aWV3UmVhZGVyIGltcGxlbWVudHMgUmVhZGFibGUge1xuXG4gICAgcGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luO1xuICAgIGFwcDogQXBwO1xuICAgIHF1ZXJ5U3RyOiBzdHJpbmc7XG5cbiAgICAvLyBcdTY2MkZcdTU0MjZcdThCRkJcdTUzRDZ0YXNrXHU1MTg1XHU1QkI5XG4gICAgdGFza0ZsYWc6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IEZpbGVDb29rZXJQbHVnaW4sIHF1ZXJ5U3RyOiBzdHJpbmcsIHRhc2tGbGFnPzogYm9vbGVhbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5hcHAgPSBwbHVnaW4uYXBwO1xuICAgICAgICB0aGlzLnF1ZXJ5U3RyID0gcXVlcnlTdHI7XG4gICAgICAgIHRoaXMudGFza0ZsYWcgPSB0YXNrRmxhZztcbiAgICB9XG5cbiAgICByZWFkKGFjdGlvbjogQWN0aW9uKTogdm9pZCB7XG4gICAgICAgIGxldCByZWFkSW5mbyA9IG5ldyBSZWFkSW5mbyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5saW1pdCk7XG5cbiAgICAgICAgbGV0IGFwaSA9IGdldEFQSSgpO1xuXG4gICAgICAgIGxldCBxU3RyID0gZm9ybWF0U3RyKHRoaXMucXVlcnlTdHIpO1xuXG4gICAgICAgIGxldCBpZHggPSB0aGlzLnF1ZXJ5U3RyLmluZGV4T2YoXCIucGFnZXMoXCIpO1xuICAgICAgICBpZiAoaWR4ID4gMCkge1xuICAgICAgICAgICAgLy8gRGF0YXZpZXdKU1xuICAgICAgICAgICAgbGV0IHRtcFN0ciA9IHRoaXMucXVlcnlTdHIuc3Vic3RyaW5nKGlkeCArIDcpO1xuICAgICAgICAgICAgbGV0IHRtcElkeCA9IHRtcFN0ci5pbmRleE9mKFwiKVwiKTtcbiAgICAgICAgICAgIHRtcFN0ciA9IHRtcFN0ci5zdWJzdHJpbmcoMCwgdG1wSWR4KTtcbiAgICAgICAgICAgIGlmICh0bXBTdHIuaW5kZXhPZihcIidcIikgPj0gMCB8fCB0bXBTdHIuaW5kZXhPZihcIlxcXCJcIikgPj0gMCkge1xuICAgICAgICAgICAgICAgIC8vIHBhZ2VzKClcdTY1QjlcdTZDRDVcdTRFMkRcdTc2ODRcdTUzQzJcdTY1NzBcdTY2MkZcdTVCNTdcdTdCMjZcdTRFMzJcdUZGMENcdTc2RjRcdTYzQTVcdTU5MDRcdTc0MDYgICAgXG4gICAgICAgICAgICAgICAgdG1wU3RyID0gdG1wU3RyLnN1YnN0cmluZygxLCB0bXBTdHIubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHBhZ2VzKClcdTY1QjlcdTZDRDVcdTRFMkRcdTc2ODRcdTUzQzJcdTY1NzBcdTY2MkZcdTUzRDhcdTkxQ0ZcdUZGMENcdTY4MzlcdTYzNkVcdTUzRDhcdTkxQ0ZcdTY3RTVcdTYyN0VcdTVCNTdcdTdCMjZcdTRFMzIgIFxuICAgICAgICAgICAgICAgIGxldCBuVG1wU3RyID0gdGhpcy5xdWVyeVN0ci5zdWJzdHJpbmcoMCwgaWR4KTtcbiAgICAgICAgICAgICAgICBpZHggPSBuVG1wU3RyLmluZGV4T2YodG1wU3RyKTtcbiAgICAgICAgICAgICAgICB0bXBTdHIgPSBuVG1wU3RyLnN1YnN0cmluZyhpZHggKyB0bXBTdHIubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBpZHggPSB0bXBTdHIuaW5kZXhPZihcIidcIik7XG4gICAgICAgICAgICAgICAgdG1wU3RyID0gdG1wU3RyLnN1YnN0cmluZyhpZHggKyAxKTtcbiAgICAgICAgICAgICAgICBpZHggPSB0bXBTdHIuaW5kZXhPZihcIidcIik7XG4gICAgICAgICAgICAgICAgdG1wU3RyID0gdG1wU3RyLnN1YnN0cmluZygwLCBpZHgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGxldCByZXNBcnIgPSBhcGkucGFnZXModG1wU3RyKTtcbiAgICAgICAgICAgICAgICByZXNBcnIudmFsdWVzLmZvckVhY2goKGl0OiB7IGZpbGU6IHsgcGF0aDogc3RyaW5nOyB9OyB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmZiA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChpdC5maWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmYgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZEluZm8uYWRkRmlsZShmZik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGFjdGlvbi5hY3QocmVhZEluZm8uZ2V0TW9kZWxzKCkpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoZS5tZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIERRTFxuICAgICAgICAgICAgYXBpLnF1ZXJ5KHFTdHIpLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3NmdWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbGVQYXRoczogYW55ID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXMudmFsdWUudHlwZSA9PSBcImxpc3RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTElTVFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnZhbHVlLnZhbHVlcy5mb3JFYWNoKGl0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aHMucHVzaChpdC5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy52YWx1ZS50eXBlID09IFwidGFibGVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVEFCTEVcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVQYXRocyA9IHJlcy52YWx1ZS52YWx1ZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMudmFsdWUudmFsdWVzLmZvckVhY2goaXQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0LmZvckVhY2goaW5uZXJJdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbm5lckl0ICYmIGlubmVySXQucGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGhzLnB1c2goaW5uZXJJdC5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRBU0tcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy52YWx1ZS52YWx1ZXMuZm9yRWFjaChpdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGhzLnB1c2goaXQubGluay5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50YXNrRmxhZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdHJBcnI6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnZhbHVlLnZhbHVlcy5mb3JFYWNoKGl0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyQXJyLnB1c2goXCItIFsgXSBbW1wiICsgaXQubGluay5wYXRoICsgXCJ8XCIgKyBpdC50ZXh0ICsgXCJdXVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhY3Rpb25Nb2RlbHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbW9kZWwgPSBuZXcgQWN0aW9uTW9kZWwobnVsbCwgc3RyQXJyLmpvaW4oZ2V0TGluZWJyZWFrKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25Nb2RlbHMucHVzaChtb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uLmFjdChhY3Rpb25Nb2RlbHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aHMuZm9yRWFjaCgoZmlsZVBhdGg6IHsgdG9TdHJpbmc6ICgpID0+IHN0cmluZzsgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmYgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkSW5mby5hZGRGaWxlKGZmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uLmFjdChyZWFkSW5mby5nZXRNb2RlbHMoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJRdWVyeSBzdHJpbmcgZXJyb3IhW1wiICsgdGhpcy5xdWVyeVN0ciArIFwiXVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIFx1NTkyN1x1NTE5OVx1NTQ3RFx1NEVFNFxuICovXG5mdW5jdGlvbiBmb3JtYXRTdHIocXVlcnlTdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgbGV0IHN0ciA9IHF1ZXJ5U3RyLnRyaW1TdGFydCgpO1xuXG4gICAgbGV0IGNvbW1hbmRTdHIgPSBzdHIuc3Vic3RyaW5nKDAsIDQpO1xuXG4gICAgaWYgKGNvbW1hbmRTdHIudG9VcHBlckNhc2UoKSA9PSBcIkxJU1RcIikge1xuICAgICAgICByZXR1cm4gXCJMSVNUXCIgKyBzdHIuc3Vic3RyaW5nKDQsIHN0ci5sZW5ndGgpO1xuICAgIH1cblxuICAgIGlmIChjb21tYW5kU3RyLnRvVXBwZXJDYXNlKCkgPT0gXCJUQUJMXCIpIHtcbiAgICAgICAgcmV0dXJuIFwiVEFCTEVcIiArIHN0ci5zdWJzdHJpbmcoNSwgc3RyLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgaWYgKGNvbW1hbmRTdHIudG9VcHBlckNhc2UoKSA9PSBcIlRBU0tcIikge1xuICAgICAgICByZXR1cm4gXCJUQVNLXCIgKyBzdHIuc3Vic3RyaW5nKDQsIHN0ci5sZW5ndGgpO1xuICAgIH1cblxuICAgIHJldHVybiBxdWVyeVN0cjtcbn1cbiIsICJpbXBvcnQgRmlsZUNvb2tlclBsdWdpbiBmcm9tICdtYWluJztcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tICcuL2NvbW1hbmQnO1xuXG5leHBvcnQgY2xhc3MgUHJlc2VudGF0aW9uQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuXG4gICAgcGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIHJlZ2lzdCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZWdpc3RTdGFydFByZXNlbnRhdGlvbigpO1xuICAgICAgICB0aGlzLnJlZ2lzdFN0b3BQcmVzZW50YXRpb24oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdFN0YXJ0UHJlc2VudGF0aW9uKCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnc3RhcnQtcHJlc2VudGF0aW9uJyxcbiAgICAgICAgICAgIG5hbWU6ICdTdGFydCBQcmVzZW50YXRpb24nLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZm9udFRleHRTaXplID0gZG9jdW1lbnQuYm9keS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCctLWZvbnQtdGV4dC1zaXplJyk7XG4gICAgICAgICAgICAgICAgbGV0IGZpbGVMaW5lV2lkdGggPSBkb2N1bWVudC5ib2R5LnN0eWxlLmdldFByb3BlcnR5VmFsdWUoJy0tZmlsZS1saW5lLXdpZHRoJyk7XG4gICAgICAgICAgICAgICAgaWYgKGZvbnRUZXh0U2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnLS1mb250LXRleHQtc2l6ZScsIGZvbnRUZXh0U2l6ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaWxlTGluZVdpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCctLWZpbGUtbGluZS13aWR0aCcsIGZpbGVMaW5lV2lkdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnNldFByb3BlcnR5KCctLWZvbnQtdGV4dC1zaXplJywgJzI2cHgnKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnNldFByb3BlcnR5KCctLWZpbGUtbGluZS13aWR0aCcsICcxMDAwcHgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RTdG9wUHJlc2VudGF0aW9uKCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnc3RvcC1wcmVzZW50YXRpb24nLFxuICAgICAgICAgICAgbmFtZTogJ1N0b3AgUHJlc2VudGF0aW9uJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGZvbnRUZXh0U2l6ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCctLWZvbnQtdGV4dC1zaXplJyk7XG4gICAgICAgICAgICAgICAgbGV0IGZpbGVMaW5lV2lkdGggPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnLS1maWxlLWxpbmUtd2lkdGgnKTtcbiAgICAgICAgICAgICAgICBpZiAoZm9udFRleHRTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuc2V0UHJvcGVydHkoJy0tZm9udC10ZXh0LXNpemUnLCBmb250VGV4dFNpemUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuc2V0UHJvcGVydHkoJy0tZm9udC10ZXh0LXNpemUnLCAnMTZweCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmlsZUxpbmVXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnNldFByb3BlcnR5KCctLWZpbGUtbGluZS13aWR0aCcsIGZpbGVMaW5lV2lkdGgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuc2V0UHJvcGVydHkoJy0tZmlsZS1saW5lLXdpZHRoJywgJzcwMHB4Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbn0iLCAiaW1wb3J0IEZpbGVDb29rZXJQbHVnaW4gZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwic3JjL2FjdGlvbi9hY3Rpb25cIjtcbmltcG9ydCBoYXNNYXJrZG93blN1ZmZpeCwgeyBoYXNDYW52YXNTdWZmaXggfSBmcm9tIFwic3JjL3V0aWxzL2ZpbGUtdHlwZS11dGlsXCI7XG5pbXBvcnQgeyBSZWFkSW5mbyB9IGZyb20gXCIuL3JlYWQtaW5mb1wiO1xuaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tIFwiLi9yZWFkYWJsZVwiO1xuXG5cbmV4cG9ydCBjbGFzcyBTZWFyY2hSZXN1bHRzUmVhZGVyIGltcGxlbWVudHMgUmVhZGFibGUge1xuXG4gICAgcGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luO1xuICAgIGFwcDogQXBwO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmFwcCA9IHBsdWdpbi5hcHA7XG4gICAgfVxuXG4gICAgcmVhZChhY3Rpb246IEFjdGlvbik6IHZvaWQge1xuICAgICAgICBsZXQgcmVhZEluZm8gPSBuZXcgUmVhZEluZm8odGhpcy5wbHVnaW4uc2V0dGluZ3MubGltaXQpO1xuXG4gICAgICAgIGxldCByZXN1bHRzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnc2VhcmNoJylbMF0udmlldy5kb20ucmVzdWx0RG9tTG9va3VwO1xuXG4gICAgICAgIGlmIChyZXN1bHRzLnNpemUgPT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkhhcyBubyBzZWFyY2ggcmVzdWx0cyFQbGVhc2Ugc2VhcmNoIGZpcnN0IVwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBhcnIgPSBbLi4ucmVzdWx0cy5rZXlzKCldO1xuICAgICAgICAgICAgYXJyLmZvckVhY2goayA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGZmID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGsucGF0aCk7XG4gICAgICAgICAgICAgICAgaWYgKGZmICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZEluZm8uYWRkRmlsZShmZik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjYW4gbm90IGZpbmQgZmlsZSA6XCIgKyBrLnBhdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYWN0aW9uLmFjdChyZWFkSW5mby5nZXRNb2RlbHMoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCAiaW1wb3J0IEZpbGVDb29rZXJQbHVnaW4gZnJvbSAnbWFpbic7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL2FjdGlvbic7XG5pbXBvcnQgeyBBZGRUb0NhbnZhc0FjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vYWRkLXRvLWNhbnZhcy1hY3Rpb24nO1xuaW1wb3J0IHsgRGVsZXRlQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9kZWxldGUtYWN0aW9uJztcbmltcG9ydCB7IEVkaXRQcm9wZXJ0aWVzQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9lZGl0LXByb3BlcnRpZXMtYWN0aW9uJztcbmltcG9ydCB7IE1vdmVBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL21vdmUtYWN0aW9uJztcbmltcG9ydCB7IFJlbmFtZUFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vcmVuYW1lLWFjdGlvbic7XG5pbXBvcnQgeyBTeW5jRmxvbW9BY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL3N5bmMtZmxvbW8tYWN0aW9uJztcbmltcG9ydCB7IENob29zZUNhbnZhc01vZGFsIH0gZnJvbSAnc3JjL21vZGFsL2Nob29zZS1jYW52YXMtbW9kYWwnO1xuaW1wb3J0IHsgQ2hvb3NlRmlsZU1vZGFsIH0gZnJvbSAnc3JjL21vZGFsL2Nob29zZS1maWxlLW1vZGFsJztcbmltcG9ydCB7IENob29zZUZvbGRlck1vZGFsIH0gZnJvbSAnc3JjL21vZGFsL2Nob29zZS1mb2xkZXItbW9kYWwnO1xuaW1wb3J0IHsgU2VhcmNoUmVzdWx0c1JlYWRlciB9IGZyb20gJ3NyYy9yZWFkZXIvc2VhcmNoLXJlc3VsdHMtcmVhZGVyJztcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tICcuL2NvbW1hbmQnO1xuXG5leHBvcnQgY2xhc3MgU2VhcmNoQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuXG4gICAgcGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIHJlZ2lzdCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZWdpc3RNb3ZlRmlsZSgpO1xuICAgICAgICB0aGlzLnJlZ2lzdFN5bmNGbG9tbygpO1xuICAgICAgICB0aGlzLnJlZ2lzdE1lcmdlRmlsZSgpO1xuICAgICAgICB0aGlzLnJlZ2lzdERlbGV0ZUZpbGUoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RFZGl0UHJvcCgpO1xuICAgICAgICB0aGlzLnJlZ2lzdFJlbmFtZUZpbGUoKTtcbiAgICAgICAgLy8gQ2FudmFzXG4gICAgICAgIHRoaXMucmVnaXN0QWRkRmlsZTJDYW52YXMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdFJlbmFtZUZpbGUoKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdyZW5hbWUtZmlsZXMtaW4tc2VhcmNocmVzdWx0cycsXG4gICAgICAgICAgICBuYW1lOiAnUmVuYW1lIGZpbGVzIGluIHNlYXJjaHJlc3VsdHMgLi4uJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IFNlYXJjaFJlc3VsdHNSZWFkZXIodGhpcy5wbHVnaW4pLnJlYWQobmV3IFJlbmFtZUFjdGlvbih0aGlzLnBsdWdpbi5hcHApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRWRpdCBQcm9wZXJ0aWVzIFxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9saWp5emUvb2JzaWRpYW4tc3RhdGUtc3dpdGNoZXIvYmxvYi9kMGE4MDA4MWIwZmNjMWI4OTllZWQyZTNkN2U4MzRjMmQ1NzAzODc1L3NyYy91dGlsLnRzI0w0MlxuICAgICAqL1xuICAgIHByaXZhdGUgcmVnaXN0RWRpdFByb3AoKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdlZGl0LWZyb250LW1hdHRlci1pbi1zZWFyY2hyZXN1bHRzLWZpbGVzJyxcbiAgICAgICAgICAgIG5hbWU6ICdFZGl0IFByb3BlcnRpZXMgaW4gc2VhcmNocmVzdWx0cyBmaWxlcyAuLi4nLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgU2VhcmNoUmVzdWx0c1JlYWRlcih0aGlzLnBsdWdpbikucmVhZChuZXcgRWRpdFByb3BlcnRpZXNBY3Rpb24odGhpcy5wbHVnaW4uYXBwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0RGVsZXRlRmlsZSgpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2RlbGV0ZS1maWxlcy1pbi1zZWFyY2hyZXN1bHRzJyxcbiAgICAgICAgICAgIG5hbWU6ICdEZWxldGUgZmlsZXMgaW4gc2VhcmNocmVzdWx0cyEnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgU2VhcmNoUmVzdWx0c1JlYWRlcih0aGlzLnBsdWdpbikucmVhZChuZXcgRGVsZXRlQWN0aW9uKHRoaXMucGx1Z2luLmFwcCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdE1lcmdlRmlsZSgpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ21lcmdlLWZpbGVzLWluLXNlYXJjaHJlc3VsdHMtdG8nLFxuICAgICAgICAgICAgbmFtZTogJ01lcmdlIGZpbGVzIGluIHNlYXJjaHJlc3VsdHMgdG8gLi4uJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IENob29zZUZpbGVNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIG5ldyBTZWFyY2hSZXN1bHRzUmVhZGVyKHRoaXMucGx1Z2luKSkub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdFN5bmNGbG9tbygpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ3N5bmMtZmlsZXMtaW4tc2VhcmNocmVzdWx0cy10by1mbG9tbycsXG4gICAgICAgICAgICBuYW1lOiAnU3luYyBmaWxlcyBpbiBzZWFyY2hyZXN1bHRzIHRvIGZsb21vIC4uLicsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBTZWFyY2hSZXN1bHRzUmVhZGVyKHRoaXMucGx1Z2luKS5yZWFkKG5ldyBTeW5jRmxvbW9BY3Rpb24odGhpcy5wbHVnaW4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RNb3ZlRmlsZSgpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ21vdmUtZmlsZXMtaW4tc2VhcmNocmVzdWx0cy10bycsXG4gICAgICAgICAgICBuYW1lOiAnTW92ZSBmaWxlcyBpbiBzZWFyY2hyZXN1bHRzIHRvIC4uLicsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBhY3Rpb25GdW5jID0gKHBhdGg6IHN0cmluZyk6IEFjdGlvbiA9PiB7IHJldHVybiBuZXcgTW92ZUFjdGlvbih0aGlzLnBsdWdpbi5hcHAsIHBhdGgpOyB9O1xuICAgICAgICAgICAgICAgIG5ldyBDaG9vc2VGb2xkZXJNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIG5ldyBTZWFyY2hSZXN1bHRzUmVhZGVyKHRoaXMucGx1Z2luKSwgYWN0aW9uRnVuYykub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdEFkZEZpbGUyQ2FudmFzKCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcImFkZC1maWxlcy1pbi1zZWFyY2hyZXN1bHRzLXRvLWNhbnZhc1wiLFxuICAgICAgICAgICAgbmFtZTogXCJBZGQgZmlsZXMgaW4gc2VhcmNocmVzdWx0cyB0byB0YXJnZXQgY2FudmFzIC4uLlwiLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgQ2hvb3NlQ2FudmFzTW9kYWwodGhpcy5wbHVnaW4uYXBwLCBuZXcgU2VhcmNoUmVzdWx0c1JlYWRlcih0aGlzLnBsdWdpbikpLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFHQSxRQUFJLFlBQVksV0FBWTtBQUkzQixVQUFJLE9BQU8sU0FBUyxhQUFhO0FBQUUsZUFBTztBQUFBO0FBQzFDLFVBQUksT0FBTyxXQUFXLGFBQWE7QUFBRSxlQUFPO0FBQUE7QUFDNUMsVUFBSSxPQUFPLFlB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QUFFLEtBQUUsSUFBRSxJQUFFLE1BQUcsS0FBSSxPQUFHLElBQUcsS0FBRSxHQUFFLEtBQUUsRUFBRSxTQUFTLElBQUU7QUFBQyx1QkFBTyxHQUFFLFVBQVEsSUFBRSxHQUFFLEtBQUssT0FBSyxHQUFFLE1BQU0sR0FBRSxHQUFHLEtBQUssT0FBSyxPQUFLLEdBQUUsTUFBTSxHQUFHLEtBQUs7aUJBQU0sS0FBSSxNQUFHLEtBQUcsSUFBRSxLQUFHLElBQUUsR0FBRSxLQUFHLElBQUUsR0FBRSxLQUFLLFNBQVMsSUFBSSxVQUFRLEtBQUksTUFBRTttQkFBTztBQUFDLGtCQUFJLEtBQUUsR0FBRSxNQUFNO0FBQTJCLG1CQUFFLEdBQUUsU0FBTyxHQUFFLEtBQUUsR0FBRSxPQUFLLEdBQUUsS0FBRSxFQUFFLElBQUUsR0FBRSxHQUFFLEdBQUUsU0FBUSxLQUFFLEdBQUUsTUFBTSxHQUFFLE1BQUssR0FBRSxLQUFJLEtBQUUsR0FBRSxHQUFHLFdBQVc7O0FBQU8sZ0JBQUksS0FBRSxLQUFFLEdBQUU7QUFBSyxtQkFBTyxFQUFFLE9BQUssTUFBRyxLQUFHLElBQUUsS0FBRyxJQUFFLEdBQUUsS0FBRyxJQUFFLEdBQUUsS0FBSyxTQUFTLElBQUksVUFBUSxLQUFJLE1BQUUsSUFBRyxFQUFFLFNBQVMsSUFBRSxJQUFFLElBQUU7QUFBQyxrQkFBSSxJQUFFLEtBQUUsT0FBSSxJQUFFLEtBQUUsS0FBRSxPQUFLO0FBQUUscUJBQU8sS0FBRSxFQUFFLE1BQUcsRUFBRyxLQUFHLElBQUUsT0FBSyxLQUFJLFNBQVMsS0FBSSxJQUFFLE9BQUssRUFBRyxJQUFFLE9BQUssS0FBRSxHQUFHLFlBQVcsSUFBRSxNQUFLLEdBQUcsT0FBTyxJQUFFLENBQUMsS0FBRSxLQUFFLFFBQU0sS0FBRyxLQUFFLENBQUMsSUFBRSxFQUFFLEtBQUksTUFBRyxRQUFNLEVBQUUsSUFBRyxJQUFFLE9BQUssRUFBRSxLQUFJLE9BQUk7ZUFBSyxJQUFHLElBQUcsS0FBSzs7QUFBTSxxQkFBVyxJQUFFLElBQUU7QUFBQyxtQkFBTSxDQUFDLE1B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
