/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var hn=Object.create;var Be=Object.defineProperty;var dn=Object.getOwnPropertyDescriptor;var fn=Object.getOwnPropertyNames,ir=Object.getOwnPropertySymbols,pn=Object.getPrototypeOf,or=Object.prototype.hasOwnProperty,gn=Object.prototype.propertyIsEnumerable;var sr=(n,e,t)=>e in n?Be(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,de=(n,e)=>{for(var t in e||(e={}))or.call(e,t)&&sr(n,t,e[t]);if(ir)for(var t of ir(e))gn.call(e,t)&&sr(n,t,e[t]);return n};var ar=n=>Be(n,"__esModule",{value:!0});var mn=(n,e)=>{ar(n);for(var t in e)Be(n,t,{get:e[t],enumerable:!0})},vn=(n,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of fn(e))!or.call(n,r)&&r!=="default"&&Be(n,r,{get:()=>e[r],enumerable:!(t=dn(e,r))||t.enumerable});return n},rt=n=>vn(ar(Be(n!=null?hn(pn(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var ye=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(c){i(c)}},s=l=>{try{a(t.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});mn(exports,{default:()=>rr});function fe(n){return Array.isArray?Array.isArray(n):ur(n)==="[object Array]"}var bn=1/0;function yn(n){if(typeof n=="string")return n;let e=n+"";return e=="0"&&1/n==-bn?"-0":e}function En(n){return n==null?"":yn(n)}function le(n){return typeof n=="string"}function lr(n){return typeof n=="number"}function Sn(n){return n===!0||n===!1||wn(n)&&ur(n)=="[object Boolean]"}function cr(n){return typeof n=="object"}function wn(n){return cr(n)&&n!==null}function U(n){return n!=null}function Tt(n){return!n.trim().length}function ur(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}var Cn="Incorrect 'index' type",Tn=n=>`Invalid value for key ${n}`,Dn=n=>`Pattern length exceeds max of ${n}.`,xn=n=>`Missing ${n} property in key`,_n=n=>`Property 'weight' in key '${n}' must be a positive integer`,hr=Object.prototype.hasOwnProperty,dr=class{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(r=>{let i=fr(r);t+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(r=>{r.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function fr(n){let e=null,t=null,r=null,i=1,o=null;if(le(n)||fe(n))r=n,e=pr(n),t=Dt(n);else{if(!hr.call(n,"name"))throw new Error(xn("name"));let s=n.name;if(r=s,hr.call(n,"weight")&&(i=n.weight,i<=0))throw new Error(_n(s));e=pr(s),t=Dt(s),o=n.getFn}return{path:e,id:t,weight:i,src:r,getFn:o}}function pr(n){return fe(n)?n:n.split(".")}function Dt(n){return fe(n)?n.join("."):n}function In(n,e){let t=[],r=!1,i=(o,s,a)=>{if(!!U(o))if(!s[a])t.push(o);else{let l=s[a],c=o[l];if(!U(c))return;if(a===s.length-1&&(le(c)||lr(c)||Sn(c)))t.push(En(c));else if(fe(c)){r=!0;for(let u=0,h=c.length;u<h;u+=1)i(c[u],s,a+1)}else s.length&&i(c,s,a+1)}};return i(n,le(e)?e.split("."):e,0),r?t:t[0]}var An={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Mn={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1},On={location:0,threshold:.6,distance:100},Fn={useExtendedSearch:!1,getFn:In,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},y=de(de(de(de({},Mn),An),On),Fn),Nn=/[^ ]+/g;function kn(n=1,e=3){let t=new Map,r=Math.pow(10,e);return{get(i){let o=i.match(Nn).length;if(t.has(o))return t.get(o);let s=1/Math.pow(o,.5*n),a=parseFloat(Math.round(s*r)/r);return t.set(o,a),a},clear(){t.clear()}}}var nt=class{constructor({getFn:e=y.getFn,fieldNormWeight:t=y.fieldNormWeight}={}){this.norm=kn(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,r)=>{this._keysMap[t.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,le(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){let t=this.size();le(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!U(e)||Tt(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach((i,o)=>{let s=i.getFn?i.getFn(e):this.getFn(e,i.path);if(!!U(s)){if(fe(s)){let a=[],l=[{nestedArrIndex:-1,value:s}];for(;l.length;){let{nestedArrIndex:c,value:u}=l.pop();if(!!U(u))if(le(u)&&!Tt(u)){let h={v:u,i:c,n:this.norm.get(u)};a.push(h)}else fe(u)&&u.forEach((h,d)=>{l.push({nestedArrIndex:d,value:h})})}r.$[o]=a}else if(le(s)&&!Tt(s)){let a={v:s,n:this.norm.get(s)};r.$[o]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}};function gr(n,e,{getFn:t=y.getFn,fieldNormWeight:r=y.fieldNormWeight}={}){let i=new nt({getFn:t,fieldNormWeight:r});return i.setKeys(n.map(fr)),i.setSources(e),i.create(),i}function Rn(n,{getFn:e=y.getFn,fieldNormWeight:t=y.fieldNormWeight}={}){let{keys:r,records:i}=n,o=new nt({getFn:e,fieldNormWeight:t});return o.setKeys(r),o.setIndexRecords(i),o}function it(n,{errors:e=0,currentLocation:t=0,expectedLocation:r=0,distance:i=y.distance,ignoreLocation:o=y.ignoreLocation}={}){let s=e/n.length;if(o)return s;let a=Math.abs(r-t);return i?s+a/i:a?1:s}function Pn(n=[],e=y.minMatchCharLength){let t=[],r=-1,i=-1,o=0;for(let s=n.length;o<s;o+=1){let a=n[o];a&&r===-1?r=o:!a&&r!==-1&&(i=o-1,i-r+1>=e&&t.push([r,i]),r=-1)}return n[o-1]&&o-r>=e&&t.push([r,o-1]),t}var Te=32;function Ln(n,e,t,{location:r=y.location,distance:i=y.distance,threshold:o=y.threshold,findAllMatches:s=y.findAllMatches,minMatchCharLength:a=y.minMatchCharLength,includeMatches:l=y.includeMatches,ignoreLocation:c=y.ignoreLocation}={}){if(e.length>Te)throw new Error(Dn(Te));let u=e.length,h=n.length,d=Math.max(0,Math.min(r,h)),p=o,g=d,v=a>1||l,x=v?Array(h):[],I;for(;(I=n.indexOf(e,g))>-1;){let P=it(e,{currentLocation:I,expectedLocation:d,distance:i,ignoreLocation:c});if(p=Math.min(P,p),g=I+u,v){let X=0;for(;X<u;)x[I+X]=1,X+=1}}g=-1;let _=[],M=1,T=u+h,J=1<<u-1;for(let P=0;P<u;P+=1){let X=0,k=T;for(;X<k;)it(e,{errors:P,currentLocation:d+k,expectedLocation:d,distance:i,ignoreLocation:c})<=p?X=k:T=k,k=Math.floor((T-X)/2+X);T=k;let be=Math.max(1,d-k+1),Z=s?h:Math.min(d+k,h)+u,ee=Array(Z+2);ee[Z+1]=(1<<P)-1;for(let W=Z;W>=be;W-=1){let ae=W-1,re=t[n.charAt(ae)];if(v&&(x[ae]=+!!re),ee[W]=(ee[W+1]<<1|1)&re,P&&(ee[W]|=(_[W+1]|_[W])<<1|1|_[W+1]),ee[W]&J&&(M=it(e,{errors:P,currentLocation:ae,expectedLocation:d,distance:i,ignoreLocation:c}),M<=p)){if(p=M,g=ae,g<=d)break;be=Math.max(1,2*d-g)}}if(it(e,{errors:P+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:c})>p)break;_=ee}let Y={isMatch:g>=0,score:Math.max(.001,M)};if(v){let P=Pn(x,a);P.length?l&&(Y.indices=P):Y.isMatch=!1}return Y}function Bn(n){let e={};for(let t=0,r=n.length;t<r;t+=1){let i=n.charAt(t);e[i]=(e[i]||0)|1<<r-t-1}return e}var xt=class{constructor(e,{location:t=y.location,threshold:r=y.threshold,distance:i=y.distance,includeMatches:o=y.includeMatches,findAllMatches:s=y.findAllMatches,minMatchCharLength:a=y.minMatchCharLength,isCaseSensitive:l=y.isCaseSensitive,ignoreLocation:c=y.ignoreLocation}={}){if(this.options={location:t,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;let u=(d,p)=>{this.chunks.push({pattern:d,alphabet:Bn(d),startIndex:p})},h=this.pattern.length;if(h>Te){let d=0,p=h%Te,g=h-p;for(;d<g;)u(this.pattern.substr(d,Te),d),d+=Te;if(p){let v=h-Te;u(this.pattern.substr(v),v)}}else u(this.pattern,0)}searchIn(e){let{isCaseSensitive:t,includeMatches:r}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let g={isMatch:!0,score:0};return r&&(g.indices=[[0,e.length-1]]),g}let{location:i,distance:o,threshold:s,findAllMatches:a,minMatchCharLength:l,ignoreLocation:c}=this.options,u=[],h=0,d=!1;this.chunks.forEach(({pattern:g,alphabet:v,startIndex:x})=>{let{isMatch:I,score:_,indices:M}=Ln(e,g,v,{location:i+x,distance:o,threshold:s,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:c});I&&(d=!0),h+=_,I&&M&&(u=[...u,...M])});let p={isMatch:d,score:d?h/this.chunks.length:1};return d&&r&&(p.indices=u),p}},pe=class{constructor(e){this.pattern=e}static isMultiMatch(e){return mr(e,this.multiRegex)}static isSingleMatch(e){return mr(e,this.singleRegex)}search(){}};function mr(n,e){let t=n.match(e);return t?t[1]:null}var vr=class extends pe{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){let t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},br=class extends pe{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){let r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}},yr=class extends pe{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){let t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},Er=class extends pe{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){let t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},Sr=class extends pe{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){let t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},wr=class extends pe{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){let t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},_t=class extends pe{constructor(e,{location:t=y.location,threshold:r=y.threshold,distance:i=y.distance,includeMatches:o=y.includeMatches,findAllMatches:s=y.findAllMatches,minMatchCharLength:a=y.minMatchCharLength,isCaseSensitive:l=y.isCaseSensitive,ignoreLocation:c=y.ignoreLocation}={}){super(e);this._bitapSearch=new xt(e,{location:t,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}},It=class extends pe{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,r,i=[],o=this.pattern.length;for(;(r=e.indexOf(this.pattern,t))>-1;)t=r+o,i.push([r,t-1]);let s=!!i.length;return{isMatch:s,score:s?0:1,indices:i}}},At=[vr,It,yr,Er,wr,Sr,br,_t],Cr=At.length,Hn=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Wn="|";function $n(n,e={}){return n.split(Wn).map(t=>{let r=t.trim().split(Hn).filter(o=>o&&!!o.trim()),i=[];for(let o=0,s=r.length;o<s;o+=1){let a=r[o],l=!1,c=-1;for(;!l&&++c<Cr;){let u=At[c],h=u.isMultiMatch(a);h&&(i.push(new u(h,e)),l=!0)}if(!l)for(c=-1;++c<Cr;){let u=At[c],h=u.isSingleMatch(a);if(h){i.push(new u(h,e));break}}}return i})}var Vn=new Set([_t.type,It.type]),Tr=class{constructor(e,{isCaseSensitive:t=y.isCaseSensitive,includeMatches:r=y.includeMatches,minMatchCharLength:i=y.minMatchCharLength,ignoreLocation:o=y.ignoreLocation,findAllMatches:s=y.findAllMatches,location:a=y.location,threshold:l=y.threshold,distance:c=y.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:r,minMatchCharLength:i,findAllMatches:s,ignoreLocation:o,location:a,threshold:l,distance:c},this.pattern=t?e:e.toLowerCase(),this.query=$n(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){let t=this.query;if(!t)return{isMatch:!1,score:1};let{includeMatches:r,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let o=0,s=[],a=0;for(let l=0,c=t.length;l<c;l+=1){let u=t[l];s.length=0,o=0;for(let h=0,d=u.length;h<d;h+=1){let p=u[h],{isMatch:g,indices:v,score:x}=p.search(e);if(g){if(o+=1,a+=x,r){let I=p.constructor.type;Vn.has(I)?s=[...s,...v]:s.push(v)}}else{a=0,o=0,s.length=0;break}}if(o){let h={isMatch:!0,score:a/o};return r&&(h.indices=s),h}}return{isMatch:!1,score:1}}},Mt=[];function jn(...n){Mt.push(...n)}function Ot(n,e){for(let t=0,r=Mt.length;t<r;t+=1){let i=Mt[t];if(i.condition(n,e))return new i(n,e)}return new xt(n,e)}var ot={AND:"$and",OR:"$or"},Ft={PATH:"$path",PATTERN:"$val"},Nt=n=>!!(n[ot.AND]||n[ot.OR]),Gn=n=>!!n[Ft.PATH],Yn=n=>!fe(n)&&cr(n)&&!Nt(n),Dr=n=>({[ot.AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function xr(n,e,{auto:t=!0}={}){let r=i=>{let o=Object.keys(i),s=Gn(i);if(!s&&o.length>1&&!Nt(i))return r(Dr(i));if(Yn(i)){let l=s?i[Ft.PATH]:o[0],c=s?i[Ft.PATTERN]:i[l];if(!le(c))throw new Error(Tn(l));let u={keyId:Dt(l),pattern:c};return t&&(u.searcher=Ot(c,e)),u}let a={children:[],operator:o[0]};return o.forEach(l=>{let c=i[l];fe(c)&&c.forEach(u=>{a.children.push(r(u))})}),a};return Nt(n)||(n=Dr(n)),r(n)}function Xn(n,{ignoreFieldNorm:e=y.ignoreFieldNorm}){n.forEach(t=>{let r=1;t.matches.forEach(({key:i,norm:o,score:s})=>{let a=i?i.weight:null;r*=Math.pow(s===0&&a?Number.EPSILON:s,(a||1)*(e?1:o))}),t.score=r})}function Kn(n,e){let t=n.matches;e.matches=[],!!U(t)&&t.forEach(r=>{if(!U(r.indices)||!r.indices.length)return;let{indices:i,value:o}=r,s={indices:i,value:o};r.key&&(s.key=r.key.src),r.idx>-1&&(s.refIndex=r.idx),e.matches.push(s)})}function zn(n,e){e.score=n.score}function Un(n,e,{includeMatches:t=y.includeMatches,includeScore:r=y.includeScore}={}){let i=[];return t&&i.push(Kn),r&&i.push(zn),n.map(o=>{let{idx:s}=o,a={item:e[s],refIndex:s};return i.length&&i.forEach(l=>{l(o,a)}),a})}var ce=class{constructor(e,t={},r){this.options=de(de({},y),t),this.options.useExtendedSearch,this._keyStore=new dr(this.options.keys),this.setCollection(e,r)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof nt))throw new Error(Cn);this._myIndex=t||gr(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){!U(e)||(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){let t=[];for(let r=0,i=this._docs.length;r<i;r+=1){let o=this._docs[r];e(o,r)&&(this.removeAt(r),r-=1,i-=1,t.push(o))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){let{includeMatches:r,includeScore:i,shouldSort:o,sortFn:s,ignoreFieldNorm:a}=this.options,l=le(e)?le(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Xn(l,{ignoreFieldNorm:a}),o&&l.sort(s),lr(t)&&t>-1&&(l=l.slice(0,t)),Un(l,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(e){let t=Ot(e,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:o,i:s,n:a})=>{if(!U(o))return;let{isMatch:l,score:c,indices:u}=t.searchIn(o);l&&i.push({item:o,idx:s,matches:[{score:c,value:o,norm:a,indices:u}]})}),i}_searchLogical(e){let t=xr(e,this.options),r=(a,l,c)=>{if(!a.children){let{keyId:h,searcher:d}=a,p=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(l,h),searcher:d});return p&&p.length?[{idx:c,item:l,matches:p}]:[]}let u=[];for(let h=0,d=a.children.length;h<d;h+=1){let p=a.children[h],g=r(p,l,c);if(g.length)u.push(...g);else if(a.operator===ot.AND)return[]}return u},i=this._myIndex.records,o={},s=[];return i.forEach(({$:a,i:l})=>{if(U(a)){let c=r(t,a,l);c.length&&(o[l]||(o[l]={idx:l,item:a,matches:[]},s.push(o[l])),c.forEach(({matches:u})=>{o[l].matches.push(...u)}))}}),s}_searchObjectList(e){let t=Ot(e,this.options),{keys:r,records:i}=this._myIndex,o=[];return i.forEach(({$:s,i:a})=>{if(!U(s))return;let l=[];r.forEach((c,u)=>{l.push(...this._findMatches({key:c,value:s[u],searcher:t}))}),l.length&&o.push({idx:a,item:s,matches:l})}),o}_findMatches({key:e,value:t,searcher:r}){if(!U(t))return[];let i=[];if(fe(t))t.forEach(({v:o,i:s,n:a})=>{if(!U(o))return;let{isMatch:l,score:c,indices:u}=r.searchIn(o);l&&i.push({score:c,key:e,value:o,idx:s,norm:a,indices:u})});else{let{v:o,n:s}=t,{isMatch:a,score:l,indices:c}=r.searchIn(o);a&&i.push({score:l,key:e,value:o,norm:s,indices:c})}return i}};ce.version="6.6.2";ce.createIndex=gr;ce.parseIndex=Rn;ce.config=y;ce.parseQuery=xr;jn(Tr);function ge(n,e){let t=Object.keys(e).map(r=>qn(n,r,e[r]));return t.length===1?t[0]:function(){t.forEach(r=>r())}}function qn(n,e,t){let r=n[e],i=n.hasOwnProperty(e),o=t(r);return r&&Object.setPrototypeOf(o,r),Object.setPrototypeOf(s,o),n[e]=s,a;function s(...l){return o===r&&n[e]===s&&a(),o.apply(this,l)}function a(){n[e]===s&&(i?n[e]=r:delete n[e]),o!==r&&(o=r,Object.setPrototypeOf(s,r||Function))}}var w=rt(require("obsidian"));function _r(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ue(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_r(Object(t),!0).forEach(function(r){Qn(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_r(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function st(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?st=function(e){return typeof e}:st=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(n)}function Qn(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ne(){return ne=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ne.apply(this,arguments)}function Jn(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Zn(n,e){if(n==null)return{};var t=Jn(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,r)||(t[r]=n[r]))}return t}function ei(n){return ti(n)||ri(n)||ni(n)||ii()}function ti(n){if(Array.isArray(n))return kt(n)}function ri(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ni(n,e){if(!!n){if(typeof n=="string")return kt(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return kt(n,e)}}function kt(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function ii(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var oi="1.15.2";function me(n){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(n)}var ve=me(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),He=me(/Edge/i),Ir=me(/firefox/i),We=me(/safari/i)&&!me(/chrome/i)&&!me(/android/i),Ar=me(/iP(ad|od|hone)/i),Mr=me(/chrome/i)&&me(/android/i),Or={capture:!1,passive:!1};function D(n,e,t){n.addEventListener(e,t,!ve&&Or)}function C(n,e,t){n.removeEventListener(e,t,!ve&&Or)}function at(n,e){if(!!e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function si(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function te(n,e,t,r){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&at(n,e):at(n,e))||r&&n===t)return n;if(n===t)break}while(n=si(n))}return null}var Fr=/\s+/g;function L(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var r=(" "+n.className+" ").replace(Fr," ").replace(" "+e+" "," ");n.className=(r+(t?" "+e:"")).replace(Fr," ")}}function m(n,e,t){var r=n&&n.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=t+(typeof t=="string"?"":"px")}}function De(n,e){var t="";if(typeof n=="string")t=n;else do{var r=m(n,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!e&&(n=n.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function Nr(n,e,t){if(n){var r=n.getElementsByTagName(e),i=0,o=r.length;if(t)for(;i<o;i++)t(r[i],i);return r}return[]}function he(){var n=document.scrollingElement;return n||document.documentElement}function O(n,e,t,r,i){if(!(!n.getBoundingClientRect&&n!==window)){var o,s,a,l,c,u,h;if(n!==window&&n.parentNode&&n!==he()?(o=n.getBoundingClientRect(),s=o.top,a=o.left,l=o.bottom,c=o.right,u=o.height,h=o.width):(s=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(e||t)&&n!==window&&(i=i||n.parentNode,!ve))do if(i&&i.getBoundingClientRect&&(m(i,"transform")!=="none"||t&&m(i,"position")!=="static")){var d=i.getBoundingClientRect();s-=d.top+parseInt(m(i,"border-top-width")),a-=d.left+parseInt(m(i,"border-left-width")),l=s+o.height,c=a+o.width;break}while(i=i.parentNode);if(r&&n!==window){var p=De(i||n),g=p&&p.a,v=p&&p.d;p&&(s/=v,a/=g,h/=g,u/=v,l=s+u,c=a+h)}return{top:s,left:a,bottom:l,right:c,width:h,height:u}}}function kr(n,e,t){for(var r=Ee(n,!0),i=O(n)[e];r;){var o=O(r)[t],s=void 0;if(t==="top"||t==="left"?s=i>=o:s=i<=o,!s)return r;if(r===he())break;r=Ee(r,!1)}return!1}function Me(n,e,t,r){for(var i=0,o=0,s=n.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==b.ghost&&(r||s[o]!==b.dragged)&&te(s[o],t.draggable,n,!1)){if(i===e)return s[o];i++}o++}return null}function Rt(n,e){for(var t=n.lastElementChild;t&&(t===b.ghost||m(t,"display")==="none"||e&&!at(t,e));)t=t.previousElementSibling;return t||null}function B(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==b.clone&&(!e||at(n,e))&&t++;return t}function Rr(n){var e=0,t=0,r=he();if(n)do{var i=De(n),o=i.a,s=i.d;e+=n.scrollLeft*o,t+=n.scrollTop*s}while(n!==r&&(n=n.parentNode));return[e,t]}function ai(n,e){for(var t in n)if(!!n.hasOwnProperty(t)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===n[t][r])return Number(t)}return-1}function Ee(n,e){if(!n||!n.getBoundingClientRect)return he();var t=n,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=m(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return he();if(r||e)return t;r=!0}}while(t=t.parentNode);return he()}function li(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Pt(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var $e;function Pr(n,e){return function(){if(!$e){var t=arguments,r=this;t.length===1?n.call(r,t[0]):n.apply(r,t),$e=setTimeout(function(){$e=void 0},e)}}}function ci(){clearTimeout($e),$e=void 0}function Lr(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function Lt(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}function Br(n,e){m(n,"position","absolute"),m(n,"top",e.top),m(n,"left",e.left),m(n,"width",e.width),m(n,"height",e.height)}function Bt(n){m(n,"position",""),m(n,"top",""),m(n,"left",""),m(n,"width",""),m(n,"height","")}function Hr(n,e,t){var r={};return Array.from(n.children).forEach(function(i){var o,s,a,l;if(!(!te(i,e.draggable,n,!1)||i.animated||i===t)){var c=O(i);r.left=Math.min((o=r.left)!==null&&o!==void 0?o:1/0,c.left),r.top=Math.min((s=r.top)!==null&&s!==void 0?s:1/0,c.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,c.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var V="Sortable"+new Date().getTime();function ui(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(m(i,"display")==="none"||i===b.ghost)){n.push({target:i,rect:O(i)});var o=ue({},n[n.length-1].rect);if(i.thisAnimationDuration){var s=De(i,!0);s&&(o.top-=s.f,o.left-=s.e)}i.fromRect=o}})}},addAnimationState:function(r){n.push(r)},removeAnimationState:function(r){n.splice(ai(n,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var o=!1,s=0;n.forEach(function(a){var l=0,c=a.target,u=c.fromRect,h=O(c),d=c.prevFromRect,p=c.prevToRect,g=a.rect,v=De(c,!0);v&&(h.top-=v.f,h.left-=v.e),c.toRect=h,c.thisAnimationDuration&&Pt(d,h)&&!Pt(u,h)&&(g.top-h.top)/(g.left-h.left)==(u.top-h.top)/(u.left-h.left)&&(l=di(g,d,p,i.options)),Pt(h,u)||(c.prevFromRect=u,c.prevToRect=h,l||(l=i.options.animation),i.animate(c,g,h,l)),l&&(o=!0,s=Math.max(s,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),o?e=setTimeout(function(){typeof r=="function"&&r()},s):typeof r=="function"&&r(),n=[]},animate:function(r,i,o,s){if(s){m(r,"transition",""),m(r,"transform","");var a=De(this.el),l=a&&a.a,c=a&&a.d,u=(i.left-o.left)/(l||1),h=(i.top-o.top)/(c||1);r.animatingX=!!u,r.animatingY=!!h,m(r,"transform","translate3d("+u+"px,"+h+"px,0)"),this.forRepaintDummy=hi(r),m(r,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),m(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){m(r,"transition",""),m(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},s)}}}}function hi(n){return n.offsetWidth}function di(n,e,t,r){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*r.animation}var Oe=[],Ht={initializeByDefault:!0},Ve={mount:function(e){for(var t in Ht)Ht.hasOwnProperty(t)&&!(t in e)&&(e[t]=Ht[t]);Oe.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Oe.push(e)},pluginEvent:function(e,t,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var o=e+"Global";Oe.forEach(function(s){!t[s.pluginName]||(t[s.pluginName][o]&&t[s.pluginName][o](ue({sortable:t},r)),t.options[s.pluginName]&&t[s.pluginName][e]&&t[s.pluginName][e](ue({sortable:t},r)))})},initializePlugins:function(e,t,r,i){Oe.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,t,e.options);c.sortable=e,c.options=e.options,e[l]=c,ne(r,c.defaults)}});for(var o in e.options)if(!!e.options.hasOwnProperty(o)){var s=this.modifyOption(e,o,e.options[o]);typeof s!="undefined"&&(e.options[o]=s)}},getEventProperties:function(e,t){var r={};return Oe.forEach(function(i){typeof i.eventProperties=="function"&&ne(r,i.eventProperties.call(t[i.pluginName],e))}),r},modifyOption:function(e,t,r){var i;return Oe.forEach(function(o){!e[o.pluginName]||o.optionListeners&&typeof o.optionListeners[t]=="function"&&(i=o.optionListeners[t].call(e[o.pluginName],r))}),i}};function je(n){var e=n.sortable,t=n.rootEl,r=n.name,i=n.targetEl,o=n.cloneEl,s=n.toEl,a=n.fromEl,l=n.oldIndex,c=n.newIndex,u=n.oldDraggableIndex,h=n.newDraggableIndex,d=n.originalEvent,p=n.putSortable,g=n.extraEventProperties;if(e=e||t&&t[V],!!e){var v,x=e.options,I="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!ve&&!He?v=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(r,!0,!0)),v.to=s||t,v.from=a||t,v.item=i||t,v.clone=o,v.oldIndex=l,v.newIndex=c,v.oldDraggableIndex=u,v.newDraggableIndex=h,v.originalEvent=d,v.pullMode=p?p.lastPutMode:void 0;var _=ue(ue({},g),Ve.getEventProperties(r,e));for(var M in _)v[M]=_[M];t&&t.dispatchEvent(v),x[I]&&x[I].call(e,v)}}var fi=["evt"],K=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,o=Zn(r,fi);Ve.pluginEvent.bind(b)(e,t,ue({dragEl:f,parentEl:R,ghostEl:E,rootEl:F,nextEl:xe,lastDownEl:lt,cloneEl:N,cloneHidden:Se,dragStarted:Ye,putSortable:$,activeSortable:b.active,originalEvent:i,oldIndex:Fe,oldDraggableIndex:Ge,newIndex:q,newDraggableIndex:we,hideGhostForTarget:Xr,unhideGhostForTarget:Kr,cloneNowHidden:function(){Se=!0},cloneNowShown:function(){Se=!1},dispatchSortableEvent:function(a){G({sortable:t,name:a,originalEvent:i})}},o))};function G(n){je(ue({putSortable:$,cloneEl:N,targetEl:f,rootEl:F,oldIndex:Fe,oldDraggableIndex:Ge,newIndex:q,newDraggableIndex:we},n))}var f,R,E,F,xe,lt,N,Se,Fe,q,Ge,we,ct,$,Ne=!1,ut=!1,ht=[],_e,ie,Wt,$t,Wr,$r,Ye,ke,Xe,Ke=!1,dt=!1,ft,j,Vt=[],jt=!1,pt=[],gt=typeof document!="undefined",mt=Ar,Vr=He||ve?"cssFloat":"float",pi=gt&&!Mr&&!Ar&&"draggable"in document.createElement("div"),jr=function(){if(!!gt){if(ve)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),Gr=function(e,t){var r=m(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=Me(e,0,t),s=Me(e,1,t),a=o&&m(o),l=s&&m(s),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+O(o).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+O(s).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return s&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return o&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[Vr]==="none"||s&&r[Vr]==="none"&&c+u>i)?"vertical":"horizontal"},gi=function(e,t,r){var i=r?e.left:e.top,o=r?e.right:e.bottom,s=r?e.width:e.height,a=r?t.left:t.top,l=r?t.right:t.bottom,c=r?t.width:t.height;return i===a||o===l||i+s/2===a+c/2},mi=function(e,t){var r;return ht.some(function(i){var o=i[V].options.emptyInsertThreshold;if(!(!o||Rt(i))){var s=O(i),a=e>=s.left-o&&e<=s.right+o,l=t>=s.top-o&&t<=s.bottom+o;if(a&&l)return r=i}}),r},Yr=function(e){function t(o,s){return function(a,l,c,u){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(o==null&&(s||h))return!0;if(o==null||o===!1)return!1;if(s&&o==="clone")return o;if(typeof o=="function")return t(o(a,l,c,u),s)(a,l,c,u);var d=(s?a:l).options.group.name;return o===!0||typeof o=="string"&&o===d||o.join&&o.indexOf(d)>-1}}var r={},i=e.group;(!i||st(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=t(i.pull,!0),r.checkPut=t(i.put),r.revertClone=i.revertClone,e.group=r},Xr=function(){!jr&&E&&m(E,"display","none")},Kr=function(){!jr&&E&&m(E,"display","")};gt&&!Mr&&document.addEventListener("click",function(n){if(ut)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),ut=!1,!1},!0);var Ie=function(e){if(f){e=e.touches?e.touches[0]:e;var t=mi(e.clientX,e.clientY);if(t){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[V]._onDragOver(r)}}},vi=function(e){f&&f.parentNode[V]._isOutsideThisEl(e.target)};function b(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=ne({},e),n[V]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Gr(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,a){s.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:b.supportPointer!==!1&&"PointerEvent"in window&&!We,emptyInsertThreshold:5};Ve.initializePlugins(this,n,t);for(var r in t)!(r in e)&&(e[r]=t[r]);Yr(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:pi,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?D(n,"pointerdown",this._onTapStart):(D(n,"mousedown",this._onTapStart),D(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(D(n,"dragover",this),D(n,"dragenter",this)),ht.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ne(this,ui())}b.prototype={constructor:b,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ke=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,f):this.options.direction},_onTapStart:function(e){if(!!e.cancelable){var t=this,r=this.el,i=this.options,o=i.preventOnFilter,s=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=i.filter;if(Di(r),!f&&!(/mousedown|pointerdown/.test(s)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&We&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=te(l,i.draggable,r,!1),!(l&&l.animated)&&lt!==l)){if(Fe=B(l),Ge=B(l,i.draggable),typeof u=="function"){if(u.call(this,e,l,this)){G({sortable:t,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),K("filter",t,{evt:e}),o&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(h){if(h=te(c,h.trim(),r,!1),h)return G({sortable:t,rootEl:h,name:"filter",targetEl:l,fromEl:r,toEl:r}),K("filter",t,{evt:e}),!0}),u)){o&&e.cancelable&&e.preventDefault();return}i.handle&&!te(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,r){var i=this,o=i.el,s=i.options,a=o.ownerDocument,l;if(r&&!f&&r.parentNode===o){var c=O(r);if(F=o,f=r,R=f.parentNode,xe=f.nextSibling,lt=r,ct=s.group,b.dragged=f,_e={target:f,clientX:(t||e).clientX,clientY:(t||e).clientY},Wr=_e.clientX-c.left,$r=_e.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,f.style["will-change"]="all",l=function(){if(K("delayEnded",i,{evt:e}),b.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Ir&&i.nativeDraggable&&(f.draggable=!0),i._triggerDragStart(e,t),G({sortable:i,name:"choose",originalEvent:e}),L(f,s.chosenClass,!0)},s.ignore.split(",").forEach(function(u){Nr(f,u.trim(),Gt)}),D(a,"dragover",Ie),D(a,"mousemove",Ie),D(a,"touchmove",Ie),D(a,"mouseup",i._onDrop),D(a,"touchend",i._onDrop),D(a,"touchcancel",i._onDrop),Ir&&this.nativeDraggable&&(this.options.touchStartThreshold=4,f.draggable=!0),K("delayStart",this,{evt:e}),s.delay&&(!s.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(He||ve))){if(b.eventCanceled){this._onDrop();return}D(a,"mouseup",i._disableDelayedDrag),D(a,"touchend",i._disableDelayedDrag),D(a,"touchcancel",i._disableDelayedDrag),D(a,"mousemove",i._delayedDragTouchMoveHandler),D(a,"touchmove",i._delayedDragTouchMoveHandler),s.supportPointer&&D(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,s.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){f&&Gt(f),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;C(e,"mouseup",this._disableDelayedDrag),C(e,"touchend",this._disableDelayedDrag),C(e,"touchcancel",this._disableDelayedDrag),C(e,"mousemove",this._delayedDragTouchMoveHandler),C(e,"touchmove",this._delayedDragTouchMoveHandler),C(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?D(document,"pointermove",this._onTouchMove):t?D(document,"touchmove",this._onTouchMove):D(document,"mousemove",this._onTouchMove):(D(f,"dragend",this),D(F,"dragstart",this._onDragStart));try{document.selection?bt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(r){}},_dragStarted:function(e,t){if(Ne=!1,F&&f){K("dragStarted",this,{evt:t}),this.nativeDraggable&&D(document,"dragover",vi);var r=this.options;!e&&L(f,r.dragClass,!1),L(f,r.ghostClass,!0),b.active=this,e&&this._appendGhost(),G({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ie){this._lastX=ie.clientX,this._lastY=ie.clientY,Xr();for(var e=document.elementFromPoint(ie.clientX,ie.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ie.clientX,ie.clientY),e!==t);)t=e;if(f.parentNode[V]._isOutsideThisEl(e),t)do{if(t[V]){var r=void 0;if(r=t[V]._onDragOver({clientX:ie.clientX,clientY:ie.clientY,target:e,rootEl:t}),r&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Kr()}},_onTouchMove:function(e){if(_e){var t=this.options,r=t.fallbackTolerance,i=t.fallbackOffset,o=e.touches?e.touches[0]:e,s=E&&De(E,!0),a=E&&s&&s.a,l=E&&s&&s.d,c=mt&&j&&Rr(j),u=(o.clientX-_e.clientX+i.x)/(a||1)+(c?c[0]-Vt[0]:0)/(a||1),h=(o.clientY-_e.clientY+i.y)/(l||1)+(c?c[1]-Vt[1]:0)/(l||1);if(!b.active&&!Ne){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(E){s?(s.e+=u-(Wt||0),s.f+=h-($t||0)):s={a:1,b:0,c:0,d:1,e:u,f:h};var d="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");m(E,"webkitTransform",d),m(E,"mozTransform",d),m(E,"msTransform",d),m(E,"transform",d),Wt=u,$t=h,ie=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!E){var e=this.options.fallbackOnBody?document.body:F,t=O(f,!0,mt,!0,e),r=this.options;if(mt){for(j=e;m(j,"position")==="static"&&m(j,"transform")==="none"&&j!==document;)j=j.parentNode;j!==document.body&&j!==document.documentElement?(j===document&&(j=he()),t.top+=j.scrollTop,t.left+=j.scrollLeft):j=he(),Vt=Rr(j)}E=f.cloneNode(!0),L(E,r.ghostClass,!1),L(E,r.fallbackClass,!0),L(E,r.dragClass,!0),m(E,"transition",""),m(E,"transform",""),m(E,"box-sizing","border-box"),m(E,"margin",0),m(E,"top",t.top),m(E,"left",t.left),m(E,"width",t.width),m(E,"height",t.height),m(E,"opacity","0.8"),m(E,"position",mt?"absolute":"fixed"),m(E,"zIndex","100000"),m(E,"pointerEvents","none"),b.ghost=E,e.appendChild(E),m(E,"transform-origin",Wr/parseInt(E.style.width)*100+"% "+$r/parseInt(E.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,i=e.dataTransfer,o=r.options;if(K("dragStart",this,{evt:e}),b.eventCanceled){this._onDrop();return}K("setupClone",this),b.eventCanceled||(N=Lt(f),N.removeAttribute("id"),N.draggable=!1,N.style["will-change"]="",this._hideClone(),L(N,this.options.chosenClass,!1),b.clone=N),r.cloneId=bt(function(){K("clone",r),!b.eventCanceled&&(r.options.removeCloneOnHide||F.insertBefore(N,f),r._hideClone(),G({sortable:r,name:"clone"}))}),!t&&L(f,o.dragClass,!0),t?(ut=!0,r._loopId=setInterval(r._emulateDragOver,50)):(C(document,"mouseup",r._onDrop),C(document,"touchend",r._onDrop),C(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(r,i,f)),D(document,"drop",r),m(f,"transform","translateZ(0)")),Ne=!0,r._dragStartId=bt(r._dragStarted.bind(r,t,e)),D(document,"selectstart",r),Ye=!0,We&&m(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,r=e.target,i,o,s,a=this.options,l=a.group,c=b.active,u=ct===l,h=a.sort,d=$||c,p,g=this,v=!1;if(jt)return;function x(Le,cn){K(Le,g,ue({evt:e,isOwner:u,axis:p?"vertical":"horizontal",revert:s,dragRect:i,targetRect:o,canSort:h,fromSortable:d,target:r,completed:_,onMove:function(nr,un){return vt(F,t,f,i,nr,O(nr),e,un)},changed:M},cn))}function I(){x("dragOverAnimationCapture"),g.captureAnimationState(),g!==d&&d.captureAnimationState()}function _(Le){return x("dragOverCompleted",{insertion:Le}),Le&&(u?c._hideClone():c._showClone(g),g!==d&&(L(f,$?$.options.ghostClass:c.options.ghostClass,!1),L(f,a.ghostClass,!0)),$!==g&&g!==b.active?$=g:g===b.active&&$&&($=null),d===g&&(g._ignoreWhileAnimating=r),g.animateAll(function(){x("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(r===f&&!f.animated||r===t&&!r.animated)&&(ke=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(f.parentNode[V]._isOutsideThisEl(e.target),!Le&&Ie(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function M(){q=B(f),we=B(f,a.draggable),G({sortable:g,name:"change",toEl:t,newIndex:q,newDraggableIndex:we,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=te(r,a.draggable,t,!0),x("dragOver"),b.eventCanceled)return v;if(f.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||g._ignoreWhileAnimating===r)return _(!1);if(ut=!1,c&&!a.disabled&&(u?h||(s=R!==F):$===this||(this.lastPutMode=ct.checkPull(this,c,f,e))&&l.checkPut(this,c,f,e))){if(p=this._getDirection(e,r)==="vertical",i=O(f),x("dragOverValid"),b.eventCanceled)return v;if(s)return R=F,I(),this._hideClone(),x("revert"),b.eventCanceled||(xe?F.insertBefore(f,xe):F.appendChild(f)),_(!0);var T=Rt(t,a.draggable);if(!T||Si(e,p,this)&&!T.animated){if(T===f)return _(!1);if(T&&t===e.target&&(r=T),r&&(o=O(r)),vt(F,t,f,i,r,o,e,!!r)!==!1)return I(),T&&T.nextSibling?t.insertBefore(f,T.nextSibling):t.appendChild(f),R=t,M(),_(!0)}else if(T&&Ei(e,p,this)){var J=Me(t,0,a,!0);if(J===f)return _(!1);if(r=J,o=O(r),vt(F,t,f,i,r,o,e,!1)!==!1)return I(),t.insertBefore(f,J),R=t,M(),_(!0)}else if(r.parentNode===t){o=O(r);var Y=0,P,X=f.parentNode!==t,k=!gi(f.animated&&f.toRect||i,r.animated&&r.toRect||o,p),be=p?"top":"left",Z=kr(r,"top","top")||kr(f,"top","top"),ee=Z?Z.scrollTop:void 0;ke!==r&&(P=o[be],Ke=!1,dt=!k&&a.invertSwap||X),Y=wi(e,r,o,p,k?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,dt,ke===r);var se;if(Y!==0){var W=B(f);do W-=Y,se=R.children[W];while(se&&(m(se,"display")==="none"||se===E))}if(Y===0||se===r)return _(!1);ke=r,Xe=Y;var ae=r.nextElementSibling,re=!1;re=Y===1;var tt=vt(F,t,f,i,r,o,e,re);if(tt!==!1)return(tt===1||tt===-1)&&(re=tt===1),jt=!0,setTimeout(yi,30),I(),re&&!ae?t.appendChild(f):r.parentNode.insertBefore(f,re?ae:r),Z&&Lr(Z,0,ee-Z.scrollTop),R=f.parentNode,P!==void 0&&!dt&&(ft=Math.abs(P-O(r)[be])),M(),_(!0)}if(t.contains(f))return _(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){C(document,"mousemove",this._onTouchMove),C(document,"touchmove",this._onTouchMove),C(document,"pointermove",this._onTouchMove),C(document,"dragover",Ie),C(document,"mousemove",Ie),C(document,"touchmove",Ie)},_offUpEvents:function(){var e=this.el.ownerDocument;C(e,"mouseup",this._onDrop),C(e,"touchend",this._onDrop),C(e,"pointerup",this._onDrop),C(e,"touchcancel",this._onDrop),C(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;if(q=B(f),we=B(f,r.draggable),K("drop",this,{evt:e}),R=f&&f.parentNode,q=B(f),we=B(f,r.draggable),b.eventCanceled){this._nulling();return}Ne=!1,dt=!1,Ke=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Yt(this.cloneId),Yt(this._dragStartId),this.nativeDraggable&&(C(document,"drop",this),C(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),We&&m(document.body,"user-select",""),m(f,"transform",""),e&&(Ye&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),E&&E.parentNode&&E.parentNode.removeChild(E),(F===R||$&&$.lastPutMode!=="clone")&&N&&N.parentNode&&N.parentNode.removeChild(N),f&&(this.nativeDraggable&&C(f,"dragend",this),Gt(f),f.style["will-change"]="",Ye&&!Ne&&L(f,$?$.options.ghostClass:this.options.ghostClass,!1),L(f,this.options.chosenClass,!1),G({sortable:this,name:"unchoose",toEl:R,newIndex:null,newDraggableIndex:null,originalEvent:e}),F!==R?(q>=0&&(G({rootEl:R,name:"add",toEl:R,fromEl:F,originalEvent:e}),G({sortable:this,name:"remove",toEl:R,originalEvent:e}),G({rootEl:R,name:"sort",toEl:R,fromEl:F,originalEvent:e}),G({sortable:this,name:"sort",toEl:R,originalEvent:e})),$&&$.save()):q!==Fe&&q>=0&&(G({sortable:this,name:"update",toEl:R,originalEvent:e}),G({sortable:this,name:"sort",toEl:R,originalEvent:e})),b.active&&((q==null||q===-1)&&(q=Fe,we=Ge),G({sortable:this,name:"end",toEl:R,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){K("nulling",this),F=f=R=E=xe=N=lt=Se=_e=ie=Ye=q=we=Fe=Ge=ke=Xe=$=ct=b.dragged=b.ghost=b.clone=b.active=null,pt.forEach(function(e){e.checked=!0}),pt.length=Wt=$t=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":f&&(this._onDragOver(e),bi(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,r=this.el.children,i=0,o=r.length,s=this.options;i<o;i++)t=r[i],te(t,s.draggable,this.el,!1)&&e.push(t.getAttribute(s.dataIdAttr)||Ti(t));return e},sort:function(e,t){var r={},i=this.el;this.toArray().forEach(function(o,s){var a=i.children[s];te(a,this.options.draggable,i,!1)&&(r[o]=a)},this),t&&this.captureAnimationState(),e.forEach(function(o){r[o]&&(i.removeChild(r[o]),i.appendChild(r[o]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return te(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(t===void 0)return r[e];var i=Ve.modifyOption(this,e,t);typeof i!="undefined"?r[e]=i:r[e]=t,e==="group"&&Yr(r)},destroy:function(){K("destroy",this);var e=this.el;e[V]=null,C(e,"mousedown",this._onTapStart),C(e,"touchstart",this._onTapStart),C(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(C(e,"dragover",this),C(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ht.splice(ht.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Se){if(K("hideClone",this),b.eventCanceled)return;m(N,"display","none"),this.options.removeCloneOnHide&&N.parentNode&&N.parentNode.removeChild(N),Se=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Se){if(K("showClone",this),b.eventCanceled)return;f.parentNode==F&&!this.options.group.revertClone?F.insertBefore(N,f):xe?F.insertBefore(N,xe):F.appendChild(N),this.options.group.revertClone&&this.animate(f,N),m(N,"display",""),Se=!1}}};function bi(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function vt(n,e,t,r,i,o,s,a){var l,c=n[V],u=c.options.onMove,h;return window.CustomEvent&&!ve&&!He?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=n,l.dragged=t,l.draggedRect=r,l.related=i||e,l.relatedRect=o||O(e),l.willInsertAfter=a,l.originalEvent=s,n.dispatchEvent(l),u&&(h=u.call(c,l,s)),h}function Gt(n){n.draggable=!1}function yi(){jt=!1}function Ei(n,e,t){var r=O(Me(t.el,0,t.options,!0)),i=Hr(t.el,t.options,E),o=10;return e?n.clientX<i.left-o||n.clientY<r.top&&n.clientX<r.right:n.clientY<i.top-o||n.clientY<r.bottom&&n.clientX<r.left}function Si(n,e,t){var r=O(Rt(t.el,t.options.draggable)),i=Hr(t.el,t.options,E),o=10;return e?n.clientX>i.right+o||n.clientY>r.bottom&&n.clientX>r.left:n.clientY>i.bottom+o||n.clientX>r.right&&n.clientY>r.top}function wi(n,e,t,r,i,o,s,a){var l=r?n.clientY:n.clientX,c=r?t.height:t.width,u=r?t.top:t.left,h=r?t.bottom:t.right,d=!1;if(!s){if(a&&ft<c*i){if(!Ke&&(Xe===1?l>u+c*o/2:l<h-c*o/2)&&(Ke=!0),Ke)d=!0;else if(Xe===1?l<u+ft:l>h-ft)return-Xe}else if(l>u+c*(1-i)/2&&l<h-c*(1-i)/2)return Ci(e)}return d=d||s,d&&(l<u+c*o/2||l>h-c*o/2)?l>u+c/2?1:-1:0}function Ci(n){return B(f)<B(n)?1:-1}function Ti(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,r=0;t--;)r+=e.charCodeAt(t);return r.toString(36)}function Di(n){pt.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var r=e[t];r.checked&&pt.push(r)}}function bt(n){return setTimeout(n,0)}function Yt(n){return clearTimeout(n)}gt&&D(document,"touchmove",function(n){(b.active||Ne)&&n.cancelable&&n.preventDefault()});b.utils={on:D,off:C,css:m,find:Nr,is:function(e,t){return!!te(e,t,e,!1)},extend:li,throttle:Pr,closest:te,toggleClass:L,clone:Lt,index:B,nextTick:bt,cancelNextTick:Yt,detectDirection:Gr,getChild:Me};b.get=function(n){return n[V]};b.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(b.utils=ue(ue({},b.utils),r.utils)),Ve.mount(r)})};b.create=function(n,e){return new b(n,e)};b.version=oi;var H=[],ze,Xt,Kt=!1,zt,Ut,yt,Ue;function xi(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?D(document,"dragover",this._handleAutoScroll):this.options.supportPointer?D(document,"pointermove",this._handleFallbackAutoScroll):r.touches?D(document,"touchmove",this._handleFallbackAutoScroll):D(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?C(document,"dragover",this._handleAutoScroll):(C(document,"pointermove",this._handleFallbackAutoScroll),C(document,"touchmove",this._handleFallbackAutoScroll),C(document,"mousemove",this._handleFallbackAutoScroll)),zr(),Et(),ci()},nulling:function(){yt=Xt=ze=Kt=Ue=zt=Ut=null,H.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var i=this,o=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(o,s);if(yt=t,r||this.options.forceAutoScrollFallback||He||ve||We){qt(t,this.options,a,r);var l=Ee(a,!0);Kt&&(!Ue||o!==zt||s!==Ut)&&(Ue&&zr(),Ue=setInterval(function(){var c=Ee(document.elementFromPoint(o,s),!0);c!==l&&(l=c,Et()),qt(t,i.options,c,r)},10),zt=o,Ut=s)}else{if(!this.options.bubbleScroll||Ee(a,!0)===he()){Et();return}qt(t,this.options,Ee(a,!1),!1)}}},ne(n,{pluginName:"scroll",initializeByDefault:!0})}function Et(){H.forEach(function(n){clearInterval(n.pid)}),H=[]}function zr(){clearInterval(Ue)}var qt=Pr(function(n,e,t,r){if(!!e.scroll){var i=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,s=e.scrollSensitivity,a=e.scrollSpeed,l=he(),c=!1,u;Xt!==t&&(Xt=t,Et(),ze=e.scroll,u=e.scrollFn,ze===!0&&(ze=Ee(t,!0)));var h=0,d=ze;do{var p=d,g=O(p),v=g.top,x=g.bottom,I=g.left,_=g.right,M=g.width,T=g.height,J=void 0,Y=void 0,P=p.scrollWidth,X=p.scrollHeight,k=m(p),be=p.scrollLeft,Z=p.scrollTop;p===l?(J=M<P&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible"),Y=T<X&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")):(J=M<P&&(k.overflowX==="auto"||k.overflowX==="scroll"),Y=T<X&&(k.overflowY==="auto"||k.overflowY==="scroll"));var ee=J&&(Math.abs(_-i)<=s&&be+M<P)-(Math.abs(I-i)<=s&&!!be),se=Y&&(Math.abs(x-o)<=s&&Z+T<X)-(Math.abs(v-o)<=s&&!!Z);if(!H[h])for(var W=0;W<=h;W++)H[W]||(H[W]={});(H[h].vx!=ee||H[h].vy!=se||H[h].el!==p)&&(H[h].el=p,H[h].vx=ee,H[h].vy=se,clearInterval(H[h].pid),(ee!=0||se!=0)&&(c=!0,H[h].pid=setInterval(function(){r&&this.layer===0&&b.active._onTouchMove(yt);var ae=H[this.layer].vy?H[this.layer].vy*a:0,re=H[this.layer].vx?H[this.layer].vx*a:0;typeof u=="function"&&u.call(b.dragged.parentNode[V],re,ae,n,yt,H[this.layer].el)!=="continue"||Lr(H[this.layer].el,re,ae)}.bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==l&&(d=Ee(d,!1)));Kt=c}},30),Ur=function(e){var t=e.originalEvent,r=e.putSortable,i=e.dragEl,o=e.activeSortable,s=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(!!t){var c=r||o;a();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,h=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(h)&&(s("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function Qt(){}Qt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Me(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:Ur};ne(Qt,{pluginName:"revertOnSpill"});function Jt(){}Jt.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:Ur};ne(Jt,{pluginName:"removeOnSpill"});var S=[],Q=[],qe,oe,Qe=!1,z=!1,Re=!1,A,Je,St;function qr(){function n(e){for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this));e.options.avoidImplicitDeselect||(e.options.supportPointer?D(document,"pointerup",this._deselectMultiDrag):(D(document,"mouseup",this._deselectMultiDrag),D(document,"touchend",this._deselectMultiDrag))),D(document,"keydown",this._checkKeyDown),D(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(i,o){var s="";S.length&&oe===e?S.forEach(function(a,l){s+=(l?", ":"")+a.textContent}):s=o.textContent,i.setData("Text",s)}}}return n.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var r=t.dragEl;A=r},delayEnded:function(){this.isMultiDrag=~S.indexOf(A)},setupClone:function(t){var r=t.sortable,i=t.cancel;if(!!this.isMultiDrag){for(var o=0;o<S.length;o++)Q.push(Lt(S[o])),Q[o].sortableIndex=S[o].sortableIndex,Q[o].draggable=!1,Q[o].style["will-change"]="",L(Q[o],this.options.selectedClass,!1),S[o]===A&&L(Q[o],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(t){var r=t.sortable,i=t.rootEl,o=t.dispatchSortableEvent,s=t.cancel;!this.isMultiDrag||this.options.removeCloneOnHide||S.length&&oe===r&&(Qr(!0,i),o("clone"),s())},showClone:function(t){var r=t.cloneNowShown,i=t.rootEl,o=t.cancel;!this.isMultiDrag||(Qr(!1,i),Q.forEach(function(s){m(s,"display","")}),r(),St=!1,o())},hideClone:function(t){var r=this,i=t.sortable,o=t.cloneNowHidden,s=t.cancel;!this.isMultiDrag||(Q.forEach(function(a){m(a,"display","none"),r.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),o(),St=!0,s())},dragStartGlobal:function(t){var r=t.sortable;!this.isMultiDrag&&oe&&oe.multiDrag._deselectMultiDrag(),S.forEach(function(i){i.sortableIndex=B(i)}),S=S.sort(function(i,o){return i.sortableIndex-o.sortableIndex}),Re=!0},dragStarted:function(t){var r=this,i=t.sortable;if(!!this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){S.forEach(function(s){s!==A&&m(s,"position","absolute")});var o=O(A,!1,!0,!0);S.forEach(function(s){s!==A&&Br(s,o)}),z=!0,Qe=!0}i.animateAll(function(){z=!1,Qe=!1,r.options.animation&&S.forEach(function(s){Bt(s)}),r.options.sort&&wt()})}},dragOver:function(t){var r=t.target,i=t.completed,o=t.cancel;z&&~S.indexOf(r)&&(i(!1),o())},revert:function(t){var r=t.fromSortable,i=t.rootEl,o=t.sortable,s=t.dragRect;S.length>1&&(S.forEach(function(a){o.addAnimationState({target:a,rect:z?O(a):s}),Bt(a),a.fromRect=s,r.removeAnimationState(a)}),z=!1,_i(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(t){var r=t.sortable,i=t.isOwner,o=t.insertion,s=t.activeSortable,a=t.parentEl,l=t.putSortable,c=this.options;if(o){if(i&&s._hideClone(),Qe=!1,c.animation&&S.length>1&&(z||!i&&!s.options.sort&&!l)){var u=O(A,!1,!0,!0);S.forEach(function(d){d!==A&&(Br(d,u),a.appendChild(d))}),z=!0}if(!i)if(z||wt(),S.length>1){var h=St;s._showClone(r),s.options.animation&&!St&&h&&Q.forEach(function(d){s.addAnimationState({target:d,rect:Je}),d.fromRect=Je,d.thisAnimationDuration=null})}else s._showClone(r)}},dragOverAnimationCapture:function(t){var r=t.dragRect,i=t.isOwner,o=t.activeSortable;if(S.forEach(function(a){a.thisAnimationDuration=null}),o.options.animation&&!i&&o.multiDrag.isMultiDrag){Je=ne({},r);var s=De(A,!0);Je.top-=s.f,Je.left-=s.e}},dragOverAnimationComplete:function(){z&&(z=!1,wt())},drop:function(t){var r=t.originalEvent,i=t.rootEl,o=t.parentEl,s=t.sortable,a=t.dispatchSortableEvent,l=t.oldIndex,c=t.putSortable,u=c||this.sortable;if(!!r){var h=this.options,d=o.children;if(!Re)if(h.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),L(A,h.selectedClass,!~S.indexOf(A)),~S.indexOf(A))S.splice(S.indexOf(A),1),qe=null,je({sortable:s,rootEl:i,name:"deselect",targetEl:A,originalEvent:r});else{if(S.push(A),je({sortable:s,rootEl:i,name:"select",targetEl:A,originalEvent:r}),r.shiftKey&&qe&&s.el.contains(qe)){var p=B(qe),g=B(A);if(~p&&~g&&p!==g){var v,x;for(g>p?(x=p,v=g):(x=g,v=p+1);x<v;x++)~S.indexOf(d[x])||(L(d[x],h.selectedClass,!0),S.push(d[x]),je({sortable:s,rootEl:i,name:"select",targetEl:d[x],originalEvent:r}))}}else qe=A;oe=u}if(Re&&this.isMultiDrag){if(z=!1,(o[V].options.sort||o!==i)&&S.length>1){var I=O(A),_=B(A,":not(."+this.options.selectedClass+")");if(!Qe&&h.animation&&(A.thisAnimationDuration=null),u.captureAnimationState(),!Qe&&(h.animation&&(A.fromRect=I,S.forEach(function(T){if(T.thisAnimationDuration=null,T!==A){var J=z?O(T):I;T.fromRect=J,u.addAnimationState({target:T,rect:J})}})),wt(),S.forEach(function(T){d[_]?o.insertBefore(T,d[_]):o.appendChild(T),_++}),l===B(A))){var M=!1;S.forEach(function(T){if(T.sortableIndex!==B(T)){M=!0;return}}),M&&(a("update"),a("sort"))}S.forEach(function(T){Bt(T)}),u.animateAll()}oe=u}(i===o||c&&c.lastPutMode!=="clone")&&Q.forEach(function(T){T.parentNode&&T.parentNode.removeChild(T)})}},nullingGlobal:function(){this.isMultiDrag=Re=!1,Q.length=0},destroyGlobal:function(){this._deselectMultiDrag(),C(document,"pointerup",this._deselectMultiDrag),C(document,"mouseup",this._deselectMultiDrag),C(document,"touchend",this._deselectMultiDrag),C(document,"keydown",this._checkKeyDown),C(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(typeof Re!="undefined"&&Re)&&oe===this.sortable&&!(t&&te(t.target,this.options.draggable,this.sortable.el,!1))&&!(t&&t.button!==0))for(;S.length;){var r=S[0];L(r,this.options.selectedClass,!1),S.shift(),je({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r,originalEvent:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},ne(n,{pluginName:"multiDrag",utils:{select:function(t){var r=t.parentNode[V];!r||!r.options.multiDrag||~S.indexOf(t)||(oe&&oe!==r&&(oe.multiDrag._deselectMultiDrag(),oe=r),L(t,r.options.selectedClass,!0),S.push(t))},deselect:function(t){var r=t.parentNode[V],i=S.indexOf(t);!r||!r.options.multiDrag||!~i||(L(t,r.options.selectedClass,!1),S.splice(i,1))}},eventProperties:function(){var t=this,r=[],i=[];return S.forEach(function(o){r.push({multiDragElement:o,index:o.sortableIndex});var s;z&&o!==A?s=-1:z?s=B(o,":not(."+t.options.selectedClass+")"):s=B(o),i.push({multiDragElement:o,index:s})}),{items:ei(S),clones:[].concat(Q),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),t==="ctrl"?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function _i(n,e){S.forEach(function(t,r){var i=e.children[t.sortableIndex+(n?Number(r):0)];i?e.insertBefore(t,i):e.appendChild(t)})}function Qr(n,e){Q.forEach(function(t,r){var i=e.children[t.sortableIndex+(n?Number(r):0)];i?e.insertBefore(t,i):e.appendChild(t)})}function wt(){S.forEach(function(n){n!==A&&n.parentNode&&n.parentNode.removeChild(n)})}b.mount(new xi);b.mount(Jt,Qt);var Ae=b;var Ce=rt(require("obsidian")),Jr=new Intl.Collator(void 0,{usage:"sort",sensitivity:"base",numeric:!0}).compare;var Zr=i18next.t.bind(i18next),Ii="up-and-down-arrows",Ai={alphabetical:"plugins.file-explorer.label-sort-a-to-z",alphabeticalReverse:"plugins.file-explorer.label-sort-z-to-a",byModifiedTime:"plugins.file-explorer.label-sort-new-to-old",byModifiedTimeReverse:"plugins.file-explorer.label-sort-old-to-new",byCreatedTime:"plugins.file-explorer.label-sort-created-new-to-old",byCreatedTimeReverse:"plugins.file-explorer.label-sort-created-old-to-new",custom:"Custom"},Mi=[["alphabetical","alphabeticalReverse"],["byModifiedTime","byModifiedTimeReverse"],["byCreatedTime","byCreatedTimeReverse"],["custom"]],en=function(n,e){let t=this.view,r=this.file.children.slice();r.sort(function(o,s){let a,l;if(e&&((a=o instanceof Ce.TFolder)||(l=s instanceof Ce.TFolder)))return a&&!l?1:l&&!a?-1:Jr(o.name,s.name);{if(!n)return Jr(o.name,s.name);let c=n.indexOf(o.path),u=n.indexOf(s.path);return(c>-1?c:1/0)-(u>-1?u:1/0)}});let i=r.map(o=>t.fileItems[o.path]).filter(o=>o);Ce.requireApiVersion&&(0,Ce.requireApiVersion)("0.15.0")?this.vChildren.setChildren(i):this.children=i},tn=function(n,e,t,r,i){let o=this,s=this.addNavButton(Ii,Zr("plugins.file-explorer.action-change-sort"),function(a){a.preventDefault();let l=new Ce.Menu;for(let c=n.sortOrder,u=0,h=Mi;u<h.length;u++){for(let d=function(v){let x=Zr(Ai[v]);l.addItem(function(I){return I.setTitle(x).setActive(v===c).onClick(function(){v!==c&&(s.setAttribute("data-sort-method",v),o.app.workspace.trigger("file-explorer-sort-change",v)),r(v)})})},p=0,g=h[u];p<g.length;p++)d(g[p]);l.addSeparator()}l.showAtMouseEvent(a)});return setTimeout(()=>{s.setAttribute("data-sort-method",n.sortOrder)},100),this.addNavButton("three-horizontal-bars","Drag to rearrange",function(a){a.preventDefault();let l=!this.hasClass("is-active");this.toggleClass("is-active",l),o.app.workspace.trigger("file-explorer-draggable-change",l)}).addClass("drag-to-rearrange"),this.addNavButton("search","Filter items",function(a){var u,h;a.preventDefault();let l=!this.hasClass("is-active");this.toggleClass("is-active",l);let c=document.body.querySelector('.workspace-leaf-content[data-type="file-explorer"] .search-input-container > input');c&&!l?((u=c.parentElement)==null||u.hide(),c.value="",c.dispatchEvent(new Event("input"))):((h=c==null?void 0:c.parentElement)==null||h.show(),c==null||c.focus()),o.app.workspace.trigger("file-explorer-draggable-change",l)}),s};var Pe=rt(require("obsidian")),rn={statusBarOrder:[],ribbonBarOrder:[],fileExplorerOrder:{},actionBarOrder:{},autoHide:!1,autoHideDelay:2e3,dragDelay:200,sortOrder:"alphabetical"},Zt=class extends Pe.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}hide(){}display(){let{containerEl:e}=this;e.empty(),new Pe.Setting(e).setName("Auto Collapse").setDesc("Automatically hide ribbon and status bar items once your mouse leaves the icon container").addToggle(t=>t.setValue(this.plugin.settings.autoHide).onChange(r=>{this.plugin.settings.autoHide=r,this.plugin.saveSettings()})),new Pe.Setting(e).setName("Auto Collapse Delay").setDesc("How long to wait before auto collapsing hidden icons on the ribbon and status bar").addText(t=>{t.setPlaceholder(String(2e3)),t.inputEl.type="number",t.setValue(String(this.plugin.settings.autoHideDelay)),t.onChange(r=>ye(this,null,function*(){this.plugin.settings.autoHideDelay=Number(r),this.plugin.saveSettings()}))}),new Pe.Setting(e).setName("Drag Start Delay (ms)").setDesc("How long to wait before triggering the drag behavior after clicking. \u26A0\uFE0F Requires an app restart.").addText(t=>{t.setPlaceholder(String(200)),t.inputEl.type="number",t.setValue(String(this.plugin.settings.dragDelay)),t.onChange(r=>ye(this,null,function*(){this.plugin.settings.dragDelay=Number(r),this.plugin.saveSettings()}))})}};var er=rt(require("obsidian"));function nn(n,e){for(var t=[];n=n.previousSibling;)n.nodeType!==3&&(!e||e(n))&&t.push(n);return t}function on(n,e){for(var t=[];n=n.nextSibling;)n.nodeType!==3&&(!e||e(n))&&t.push(n);return t}function sn(n,e){var i,o;let t=(e==null?void 0:e.useClass)?Array.from(n.classList).filter(s=>!s.startsWith("is-")).sort().join(" "):"",r=((e==null?void 0:e.useTag)?n.tagName:"")+((e==null?void 0:e.useClass)?t:"")+((e==null?void 0:e.useText)?n.textContent:"")+((e==null?void 0:e.useAria)?n.getAttr("aria-label"):"")+((e==null?void 0:e.useIcon)?(o=(i=n.querySelector("svg"))==null?void 0:i.className)==null?void 0:o.baseVal:"");return Oi(r)}var Oi=function(n,e=0){let t=3735928559^e,r=1103547991^e;for(let i=0,o;i<n.length;i++)o=n.charCodeAt(i),t=Math.imul(t^o,2654435761),r=Math.imul(r^o,1597334677);return t=Math.imul(t^t>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),4294967296*(2097151&r)+(t>>>0).toString()};function Ct(n,e,t,r=1){return n.splice(t,0,...n.splice(e,r)),n}var Ze=n=>{let e=[],t=er.requireApiVersion&&(0,er.requireApiVersion)("0.15.0"),r;return t?r=n.reduce((i,o)=>{var s;return((s=o.vChildren)==null?void 0:s._children)?e=[...e,...o.vChildren._children]:i.push(o),i},[]).concat(e.length?Ze(e):e):r=n.reduce((i,o)=>(o.children?e=[...e,...o.children]:i.push(o),i),[]).concat(e.length?Ze(e):e),r},tr=(n,e="suggestion-highlight")=>{let t=(i,o,s)=>{let a=o.split("."),l;for(l=0;l<a.length-1;l++)i=i[a[l]];i[a[l]]=s},r=(i,o=[])=>o.reduce((a,[l,c])=>(a[l]=`<span class="${e}">${a[l]}`,a[c]=`${a[c]}</span>`,a),i.split("")).join("");return n.filter(({matches:i})=>i&&i.length).map(({item:i,matches:o})=>{let s=de({},i);return o.forEach(a=>{var l;s.innerEl.origContent||(s.innerEl.origContent=s.innerEl.textContent),t(s,"innerEl.innerHTML",r(a.value,a.indices)),(l=s.innerEl)==null||l.addClass("has-matches")}),s})};function an(n){return typeof n=="string"||n instanceof String?n.replace(/.md$/,""):n}function ln(n,e){var t=ce.config.getFn(n,e);return Array.isArray(t)?t.map(r=>an(r)):an(t)}Ae.mount(new qr);var Fi="body > div.app-container div.status-bar",Ni="body > div.app-container div.side-dock-actions",co=(w.Platform.isMobile,200),et=500,rr=class extends w.Plugin{constructor(){super(...arguments);this.fileExplorerFilter=function(e){var i,o,s,a;let t=w.requireApiVersion&&(0,w.requireApiVersion)("0.15.0");if(!e)return;let r=t?(i=this.rootEl)==null?void 0:i.vChildren._children:(o=this.rootEl)==null?void 0:o.children;if(!!r)if(((s=this.filter)==null?void 0:s.length)>=1){this.filtered||(this.rootEl._children=r,this.filtered=!0);let l={includeScore:!0,includeMatches:!0,useExtendedSearch:!0,getFn:ln,threshold:.1,ignoreLocation:!0,keys:["file.path"]},c=Ze(this.rootEl._children),u=new ce(c,l),h=200,d=u.search(this.filter).slice(0,h);t?this.rootEl.vChildren._children=tr(d):this.rootEl.children=tr(d)}else((a=this.filter)==null?void 0:a.length)<1&&this.filtered&&(this.rootEl._children&&(t?this.rootEl.vChildren._children=this.rootEl._children:this.rootEl.children=this.rootEl._children),Ze(this.rootEl._children).map(c=>{c.innerEl.origContent&&(c.innerEl.setText(c.innerEl.origContent),delete c.innerEl.origContent,c.innerEl.removeClass("has-matches"))}),this.filtered=!1)}}onload(){return ye(this,null,function*(){yield this.loadSettings(),this.registerMonkeyPatches(),this.registerEventHandlers(),this.registerSettingsTab(),this.initialize()})}loadSettings(){return ye(this,null,function*(){this.settings=Object.assign({},rn,yield this.loadData())})}saveSettings(){return ye(this,null,function*(){yield this.saveData(this.settings)})}patchFileExplorerFolder(){let e=this,t=e.app.workspace.getLeaf(!0),r=e.app.viewRegistry.viewByType["file-explorer"](t),i=new w.TFolder(w.Vault,""),o=r.createFolderDom(i).constructor;this.register(ge(o.prototype,{sort(s){return function(...a){let l=e.settings.fileExplorerOrder[this.file.path];return e.settings.sortOrder==="custom"?en.call(this,l,...a):s.call(this,...a)}}})),t.detach()}initialize(){this.app.workspace.onLayoutReady(()=>{this.patchFileExplorerFolder(),setTimeout(()=>{if(w.Platform.isDesktop&&(this.insertSeparator(Fi,"status-bar-item",!0,16),this.setStatusBarSorter(),w.requireApiVersion&&!(0,w.requireApiVersion)("0.15.3"))){let e=this.app.workspace.leftSplit.children,t=this.app.workspace.rightSplit.children;e.concat(t).forEach(r=>{r.hasOwnProperty("tabsInnerEl")&&!r.iconSorter&&(r.iconSorter=this.setTabBarSorter(r.tabsInnerEl,r))})}this.setFileExplorerSorter(),this.insertSeparator(Ni,"side-dock-ribbon-action",!1,18),this.setRibbonBarSorter(),this.app.workspace.iterateRootLeaves(e=>{var t,r;((t=e==null?void 0:e.view)==null?void 0:t.hasOwnProperty("actionsEl"))&&!((r=e==null?void 0:e.view)==null?void 0:r.hasOwnProperty("iconSorter"))&&(e.view.iconSorter=this.setViewActionSorter(e.view.actionsEl,e.view))})},w.Platform.isMobile?3e3:400)})}registerSettingsTab(){this.settingsTab=new Zt(this.app,this),this.addSettingTab(this.settingsTab)}clearFileExplorerFilter(){let e=this.getFileExplorer(),t=document.body.querySelector('.workspace-leaf-content[data-type="file-explorer"] .search-input-container > input');t&&(t.value=""),e.tree.infinityScroll.filter="",e.tree.infinityScroll.compute()}registerEventHandlers(){this.registerEvent(this.app.workspace.on("file-explorer-draggable-change",e=>{this.toggleFileExplorerSorters(e)})),this.registerEvent(this.app.workspace.on("file-explorer-sort-change",e=>{this.settings.sortOrder=e,this.saveSettings(),e==="custom"?setTimeout(()=>{this.setFileExplorerSorter()},10):this.cleanupFileExplorerSorters()})),this.registerEvent(this.app.workspace.on("file-explorer-load",e=>{setTimeout(()=>{this.setFileExplorerSorter(e)},1e3)})),this.registerEvent(this.app.workspace.on("bartender-leaf-split",(e,t)=>{let r=t.tabsInnerEl;t.type==="tabs"&&t instanceof w.WorkspaceTabs&&w.requireApiVersion&&!(0,w.requireApiVersion)("0.15.3")&&this.setTabBarSorter(r,t)})),this.registerEvent(this.app.workspace.on("ribbon-bar-updated",()=>{setTimeout(()=>{this.settings.ribbonBarOrder&&this.ribbonBarSorter&&(this.setElementIDs(this.ribbonBarSorter.el,{useClass:!0,useAria:!0,useIcon:!0}),this.ribbonBarSorter.sort(this.settings.ribbonBarOrder))},0)})),this.registerEvent(this.app.workspace.on("status-bar-updated",()=>{setTimeout(()=>{this.settings.statusBarOrder&&this.statusBarSorter&&(this.setElementIDs(this.statusBarSorter.el,{useClass:!0,useIcon:!0}),this.statusBarSorter.sort(this.settings.statusBarOrder))},0)}))}registerMonkeyPatches(){let e=this;if(this.register(ge(this.app.viewRegistry.constructor.prototype,{registerView(t){return function(r,i,...o){return e.app.workspace.trigger("view-registered",r,i),t.call(this,r,i,...o)}}})),this.app.workspace.layoutReady){let t=this.getFileExplorer();this.patchFileExplorer(t)}else{let t=this.app.workspace.on("view-registered",(r,i)=>{if(r!=="file-explorer")return;this.app.workspace.offref(t);let o=new w.WorkspaceLeaf(e.app),s=i(o);this.patchFileExplorer(s)})}this.register(ge(w.View.prototype,{onunload(t){return function(...r){try{this.iconSorter&&(this.iconSorter.destroy(),this.iconSorter=null)}catch(i){}return t.call(this,...r)}},onload(t){return function(...r){return setTimeout(()=>{if(this.app.workspace.layoutReady)try{this.leaf.parentSplit instanceof w.WorkspaceTabs||this.hasOwnProperty("actionsEl")&&!this.iconSorter&&(this.iconSorter=e.setViewActionSorter(this.actionsEl,this))}catch(i){}},200),t.call(this,...r)}}})),w.Platform.isDesktop&&this.register(ge(HTMLDivElement.prototype,{addEventListener(t){return function(r,i,o){if(r==="mousedown"&&i instanceof Function&&this.hasClass("workspace-tab-header")){let a=i;i=l=>{l instanceof MouseEvent&&((l==null?void 0:l.altKey)||(l==null?void 0:l.metaKey))||a(l)}}return t.call(this,r,i,o)}}})),this.register(ge(w.Workspace.prototype,{splitLeaf(t){return function(r,i,o,s,...a){let l=t.call(this,r,i,o,s,...a);return this.trigger("bartender-leaf-split",r,i),l}},changeLayout(t){return function(r,...i){return ye(this,null,function*(){let o=yield t.call(this,r,...i);return this.trigger("bartender-workspace-change"),o})}}})),this.register(ge(w.Plugin.prototype,{addStatusBarItem(t){return function(...r){let i=t.call(this,...r);return this.app.workspace.trigger("status-bar-updated"),i}},addRibbonIcon(t){return function(...r){let i=t.call(this,...r);return this.app.workspace.trigger("ribbon-bar-updated"),i}}}))}patchFileExplorer(e){let t=this,r=this.settings;if(e){let i=e.tree.infinityScroll.constructor;this.register(()=>this.clearFileExplorerFilter()),this.register(ge(i.prototype,{compute(o){return function(...s){try{this.scrollEl.hasClass("nav-files-container")&&t.fileExplorerFilter.call(this,e)}catch(l){console.log(l)}return o.call(this,...s)}}})),this.register(ge(e.headerDom.constructor.prototype,{addSortButton(o){return function(...s){var a,l,c;return((c=(l=(a=this.navHeaderEl)==null?void 0:a.parentElement)==null?void 0:l.dataset)==null?void 0:c.type)==="file-explorer"?(t.setFileExplorerFilter(this),tn.call(this,r,...s)):o.call(this,...s)}}}))}}insertSeparator(e,t,r,i=16){document.body.querySelectorAll(e).forEach(s=>{let a=r?nn:on;if(s){let l=s.createDiv(`${t} separator`);r&&s.prepend(l);let c=l.createDiv("glyph");(0,w.setIcon)(c,"plus-with-circle",i),l.addClass("is-collapsed"),this.register(()=>l.detach());let h;l.onClickEvent(d=>{l.hasClass("is-collapsed")?(Array.from(s.children).forEach(p=>p.removeClass("is-hidden")),l.removeClass("is-collapsed")):(a(l).forEach(p=>p.addClass("is-hidden")),l.addClass("is-collapsed"))}),s.onmouseenter=d=>{h&&clearTimeout(h)},s.onmouseleave=d=>{this.settings.autoHide&&(h=setTimeout(()=>{a(l).forEach(p=>p.addClass("is-hidden")),l.addClass("is-collapsed")},this.settings.autoHideDelay))},setTimeout(()=>{a(l).forEach(d=>d.addClass("is-hidden")),l.addClass("is-collapsed")},0)}})}setElementIDs(e,t){Array.from(e.children).forEach(r=>{r instanceof HTMLElement&&(r.getAttribute("data-id")||r.setAttribute("data-id",sn(r,t)))})}setTabBarSorter(e,t){return this.setElementIDs(e,{useClass:!0,useIcon:!0}),Ae.create(e,{group:"leftTabBar",dataIdAttr:"data-id",chosenClass:"bt-sortable-chosen",delay:w.Platform.isMobile?200:this.settings.dragDelay,dropBubble:!1,dragoverBubble:!1,animation:et,onChoose:()=>{var i;return(i=e.parentElement)==null?void 0:i.addClass("is-dragging")},onUnchoose:()=>{var i;return(i=e.parentElement)==null?void 0:i.removeClass("is-dragging")},onStart:()=>{var i;document.body.addClass("is-dragging"),(i=e.querySelector(".separator"))==null||i.removeClass("is-collapsed"),Array.from(e.children).forEach(o=>o.removeClass("is-hidden"))},onEnd:i=>{document.body.removeClass("is-dragging"),i.oldIndex!==void 0&&i.newIndex!==void 0&&(Ct(t.children,i.oldIndex,i.newIndex),t.currentTab=i.newIndex,t.recomputeChildrenDimensions()),this.app.workspace.requestSaveLayout()}})}setStatusBarSorter(){let e=document.body.querySelector("body > div.app-container > div.status-bar");e&&(this.setElementIDs(e,{useClass:!0,useAria:!0,useIcon:!0}),this.statusBarSorter=Ae.create(e,{group:"statusBar",dataIdAttr:"data-id",chosenClass:"bt-sortable-chosen",delay:w.Platform.isMobile?200:this.settings.dragDelay,animation:et,onChoose:()=>{Array.from(e.children).forEach(t=>t.removeClass("is-hidden"))},onStart:()=>{var t;(t=e.querySelector(".separator"))==null||t.removeClass("is-collapsed"),Array.from(e.children).forEach(r=>r.removeClass("is-hidden"))},store:{get:t=>this.settings.statusBarOrder,set:t=>{this.settings.statusBarOrder=t.toArray(),this.saveSettings()}}}))}setViewActionSorter(e,t){if(this.setElementIDs(e,{useClass:!0,useIcon:!0}),Object.values(e).find(s=>s==null?void 0:s.hasOwnProperty("nativeDraggable")))return;let i=(t==null?void 0:t.getViewType())||"unknown";return new Ae(e,{group:"actionBar",dataIdAttr:"data-id",chosenClass:"bt-sortable-chosen",delay:w.Platform.isMobile?200:this.settings.dragDelay,sort:!0,animation:et,onStart:()=>{var s;(s=e.querySelector(".separator"))==null||s.removeClass("is-collapsed"),Array.from(e.children).forEach(a=>a.removeClass("is-hidden"))},store:{get:()=>this.settings.actionBarOrder[i],set:s=>{this.settings.actionBarOrder[i]=s.toArray(),this.saveSettings()}}})}setRibbonBarSorter(){let e=document.body.querySelector("body > div.app-container div.side-dock-actions");e&&(this.setElementIDs(e,{useClass:!0,useAria:!0,useIcon:!0}),this.ribbonBarSorter=Ae.create(e,{group:"ribbonBar",dataIdAttr:"data-id",delay:w.Platform.isMobile?200:this.settings.dragDelay,chosenClass:"bt-sortable-chosen",animation:et,onChoose:()=>{Array.from(e.children).forEach(t=>t.removeClass("is-hidden"))},onStart:()=>{var t;(t=e.querySelector(".separator"))==null||t.removeClass("is-collapsed"),Array.from(e.children).forEach(r=>r.removeClass("is-hidden"))},store:{get:t=>this.settings.ribbonBarOrder,set:t=>{this.settings.ribbonBarOrder=t.toArray(),this.saveSettings()}}}))}setFileExplorerFilter(e){let t=e.navHeaderEl;if(t){let r=t.createDiv("search-input-container");t.insertAdjacentElement("afterend",r);let i=r.createEl("input");i.placeholder="Type to filter...",i.type="text",r.hide();let o=new w.Scope(this.app.scope);i.onfocus=()=>{this.app.keymap.pushScope(o)},i.onblur=()=>{this.app.keymap.popScope(o)},i.oninput=a=>{let l=this.getFileExplorer();a.target instanceof HTMLInputElement&&(a.target.value.length?s.show():s.hide(),l.tree.infinityScroll.filter=a.target.value),l.tree.infinityScroll.compute()};let s=r.createDiv("search-input-clear-button",function(a){a.addEventListener("click",function(){i.value="",s.hide(),i.focus(),i.dispatchEvent(new Event("input"))}),a.hide()})}}setFileExplorerSorter(e){var r;if(e||(e=this.getFileExplorer()),!e||this.settings.sortOrder!=="custom"||e.hasCustomSorter)return;let t=this.getRootFolders(e);if(!(!t||!t.length))for(let i of t){let o=i==null?void 0:i.childrenEl;if(!o)continue;let s;e.hasCustomSorter=!0;let a=!!((r=document.body.querySelector("div.nav-action-button.drag-to-rearrange"))==null?void 0:r.hasClass("is-active"));i.sorter=Ae.create(o,{group:"fileExplorer"+i.file.path,forceFallback:!0,multiDrag:!0,multiDragKey:"alt",chosenClass:"bt-sortable-chosen",delay:0,disabled:!a,sort:a,animation:et,onStart:l=>{l.items.length?s=l.items:s=[l.item]},onMove:l=>{var I;let u=w.requireApiVersion&&(0,w.requireApiVersion)("0.15.0")?(I=i.vChildren)==null?void 0:I._children:i.children;if(!u||!(s==null?void 0:s.length))return;let h=u.map(_=>_.el),d=l.related,p=h.indexOf(d),g=s.first(),v=h.indexOf(g),x=s.slice();v>p&&x.reverse();for(let _ of x){let M=h.indexOf(_);u=Ct(u,M,p),h=Ct(h,M,p)}this.settings.fileExplorerOrder[i.file.path]=u.map(_=>_.file.path),this.saveSettings()},onEnd:l=>{var c;s=[],(c=document.querySelector("body>div.drag-ghost"))==null||c.detach()}})}}getFileExplorer(){var t,r;return(r=(t=this.app.workspace.getLeavesOfType("file-explorer"))==null?void 0:t.first())==null?void 0:r.view}getRootFolders(e){var i,o;if(e||(e=this.getFileExplorer()),!e)return;let t=(o=(i=e.tree)==null?void 0:i.infinityScroll)==null?void 0:o.rootEl;return t&&this.traverseRoots(t)}traverseRoots(e,t){var o,s;t||(t=[e]);let i=w.requireApiVersion&&(0,w.requireApiVersion)("0.15.0")?(o=e.vChildren)==null?void 0:o._children:e.children;for(let a of i||[])(a.children||((s=a.vChildren)==null?void 0:s._children))&&t.push(a),this.traverseRoots(a,t);return t}toggleFileExplorerSorters(e){let t=this.getFileExplorer(),r=this.getRootFolders(t);if(r==null?void 0:r.length)for(let i of r)i.sorter&&(i.sorter.option("sort",e),i.sorter.option("disabled",!e))}cleanupFileExplorerSorters(){let e=this.getFileExplorer(),t=this.getRootFolders(e);if(t==null?void 0:t.length)for(let r of t)r.sorter&&(r.sorter.destroy(),delete r.sorter,Object.keys(r.childrenEl).forEach(i=>i.startsWith("Sortable")&&delete r.childrenEl[i]),r.childrenEl.querySelectorAll("div.nav-file-title").forEach(i=>i.draggable=!0),r.childrenEl.querySelectorAll("div.nav-folder-title").forEach(i=>i.draggable=!0));delete e.hasCustomSorter,this.app.vault.getConfig("fileSortOrder")==="custom"&&e.setSortOrder("alphabetical")}onunload(){var e,t;(e=this.statusBarSorter)==null||e.destroy(),(t=this.ribbonBarSorter)==null||t.destroy(),this.app.workspace.iterateAllLeaves(r=>{var o,s,a;let i;if((i=(r==null?void 0:r.iconSorter)?r:!1)||(i=((o=r==null?void 0:r.view)==null?void 0:o.iconSorter)?r.view:!1)||(i=(r==null?void 0:r.parentSplit)instanceof w.WorkspaceTabs&&((s=r==null?void 0:r.parentSplit)==null?void 0:s.iconSorter)?r==null?void 0:r.parentSplit:!1))try{(a=i.iconSorter)==null||a.destroy()}catch(l){}finally{delete i.iconSorter}}),this.cleanupFileExplorerSorters()}};
/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
